(this.webpackJsonpchoosie_react=this.webpackJsonpchoosie_react||[]).push([[0],{19:function(e,t,n){e.exports=n.p+"static/media/image-alt.7496b72d.png"},36:function(e,t,n){e.exports=n(50)},40:function(e,t,n){},41:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(20),o=n.n(l),c=(n(40),n(41),n(9)),i=n(2),s=n.n(i),u=n(6),m=n(3),d=n(1),f=new URL("https://api.choosie.us"),p=Object(a.createContext)(null),g=function(e){var t=e.children,n=Object(c.f)();return r.a.createElement(p.Provider,{value:n},t)},b=p,h=n(8),y={loading:!1,result:[],error:null};function E(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return e&&e()},l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(e){return e&&e()};return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,c=arguments.length>1?arguments[1]:void 0,i=c.type,s=c.payload,u=c.callback,m=Object(h.a)({},o);switch(i){default:break;case e:m.loading=!0;break;case t:r(u),m.loading=!1,m.error=null,m.result=s;break;case n:l(u),m.loading=!1,m.error=s,m.result=null}return m}}var v=E("UPDATE_USER_LAUNCH","UPDATE_USER_SUCCESS","UPDATE_USER_FAILURE",{loading:!1,result:null,error:null}),O=function(e){return function(t){t({type:"UPDATE_USER_LAUNCH"}),fetch(f+"users/".concat(e),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){t({type:"UPDATE_USER_SUCCESS",payload:e})})).catch((function(e){return t({type:"UPDATE_USER_FAILURE",payload:e})}))}},j=document.getElementById("root");function C(e,t){j.style.opacity=0,e&&t&&setTimeout(function(){var n=Object(u.a)(s.a.mark((function n(a){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.push(t);case 2:j.style.opacity=1;case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),1500)}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;setTimeout((function(a){switch(document.getElementById("display-row")||k(e,t,n),n){default:return;case 0:document.getElementById("display-row").style.transform="translateY(".concat(t?"150vh":0,")");break;case 1:document.getElementById("display-row").style.transform="translateX(-150vw)",setTimeout((function(e){document.getElementById("display-row").style.opacity=0,document.getElementById("display-row").style.transform="translateX(300vw)"}),300);break;case 2:document.getElementById("display-row").style.transform="translateX(150vw)",setTimeout((function(e){document.getElementById("display-row").style.opacity=0,document.getElementById("display-row").style.transform="translateX(-300vw)"}),300);break;case 3:document.getElementById("display-row").style.opacity=1,document.getElementById("display-row").style.transform="translateX(0)"}}),e)}function x(){return S.apply(this,arguments)}function S(){return(S=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(f+"destroy-session",{credentials:"include"}).catch((function(e){return console.log(e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.user.result})),n=Object(a.useContext)(b),l=Object(c.g)(),o=Object(a.useState)(!1),i=Object(d.a)(o,2),p=i[0],g=i[1],h=Object(a.useState)(null),y=Object(d.a)(h,2),E=y[0],v=y[1],j=Object(a.useRef)(null),k=Object(a.useRef)(null);Object(a.useEffect)((function(e){E&&j.current?(j.current.style.transform="translateY(1rem)",k.current.style.transform="translateY(1.4rem)"):j.current&&(j.current.style.transform="translateY(0)",k.current.style.transform="translateY(0)")}),[E]);var S=function(){var t=Object(u.a)(s.a.mark((function t(n){var a,r,l,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.persist(),n.preventDefault(),a=n.target.children[0].value,r=n.target.children[2].value,a||r){t.next=7;break}return v(null),g(!1),t.abrupt("return");case 7:return t.prev=7,t.next=10,x();case 10:return t.next=12,fetch(f+"users/validate",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:a,password:r})});case 12:return l=t.sent,t.next=15,l.json();case 15:return o=t.sent,t.next=18,o;case 18:if(t.sent){t.next=23;break}return v("Invalid login"),t.abrupt("return");case 23:e(O(a)),v(null);case 25:t.next=31;break;case 27:t.prev=27,t.t0=t.catch(7),v("Something went wrong"),console.log(t.t0);case 31:case"end":return t.stop()}}),t,null,[[7,27]])})));return function(e){return t.apply(this,arguments)}}();function w(e){e.target.style.color="red"}function N(e){e.persist(),setTimeout((function(t){return e.target.style.color="white"}),250)}return r.a.createElement("div",{className:"login",style:{position:"absolute",left:"1rem",top:"1rem"}},t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"login-welcome",style:{color:"var(--color-offset)"}},"Welcome, ",t.name||t.username),r.a.createElement("span",{style:{padding:"0 2rem",display:"flex",flexWrap:"nowrap"}},r.a.createElement("button",{onClick:function(e){g(!1),x().then((function(e){return console.log(p)||l.reload()}))},style:{color:"white",cursor:"pointer",backgroundColor:"transparent",border:"none",marginRight:".5rem",whiteSpace:"nowrap"},onMouseOver:function(e){return e.target.style.color="silver"},onMouseOut:function(e){return e.target.style.color="white"},onFocus:function(e){return e.target.style.color="silver"},onBlur:function(e){return e.target.style.color="white"}},"Log out"),r.a.createElement("button",{onClick:function(e){return C(n,"profile/".concat(t.username))},style:{color:"white",cursor:"pointer",backgroundColor:"transparent",border:"none",marginLeft:".5rem",whiteSpace:"nowrap"},onMouseOver:function(e){return e.target.style.color="silver"},onMouseOut:function(e){return e.target.style.color="white"},onFocus:function(e){return e.target.style.color="silver"},onBlur:function(e){return e.target.style.color="white"}},"View profile"))):p?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:k,style:{position:"absolute",top:"-2rem",left:"1.8rem",color:"red",transition:"transform 300ms ease-in-out",whiteSpace:"nowrap"}},E),r.a.createElement("form",{onSubmit:S,ref:j,style:{backgroundColor:"transparent",display:"inline-block",transition:"transform 300ms ease-in-out",width:"100%"}},r.a.createElement("input",{style:{padding:".25rem",height:"1.25rem",marginBottom:".2rem",width:"100%"},type:"text",placeholder:"username"}),r.a.createElement("br",null),r.a.createElement("input",{style:{padding:".25rem",height:"1.25rem",width:"100%"},type:"password",placeholder:"password"}),r.a.createElement("br",null),r.a.createElement("div",{style:{marginTop:".25rem",display:"flex",justifyContent:"space-between"}},r.a.createElement("button",{className:"button-manage-movie",onClick:function(e){return e.target.blur()}},"Log in"),r.a.createElement("button",{className:"button-manage-movie",onClick:function(e){e.preventDefault(),C(n,"/register")}},"Sign up")))):r.a.createElement("button",{className:"button-login",onClick:function(e){return g(!0)}},r.a.createElement("span",{style:{transition:"color 250ms ease-in"},onMouseOver:w,onMouseOut:N},"L"),r.a.createElement("span",{style:{transition:"color 250ms ease-in"},onMouseOver:w,onMouseOut:N},"o"),r.a.createElement("span",{style:{transition:"color 250ms ease-in"},onMouseOver:w,onMouseOut:N},"g"),r.a.createElement("span",{style:{transition:"color 250ms ease-in",marginLeft:".35rem"},onMouseOver:w,onMouseOut:N},"i"),r.a.createElement("span",{style:{transition:"color 250ms ease-in"},onMouseOver:w,onMouseOut:N},"n")))},N=n(15);var _=function(e){var t=e.to,n=e.className,l=e.children,o=null,i=Object(a.useContext)(b),m=Object(c.g)();return Object(a.useEffect)((function(e){return function(e){return o&&clearTimeout(o)}}),[o]),r.a.createElement(N.b,{className:n,to:t,onClick:function(e){m&&m.pathname===t||(document.getElementById("root").style.opacity=0,e.defaultPrevented||(e.preventDefault(),o=setTimeout(function(){var e=Object(u.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.push(t);case 2:document.getElementById("root").style.opacity=1;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),1500)))}},l)};var R=function(){return r.a.createElement("div",{className:"footer",style:{position:"fixed",bottom:0,left:0,right:0}},r.a.createElement(_,{delay:2e3,onDelayStart:function(e){return document.getElementById("pageContainer").style.opacity=0},to:"/help",className:"link-help"},"What is"," ",r.a.createElement("span",{className:"logo",style:{fontWeight:600}},"Choosie"),"?"),r.a.createElement("div",{className:"copyright",style:{position:"absolute",bottom:".85rem",right:"1rem",color:"black",userSelect:"none"}},"\xa9 2020 Choosie | Nick Barak"))},T=function(e,t,n,a){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,l=arguments.length>1?arguments[1]:void 0,o=l.type,c=l.payload;switch(o){default:return r;case e:return Object(h.a)(Object(h.a)({},r),{},{loading:!0,searchValue:c});case t:return Object(h.a)(Object(h.a)({},r),{},{loading:!1,result:c,error:null});case n:return Object(h.a)(Object(h.a)({},r),{},{loading:!1,result:[],error:c})}}},A=T("SEARCH_TITLE_LAUNCH","SEARCH_TITLE_SUCCESS","SEARCH_TITLE_FAILURE",{loading:!1,searchValue:null,result:[],error:null}),I=T("SEARCH_PEOPLE_LAUNCH","SEARCH_PEOPLE_SUCCESS","SEARCH_PEOPLE_FAILURE",{loading:!1,searchValue:null,result:[],error:null}),D=T("SEARCH_GENRE_LAUNCH","SEARCH_GENRE_SUCCESS","SEARCH_GENRE_FAILURE",{loading:!1,searchValue:null,result:[],error:null}),H=T("SEARCH_DESCRIPTION_LAUNCH","SEARCH_DESCRIPTION_SUCCESS","SEARCH_DESCRIPTION_FAILURE",{loading:!1,searchValue:null,result:[],error:null}),P=(T("SEARCH_DESCRIPTION_LAUNCH","SEARCH_DESCRIPTION_SUCCESS","SEARCH_DESCRIPTION_FAILURE",{loading:!1,searchValue:null,result:[],error:null}),T("SEARCH_DESCRIPTION_LAUNCH","SEARCH_DESCRIPTION_SUCCESS","SEARCH_DESCRIPTION_FAILURE",{loading:!1,searchValue:null,result:[],error:null}),function(e,t,n,a){return function(r,l,o,c){return function(i){i({type:e,payload:l}),fetch(f+"search/".concat(a,"?user=").concat(r,"&search=").concat(l,"&page=").concat(o).concat(c?"&movies=".concat(c):""),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){i(function(e){return{type:t,payload:e}}(e))})).catch((function(e){return i(function(e){return{type:n,payload:e}}(e))}))}}}),U={searchTitle:P("SEARCH_TITLE_LAUNCH","SEARCH_TITLE_SUCCESS","SEARCH_TITLE_FAILURE","title"),searchPeople:P("SEARCH_PEOPLE_LAUNCH","SEARCH_PEOPLE_SUCCESS","SEARCH_PEOPLE_FAILURE","people"),searchGenre:P("SEARCH_GENRE_LAUNCH","SEARCH_GENRE_SUCCESS","SEARCH_GENRE_FAILURE","genre"),searchDescription:P("SEARCH_DESCRIPTION_LAUNCH","SEARCH_DESCRIPTION_SUCCESS","SEARCH_DESCRIPTION_FAILURE","description"),searchReleaseDate:P("SEARCH_RELEASE_DATE_LAUNCH","SEARCH_RELEASE_DATE_SUCCESS","SEARCH_RELEASE_DATE_FAILURE","release-date"),searchAgeRating:P("SEARCH_AGE_RATING_LAUNCH","SEARCH_AGE_RATING_SUCCESS","SEARCH_AGE_RATING_FAILURE","age-rating")};var L=function(){var e=Object(m.b)(),t=Object(a.useContext)(b),n=Object(m.c)((function(e){return e.user.result}));Object(a.useEffect)((function(t){document.getElementById("root").style.opacity=1,e(O(!0))}),[]);var l=function(){var a=Object(u.a)(s.a.mark((function a(r){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r.persist(),r.preventDefault();try{Object.values(U).forEach((function(t){return e(t(n?n.username:null,r.target.children[0].value,1))})),r.target.reset(),t.push("/search")}catch(r){console.log(r)}case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();function o(e,a){n&&fetch("".concat(f,"home/").concat(n.username),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({button:e})}).then((function(e){return!e.ok&&console.log("Something went wrong")})).catch((function(e){return console.log(e)})),C(t,a)}return r.a.createElement("div",{className:"container home"},r.a.createElement(w,{history:t}),r.a.createElement("div",{className:"frame home-frame"},r.a.createElement("h1",{className:"logo main-logo",style:{userSelect:"none"}},"Choosie"),r.a.createElement("form",{onSubmit:l},r.a.createElement("input",{className:"search",type:"text",placeholder:"Search actors, genres, directors",style:{margin:"1.5rem 1.5rem"}})),r.a.createElement("ul",{className:"button-wrapper"},r.a.createElement("li",null,r.a.createElement("button",{className:"button",onClick:function(e){return o("my_list","/my-list")}},"My List")),r.a.createElement("li",null,r.a.createElement("button",{className:"button",onClick:function(e){return o("start","/query")}},"Start")),r.a.createElement("li",null,r.a.createElement("button",{className:"button",onClick:function(e){return o("popular","/popular")}},"Popular")))),r.a.createElement(R,null))},M=n(4),B=n(10),V=n(23),F=E("MAKE_REQUEST_LAUNCH","MAKE_REQUEST_SUCCESS","MAKE_REQUEST_FAILURE",void 0,(function(e){return setTimeout(e,50)})),G=function(e,t){return{type:"MAKE_REQUEST_SUCCESS",payload:e,callback:t}},Y=function(e){return{type:"MAKE_REQUEST_FAILURE",payload:e}},J=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){};return function(r){r({type:"MAKE_REQUEST_LAUNCH"}),fetch(f+"".concat(e).concat(t||""),Object(h.a)(Object(h.a)({},n),{},{credentials:"include",headers:{"Content-Type":"application/json"}})).then((function(e){return e.json()})).then((function(e){r(G(e,a))})).catch((function(e){return r(Y(e))}))}};var W=function(e){var t=e.withBack,n=e.searchValue,a=e.page,l=e.back,o=e.scrollY;return r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(_,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(_,{to:"/my-list"},"My List")),r.a.createElement("li",null,r.a.createElement(_,{to:"/popular"},"Popular")),t&&r.a.createElement("li",null,r.a.createElement(_,{to:{pathname:l,searchValue:n,page:a,scrollY:o}},"Back"))))},z=n(19),q=n.n(z);var X=function(e){var t=e.location,n=t.searchValue,l=t.page,o=t.back,i=t.scrollY,p=Object(a.useContext)(b),g=Object(c.g)(),h=Object(m.b)(),y=Object(m.c)((function(e){return e.makeRequest.result&&e.makeRequest.result[0]})),E=Object(m.c)((function(e){return e.makeRequest})),v=E.loading,j=E.error,k=Object(a.useState)(!1),x=Object(d.a)(k,2),S=x[0],w=x[1],N=Object(a.useState)(!1),_=Object(d.a)(N,2),R=_[0],T=_[1],A=Object(a.useState)(null),I=Object(d.a)(A,2),D=I[0],H=I[1],P=Object(m.c)((function(e){return e.user.result}));return Object(a.useEffect)((function(e){document.getElementById("root").style.opacity=1}),[]),Object(a.useEffect)((function(e){return h(J("movies","?id="+g.pathname.split("/movies/")[1]))}),[]),Object(a.useEffect)((function(e){var t=new AbortController,n=t.signal;return R&&function(){var e=Object(u.a)(s.a.mark((function e(t){var a,r,l,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(f+"movies?user=".concat(P.username),{credentials:"include",signal:n,method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({movieID:R})});case 3:!e.sent.ok&&H("Error unsaving movie"),a=Object.entries(P.bins).filter((function(e){return e[1].includes(String(R))})),r=Object(V.a)(a),e.prev=7,r.s();case 9:if((l=r.n()).done){e.next=17;break}return o=l.value,e.next=13,fetch(f+"users/".concat(P.username,"/bins"),{credentials:"include",signal:n,method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({bin:Object(B.a)({},o[0],o[1].filter((function(e){return e!==String(R)})))})});case 13:!e.sent.ok&&H("Error unsaving movie");case 15:e.next=9;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),r.e(e.t0);case 22:return e.prev=22,r.f(),e.finish(22);case 25:h(O(P.username)),T(!1),e.next=32;break;case 29:e.prev=29,e.t1=e.catch(0),"AbortError"===e.t1.name&&console.log("Unsave aborted");case 32:case"end":return e.stop()}}),e,null,[[0,29],[7,19,22,25]])})));return function(t){return e.apply(this,arguments)}}()(),function(e){return t.abort()}}),[R]),y?r.a.createElement("div",{className:"movie-page"},v?r.a.createElement("div",null,"Loading..."):j?r.a.createElement("div",null,"Error loading movie"):r.a.createElement(r.a.Fragment,null,r.a.createElement(W,{withBack:!0,searchValue:n,page:l,back:o,scrollY:i}),r.a.createElement("div",{className:"movie-page-main",style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"60vw"}},r.a.createElement("picture",null,r.a.createElement("source",{srcSet:y.cover_file}),r.a.createElement("source",{srcSet:q.a}),r.a.createElement("img",{className:"image-movie",alt:"thumbnail",type:"image/gif"})),r.a.createElement("label",{style:{fontWeight:"bold",margin:"1rem 0 .2rem 0"}},y.title),r.a.createElement("div",null,D),P?P.currently_saved.includes(y.id)?r.a.createElement("button",{className:"button-manage-movie",onClick:function(e){var t=!0;Object.values(P.bins).reduce((function(e,t){return[].concat(Object(M.a)(e),Object(M.a)(t))}),[]).includes(String(y.id))&&(t=window.confirm("This will remove the movie from all bins. Do you still want to unsave it?")),t&&T(y.id)}},R?"Unsaving movie...":"Unsave Movie"):r.a.createElement("button",{className:"button-manage-movie",onClick:function(){w(!0),fetch(f+"movies?user=".concat(P.username),{credentials:"include",method:P.save_history.includes(y.id)?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({movieID:y.id,inRecent:P.recent_save_history.includes(y.id)})}).then((function(e){e.ok?(w(!1),H(null),h(O(P.username))):H("Error saving movie")})).catch((function(e){return H("Error saving movie")}))}},S?"Saving movie...":"Save to My List"):r.a.createElement("button",{className:"button-manage-movie",onClick:function(e){return C(p,"/register")}},"Sign in to save this movie"),y.description&&r.a.createElement("div",{className:"movie-page-description",style:{margin:"2.5rem 0 3rem 0",position:"relative"}},"Not available"===y.description?"Description not available":y.description,"Not available"!==y.description&&r.a.createElement("span",{className:"imdb-credit"},"-Taken from"," ",r.a.createElement("a",{href:y.src_url,target:"_blank",rel:"noopener noreferrer"},"IMDb")))),r.a.createElement("ul",{className:"info-movie"},r.a.createElement("li",null,r.a.createElement("label",null,"Genres: "),y.genres&&r.a.createElement("span",null,y.genres.join(", ")||"Not available")),r.a.createElement("li",null,r.a.createElement("label",null,"Rating: "),y.mpaa_rating&&r.a.createElement("span",null,y.mpaa_rating||"Not available")),r.a.createElement("li",null,r.a.createElement("label",null,"Duration: "),y.duration_in_mins?y.duration_in_mins%60?y.duration_in_mins>=60?r.a.createElement("span",null,Math.floor(y.duration_in_mins/60),"h ",y.duration_in_mins%60,"min"):r.a.createElement("span",null,y.duration_in_mins," min"):r.a.createElement("span",null,y.duration_in_mins%60,"h"):"Not available"),r.a.createElement("li",null,r.a.createElement("label",null,"Release Date: "),y.release_date&&r.a.createElement("span",null,y.release_date.slice(0,4)||"Not available")),r.a.createElement("li",null,r.a.createElement("label",null,"Writers: "),y.writers&&r.a.createElement("span",null,y.writers.join(", ")||"Not available")),r.a.createElement("li",null,r.a.createElement("label",null,"Directors: "),y.directors&&r.a.createElement("span",null,y.directors.join(", ")||"Not available")),r.a.createElement("li",null,r.a.createElement("label",null,"Actors: "),y.actors&&r.a.createElement("span",null,y.actors.join(", ")||"Not available")),r.a.createElement("li",null,r.a.createElement("label",null,"Languages: "),y.languages&&r.a.createElement("span",null,y.languages.join(", ")||"Not available")),r.a.createElement("li",null,r.a.createElement("label",null,"Countries: "),y.countries&&r.a.createElement("span",null,y.countries.join(", ")||"Not available")))))):r.a.createElement("div",null,"Error loading movie")},K=n(5),$=["Afrikaans","Bengali","Burmese","Cantonese","Czech","Dutch","English","Filipino","French","German","Hindi","Hungarian","Indonesian","Italian","Japanese","Korean","Malay","Mandarin","Polish","Portuguese","Punjabi","Romanian","Russian","Spanish","Standard Arabic","Sundanese","Swahili","Swedish","Tagalog","Tamil","Telugu","Thai","Turkish","Ukranian","Vietnamese"];var Q=function(){var e=Object(a.useContext)(b),t=Object(a.useState)(!1),n=Object(d.a)(t,2),l=n[0],o=n[1],c=Object(a.useState)({}),i=Object(d.a)(c,2),p=i[0],g=i[1],y=Object(a.useState)(null),E=Object(d.a)(y,2),v=E[0],j=E[1],k=Object(a.useState)(null),S=Object(d.a)(k,2),w=S[0],N=S[1],_=Object(a.useState)(null),R=Object(d.a)(_,2),T=R[0],A=R[1],I=Object(m.b)();function D(){return(D=Object(u.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(j(null),N(null),n.persist(),n.preventDefault(),!(a=n.target.children[1].children)[2].children[0].value||/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/.exec(a[2].children[0].value)){t.next=8;break}return N("Invalid email address"),t.abrupt("return");case 8:return t.next=10,x();case 10:fetch(f+"users",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Object(h.a)(Object(h.a)({},p),{},{name:a[0].children[0].value?a[0].children[0].value:null,age:a[1].children[0].selectedIndex?Number(a[1].children[0].options[a[1].children[0].selectedIndex].text):0,sex:a[1].children[1].selectedIndex?a[1].children[1].options[a[1].children[1].selectedIndex].text:null,languages:a[1].children[2].selectedIndex?[a[1].children[2].options[a[1].children[2].selectedIndex].text]:null,email:a[2].children[0].value?a[2].children[0].value:null}))}).then((function(e){return e.json()})).then((function(t){I(O(!0)),C(e,"/")})).catch((function(e){return j("Something went wrong")})),n.target.reset();case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function H(){return(H=Object(u.a)(s.a.mark((function t(n){var a,r,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(j(null),A(null),n.persist(),n.preventDefault(),a=n.target.children[1].children[0].children[0].value,r=n.target.children[1].children[1].children[0].value,a||r){t.next=7;break}return t.abrupt("return");case 7:return t.prev=7,t.next=10,x();case 10:return t.next=12,fetch(f+"users/validate",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:a,password:r})});case 12:return l=t.sent,t.next=15,l.json();case 15:if(t.sent){t.next=21;break}return A("Invalid login"),t.abrupt("return");case 21:I(O(a)),A(null),C(e,"/");case 24:t.next=29;break;case 26:t.prev=26,t.t0=t.catch(7),j("Something went wrong");case 29:n.target.reset();case 30:case"end":return t.stop()}}),t,null,[[7,26]])})))).apply(this,arguments)}return Object(a.useEffect)((function(e){document.getElementById("root").style.opacity=1}),[]),l?r.a.createElement("div",{className:"container",style:{flexDirection:"column"}},w?r.a.createElement("div",{style:{color:"red",margin:"1rem"}},w):v&&r.a.createElement("div",{style:{color:"red"}},v),r.a.createElement("form",{className:"register-1",onSubmit:function(e){return D.apply(this,arguments)}},r.a.createElement("div",{className:"prompt-register"},"You can enter more information here for a better experience"),r.a.createElement("ul",null,r.a.createElement("li",{style:{margin:".75rem"}},r.a.createElement("input",{className:"input-register",type:"text",placeholder:"first name",key:"name"})),r.a.createElement("li",{style:{margin:".75rem"},className:"ul-create-user"},r.a.createElement("select",{defaultValue:"default"},r.a.createElement("option",{key:"-1",value:"default",disabled:!0},"Select an age"),new Array(126).fill("").map((function(e,t){return r.a.createElement("option",{key:Object(K.uuid)()},t)}))),r.a.createElement("select",{defaultValue:"default"},r.a.createElement("option",{key:"0",value:"default",disabled:!0},"Select a sex"),r.a.createElement("option",{key:"1",value:"female"},"Female"),r.a.createElement("option",{key:"2",value:"male"},"Male"),r.a.createElement("option",{key:"3",value:"other"},"Other")),r.a.createElement("select",{defaultValue:"default"},r.a.createElement("option",{key:"-1",value:"default",disabled:!0},"Select a language"),$.map((function(e,t){return r.a.createElement("option",{key:Object(K.uuid)()},e)})))),r.a.createElement("li",{style:{margin:".75rem"}},r.a.createElement("input",{className:"input-register",type:"text",placeholder:"email"}))),r.a.createElement("div",{className:"prompt-register",style:{marginTop:".5rem",marginBottom:".3rem"}},"You can also edit these fields later"),r.a.createElement("div",null,r.a.createElement("button",{className:"button-register"},"Sign up"),r.a.createElement("button",{type:"button",className:"button-register",onClick:function(t){return C(e,"/")}},"Cancel")))):r.a.createElement("div",{className:"container",style:{flexDirection:"column"}},w&&r.a.createElement("div",{style:{color:"red",margin:"1rem"}},w),r.a.createElement("form",{className:"register-1",onSubmit:function(e){N(null),e.persist(),e.preventDefault();var t=e.target.children[1].children;t[0].children[0].value.includes(" ")?N("Username cannot contain a space"):/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/.exec(t[1].children[0].value)?t[1].children[0].value===t[2].children[0].value?function(){var n=Object(u.a)(s.a.mark((function n(a){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(f+"users/check?user="+t[0].children[0].value,{credentials:"include"});case 2:return r=n.sent,n.next=5,r.json();case 5:if(!n.sent.length){n.next=9;break}return N("Username not available"),n.abrupt("return");case 9:g({username:t[0].children[0].value,password:t[1].children[0].value}),o(!0),e.target.reset();case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()():N("Passwords must match"):N("Password must be at least 8 characters with one of each of the following: upper case letter, lower case letter, number and special character")}},r.a.createElement("div",{className:"prompt-register"},"Please enter a username and password"),r.a.createElement("ul",{style:{display:"flex",flexDirection:"column",width:"80%",placeItems:"center"}},r.a.createElement("li",{style:{margin:".25rem",width:"100%",maxWidth:"25rem"}},r.a.createElement("input",{className:"input-register",type:"text",placeholder:"username",key:"username"})),r.a.createElement("li",{style:{margin:".25rem",width:"100%",maxWidth:"25rem"}},r.a.createElement("input",{className:"input-register",type:"password",placeholder:"password",key:"password"})),r.a.createElement("li",{style:{margin:".25rem",width:"100%",maxWidth:"25rem"}},r.a.createElement("input",{className:"input-register",type:"password",placeholder:"repeat password"}))),r.a.createElement("div",null,r.a.createElement("button",{className:"button-register"},"Continue"),r.a.createElement("button",{type:"button",onClick:function(t){return C(e,"/")},className:"button-register"},"Cancel"))),T?r.a.createElement("div",{style:{color:"red",margin:"1rem"}},T):v&&r.a.createElement("div",{style:{color:"red"}},v),r.a.createElement("form",{className:"register-1",onSubmit:function(e){return H.apply(this,arguments)}},r.a.createElement("div",{className:"prompt-register"},"Already have an account? Log in"),r.a.createElement("ul",{style:{display:"flex",flexDirection:"column",width:"80%",placeItems:"center"}},r.a.createElement("li",{style:{margin:".25rem",width:"100%",maxWidth:"25rem"}},r.a.createElement("input",{className:"input-register",type:"text",placeholder:"username"})),r.a.createElement("li",{style:{margin:".25rem",width:"100%",maxWidth:"25rem"}},r.a.createElement("input",{className:"input-register",type:"password",placeholder:"password"}))),r.a.createElement("button",{className:"button-register"},"Log in")))},Z=n(33);var ee,te=function(e){var t=e.prompt,n=e.defaultChecked,l=e.onCheck,o=e.onUncheck,c=Object(a.useRef)(null);return Object(a.useEffect)((function(e){n&&(c.current.checked=!0,Z.Simulate.change(c.current))}),[]),r.a.createElement("div",{style:{margin:".2rem"}},r.a.createElement("span",null,t," "),r.a.createElement("label",{className:"toggler"},r.a.createElement("input",{type:"checkbox",ref:c,onChange:function(e){var t=e.target.parentElement.children[1].style;e.target.checked?(t.backgroundColor="#2196F3",t.boxShadow="0 0 1px #2196F3",t.setProperty("--toggler-translation","12.5px"),l&&l()):(t.backgroundColor="#aaa",t.boxShadow="none",t.setProperty("--toggler-translation",0),o&&o())}}),r.a.createElement("span",null)))},ne=["Afrikaans","Bengali","Burmese","Cantonese","Czech","Dutch","English","Filipino","French","German","Hindi","Hungarian","Indonesian","Italian","Japanese","Korean","Malay","Mandarin","Polish","Portuguese","Punjabi","Romanian","Russian","Spanish","Standard Arabic","Sundanese","Swahili","Swedish","Tagalog","Tamil","Telugu","Thai","Turkish","Ukranian","Vietnamese"];var ae=function(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),n=t[0],l=t[1],o=Object(a.useState)(null),i=Object(d.a)(o,2),f=i[0],p=i[1],g=Object(c.g)(),y=Object(a.useContext)(b),E=Object(m.b)(),v=Object(m.c)((function(e){return e.makeRequest})).error,j=Object(m.c)((function(e){return e.user.result})),k=Object(a.useState)(!1),x=Object(d.a)(k,2),S=x[0],w=x[1],N=Object(a.useState)(j&&j.show_save_history),_=Object(d.a)(N,2),R=_[0],T=_[1],A=Object(a.useState)(j&&j.show_description_on_hover),I=Object(d.a)(A,2),D=I[0],H=I[1],P=Object(a.useState)(null),U=Object(d.a)(P,2),L=U[0],M=U[1];function B(e,t){if(e&&(e.persist(),e.preventDefault(),e.target.children[3].value&&!/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/.exec(e.target.children[3].value)))l("Invalid email address");else{var n=e&&e.target.children,a={name:e?n[0].value:j.name,sex:e&&n[1].children[0].selectedIndex?n[1].children[0].options[n[1].children[0].selectedIndex].text:j.sex,age:e&&n[1].children[1].selectedIndex?Number(n[1].children[1].options[n[1].children[1].selectedIndex].text):j.age,languages:e&&n[1].children[2].selectedIndex?[n[1].children[2].options[n[1].children[2].selectedIndex].text]:j.languages,email:e?n[2].value:j.email,show_save_history:R,show_description_on_hover:D,recent_save_history:S?[]:j.recent_save_history};if(e)try{new Promise((function(e){return E(J("users/".concat(j.username),"",{signal:t,method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}))||e()})).then((function(t){E(O(j.username)),M("Info updated successfully"),e.target.style.transform="scale(0)",e.target.style.maxHeight=0,e.target.parentElement.parentElement.parentElement.parentElement.children[0].style.transform="100%"===e.target.parentElement.parentElement.parentElement.children[2].children[0].children[2].style.maxHeight?"translate(-6.5rem, 2rem)":"translate(0)"}))}catch(e){l("Error editing info"),console.log(e)}}}function V(e){return F.apply(this,arguments)}function F(){return(F=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(h.a)({},j),"languages"===t&&(j.languages=[]),n[t]=null,e.next=5,Promise.resolve().then((function(e){return E(J("users/".concat(j.username),null,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n.name,email:n.email,languages:n.languages,age:n.age,sex:n.sex,show_save_history:j.show_save_history,show_description_on_hover:j.show_description_on_hover,recent_save_history:j.recent_save_history})}))}));case 5:E(O(j.username));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(e){document.getElementById("root").style.opacity=1}),[]),Object(a.useEffect)((function(e){if(ee){var t=new AbortController;return B(null,t.signal),function(e){return t.abort()}}ee=!0}),[S,R,D]),r.a.createElement("div",{className:"profile"},j&&j.username===g.pathname.split("/profile/")[1]?r.a.createElement("div",{className:"container",style:{flexDirection:"column"}},r.a.createElement("div",{className:"register-1",style:{transition:"transform 300ms ease-out"}},r.a.createElement("label",{className:"prompt-register"},"Your info"),r.a.createElement("ul",{className:"info-list"},r.a.createElement("li",null,r.a.createElement("button",{className:"button-register",style:{visibility:"hidden"}},"Clear"),r.a.createElement("label",null,"Username: "),r.a.createElement("span",null,j.username)),r.a.createElement("li",null,r.a.createElement("button",{className:"button-register",onClick:function(e){return V("name")}},"Clear"),r.a.createElement("label",null,"Name: "),r.a.createElement("span",null,j.name||"Not specified")),r.a.createElement("li",null,r.a.createElement("button",{className:"button-register",onClick:function(e){return V("sex")}},"Clear"),r.a.createElement("label",null,"Sex: "),r.a.createElement("span",null,j.sex||"Not specified")),r.a.createElement("li",null,r.a.createElement("button",{className:"button-register",onClick:function(e){return V("age")}},"Clear"),r.a.createElement("label",null,"Age: "),r.a.createElement("span",null,j.age||"Not specified")),r.a.createElement("li",null,r.a.createElement("button",{className:"button-register",onClick:function(e){return V("languages")}},"Clear"),r.a.createElement("label",null,"Language: "),r.a.createElement("span",{style:{}},null!=j.languages&&null!=j.languages[0]?j.languages:"Not specified")),r.a.createElement("li",null,r.a.createElement("button",{className:"button-register",onClick:function(e){return V("email")}},"Clear"),r.a.createElement("label",null,"Email: "),r.a.createElement("span",null,j.email||"Not specified")))),r.a.createElement("ul",{className:"profile-lower"},r.a.createElement("li",null,r.a.createElement("div",{style:{padding:"1rem"},className:"register-1"},r.a.createElement("button",{className:"button-register",onClick:function(e){e.target.blur();var t=e.target.parentElement.children[2].style,n="100%"===e.target.parentElement.parentElement.parentElement.children[2].children[0].children[2].style.maxHeight;t.maxHeight=t.maxWidth="100%"===t.maxHeight?0:"100%",t.transform="scale(0)"===t.transform?"scale(1)":"scale(0)",window.innerWidth<455||(e.target.parentElement.parentElement.parentElement.parentElement.children[0].style.transform="100%"===t.maxHeight?n?"translate(6rem, 3rem)":"translate(6rem, 5rem)":n?"translate(-6.5rem, 2rem)":"translate(0)")}},"Edit Info"),r.a.createElement("div",{className:"error-msg",style:{color:"red"}},n),r.a.createElement("form",{onSubmit:B,style:{transform:"scale(0)"}},r.a.createElement("input",{style:{width:"92.5%",margin:".35rem"},className:"input-register",placeholder:"name"}),r.a.createElement("div",{style:{margin:".75rem"},className:"ul-create-user"},r.a.createElement("select",{style:{margin:".35rem"},defaultValue:"default"},r.a.createElement("option",{key:"0",value:"default",disabled:!0},"Select a sex"),r.a.createElement("option",{key:"1",value:"female"},"Female"),r.a.createElement("option",{key:"2",value:"male"},"Male"),r.a.createElement("option",{key:"3",value:"other"},"Other")),r.a.createElement("select",{style:{margin:".35rem"},defaultValue:"default"},r.a.createElement("option",{key:"-1",value:"default",disabled:!0},"Select an age"),new Array(126).fill("").map((function(e,t){return r.a.createElement("option",{key:Object(K.uuid)()},t)}))),r.a.createElement("select",{style:{margin:".35rem"},defaultValue:"default"},r.a.createElement("option",{key:"-1",value:"default",disabled:!0},"Select a language"),ne.map((function(e,t){return r.a.createElement("option",{key:Object(K.uuid)()},e)})))),r.a.createElement("input",{style:{width:"92.5%",margin:".35rem"},className:"input-register",placeholder:"email"}),r.a.createElement("button",{className:"button-register"},"Submit")))),r.a.createElement("li",null,r.a.createElement("div",{style:{padding:"1rem",fontSize:"1rem",width:"90%"},className:"register-1"},r.a.createElement(te,{prompt:"Show description on hover?",defaultChecked:D,onCheck:function(e){return H(!0)},onUncheck:function(e){return H(!1)}}),r.a.createElement(te,{className:"toggler-profile",prompt:"Show Save History?",defaultChecked:R,onCheck:function(e){return T(!0)},onUncheck:function(e){return T(!1)}}),r.a.createElement("button",{className:"button-register",onClick:function(e){e.target.blur(),j.recent_save_history.length&&w(!0)}},j.recent_save_history.length?S?"Clearing...":"Clear Save History":"History Cleared"))),r.a.createElement("li",null,r.a.createElement("div",{style:{padding:"1rem"},className:"register-1"},r.a.createElement("button",{className:"button-register",onClick:function(e){e.target.blur();var t=e.target.parentElement.children[2].style,n="100%"===e.target.parentElement.parentElement.parentElement.children[0].children[0].children[2].style.maxHeight;t.maxHeight=t.maxWidth="100%"===t.maxHeight?0:"100%",t.transform="scale(0)"===t.transform?"scale(1)":"scale(0)",window.innerWidth<455||(e.target.parentElement.parentElement.parentElement.parentElement.children[0].style.transform="100%"===t.maxHeight?n?"translate(6rem, 3.5rem)":"translate(-6rem, 2rem)":n?"translate(6rem, 5rem)":"translate(0)")}},"Change Password"),r.a.createElement("div",{className:"error-msg",style:{color:"red"}},f),r.a.createElement("form",{onSubmit:function(e){e.persist(),e.preventDefault(),p(null);var t=e.target.children,n=t[0].value,a=t[1].value,r=t[2].value;/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/.exec(a)?a===r?function(){var t=Object(u.a)(s.a.mark((function t(r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then((function(e){return E(J("users/".concat(j.username),null,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:n,newPassword:a})}))}));case 2:v?p("Error changing password"):(E(O(j.username)),e.target.style.transform="scale(0)",e.target.style.maxHeight=0,e.target.parentElement.parentElement.parentElement.parentElement.children[0].style.transform="100%"===e.target.parentElement.parentElement.parentElement.children[0].children[0].children[2].style.maxHeight?"translate(6rem, 3.5rem)":"translate(-6rem, 2rem)",e.target.reset(),M("Password changed successfully"));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()():p("Passwords must match"):p("Password must be at least 8 characters with one of each of the following: upper case letter, lower case letter, number and special character")},style:{transform:"scale(0)"}},r.a.createElement("input",{style:{width:"92.5%"},className:"input-register",type:"password",placeholder:"Enter current password"}),r.a.createElement("input",{style:{width:"92.5%"},className:"input-register",type:"password",placeholder:"Enter new password"}),r.a.createElement("input",{style:{width:"92.5%"},className:"input-register",type:"password",placeholder:"Repeat new password"}),r.a.createElement("button",{className:"button-register"},"Submit"))))),L&&r.a.createElement("div",{style:{color:"white",margin:".8rem",padding:"1rem"}},L),r.a.createElement("button",{style:{margin:"1rem",backgroundColor:"var(--bg-color-dark)",color:"var(--color-offset)",minHeight:"2.3rem"},onMouseOver:function(e){e.target.style.backgroundColor="var(--color-offset)",e.target.style.color="var(--bg-color-dark)"},onFocus:function(e){e.target.style.backgroundColor="var(--color-offset)",e.target.style.color="var(--bg-color-dark)"},onMouseOut:function(e){e.target.style.backgroundColor="var(--bg-color-dark)",e.target.style.color="var(--color-offset)"},onBlur:function(e){e.target.style.backgroundColor="var(--bg-color-dark)",e.target.style.color="var(--color-offset)"},className:"button",onClick:function(e){return C(y,"/")}},"Back to Home")):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{margin:"1rem 0 .25rem 1rem"}},'You must be logged in as "',g.pathname.split("/profile/")[1],'" to view this page'),r.a.createElement("button",{style:{marginTop:".5rem"},onMouseOver:function(e){e.target.style.backgroundColor="var(--bg-color-light)",e.target.style.color="var(--color-offset)"},onFocus:function(e){e.target.style.backgroundColor="var(--bg-color-light)",e.target.style.color="var(--color-offset)"},onMouseOut:function(e){e.target.style.backgroundColor="var(--color-offset)",e.target.style.color="var(--bg-color-dark)"},onBlur:function(e){e.target.style.backgroundColor="var(--color-offset)",e.target.style.color="var(--bg-color-dark)"},className:"button",onClick:function(e){return C(y,"/")}},"Back to Home")))};var re=function(){var e=Object(m.c)((function(e){return e.user.result})),t=Object(a.useState)(0),n=Object(d.a)(t,2),l=n[0],o=n[1];function c(t){o(t);try{fetch(f+"search",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({rating:t,username:e?e.username:null})})}catch(n){console.log(n)}}return r.a.createElement("div",{className:"star-rater"},r.a.createElement("label",{style:{marginRight:".5rem"}},"How would you rate these suggestions?"),r.a.createElement("span",null,[1,2,3,4,5].map((function(e){return l>=e?r.a.createElement("i",{key:Object(K.uuid)(),className:"fas fa-star",onClick:function(t){return c(e)},style:{cursor:"pointer"}}):r.a.createElement("i",{key:Object(K.uuid)(),className:"far fa-star",onClick:function(t){return c(e)},style:{cursor:"pointer"}})}))))};var le=function(e){var t=e.location,n=Object(a.useRef)(0),l=Object(a.useState)(1),o=Object(d.a)(l,2),c=o[0],i=o[1],s=Object(m.c)((function(e){return e.searchTitle})),u=Object(m.c)((function(e){return e.searchPeople})),f=Object(m.c)((function(e){return e.searchGenre})),p=Object(m.c)((function(e){return e.searchDescription})),g=[],b=[s,u,f,p].reduce((function(e,t){return[].concat(Object(M.a)(e),Object(M.a)(t.result))}),[]).filter((function(e){var t=e.id;return!g.includes(t)&&g.push(t)})).slice(10*(c-1),11*c),h=Object(m.b)(),y=Object(m.c)((function(e){return e.user.result})),E=Object(a.useRef)(null),v=Object(a.useRef)(null),O=Object(a.useRef)(null),j=Object(a.useRef)(null);return Object(a.useEffect)((function(e){!sessionStorage.getItem("searchCache")&&sessionStorage.setItem("searchCache",JSON.stringify(Object(B.a)({},s.searchValue,[[]])))})),Object(a.useEffect)((function(e){var t=JSON.parse(sessionStorage.getItem("searchCache"));n.current&&t[s.searchValue]&&!t[s.searchValue][c]&&(t[s.searchValue][c]=b.map((function(e){return e.id})),sessionStorage.setItem("searchCache",JSON.stringify(t)))}),[s,u,f,p]),Object(a.useEffect)((function(e){document.getElementById("root").style.opacity=1}),[]),Object(a.useEffect)((function(e){!n.current&&t.page>1&&setTimeout((function(e){[E,v].forEach((function(e){return e.current.style.transform="translateX(calc(190px - 1rem))"})),[O,j].forEach((function(e){e.current.style.opacity=1,e.current.style.pointerEvents="auto"}))}),150),!n.current&&t.page&&i(t.page)}),[]),Object(a.useEffect)((function(e){if(!t.page||n.current++){var a=sessionStorage.getItem("searchCache")[s.searchValue]&&sessionStorage.getItem("searchCache")[s.searchValue][c];Object.values(U).forEach((function(e){h(a?e(y?y.username:null,s.searchValue,c,a.join(",")):e(y?y.username:null,s.searchValue,c))}))}}),[c]),Object(a.useEffect)((function(e){b.length<11&&E.current?[E,v].forEach((function(e){e.current.style.opacity=0,e.current.style.pointerEvents="none"})):b&&E.current&&[E,v].forEach((function(e){e.current.style.opacity=1,e.current.style.pointerEvents="auto"})),1===c&&O.current?([O,j].forEach((function(e){e.current.style.opacity=0,e.current.style.pointerEvents="none"})),[E,v].forEach((function(e){return e.current.style.transform="translateX(0)"}))):O.current&&[O,j].forEach((function(e){e.current.style.opacity=1,e.current.style.pointerEvents="auto"})),2===c&&[E,v].forEach((function(e){return e.current.style.transform="translateX(calc(190px - 1rem))"}))}),[s]),r.a.createElement("div",{className:"search-page"},r.a.createElement(W,null),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"60vw",marginBottom:"1.5rem"}},r.a.createElement("label",{style:{margin:".4rem 0",fontSize:"1.3rem"}},'"',s.searchValue,'"'),r.a.createElement(re,null),r.a.createElement("form",{onSubmit:function(e){if(e.persist(),e.preventDefault(),i(1),e.target.children[0].value){var t=sessionStorage.getItem("searchCache")[s.searchValue]&&sessionStorage.getItem("searchCache")[s.searchValue][c];Object.values(U).forEach((function(n){h(t?n(y?y.username:null,e.target.children[0].value,c,t.join(",")):n(y?y.username:null,e.target.children[0].value,c))})),e.target.reset()}}},r.a.createElement("input",{style:{marginTop:".8rem"},className:"search",type:"text",placeholder:"Search actors, genres, directors"}))),r.a.createElement("div",{style:{visibility:s.loading||u.loading||f.loading||p.loading||!b.length?"visible":"hidden"}},n&&(s.loading||u.loading||f.loading||p.loading)?"Loading...":b.length?"Results Below":"No results found"),r.a.createElement("div",{className:"search-results-container",style:{display:s.result?"block":"none"}},r.a.createElement("div",{style:{posiiton:"relative",display:"flex",justifyContent:"space-between",width:"100%",height:"100%"}},r.a.createElement("button",{ref:O,className:"button-v2",style:{pointerEvents:"none",opacity:0,transition:"opacity 550ms ease-in-out"},onClick:function(e){e.target.blur(),i(c-1)}},"Previous"),r.a.createElement("button",{ref:E,className:"button-v2",style:{opacity:1,transition:"opacity 550ms ease-in-out, transform 550ms ease-in-out"},onClick:function(e){e.target.blur(),i(c+1)}},"Next")),b.length?r.a.createElement("ul",{className:"search-results"},b.slice(0,10).map((function(e){return r.a.createElement("li",{key:Object(K.uuid)()},r.a.createElement(_,{to:{pathname:"movies/".concat(e.id),searchValue:s.searchValue,page:c,back:"/search"}},r.a.createElement("picture",null,r.a.createElement("source",{srcSet:e.cover_file}),r.a.createElement("source",{srcSet:q.a}),r.a.createElement("img",{alt:"thumbnail",type:"image/gif"}))),r.a.createElement("span",{className:"search-results-info"},r.a.createElement(_,{to:{pathname:"movies/".concat(e.id),searchValue:s.searchValue,page:c,back:"/search"}},r.a.createElement("span",{style:{color:"white",position:"relative",zIndex:"5"}},r.a.createElement("label",null,e.title),e.genres&&r.a.createElement("span",null," ","|"," ",e.genres.join(", ")),"Not available"!==e.mpaa_rating&&r.a.createElement("span",null," ","| ",e.mpaa_rating),e.duration_in_mins?e.duration_in_mins%60?e.duration_in_mins>=60?r.a.createElement("span",null," ","|"," ",Math.floor(e.duration_in_mins/60),"h"," ",e.duration_in_mins%60," ","min"):r.a.createElement("span",null," ","|"," ",e.duration_in_mins," ","min"):r.a.createElement("span",null," ","|"," ",e.duration_in_mins%60,"h"):null,e.release_date&&r.a.createElement("span",null," ","|"," ",e.release_date.slice(0,4))))))}))):null,r.a.createElement("div",{style:{posiiton:"relative",display:"flex",justifyContent:"space-between",width:"100%",height:"100%",marginBottom:"4rem"}},r.a.createElement("button",{ref:j,className:"button-v2",style:{pointerEvents:"none",opacity:0,transition:"opacity 550ms ease-in-out"},onClick:function(e){e.target.blur(),i(c-1)}},"Previous"),r.a.createElement("button",{ref:v,style:{transition:"transform 550ms ease-in-out, opacity 550ms ease-in-out"},className:"button-v2",onClick:function(e){e.target.blur(),i(c+1)}},"Next")))))},oe=[[{label:"Overview",content:"Choosie is a service for simplifying movie selection. With Choosie you have a guide to help you find the perfect movie, as well as a tool for organizing your movie-watching activity in the future. Additionally, Choosie lends itself as a resource for viewing information related to any movie in its 100,000 title catalog as well as what is new and popular in the Choosie community. If you can't choose a movie, just use Choosie!"},{label:"Start",content:"Selecting the 'Start' button on the home screen will initiate a questionnaire to help you find the kind of movies you're looking for. You will be able to select one or more answers to each question, advancing by selecting the blue button in the bottom right during each phase."},{label:"My List",content:"You can navigate to a personal store of saved movies by selecting 'My List' from the home screen or navigation bar. Here you'll be able to keep track of any movies on your \"to-watch\" list and any others you don't want to forget about. You can create multiple 'bins' to store related movies and label them to your preference in order to manage your collection more easily."},{label:"Popular",content:"In 'Popular' you can view movies that are currently trending, were released recently, or have been saved by many other users on both a short- and long-term basis."}],[{label:"About Me",content:"My name is Nick Barak and I'm a self-taught developer. I recently graduated from the University of California, Santa Barbara with a degree in Economics & Accounting and am currently pursuing a career in software engineering. Choosie is my first major project and I am happy to have been able to utilize a lot of the things that I have learned since I started learning to code in the creation of this application. This project is the first of many to come."},{label:"Contact",content:"You can contact me by email at nicholasjbarak@gmail.com. I am always looking for feedback for improvement so don't hesitate to send me suggestions or complaints."}]];var ce=function(){var e=Object(a.useContext)(b),t=Object(a.useRef)(null);Object(a.useEffect)((function(e){document.getElementById("root").style.opacity=1}),[]);var n=Object(a.useState)({more:!1,sections:oe[0]}),l=Object(d.a)(n,2),o=l[0],c=l[1];return Object(a.useEffect)((function(e){return c(Object(h.a)(Object(h.a)({},o),{},{sections:oe[o.more?1:0]}))}),[o.more]),r.a.createElement("div",{className:"container transition-frame help-container",ref:t},r.a.createElement("div",{className:"help"},r.a.createElement("h2",null,"What is"," ",r.a.createElement("span",{style:{fontWeight:600},className:"logo"},"Choosie"),"?"),r.a.createElement("article",{style:{width:"100%"}},r.a.createElement("br",null),r.a.createElement("div",{style:{fontWeight:"bold"}},"Choosie is the solution for those without problems."),r.a.createElement("br",null),r.a.createElement("div",null,o.sections.map((function(e,t){return r.a.createElement("section",{key:Object(K.uuid)()},r.a.createElement("label",null,e.label),r.a.createElement("div",null,e.content))})))),r.a.createElement("div",{style:{position:"relative",display:"flex",width:"100%"}},r.a.createElement("button",{className:"button-v2",onClick:function(t){return C(e,"/")}},"Back to Home"),r.a.createElement("button",{style:{right:0,left:"auto"},className:"button-v2",onClick:function(n){t.current.style.opacity=0,setTimeout((function(n){c(Object(h.a)(Object(h.a)({},o),{},{more:!o.more})),e.push("/help"),t.current.style.opacity=1}),750)}},o.more?"Previous":"More"))))},ie=n(34),se=["G","PG","PG-13","TV-14","R/TV-MA","NR"],ue=["30min","1h","1h 30min","2h","2h 30min","3h"],me=["Action","Adventure","Animation","Biography","Comedy","Crime","Documentary","Drama","Family","Fantasy","Horror","Musical","Mystery","Romance","Sci-Fi","Sport","Superhero","Thriller","War","Western"],de=["1920","1930","1940","1950","1960","1970","1980","1990","2000","2010","2020"],fe=[[["init","init","higher"],[].concat(se)]];var pe=function(e){e.displayList;var t=e.dispatchDisplayList,n=Object(a.useReducer)((function(e,t){var n,a,r,l,o=t.type,c=t.payload,i=Object(M.a)(e);if("Clear Filters"===o)return JSON.parse(JSON.stringify(fe));"New Filter"!==o&&i[c.id][0].splice(c.select,1,o);switch(o){default:break;case"Age Rating":(n=i[c.id][1]).splice.apply(n,[0,e[c.id][1].length].concat(se));break;case"Duration":(a=i[c.id][1]).splice.apply(a,[0,e[c.id][1].length].concat(ue));break;case"Genre":(r=i[c.id][1]).splice.apply(r,[0,e[c.id][1].length].concat(me));break;case"Release Date":(l=i[c.id][1]).splice.apply(l,[0,e[c.id][1].length].concat(de));break;case"New Filter":i.push(JSON.parse(JSON.stringify(fe[0])))}return i}),JSON.parse(JSON.stringify(fe))),l=Object(d.a)(n,2),o=l[0],c=l[1],i=Object(a.useState)(0),s=Object(d.a)(i,2),u=s[0],m=s[1],f=function(e){return r.a.createElement("span",null,r.a.createElement("select",{defaultValue:o[e][0][0],onChange:function(t){c({type:t.target.options[t.target.selectedIndex].text,payload:{id:e,select:0}}),c({type:"init",payload:{id:e,select:1}}),t.target.parentElement.children.length>1&&(t.target.parentElement.children[1].selectedIndex=0,t.target.parentElement.children[2].children[0].children[0].checked=!0)}},r.a.createElement("option",{key:"-1",value:"init",disabled:!0},"Select an option"),r.a.createElement("option",{key:"0",value:"Age Rating"},"Age Rating"),r.a.createElement("option",{key:"1",value:"Duration"},"Duration"),r.a.createElement("option",{key:"2",value:"Genre"},"Genre"),r.a.createElement("option",{key:"4",value:"Release Date"},"Release Date")),"init"!==o[e][0][0]&&r.a.createElement(r.a.Fragment,null,r.a.createElement("select",{style:{marginLeft:".35rem"},defaultValue:o[e][0][1],onChange:function(n){c({type:n.target.options[n.target.selectedIndex].text,payload:{id:e,select:1}}),t(p(n.target.parentElement.parentElement.parentElement))}},r.a.createElement("option",{key:"-1",value:"init",disabled:!0},"Select an option"),o[e][1].map((function(e){return r.a.createElement("option",{key:Object(K.uuid)(),value:e},e)}))),r.a.createElement("span",null,r.a.createElement("label",{style:{marginLeft:".35rem"}},r.a.createElement("input",{style:{margin:".5"},type:"radio",name:"filterByRadio_".concat(e),value:"higher",defaultChecked:"higher"===o[e][0][2],onChange:function(n){c({type:"higher",payload:{id:e,select:2}}),t(p(n.target.parentElement.parentElement.parentElement.parentElement.parentElement))}}),"higher"),r.a.createElement("label",{style:{marginLeft:".35rem"}},r.a.createElement("input",{style:{margin:".5"},type:"radio",name:"filterByRadio_".concat(e),value:"lower",defaultChecked:"lower"===o[e][0][2],onChange:function(n){c({type:"lower",payload:{id:e,select:2}}),t(p(n.target.parentElement.parentElement.parentElement.parentElement.parentElement))}}),"lower"),r.a.createElement("label",{style:{marginLeft:".35rem"}},r.a.createElement("input",{style:{margin:".5"},type:"radio",name:"filterByRadio_".concat(e),value:"exact",defaultChecked:"exact"===o[e][0][2],onChange:function(n){c({type:"exact",payload:{id:e,select:2}}),t(p(n.target.parentElement.parentElement.parentElement.parentElement.parentElement))}}),"exact"))))},p=function(e){return Array.from(e.children,(function(e){var t=e.children[0].children;return t[1]?{type:t[0].options[t[0].selectedIndex].text,payload:{value:t[1].options[t[1].selectedIndex].text,range:Array.from(t[2].children).find((function(e){return e.children[0].checked})).children[0].value}}:null})).filter((function(e){return e}))};return r.a.createElement("form",{className:"filter",onSubmit:function(e){e.persist(),e.preventDefault(),c({type:"Clear Filters"}),t(null),m(0),e.target.reset()},style:{marginBottom:"2rem"}},r.a.createElement("label",null,"Filter by: "),r.a.createElement("ul",{style:{margin:".7rem 1.5rem"}},r.a.createElement("li",{key:"0"},f(0),0===u&&"init"!==o[0][0][0]&&r.a.createElement("button",{className:"button-filter",type:"button",onClick:function(e){c({type:"New Filter"}),m(u+1)}},"+")),u>1&&new Array(u-1).fill(null).map((function(e,t){return r.a.createElement("li",{key:Object(K.uuid)()},f(t+1))})),u>0&&r.a.createElement("li",{key:Object(K.uuid)()},f(u),"init"!==o[u][0][0]&&r.a.createElement("button",{className:"button-filter",type:"button",onClick:function(e){c({type:"New Filter"}),m(u+1)}}," ","+"," "))),r.a.createElement("button",{style:{backgroundColor:"transparent",border:"none",color:"white"},onMouseOver:function(e){e.target.style.color="red",e.target.style.cursor="pointer"},onMouseOut:function(e){return e.target.style.color="white"}},"Reset"))};var ge=function(e){var t=e.movies,n=e.heading,l=e.headingMargin,o=e.withFilter,c=e.displaying,i=e.lowerMargin,p=e.locationdetails,g=Object(a.useReducer)((function(e,n){if(!t)return e;var a=Object(M.a)(t);if(!n)return a;var r,l=Object(V.a)(n);try{var o=function(){var n=r.value,l=n.type,o=n.payload,c=o.value,i=o.range,s=void 0,u=void 0;switch(l){default:break;case"Age Rating":if("exact"===i){a.splice.apply(a,[0,a.length].concat(Object(M.a)(a.filter((function(e){return e.mpaa_rating===c})))));break}switch(c){default:return{v:e};case"G":s="higher"===i?null:["G"];break;case"PG":s="higher"===i?["PG","PG-13","TV-14","R","TV-MA","NR"]:["G","PG"];break;case"PG-13":s="higher"===i?["PG-13","TV-14","R","TV-MA","NR"]:["G","PG","PG-13"];break;case"TV-14":s="higher"===i?["TV-14","R","TV-MA","NR"]:["G","PG","PG-13","TV-14"];break;case"R/TV-MA":s="higher"===i?["R","TV-MA","NR"]:["G","PG","PG-13","TV-14","R","TV-MA"];break;case"NR":s="higher"===i?["NR"]:null}a.splice.apply(a,[0,a.length].concat(Object(M.a)(a.filter((function(e){return s?s.includes(e.mpaa_rating):t})))));break;case"Duration":switch(c){default:break;case"30min":u=30;break;case"1h":u=60;break;case"1h 30min":u=90;break;case"2h":u=120;break;case"2h 30min":u=150;break;case"3h":u=180}if("exact"===i){a.splice.apply(a,[0,a.length].concat(Object(M.a)(a.filter((function(e){return e.duration_in_mins===u})))));break}a.splice.apply(a,[0,a.length].concat(Object(M.a)(a.filter((function(e){return"higher"===i?e.duration_in_mins-u>=0:e.duration_in_mins-u<=0})))));break;case"Genre":a.splice.apply(a,[0,a.length].concat(Object(M.a)(a.filter((function(e){return e.genres.filter((function(e){return c.includes(e)})).length})))));break;case"Date Saved":break;case"Release Date":if("exact"===i){a.splice.apply(a,[0,a.length].concat(Object(M.a)(a.filter((function(e){return e.release_date&&Number(c)===Number(e.release_date.slice(0,4))})))));break}a.splice.apply(a,[0,a.length].concat(Object(M.a)(a.filter((function(e){var t=e.release_date&&Number(e.release_date.slice(0,4));return"higher"===i?t>=Number(c):t<=Number(c)})))))}};for(l.s();!(r=l.n()).done;){var c=o();if("object"===typeof c)return c.v}}catch(i){l.e(i)}finally{l.f()}return a}),t),b=Object(d.a)(g,2),h=b[0],y=b[1],E=Object(a.useState)(!1),v=Object(d.a)(E,2),j=v[0],C=v[1],k=Object(a.useState)(!1),x=Object(d.a)(k,2),S=x[0],w=x[1],N=Object(a.useState)(!1),R=Object(d.a)(N,2),T=R[0],A=R[1],I=Object(a.useState)(null),D=Object(d.a)(I,2),H=D[0],P=D[1],U=Object(m.c)((function(e){return e.user.result})),L=Object(m.b)();return Object(a.useEffect)((function(e){y()}),[t]),Object(a.useEffect)((function(e){var t=new AbortController,n=t.signal;if(T&&function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(f+"users/".concat(U.username,"/bins"),{signal:n,method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({bin:Object(B.a)({},c,U.bins[c].filter((function(e){return e!==String(T)})))})});case 3:!e.sent.ok&&P("Error removing movie from bin"),L(O(U.username)),L(J("movies/list","?movies=".concat(U.bins[c].filter((function(e){return e!==String(T)}))))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),"AbortError"===e.t0.name&&console.log("Removal from bin aborted");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()(),j&&function(){var e=Object(u.a)(s.a.mark((function e(t){var a,r,l,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(f+"movies?user=".concat(U.username),{signal:n,method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({movieID:j})});case 3:!e.sent.ok&&P("Error unsaving movie"),a=Object.entries(U.bins).filter((function(e){return e[1].includes(String(j))})),r=Object(V.a)(a),e.prev=7,r.s();case 9:if((l=r.n()).done){e.next=17;break}return o=l.value,e.next=13,fetch(f+"users/".concat(U.username,"/bins"),{signal:n,method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({bin:Object(B.a)({},o[0],o[1].filter((function(e){return e!==String(j)})))})});case 13:!e.sent.ok&&P("Error unsaving movie");case 15:e.next=9;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),r.e(e.t0);case 22:return e.prev=22,r.f(),e.finish(22);case 25:L(O(U.username)),L(J("movies/list","?movies=".concat("Currently Saved"===c?U.currently_saved.filter((function(e){return e!==j})):U.bins[c].filter((function(e){return e!==String(j)}))))),e.next=32;break;case 29:e.prev=29,e.t1=e.catch(0),"AbortError"===e.t1.name&&console.log("Unsave aborted");case 32:case"end":return e.stop()}}),e,null,[[0,29],[7,19,22,25]])})));return function(t){return e.apply(this,arguments)}}()(),S&&function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(f+"users/".concat(U.username),{signal:n,method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:U.name,sex:U.sex,age:U.age,languages:U.languages,country:U.country,email:U.email,show_save_history:U.show_save_history,recent_save_history:U.recent_save_history.filter((function(e){return e!==S}))})});case 3:!e.sent.ok&&P("Error removing movie from save history"),L(O(U.username)),L(J("movies/list","?movies="+U.recent_save_history.filter((function(e){return e!==S})))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),"AbortError"===e.t0.name&&console.log("Removal from history aborted");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()(),j||T||S)return function(e){return t.abort()}}),[j,T,S]),r.a.createElement("div",{className:"movie-list",style:{flex:4,marginBottom:i||"11rem"}},r.a.createElement("div",null,H),r.a.createElement("h2",{className:"movie-list-heading",style:{textAlign:"center",marginBottom:l}},n),o&&r.a.createElement(pe,{displayList:h,dispatchDisplayList:y}),r.a.createElement("ul",{id:"display-row"},h.map((function(e,t){return r.a.createElement("li",{key:Object(K.uuid)()},r.a.createElement(_,{to:p?{pathname:"movies/".concat(e.id),searchValue:p.searchValue,page:p.page,back:p.back,scrollY:p.scrollY}:"movies/".concat(e.id)},r.a.createElement("picture",null,r.a.createElement("source",{srcSet:e.cover_file}),r.a.createElement("source",{srcSet:q.a}),r.a.createElement("img",{alt:"thumbnail",type:"image/gif",onDrag:function(t){t.preventDefault(),t.dataTransfer.setData("text/plain",e.id)}}))),r.a.createElement("div",{className:"display-row-movie-title",style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(_,{to:p?{pathname:"movies/".concat(e.id),searchValue:p.searchValue,page:p.page,back:p.back,scrollY:p.scrollY}:"movies/".concat(e.id),tabIndex:"-1"},r.a.createElement("label",null,e.title)),"Save History"===c?r.a.createElement("button",{className:"button-manage-movie",onClick:function(t){return w(e.id)}},S?"Removing...":"Remove"):"Popular"!==c?"Currently Saved"===c?r.a.createElement("button",{className:"button-manage-movie",onClick:function(t){var n=!0;Object.values(U.bins).reduce((function(e,t){return[].concat(Object(M.a)(e),Object(M.a)(t))}),[]).includes(String(e.id))&&(n=window.confirm("This will remove the movie from all bins. Do you still want to unsave it?")),n&&C(e.id)}},j?"Unsaving...":"Unsave"):"Query"===c?null:r.a.createElement("span",null,r.a.createElement("button",{className:"button-manage-movie",onClick:function(t){var n=!0;Object.entries(U.bins).reduce((function(e,t){var n=Object(d.a)(t,2),a=n[0],r=n[1];return a!==c?[].concat(Object(M.a)(e),Object(M.a)(r)):e}),[]).includes(String(e.id))&&(n=window.confirm("This will remove the movie from other bins. Do you still want to unsave it?")),n&&C(e.id)}},j?"Unsaving...":"Unsave"),r.a.createElement("button",{className:"button-manage-movie",onClick:function(t){return A(e.id)},style:{marginLeft:".25rem"}},"Take Out")):null),(!U||U.show_description_on_hover)&&r.a.createElement("div",{className:"movie-description"},e.description&&"Not available"!==e.description?e.description.length>(window.outerWith>455?200:125)?e.description.slice(0,window.innerWidth>455?200:125)+"...":e.description:"Description not available"))}))))},be=function e(t,n,a){Object(ie.a)(this,e),this.prompt=t,this.buttonSet=Object(M.a)(n),this.nextButton=a},he=[new be("Feeling a particular genre?",[["Action","Comedy","Drama","Thriller"]],"Show More"),new be("You can select more than one if you want",[["Romance","Sci-Fi","Fantasy","Family",""],["Mystery","Documentary","Sport","Western"],["Animation","Adventure","Superhero","War",""],["Crime","Musical","Biography","Horror"],["Action","Comedy","Drama","Thriller"]],"Next"),new be("Want to apply any time constraints?",[[{60:"1 hour"},{120:"2 hours"},{150:"2.5 hours"}]],"None"),new be("Time periods preferred?",[["1970s","1980s","Earlier","Any"],["1990s","2000s","Later"]],"Next")],ye=["Earlier","1970s","1980s","1990s","2000s","Later","Any"];var Ee=function(e){var t=e.location,n=Object(m.c)((function(e){return e.user.result})),l=Object(a.useState)(0),o=Object(d.a)(l,2),c=o[0],i=o[1],s=c<4&&he[c],u=s.prompt,p=s.buttonSet,g=s.nextButton,b=Object(a.useRef)([[]]),h=Object(m.c)((function(e){return e.makeRequest})),y=h.result,E=h.error,v=[];y=y.filter((function(e){var t=e.id;return!v.includes(t)&&v.push(t)}));var O=Object(a.useState)(1),j=Object(d.a)(O,2),C=j[0],x=j[1],S=Object(m.b)(),w=Object(a.useRef)(null),N=Object(a.useRef)(null),_=Object(a.useRef)(null),R=Object(a.useRef)(null),T=Object(a.useRef)(null),A=Object(a.useRef)(null),I=Object(a.useRef)(!1);function D(e){e.preventDefault();var t=e.target.style,n=c?c-1:c;if(2===c)return e.target.style.backgroundColor="var(--color-offset)",e.target.style.color="var(--bg-color-dark)",b.current[1]=[e.target.value],T.current.style.opacity=0,void setTimeout((function(e){i(c+1),T.current.style.opacity=1}),750);b.current[n].includes(e.target.textContent)?(b.current[n]=b.current[n].filter((function(t){return 1===n?t!==e.target.value:t!==e.target.textContent})),t.backgroundColor="var(--color-offset)",t.color="var(--bg-color-dark)"):(t.backgroundColor="var(--bg-color-dark)",t.color="var(--color-offset)",b.current[n]=[].concat(Object(M.a)(b.current[n]),[e.target.textContent]))}return Object(a.useEffect)((function(e){document.getElementById("root").style.opacity=1}),[]),Object(a.useEffect)((function(e){t.searchValue&&(b.current=t.searchValue,i(4),x(t.page))}),[]),Object(a.useEffect)((function(e){if(c>3){var n=b.current[0].length?"&genres=".concat(b.current[0]):"",a=b.current[1].length?"none"!==b.current[1][0]&&"&timeConstraint=".concat(b.current[1]):"",r=b.current[2].length&&!b.current[2].includes("Any")?"&timePeriods=".concat(b.current[2]):"";document.getElementsByClassName("transition-frame")[0].style.opacity=1,setTimeout((function(e){return S(J("start",(n||a||r)&&"?set="+C+n+a+r,{},k(200,null,3)))}),300),!I.current&&t.page>1&&(setTimeout((function(e){[w,N].forEach((function(e){e.current&&(e.current.style.transform="translateX(calc(190px - 1rem))")})),[_,R].forEach((function(e){e.current&&(e.current.style.opacity=1,e.current.style.pointerEvents="auto")}))}),200),I.current=!0)}else c>1&&b.current.push([])}),[c,C]),r.a.createElement("div",{className:"query"},r.a.createElement(W,null),c<4&&r.a.createElement("div",{className:"container",style:{position:"absolute",zIndex:"-1",height:"100vh",top:0}},r.a.createElement("div",{className:"frame transition-frame",ref:T},r.a.createElement("h2",{className:"query-prompt"},u),window.innerWidth>455||![1,3].includes(c)?p.map((function(e,t){return r.a.createElement("ul",{key:Object(K.uuid)(),className:"button-wrapper button-wrapper-full"},(0===c&&n?Object.entries(n.genre_selection).sort((function(e,t){var n=Object(d.a)(e,2)[1];return Object(d.a)(t,2)[1]-n})).map((function(e){return Object(d.a)(e,1)[0]})).slice(0,4):e).map((function(e,t){return r.a.createElement("li",{key:Object(K.uuid)()},r.a.createElement("button",{className:"button",onClick:D,style:e?1===c&&b.current[0].includes(e)?{color:"var(--color-offset)",backgroundColor:"var(--bg-color-dark)"}:{color:"var(-bg-color-dark)",backgroundColor:"var(--color-offset)"}:{visibility:"hidden"},value:2===c&&Object.keys(e)[0],onMouseOver:function(e){e.target.style.backgroundColor="var(--bg-color-dark)",e.target.style.color="var(--color-offset)"},onFocus:function(e){e.target.style.backgroundColor="var(--bg-color-dark)",e.target.style.color="var(--color-offset)"},onMouseOut:function(e){b.current[c>0?c-1:c]&&!b.current[c>0?c-1:c].includes(e.target.textContent)&&(e.target.style.backgroundColor="var(--color-offset)",e.target.style.color="var(--bg-color-dark)")},onBlur:function(e){b.current[1===c?c-1:c]&&!b.current[c>0?c-1:c].includes(e.target.textContent)&&(e.target.style.backgroundColor="var(--color-offset)",e.target.style.color="var(--bg-color-dark)")}},2===c?Object.values(e)[0]:e))})),t===p.length-1&&r.a.createElement("li",null,r.a.createElement("button",{className:"button query-next",onClick:function(e){n&&1===c&&fetch(f+"start?user="+n.username,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({genres:b.current[0].map((function(e){return Object(B.a)({},e,n.genre_selection[e]+1)}))})}),T.current.style.opacity=0,setTimeout((function(e){i(c+1),T.current&&(T.current.style.opacity=1),A.current&&(A.current.style.opacity=1)}),750),Object(M.a)(e.target.parentElement.parentElement.parentElement.children).slice(1).forEach((function(e){return Object(M.a)(e.children).forEach((function(e){e.children[0].style.color="var(--bg-color-dark",e.children[0].style.backgroundColor="var(--color-offset)"}))}))}},g)))})):r.a.createElement("ul",{className:"button-wrappper button-wrapper-mobile"},(3===c?ye:p.reduce((function(e,t){return[].concat(Object(M.a)(e),Object(M.a)(t))}),[]).filter((function(e){return e}))).map((function(e,t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{key:Object(K.uuid)()},r.a.createElement("button",{className:"button",onClick:D,style:e?1===c&&b.current[0].includes(e)?{color:"var(--color-offset)",backgroundColor:"var(--bg-color-dark)"}:{color:"var(-bg-color-dark)",backgroundColor:"var(--color-offset)"}:{visibility:"hidden"},value:2===c&&Object.keys(e)[0],onMouseOver:function(e){e.target.style.backgroundColor="var(--bg-color-dark)",e.target.style.color="var(--color-offset)"},onFocus:function(e){e.target.style.backgroundColor="var(--bg-color-dark)",e.target.style.color="var(--color-offset)"},onMouseOut:function(e){b.current[c>0?c-1:c]&&!b.current[c>0?c-1:c].includes(e.target.textContent)&&(e.target.style.backgroundColor="var(--color-offset)",e.target.style.color="var(--bg-color-dark)")},onBlur:function(e){b.current[1===c?c-1:c]&&!b.current[c>0?c-1:c].includes(e.target.textContent)&&(e.target.style.backgroundColor="var(--color-offset)",e.target.style.color="var(--bg-color-dark)")}},2===c?Object.values(e)[0]:e)),t===a.length-1&&r.a.createElement("li",null,r.a.createElement("button",{className:"button query-next",onClick:function(e){n&&1===c&&fetch(f+"start?user="+n.username,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({genres:b.current[0].map((function(e){return Object(B.a)({},e,n.genre_selection[e]+1)}))})}),T.current.style.opacity=0,setTimeout((function(e){i(c+1),T.current&&(T.current.style.opacity=1),A.current&&(A.current.style.opacity=1)}),750),Object(M.a)(e.target.parentElement.parentElement.parentElement.children).slice(1).forEach((function(e){return Object(M.a)(e.children).forEach((function(e){e.children[0].style.color="var(--bg-color-dark",e.children[0].style.backgroundColor="var(--color-offset)"}))}))}},g)))}))))),r.a.createElement("div",{style:{color:"red"}},E&&"Error loading movies"),c>3&&r.a.createElement("div",{style:{display:c<4?"none":"block",opacity:0,position:"relative"},ref:A,className:"transition-frame"},y&&y.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"button-v2-container",style:{position:"absolute",display:"flex",justifyContent:"space-between",left:0,top:"1.5rem"}},r.a.createElement("button",{className:"button-v2",style:{pointerEvents:"none",opacity:0,left:"1.5rem",transition:"opacity 550ms ease-in-out"},onClick:function(e){2===C&&[e.target,R.current].forEach((function(e){e.style.opacity=0,e.parentElement.children[1].style.transform="translateX(0)",e.style.pointerEvents="none"})),e.target.blur(),k(0,null,2),x(C-1)},ref:_},"Previous"),r.a.createElement("button",{style:{left:"1.5rem",transition:"transform 550ms ease-in-out"},className:"button-v2",onClick:function(e){1===C&&[e.target,N.current].forEach((function(e){e.style.transform="translateX(calc(190px - 1rem))",e.parentElement.children[0].style.opacity=1,e.parentElement.children[0].style.pointerEvents="auto"})),e.target.blur(),k(0,null,1),x(C+1)},ref:w},"Next"))," "),r.a.createElement(ge,{movies:y||[],heading:y?y.length?"Here are some movies you might be interested in":"No results found":"Error loading movies",displaying:"Query",lowerMargin:"4rem",headingMargin:"3.5rem",locationdetails:{searchValue:b.current,page:C,back:"/query"}}),y&&y.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"9.25rem"}},r.a.createElement(re,null)),r.a.createElement("div",{className:"button-v2-container",style:{position:"absolute",display:"flex",justifyContent:"space-between",bottom:"5rem",left:0}},r.a.createElement("button",{className:"button-v2",style:{pointerEvents:"none",opacity:0,left:"1.5rem",transition:"opacity 550ms ease-in-out"},onClick:function(e){2===C&&[e.target,_.current].forEach((function(e){e.style.opacity=0,e.parentElement.children[1].style.transform="translateX(0)",e.style.pointerEvents="none"})),e.target.blur(),k(0,null,2),x(C-1)},ref:R},"Previous"),r.a.createElement("button",{style:{left:"1.5rem",transition:"transform 550ms ease-in-out"},className:"button-v2",onClick:function(e){1===C&&[e.target,w.current].forEach((function(e){e.style.transform="translateX(calc(190px - 1rem))",e.parentElement.children[0].style.opacity=1,e.parentElement.children[0].style.pointerEvents="auto"})),e.target.blur(),k(0,null,1),x(C+1)},ref:N},"Next")))))},ve=E("GET_CURRENTLY_SAVED_LAUNCH","GET_CURRENTLY_SAVED_SUCCESS","GET_CURRENTLY_SAVED_FAILURE");var Oe=function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return function(){for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];return o.forEach((function(e,t){a=a.replace("!{".concat(t+1,"}!"),e)})),function(l){l({type:e}),fetch(a,Object(h.a)(Object(h.a)({},r),{},{credentials:"include"})).then((function(e){return e.json()})).then((function(e){l({type:t,payload:e})})).catch((function(e){return l({type:n,payload:e})}))}}}("GET_CURRENTLY_SAVED_LAUNCH","GET_CURRENTLY_SAVED_SUCCESS","GET_CURRENTLY_SAVED_FAILURE",f+"movies/list?movies=!{1}!"),je=Object(a.createContext)(!1);function Ce(e){var t=e.children,n=Object(a.useState)(!1),l=Object(d.a)(n,2),o=l[0],c=l[1];return r.a.createElement(je.Provider,{value:[o,c]},t)}var ke=je;var xe=function(e){var t=e.movies,n=e.displaying,l=e.setDisplaying,o=Object(m.b)(),c=Object(m.c)((function(e){return e.user.result})),i=Object(a.useState)(null),p=Object(d.a)(i,2),g=p[0],b=p[1],h=Object(a.useState)(!0),y=Object(d.a)(h,2),E=y[0],v=y[1],j=Object(a.useState)(!0),C=Object(d.a)(j,2),k=C[0],x=C[1],S=Object(a.useState)(!1),w=Object(d.a)(S,2),N=w[0],_=w[1],R=Object(a.useState)(null),T=Object(d.a)(R,2),A=T[0],I=T[1],D=Object(a.useContext)(ke),H=Object(d.a)(D,2)[1];function P(e,t,n,a){return U.apply(this,arguments)}function U(){return(U=Object(u.a)(s.a.mark((function e(t,n,a,r){var l,o,i=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=i.length>4&&void 0!==i[4]?i[4]:function(e){return console.log("Error managing bins",t)},t.persist(),t.preventDefault(),e.prev=3,e.next=6,fetch(f+"users/".concat(c.username,"/bins"),{method:n,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({bin:a})});case 6:o=e.sent,b(null)||o.ok?r&&r():l(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),l();case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}return r.a.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:"33%",display:"flex",justifyContent:"center",alignItems:"center",pointerEvents:"none"}},r.a.createElement("div",{className:"bin-manager"},g&&r.a.createElement("div",{style:{color:"red"}},g),r.a.createElement("label",{style:{fontWeight:600}},"Bin Manager"),r.a.createElement("form",{onSubmit:function(e){if(e.persist(),e.preventDefault(),Object.keys(c.bins).includes(e.target.children[1].children[0].value))return b("Bin already exists");c&&P(e,"POST",Object(B.a)({},e.target.children[1].children[0].value,[]),(function(e){return o(O(c.username))}),(function(e){return b("Error creating bin")})),e.target.reset()}},r.a.createElement("label",{className:"label-bin-manager"},"Create a new bin"),r.a.createElement("span",{className:"bin-manager-form-p2"},r.a.createElement("input",{style:{borderRadius:"2px",padding:".25rem",height:"1.35rem"},type:"text",placeholder:"Enter bin name",autoComplete:"off"}),r.a.createElement("button",{className:"button-register"},"Create Bin"))),Object.keys(c.bins).length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.persist(),e.preventDefault();var t=e.target.children[1].children[0].options[e.target.children[1].children[0].selectedIndex];if(N){var n=k?[].concat(Object(M.a)(c.bins[A]),[t.value]):c.bins[A].filter((function(e){return e!==t.value}));c&&fetch(f+"users/".concat(c.username,"/bins"),{credentials:"include",method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({bin:Object(B.a)({},A,n)})}).then((function(e){e.ok?(o(O(c.username)),o(J("movies/list","?movies="+n))):b("Error updating bin")})),l(A),_(!1),I(null),e.target.reset()}else _(!0),I(t.text)}},r.a.createElement("label",{className:"label-bin-manager"},"Add movies to a bin or remove them"),r.a.createElement("span",{className:"bin-manager-form-p2"},r.a.createElement("select",{style:{marginRight:".5rem"}},c.currently_saved.length?N?k?c.currently_saved.filter((function(e){return!c.bins[A].includes(String(e))})).map((function(e,n){return r.a.createElement("option",{key:Object(K.uuid)(),value:e},t.find((function(t){return t.id===e})).title)})):c.bins[A].map((function(e,n){return r.a.createElement("option",{key:Object(K.uuid)(),value:e},t.find((function(t){return t.id===Number(e)})).title)})):k?Object.entries(c.bins).filter((function(e){return Object(d.a)(e,2)[1].length<c.currently_saved.length})).length?Object.entries(c.bins).filter((function(e){return Object(d.a)(e,2)[1].length<c.currently_saved.length})).map((function(e,t){var n=Object(d.a)(e,1)[0];return r.a.createElement("option",{key:Object(K.uuid)()},n)})):r.a.createElement("option",{key:"-1"},"All bins are full"):Object.entries(c.bins).filter((function(e){return Object(d.a)(e,2)[1].length})).length?Object.entries(c.bins).filter((function(e){return Object(d.a)(e,2)[1].length})).map((function(e,t){var n=Object(d.a)(e,1)[0];return r.a.createElement("option",{key:Object(K.uuid)()},n)})):r.a.createElement("option",{key:"-1"},"All bins are empty"):r.a.createElement("option",{key:"-1"},"You don't have any saved movies!")),!N&&c.currently_saved.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"addOrRemoveMovie",value:"Add",defaultChecked:!0,onChange:function(e){return x(!k)}}),"Add"),r.a.createElement("label",{style:{marginLeft:".35rem"}},r.a.createElement("input",{type:"radio",name:"addOrRemoveMovie",value:"Remove",onChange:function(e){return x(!k)}}),"Remove")),Object.entries(c.bins).filter((function(e){var t=Object(d.a)(e,2)[1];return k?t.length<c.currently_saved.length:t.length>0})).length>0&&r.a.createElement("button",{className:"button-register"},N?"Update Bin":k?"Add To":"Remove From"))),r.a.createElement("form",{onSubmit:function(e){e.persist(),e.preventDefault();var a=e.target.children[1].children[0].options[e.target.children[1].children[0].selectedIndex].text;c&&P(e,E?"DELETE":"PUT",E?a:Object(B.a)({},a,[]),(function(e){o(O(c.username)),n===a&&E?(o(J("movies/list","?movies="+t.map((function(e){return e.id})).join(","))),l("Currently Saved")):E||o(J("movies/list","?movies="))}),(function(e){return b("Error ".concat(E?"deleting":"emptying"," bin"))}))}},r.a.createElement("label",{className:"label-bin-manager"},"Delete or empty a bin"),r.a.createElement("span",{className:"bin-manager-form-p2"},r.a.createElement("select",{style:{marginRight:".5rem"}},Object.entries(c.bins).filter((function(e){var t=Object(d.a)(e,2)[1];return E||t.length})).map((function(e,t){return r.a.createElement("option",{key:Object(K.uuid)()},e)})).length?Object.entries(c.bins).filter((function(e){var t=Object(d.a)(e,2)[1];return E||t.length})).map((function(e,t){var n=Object(d.a)(e,1)[0];return r.a.createElement("option",{key:Object(K.uuid)()},n)})):r.a.createElement("option",{key:"-1"},"All bins are empty")),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"deleteOrEmptyBin",value:"Delete",defaultChecked:!0,onChange:function(e){return v(!E)}}),"Delete"),r.a.createElement("label",{style:{marginLeft:".35rem"}},r.a.createElement("input",{type:"radio",name:"deleteOrEmptyBin",value:"Empty",onChange:function(e){return v(!E)}}),"Empty"," "),Object.entries(c.bins).filter((function(e){var t=Object(d.a)(e,2)[1];return E||t.length})).map((function(e,t){return r.a.createElement("option",{key:Object(K.uuid)()},e)})).length>0&&r.a.createElement("button",{className:"button-register"},E?"Delete":"Empty"," Bin")))),Object.keys(c.bins).length>0&&r.a.createElement("button",{className:"button-register",onClick:function(e){return H(!1)}},"Close")))};function Se(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.makeRequest})),n=t.result,l=t.error,o=Object(a.useContext)(ke),c=Object(d.a)(o,2),i=c[0],p=c[1],g=Object(a.useState)(!1),b=Object(d.a)(g,2),h=b[0],y=b[1],E=Object(m.c)((function(e){return e.user.result})),v=Object(m.c)((function(e){return e.currentlySaved.result})),j=Object(a.useState)("Currently Saved"),C=Object(d.a)(j,2),x=C[0],S=C[1],w=Object(a.useState)(!1),N=Object(d.a)(w,2),R=N[0],T=N[1],A=Object(a.useState)(null),I=Object(d.a)(A,2),D=I[0],H=I[1],P=Object(a.useState)(null),U=Object(d.a)(P,2),L=U[0],V=U[1];function F(){return(F=Object(u.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.persist(),n.preventDefault(),a=n.target.children[0].value,t.prev=3,!Object.keys(E.bins).includes(a)){t.next=6;break}return t.abrupt("return",H("Bin already exists"));case 6:return H(null),t.next=9,fetch(f+"users/".concat(E.username,"/bins"),{headers:{"Content-Type":"application/json"},method:"POST",credentials:"include",body:JSON.stringify({bin:Object(B.a)({},a,[])})});case 9:t.sent.ok?e(O(E.username)):H("Error creating bin"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),console.log(t.t0);case 16:return t.prev=16,Object.keys(E.bins).includes(a)||(T(!1),n.target.reset()),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[3,13,16,19]])})))).apply(this,arguments)}function G(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(u.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.persist(),n.preventDefault(),V(null),a=n.dataTransfer.getData("text/plain").split("/movies/")[1],t.prev=4,E.currently_saved.includes(Number(a))){t.next=10;break}return t.next=8,fetch(f+"movies?user=".concat(E.username),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({movieID:Number(a),inRecent:!0})});case 8:!t.sent.ok&&V("Error updating bin");case 10:return t.next=12,fetch(f+"users/".concat(E.username,"/bins"),{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({bin:Object(B.a)({},n.target.textContent,[].concat(Object(M.a)(E.bins[n.target.textContent]),[a]))})});case 12:t.sent.ok?e(O(E.username)):V("Error updating bin"),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(4),console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[4,16]])})))).apply(this,arguments)}Object(a.useEffect)((function(e){document.getElementById("root").style.opacity=1}),[]),Object(a.useEffect)((function(t){E&&(e(J("movies/list","?movies="+E.currently_saved.join(","),{},(function(e){return k(50,!1)}))),e(Oe(E.currently_saved)))}),[]),Object(a.useEffect)((function(e){h||T(!1)}),[h]);var z=function(e){e.preventDefault();var t=e.target.parentElement.children[1].style;h?(t.maxHeight=0,t.transform="scaleY(0)"):(t.maxHeight="100%",t.transform="scaleY(1)"),y(!h),H(null)};return r.a.createElement("div",{className:"my-list",style:{display:"flex",overflow:"hidden"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column "}},r.a.createElement(W,null),E&&r.a.createElement("ul",{className:"sidebar"},r.a.createElement("li",{className:"sidebar-li-hover",onClick:function(t){"Currently Saved"!==x&&k(),setTimeout((function(t){return e(J("movies/list","?movies="+E.currently_saved.join(","),{},(function(e){return k(150,!1)})))}),150),S("Currently Saved")},tabIndex:"0"},"Currently Saved"),E.show_save_history&&r.a.createElement("li",{className:"sidebar-li-hover",onClick:function(t){"Save History"!==x&&k(),setTimeout((function(t){return e(J("movies/list","?movies="+E.recent_save_history.join(","),{},(function(e){return k(150,!1)})))}),150),S("Save History")},tabIndex:"0"},"Save History"),r.a.createElement("li",null,r.a.createElement("div",null,r.a.createElement("label",{onFocus:function(e){return e.target.style.color=h?"white":"var(--color-offset)"},onBlur:function(e){return e.target.style.color=h?"var(--color-offset)":"red"},tabIndex:"0",style:{outline:"none",cursor:"pointer"},onClick:z,onKeyDown:function(e){return 13===e.keyCode&&z(e)},onMouseOver:function(e){return e.target.style.color=h?"white":"var(--color-offset)"},onMouseOut:function(e){return e.target.style.color=h?"var(--color-offset)":"red"}},"Your Bins"),r.a.createElement("ul",{style:{maxHeight:0,transform:"scaleY(0)",transformOrigin:"top",transition:"max-height 175ms ease-out, transform 175ms ease-out"}},Object.keys(E.bins).map((function(t,n){return r.a.createElement("li",{onFocus:function(e){return e.target.style.color="var(--color-offset)"},onBlur:function(e){return e.target.style.color="red"},tabIndex:h?0:"-1",onMouseOver:function(e){e.target.style.color="var(--color-offset)",e.target.style.cursor="pointer"},onMouseOut:function(e){return e.target.style.color="red"},style:{marginLeft:"1.25rem",outline:"none"},key:Object(K.uuid)(),onClick:function(n){n.preventDefault(),x!==t&&k(),setTimeout((function(n){return e(J("movies/list","?movies="+E.bins[t].join(","),{},(function(e){return k(150,!1)})))}),150),S(t),y(!h),H(null)},onKeyDown:function(n){n.preventDefault(),13===n.keyCode&&(x!==t&&k(),setTimeout((function(n){return e(J("movies/list","?movies="+E.bins[t].join(","),{},(function(e){return k(150,!1)})))}),150),S(t),y(!h),H(null))},onDrop:function(e){e.preventDefault(),(E.currently_saved.includes(Number(e.dataTransfer.getData("text/plain").split("/movies/")[1]))||window.confirm("Save movie and add to bin?"))&&G(e)},onDragOver:function(e){e.preventDefault(),e.target.style.color="white"},onDragLeave:function(e){e.preventDefault(),e.target.style.color="red"}},t)})),r.a.createElement("li",{style:{marginLeft:"1.25rem"}},R?r.a.createElement("form",{onSubmit:function(e){return F.apply(this,arguments)}},r.a.createElement("input",{style:{borderRadius:"2px",padding:".25rem",height:"1.3rem",width:"110px"},type:"text",placeholder:"Enter bin name"})):r.a.createElement("button",{tabIndex:"0",onClick:function(e){return T(!0)},onFocus:function(e){return e.target.style.transform="scale(1.15)"},onBlur:function(e){return e.target.style.transform="scale(1)"},onKeyDown:function(e){return 13===e.keyCode&&T(!0)},style:{backgroundColor:"transparent",border:"none",color:"red",fontWeight:"bold",fontSize:"1.1rem",transition:"transform 50ms ease-out"},onMouseOver:function(e){e.target.style.transform="scale(1.15)",e.target.style.cursor="pointer"},onMouseOut:function(e){return e.target.style.transform="scale(1)"}},"+")),D&&r.a.createElement("div",{style:{color:"red"}},D)))),r.a.createElement("li",null,r.a.createElement("button",{onMouseOver:function(e){return e.target.style.backgroundColor="var(--bg-color-light)"},onMouseOut:function(e){document.activeElement!==e.target&&(e.target.style.backgroundColor="var(--color-offset)")},onFocus:function(e){return e.target.style.backgroundColor="var(--bg-color-light)"},onBlur:function(e){Object(M.a)(document.querySelectorAll(":hover")).includes(e.target)||(e.target.style.backgroundColor="var(--color-offset)")},style:{marginTop:"1rem",marginLeft:".25rem"},className:"button",onClick:function(e){e.target.blur(),p(!i)}},"Manage Bins")),r.a.createElement("li",null,L))),E?l?r.a.createElement("div",{style:{marginTop:"25%",width:"100%",textAlign:"center"}},"Error loading movies"):r.a.createElement(ge,{withFilter:!0,displaying:x,movies:n,headingMargin:"2rem",heading:function(e){switch(x){default:return n.length?'This is what was in "'.concat(x,'"'):"This bin was empty!";case"Currently Saved":return n.length?"Here's your complete list of movies":"Save movies by going to their page";case"Save History":return n.length?"These are all the movies you've ever saved":"Save movies by going to their page"}}()}):r.a.createElement("h2",{style:{flex:4,position:"absolute",margin:"7rem 0 0 2.5rem"}},r.a.createElement(_,{to:"/register"},r.a.createElement("span",{style:{color:"#cc0000"},onMouseOver:function(e){e.target.style.textDecoration="underline"},onMouseOut:function(e){e.target.style.textDecoration="none"}},"Log in"))," ","to see your saved movies"),E&&i&&r.a.createElement(xe,{movies:v,displaying:x,setDisplaying:S}))}var we=function(e){var t=e.location,n=Object(m.b)(),l=Object(m.c)((function(e){return e.makeRequest})),o=l.error,c=l.result,i=Object(a.useState)("Here's what movies are currently trending"),f=Object(d.a)(i,2),p=f[0],g=f[1],b=Object(a.useState)(1),h=Object(d.a)(b,2),y=h[0],E=h[1],v=Object(a.useState)("trending"),O=Object(d.a)(v,2),j=O[0],C=O[1],x=Object(a.useRef)(null),S=Object(a.useRef)(null),w=Object(a.useRef)(0),N=Object(a.useState)(0),_=Object(d.a)(N,2),R=_[0],T=_[1];Object(a.useEffect)((function(e){document.getElementById("root").style.opacity=1,n(J("popular","?column=".concat(j,"&set=").concat(y),{},(function(e){return k(150,!1)})))}),[]),Object(a.useEffect)((function(e){setTimeout((function(e){x.current.style.opacity=1,x.current.style.pointerEvents="auto"}),150)}),[]),Object(a.useEffect)((function(e){window.addEventListener("scroll",(function(e){w.current=window.scrollY}))}),[]),Object(a.useEffect)((function(e){return T(w.current)}),[w.current]),Object(a.useEffect)((function(e){setTimeout((function(e){t.searchValue&&C(t.searchValue),t.page&&E(t.page),t.scrollY&&window.scrollTo(0,t.scrollY),x.current.style.opacity=1,x.current.style.pointerEvents="auto",t.page>1&&(x.current.style.transform="translateX(calc(".concat(window.innerWidth>850?"190":"140","px - 1rem))"),x.current.parentElement.children[0].style.opacity=1,x.current.parentElement.children[0].style.pointerEvents="auto")}),155)}),[]),Object(a.useEffect)((function(e){switch(n(J("popular","?column=".concat(j,"&set=").concat(y),{},(function(e){return k(150,!1)}))),j){default:break;case"trending":g("Here's what movies are currently trending");break;case"recent_releases":g("Here are the newest movies on record");break;case"most_saved_this_month":g("Here are the most popular movies this month");break;case"most_saved":g("Here are the most saved movies to date")}}),[j,y]),Object(a.useEffect)((function(e){!function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c&&c.length<20&&x.current?(x.current.style.opacity=0,x.current.style.pointerEvents="none"):c&&x.current&&(x.current.style.opacity=1,x.current.style.pointerEvents="auto"),1===y&&S.current?(S.current.style.opacity=0,S.current.style.pointerEvents="none",x.current.style.transform="translateX(0)"):S.current&&(S.current.style.opacity=1,S.current.style.pointerEvents="auto"),2===y&&(x.current.style.transform="translate(calc(190px - 1rem))");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()()}),[j]);var A=function(e,t){e&&13!==e.keyCode||(k(),E(1),C(t))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"popular",style:{display:"flex",overflow:"hidden"}},r.a.createElement("div",{className:"popular-full-sidebar",style:{display:"flex",flexDirection:"column"}},r.a.createElement(W,null),r.a.createElement("ul",{className:"sidebar"},r.a.createElement("li",{tabIndex:"0",onKeyDown:function(e){return"trending"!==j&&A(e,"trending")},className:"sidebar-li-hover",key:"0",onClick:function(e){return"trending"!==j&&A(null,"trending")}},"Trending"),r.a.createElement("li",{tabIndex:"0",onKeyDown:function(e){return"recent_releases"!==j&&A(e,"recent_releases")},className:"sidebar-li-hover",key:"1",onClick:function(e){return"recent_releases"!==j&&A(null,"recent_releases")}},"Recent Releases"),r.a.createElement("li",{tabIndex:"0",onKeyDown:function(e){return"most_saved_this_month"!==j&&A(e,"most_saved_this_month")},className:"sidebar-li-hover",key:"2",onClick:function(e){return"most_saved_this_month"!==j&&A(null,"most_saved_this_month")}},"Most Saved This Month"),r.a.createElement("li",{tabIndex:"0",onKeyDown:function(e){return"most_saved"!==j&&A(e,"most_saved")},className:"sidebar-li-hover",key:"3",onClick:function(e){return"most_saved"!==j&&A(null,"most_saved")}},"Most Saved All Time"),r.a.createElement("li",{className:"popular-button-container",style:{width:"100%"}},r.a.createElement("div",{style:{posiiton:"relative",display:"flex",justifyContent:"space-between",width:"100%",height:"100%"}},r.a.createElement("button",{className:"button-v2",style:{pointerEvents:"none",opacity:0,transition:"opacity 550ms ease-in-out"},onClick:function(e){2===y&&(e.target.style.opacity=0,e.target.parentElement.children[1].style.transform="translateX(0)",e.target.style.pointerEvents="none"),e.target.blur(),k(),E(y-1)},ref:S},"Previous"),r.a.createElement("button",{style:{transition:"transform 550ms ease-in-out"},className:"button-v2",onClick:function(e){1===y&&(e.target.style.transform="translateX(calc(".concat(window.innerWidth>850?"190":"140","px - 1rem))"),e.target.parentElement.children[0].style.opacity=1,e.target.parentElement.children[0].style.pointerEvents="auto"),e.target.blur(),k(),E(y+1)},ref:x},"Next"))))),r.a.createElement("div",{style:{flex:4,marginBottom:"2rem"}},r.a.createElement(ge,{movies:c,heading:o?"Error loading movies":p,headingMargin:"4rem",displaying:"Popular",locationdetails:{searchValue:j,page:y,back:"/popular",scrollY:R}}))))};var Ne=function(){return r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/",exact:!0,component:L}),r.a.createElement(c.a,{path:"/movies/:id",component:X}),r.a.createElement(c.a,{path:"/register",exact:!0,component:Q}),r.a.createElement(c.a,{path:"/profile/:username",exact:!0,component:ae}),r.a.createElement(c.a,{path:"/search",exact:!0,component:le}),r.a.createElement(c.a,{path:"/help",exact:!0,component:ce}),r.a.createElement(c.a,{path:"/query",exact:!0,component:Ee}),r.a.createElement(c.a,{path:"/my-list",exact:!0,component:Se}),r.a.createElement(c.a,{path:"/popular",exact:!0,component:we}),r.a.createElement(c.a,{path:"/",render:function(e){var t=e.history,n=e.location;return document.getElementById("root").style.opacity=1,r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{margin:"1rem 0 .25rem 1rem"}},'You must be logged in as "',n.pathname.split("/profile/")[1],'" to view this page'),r.a.createElement("button",{style:{marginTop:".5rem"},onMouseOver:function(e){e.target.style.backgroundColor="var(--bg-color-light)",e.target.style.color="var(--color-offset)"},onFocus:function(e){e.target.style.backgroundColor="var(--bg-color-light)",e.target.style.color="var(--color-offset)"},onMouseOut:function(e){e.target.style.backgroundColor="var(--color-offset)",e.target.style.color="var(--bg-color-dark)"},onBlur:function(e){e.target.style.backgroundColor="var(--color-offset)",e.target.style.color="var(--bg-color-dark)"},className:"button",onClick:function(e){return C(t,"/")}},"Back to Home"))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _e=Object(a.createContext)(null),Re=function(e){var t=e.children,n=Object(a.useState)(_e._currentValue),l=Object(d.a)(n,2),o=l[0],c=l[1];return r.a.createElement(_e.Provider,{value:[o,c]},t)},Te=function(e){var t=e.children;return r.a.createElement(Ce,null,r.a.createElement(Re,null,r.a.createElement(g,null,t)))},Ae=n(16),Ie=n(35),De=Object(Ae.c)({makeRequest:F,searchTitle:A,searchPeople:I,searchGenre:D,searchDescription:H,user:v,currentlySaved:ve}),He=Object(Ae.d)(De,Object(Ae.a)(Ie.a));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N.a,null,r.a.createElement(m.a,{store:He},r.a.createElement(Te,null,r.a.createElement(Ne,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.1a048027.chunk.js.map