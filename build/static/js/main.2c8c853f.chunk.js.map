{"version":3,"sources":["img/image-alt.png","APIs.js","store/contexts/History.context.js","store/reducers/prototype.reducer.js","store/reducers/updateUser.reducer.js","store/actions/updateUser.action.js","Functions.js","components/Login.js","components/DelayLink.js","components/Footer.js","store/reducers/search.reducer.js","store/actions/search.action.js","store/contexts/User.context.js","components/Home.js","store/reducers/makeRequest.reducer.js","store/actions/makeRequest.action.js","components/Nav.js","components/Movie.js","components/Register.js","components/Toggler.js","components/Profile.js","components/StarRater.js","components/Search.js","components/Help.js","components/Filter.js","components/MovieList.js","store/reducers/query.reducer.js","store/actions/prototype.action.js","store/actions/query.action.js","components/Query.js","store/reducers/getCurrentlySaved.reducer.js","store/actions/getCurrentlySaved.action.js","store/contexts/BinManager.context.js","components/BinManager.js","components/MyList.js","components/Popular.js","App.js","serviceWorker.js","store/Context.js","store/reducer.js","index.js"],"names":["module","exports","server","URL","HistoryContext","createContext","HistoryProvider","children","history","useHistory","Provider","value","defaultState","loading","result","error","ReducerPrototype","LAUNCH_TYPE","SUCCESS_TYPE","FAILURE_TYPE","initialState","successCallback","fn","failureCallback","state","type","payload","callback","newState","createUpdateUserFailure","updateUser","username","dispatch","fetch","then","res","json","catch","e","root","document","getElementById","transitionPage","route","style","opacity","setTimeout","_","a","push","slideDisplayRow","timeout","down","mode","transform","Login","useDispatch","user","useSelector","store","useContext","useState","open","setOpen","setError","loginForm","useRef","errorRef","useEffect","current","onLogin","persist","preventDefault","target","password","method","headers","body","JSON","stringify","response","validLogin","console","log","mouseOverLogin","color","mouseOutLogin","className","position","left","top","name","padding","display","flexWrap","onClick","cursor","backgroundColor","border","marginRight","whiteSpace","onMouseOver","onMouseOut","onFocus","onBlur","marginLeft","ref","transition","onSubmit","width","height","marginBottom","placeholder","marginTop","justifyContent","blur","DelayLink","to","location","useLocation","clearTimeout","pathname","defaultPrevented","Footer","bottom","right","delay","onDelayStart","fontWeight","searchValue","search","query","page","movies","createSearchSuccess","createSearchFailure","UserContext","UserProvider","_currentValue","setState","Home","onSearch","reset","button","ok","userSelect","margin","undefined","createMakeRequestSuccess","createMakeRequestFailure","makeRequest","querystring","options","Nav","withBack","back","scrollY","Movie","movie","saving","setSaving","unsaving","setUnsaving","setSaveError","split","controller","AbortController","signal","movieID","binsWithMovie","Object","entries","bins","filter","bin","includes","String","binWithMovie","id","abort","flexDirection","alignItems","srcSet","cover_file","imageAlt","alt","title","currently_saved","confirmed","values","reduce","acc","cur","window","confirm","save_history","inRecent","recent_save_history","description","href","src_url","rel","genres","join","mpaa_rating","duration_in_mins","Math","floor","release_date","slice","writers","directors","actors","languages","countries","languageOptions","Register","continued","setContinued","info","setInfo","generalError","setGeneralError","registrationError","setRegistrationError","loginError","setLoginError","exec","age","selectedIndex","Number","text","sex","email","key","defaultValue","disabled","Array","fill","map","el","i","language","length","placeItems","maxWidth","Toggler","mounted","prompt","defaultChecked","onCheck","onUncheck","checkbox","checked","Simulate","change","onChange","parentElement","boxShadow","setProperty","Profile","editInfoError","setEditInfoError","editingInfo","changePasswordError","setChangePasswordError","clearing","setClearing","show_save_history","showSaveHistory","setShowSaveHistory","show_description_on_hover","showDescriptionOnHover","setShowDescriptionOnHover","message","setMessage","editInfo","editedInfo","Promise","resolve","maxHeight","clearInfo","visibility","otherOpen","innerWidth","lang","fontSize","currentPassword","newPassword","repeatedNewPassword","minHeight","StarRater","starRating","setStarRating","rate","rating","Search","setPage","nextButton1","nextButton2","previousButton1","previousButton2","sessionStorage","getItem","setItem","cache","parse","forEach","btn","pointerEvents","posiiton","zIndex","sections","label","content","Help","frame","more","section","ageRatings","durations","releaseDates","filterOptionsInit","Filter","displayList","dispatchDisplayList","useReducer","splice","select","filterOptions","dispatchFilterOptions","filterID","setFilterID","makeFilter","deriveFilterValues","option","ul","from","li","range","find","child","MovieList","heading","headingMargin","withFilter","displaying","lowerMargin","locationdetails","filters","ratings","duration","genre","year","removingFromHistory","setRemovingFromHistory","setRemovingFromHistoryError","removingFromBin","setRemovingFromBin","country","flex","textAlign","onDrag","dataTransfer","setData","tabIndex","val","outerWith","ActionPrototype","url","params","param","replace","QueryContent","buttonSet","nextButton","this","phases","phase3MobileButtonSet","Query","phase","setPhase","answers","set","setSet","mainNextButton","mainNextButton2","mainPrevButton","mainPrevButton2","setMovies","frame2","manageFilters","index","textContent","timeConstraint","timePeriods","getElementsByClassName","genre_selection","sort","j","keys","answer","buttons","uuid","getCurrentlySaved","BinManagerContext","BinManagerProvider","binManagerOpen","setBinManagerOpen","BinManager","setDisplaying","deleteBin","setDeleteBin","addMovie","setAddMovie","updateBinClicked","setUpdateBinClicked","binToUpdate","setBinToUpdate","manageBins","errorhandler","borderRadius","autoComplete","toUpdate","updatedMovies","MyList","showBins","setShowBins","currentlySaved","creatingBin","setCreatingBin","creatingBinError","setCreatingBinError","setUpdatingBinError","binName","updateBin","getData","onClickYourBins","overflow","outline","onKeyDown","keyCode","transformOrigin","onDrop","onDragOver","onDragLeave","activeElement","querySelectorAll","textDecoration","Popular","setHeading","column","setColumn","previousButton","scrollYRef","setScrollY","addEventListener","scrollTo","onClickOrEnter","App","path","exact","component","render","Boolean","hostname","match","combineReducers","createStore","reducer","applyMiddleware","thunk","ReactDOM","StrictMode","Context","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.2c8c853f.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/image-alt.7496b72d.png\";","export const server = new URL(\r\n    // 'https://choosie-api.herokuapp.com/'\r\n    'http://localhost:8082'\r\n);\r\n\r\nexport default { server };","import React, { createContext } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nexport const HistoryContext = createContext(null);\r\n\r\nexport const HistoryProvider = ({ children }) => {\r\n    const history = useHistory();\r\n\r\n    return (\r\n        <HistoryContext.Provider value={history}>\r\n            {children}\r\n        </HistoryContext.Provider>\r\n    )\r\n}\r\n\r\nexport default HistoryContext;","const defaultState = {\r\n    loading: false,\r\n    result: [],\r\n    error: null\r\n}\r\n\r\n/* Generic Reducer Model */\r\nexport function ReducerPrototype(\r\n    LAUNCH_TYPE,\r\n    SUCCESS_TYPE,\r\n    FAILURE_TYPE,\r\n    initialState=defaultState,\r\n    successCallback=fn=>fn&&fn(),\r\n    failureCallback=fn=>fn&&fn()\r\n) {\r\n    return (state=initialState, { type, payload, callback }) => {\r\n        const newState = { ...state };\r\n        switch (type) {\r\n            default: break;\r\n            case LAUNCH_TYPE:\r\n                newState.loading = true;\r\n                break;\r\n            case SUCCESS_TYPE:\r\n                successCallback(callback);\r\n                newState.loading = false;\r\n                newState.error = null;\r\n                newState.result = payload;\r\n                break;\r\n            case FAILURE_TYPE:\r\n                failureCallback(callback);\r\n                newState.loading = false;\r\n                newState.error = payload;\r\n                newState.result = null;\r\n                break;\r\n        }\r\n        return newState;\r\n    }\r\n}","import { ReducerPrototype } from \"./prototype.reducer\";\r\n\r\nexport const UPDATE_USER_LAUNCH = 'UPDATE_USER_LAUNCH',\r\n             UPDATE_USER_SUCCESS = 'UPDATE_USER_SUCCESS',\r\n             UPDATE_USER_FAILURE = 'UPDATE_USER_FAILURE';\r\n\r\nconst initialState = {\r\n    loading: false,\r\n    result: null,\r\n    error: null\r\n}\r\n\r\nexport default ReducerPrototype(UPDATE_USER_LAUNCH, UPDATE_USER_SUCCESS, UPDATE_USER_FAILURE, initialState)","import { server } from '../../APIs';\r\nimport { UPDATE_USER_LAUNCH, UPDATE_USER_SUCCESS, UPDATE_USER_FAILURE } from '../reducers/updateUser.reducer';\r\n\r\nexport const createUpdateUserLaunch = _=> ({ type: UPDATE_USER_LAUNCH }),\r\n             createUpdateUserSuccess = payload => ({ type: UPDATE_USER_SUCCESS, payload }),\r\n             createUpdateUserFailure = payload => ({ type: UPDATE_USER_FAILURE, payload });\r\n\r\n\r\nexport const updateUser = username => {\r\n    return dispatch => {\r\n        if (!username) {\r\n            dispatch( createUpdateUserFailure(null) );\r\n            return;\r\n        }\r\n        dispatch( createUpdateUserLaunch() );\r\n        fetch(server + `users/${username}`)\r\n            .then(res => res.json())\r\n            .then(res => { dispatch( createUpdateUserSuccess(res) ) })\r\n            .catch(e => dispatch( createUpdateUserFailure(e) ));\r\n    }\r\n}","const root = document.getElementById('root');\r\n\r\nexport async function callAPI(event, endpoint, options, callback, errorhandler) {\r\n    event.persist();\r\n    event.preventDefault();\r\n    try {\r\n        const response = await fetch(endpoint, options || {}),\r\n              json = await response.json();\r\n        callback && callback(json);\r\n    } catch (err) {\r\n        errorhandler\r\n            ? errorhandler(err)\r\n            : console.log(err) \r\n    };\r\n}\r\n\r\nexport function transitionPage(history, route) {\r\n    root.style.opacity = 0;\r\n    history && route && setTimeout(async _=> {\r\n        await history.push(route);\r\n        root.style.opacity = 1;\r\n    }, 1500);\r\n}\r\n\r\nexport function transitionDisplayList() {\r\n    document.getElementById('display-row').style.transform = 'translateY(10vh)';\r\n    setTimeout(_=> document.getElementById('display-row').style.transform = 'translateY(0)', 500);\r\n}\r\n\r\nexport function slideDisplayRow(timeout=0, down=true, mode=0) {\r\n    setTimeout(_=> {\r\n        if (!document.getElementById('display-row')) slideDisplayRow(timeout, down, mode);\r\n\r\n        switch (mode) {\r\n            default: return;\r\n            case 0:\r\n                document.getElementById('display-row').style.transform = `translateY(${down ? '150vh' : 0})`;\r\n                break;\r\n            case 1:\r\n                document.getElementById('display-row').style.transform = `translateX(-150vw)`;\r\n                setTimeout(_=> {\r\n                    document.getElementById('display-row').style.opacity = 0;\r\n                    document.getElementById('display-row').style.transform = `translateX(300vw)`;\r\n                }, 300);\r\n                break;\r\n            case 2:\r\n                document.getElementById('display-row').style.transform = `translateX(150vw)`;\r\n                setTimeout(_=> {\r\n                    document.getElementById('display-row').style.opacity = 0;\r\n                    document.getElementById('display-row').style.transform = `translateX(-300vw)`;\r\n                }, 300);\r\n                break;\r\n            case 3:\r\n                document.getElementById('display-row').style.opacity = 1;\r\n                document.getElementById('display-row').style.transform = `translateX(0)`;\r\n        }\r\n    }, timeout);\r\n}\r\n","import React, { useState, useContext, useEffect, useRef } from 'react';\r\nimport { server } from '../APIs';\r\n// import UserContext from '../store/contexts/User.context';\r\nimport HistoryContext from '../store/contexts/History.context';\r\nimport { updateUser } from '../store/actions/updateUser.action';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { transitionPage } from '../Functions';\r\n\r\nfunction Login() {\r\n    const dispatch = useDispatch();\r\n    const user = useSelector(store => store.user.result);\r\n    const history = useContext(HistoryContext);\r\n    // const [user, setUser] = useContext(UserContext);\r\n    const [open, setOpen] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const loginForm = useRef(null);\r\n    const errorRef = useRef(null);\r\n\r\n    useEffect(_=> {\r\n        if (error && loginForm.current) {\r\n            loginForm.current.style.transform = 'translateY(1rem)';\r\n            errorRef.current.style.transform = 'translateY(1.4rem)';\r\n        } else if (loginForm.current) {\r\n            loginForm.current.style.transform = 'translateY(0)';\r\n            errorRef.current.style.transform = 'translateY(0)';\r\n        }\r\n    }, [error])\r\n\r\n    const onLogin = async e => {\r\n        e.persist();\r\n        e.preventDefault();\r\n        const username = e.target.children[0].value,\r\n            password = e.target.children[2].value;\r\n        if (!username && !password) {\r\n            setError(null);\r\n            setOpen(false);\r\n            return;\r\n        }\r\n        try {\r\n            const response = await fetch(server+`users/validate`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    username,\r\n                    password\r\n                })\r\n            });\r\n            const validLogin = await response.json();\r\n            if (!(await validLogin)) {\r\n                setError('Invalid login');\r\n                return\r\n            } else {\r\n                dispatch( updateUser(username) );\r\n                setError(null);\r\n            }\r\n        } catch (e) { setError('Something went wrong'); console.log(e) }\r\n    }\r\n\r\n    function mouseOverLogin(e) {\r\n        e.target.style.color = 'red';\r\n    }\r\n\r\n    function mouseOutLogin(e) {\r\n        e.persist();\r\n        setTimeout(_=> e.target.style.color = 'white', 250);\r\n    }\r\n\r\n    return (\r\n        <div className=\"login\" style={{ position: 'absolute', left: '1rem', top: '1rem' }}>\r\n            {user\r\n            ? (\r\n                <>\r\n                    <div className=\"login-welcome\" style={{ color: 'var(--color-offset)' }}>Welcome, {user.name || user.username}</div>\r\n                    <span style={{ padding: '0 2rem', display: 'flex', flexWrap: 'nowrap' }}>\r\n                        <button onClick={_=> { dispatch( updateUser(null) ); setOpen(false) }}style={{ color: 'white', cursor: 'pointer', backgroundColor: 'transparent', border: 'none', marginRight: '.5rem', whiteSpace: 'nowrap' }} onMouseOver={e => e.target.style.color = 'silver'} onMouseOut={e => e.target.style.color = 'white'} onFocus={e => e.target.style.color = 'silver'} onBlur={e => e.target.style.color = 'white'}>Log out</button>\r\n                        <button onClick={_=> transitionPage(history, `profile/${user.username}`)} style={{ color: 'white', cursor: 'pointer', backgroundColor: 'transparent', border: 'none', marginLeft: '.5rem', whiteSpace: 'nowrap' }} onMouseOver={e => e.target.style.color = 'silver'} onMouseOut={e => e.target.style.color = 'white'} onFocus={e => e.target.style.color = 'silver'} onBlur={e => e.target.style.color = 'white'}>View profile</button>\r\n                    </span>\r\n                </>\r\n            )\r\n            : open \r\n                ? (\r\n                    <>\r\n                        <div ref={errorRef} style={{ position: 'absolute', top: '-2rem', left: '1.8rem', color: 'red', transition: 'transform 300ms ease-in-out', whiteSpace: 'nowrap' }}>{error}</div>\r\n                        <form onSubmit={onLogin} ref={loginForm} style={{backgroundColor: 'transparent', display: 'inline-block', transition: 'transform 300ms ease-in-out', width: '100%' }}>\r\n                            <input style={{ padding: '.25rem', height: '1.25rem', marginBottom: '.2rem', width: '100%' }} type=\"text\" placeholder=\"username\" />\r\n                            <br />\r\n                            <input style={{ padding: '.25rem', height: '1.25rem', width: '100%' }} type=\"password\" placeholder=\"password\" />\r\n                            <br />\r\n                            <div style={{ marginTop: '.25rem', display: 'flex', justifyContent: 'space-between' }}>\r\n                                <button className=\"button-manage-movie\" onClick={e => e.target.blur()}>Log in</button>\r\n                                <button className=\"button-manage-movie\"onClick={e => {\r\n                                    e.preventDefault(); transitionPage(history, '/register')\r\n                                }}>Sign up</button>\r\n                            </div>\r\n                        </form>\r\n                    </>\r\n                )\r\n                : <button className=\"button-login\" onClick={_=> setOpen(true)}>\r\n                    <span style={{ transition: 'color 250ms ease-in' }} onMouseOver={mouseOverLogin} onMouseOut={mouseOutLogin}>L</span>\r\n                    <span style={{ transition: 'color 250ms ease-in' }} onMouseOver={mouseOverLogin} onMouseOut={mouseOutLogin}>o</span>\r\n                    <span style={{ transition: 'color 250ms ease-in' }} onMouseOver={mouseOverLogin} onMouseOut={mouseOutLogin}>g</span>\r\n                    <span style={{ transition: 'color 250ms ease-in', marginLeft: '.35rem' }} onMouseOver={mouseOverLogin} onMouseOut={mouseOutLogin}>i</span>\r\n                    <span style={{ transition: 'color 250ms ease-in' }} onMouseOver={mouseOverLogin} onMouseOut={mouseOutLogin}>n</span>\r\n                </button>\r\n        }\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default Login\r\n","import React, { useEffect, useContext } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport HistoryContext from \"../store/contexts/History.context\";\r\n\r\nfunction DelayLink({ to, className, children }) {\r\n  let timeout = null;\r\n  const history = useContext(HistoryContext);\r\n  const location = useLocation();\r\n\r\n  useEffect(_=> _=> timeout && clearTimeout(timeout), [timeout]);\r\n\r\n  const onClick = e => {\r\n    // if trying to navigate to current page stop everything\r\n    if (location && location.pathname === to) return;\r\n    document.getElementById('root').style.opacity = 0;\r\n    if (e.defaultPrevented) { return }\r\n    e.preventDefault();\r\n    timeout = setTimeout(async _=> {\r\n        await history.push(to);\r\n        document.getElementById('root').style.opacity = 1;\r\n    }, 1500);\r\n  };\r\n\r\n  return <Link className={className} to={to} onClick={onClick}>{children}</Link>;\r\n}\r\n\r\nexport default DelayLink;","import React from 'react';\r\nimport DelayLink from './DelayLink';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Footer() {\r\n    return (\r\n        <div className=\"footer\" style={{ position: 'fixed', bottom: 0, left: 0, right: 0 }}>\r\n            <DelayLink\r\n                delay={2000}\r\n                onDelayStart={_=> document.getElementById('pageContainer').style.opacity = 0} to=\"/help\" className=\"link-help\">What is <span className=\"logo\" style={{ fontWeight: 600 }}>Choosie</span>?</DelayLink>\r\n            <div className=\"copyright\" style={{'position': 'absolute', 'bottom': '.85rem', 'right': '1rem', 'color': 'black', 'userSelect': 'none'}}> 2020 Choosie | Nick Barak</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Footer\r\n","export const SEARCH_LAUNCH = 'SEARCH_LAUNCH',\r\n    SEARCH_SUCCESS = 'SEARCH_SUCCESS',\r\n    SEARCH_FAILURE = 'SEARCH_FAILURE';\r\n\r\nconst initialState = {\r\n    loading: false,\r\n    searchValue: null,\r\n    result: [],\r\n    error: null\r\n};\r\n\r\nexport default (state=initialState, { type, payload }) => {\r\n    switch (type) {\r\n        default: return state;\r\n        case SEARCH_LAUNCH:\r\n            return {\r\n                ...state,\r\n                loading: true,\r\n                searchValue: payload\r\n            }\r\n        case SEARCH_SUCCESS:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                result: payload,\r\n                error: null\r\n            }\r\n        case SEARCH_FAILURE:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                result: [],\r\n                error: payload\r\n            }\r\n    }\r\n}","import { SEARCH_LAUNCH, SEARCH_SUCCESS, SEARCH_FAILURE } from \"../reducers/search.reducer\";\r\nimport { server } from '../../APIs';\r\n\r\nexport const createSearchLaunch = payload => ({ type: SEARCH_LAUNCH, payload }),\r\n    createSearchSuccess = payload => ({ type: SEARCH_SUCCESS, payload }),\r\n    createSearchFailure = payload => ({ type: SEARCH_FAILURE, payload });\r\n\r\nexport const search = (username, query, page, movies) => {\r\n    return dispatch => {\r\n        dispatch(createSearchLaunch(query))\r\n        fetch(server+`search?user=${username}&search=${query}&page=${page}${movies ? `&movies=${movies}` : ''}`)\r\n            .then(res => res.json())\r\n            .then(res => {\r\n                dispatch( createSearchSuccess(res) );\r\n            })\r\n            .catch(e => dispatch( createSearchFailure(e) ))\r\n    }\r\n}","import React, { useState, createContext } from 'react';\r\n\r\nexport const UserContext = createContext(null);\r\n\r\nexport const UserProvider = ({ children }) => {\r\n    const [state, setState] = useState(UserContext._currentValue);\r\n    \r\n    return (\r\n        <UserContext.Provider value={[ state, setState ]}>\r\n            {children}\r\n        </UserContext.Provider>\r\n    )\r\n}\r\n\r\nexport default UserContext;","import React, { useContext, useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport Login from './Login';\r\nimport Footer from './Footer';\r\nimport { search } from '../store/actions/search.action';\r\nimport UserContext from '../store/contexts/User.context';\r\nimport HistoryContext from '../store/contexts/History.context';\r\nimport { server } from '../APIs';\r\nimport { transitionPage } from '../Functions';\r\n\r\nfunction Home() {\r\n    const dispatch = useDispatch();\r\n    const history = useContext(HistoryContext);\r\n    const [user] = useContext(UserContext);\r\n\r\n    useEffect(_=> { document.getElementById('root').style.opacity = 1 }, []\r\n    );\r\n\r\n    const onSearch = async e => {\r\n        e.persist();\r\n        e.preventDefault();\r\n        try { \r\n            dispatch( search(user ? user.username : null, e.target.children[0].value, 1) );\r\n            e.target.reset();\r\n            history.push('/search');\r\n        } catch (e) { console.log(e) }\r\n    }\r\n\r\n    function onClick(button, route) {\r\n        user && fetch(`${server}home/${user.username}`, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ button })\r\n        })\r\n            .then(res => !res.ok && console.log('Something went wrong'))\r\n            .catch(e => console.log(e));\r\n        transitionPage(history, route);\r\n    }\r\n    \r\n    return (\r\n        <div className=\"container home\">\r\n            <Login history={history} />\r\n\r\n            <div className=\"frame home-frame\">\r\n                <h1 className=\"logo main-logo\" style={{ userSelect: 'none' }}>Choosie</h1>\r\n                <form onSubmit={onSearch}>\r\n                    <input className=\"search\" type=\"text\" placeholder=\"Search actors, genres, directors\" style={{ margin: '1.5rem 1.5rem'}} />\r\n                </form>\r\n                <ul className=\"button-wrapper\">\r\n                    <li><button className=\"button\" onClick={_=> onClick('my_list', '/my-list')}>My List</button></li>\r\n                    <li><button className=\"button\" onClick={_=> onClick('start', '/query')}>Start</button></li>\r\n                    <li><button className=\"button\" onClick={_=> onClick('popular', '/popular')}>Popular</button></li>\r\n                </ul>\r\n            </div>\r\n            <Footer />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home\r\n","import { ReducerPrototype } from \"./prototype.reducer\";\r\n\r\nexport const MAKE_REQUEST_LAUNCH = 'MAKE_REQUEST_LAUNCH',\r\n    MAKE_REQUEST_SUCCESS = 'MAKE_REQUEST_SUCCESS',\r\n    MAKE_REQUEST_FAILURE = 'MAKE_REQUEST_FAILURE';\r\n\r\nexport default ReducerPrototype(MAKE_REQUEST_LAUNCH, MAKE_REQUEST_SUCCESS, MAKE_REQUEST_FAILURE, undefined, callback => setTimeout(callback, 50))","import { MAKE_REQUEST_LAUNCH, MAKE_REQUEST_SUCCESS, MAKE_REQUEST_FAILURE } from \"../reducers/makeRequest.reducer\";\r\nimport { server } from '../../APIs';\r\n\r\nexport const createMakeRequestLaunch = _=> ({ type: MAKE_REQUEST_LAUNCH }),\r\n    createMakeRequestSuccess = (payload, callback) => ({ type: MAKE_REQUEST_SUCCESS, payload, callback }),\r\n    createMakeRequestFailure = payload => ({ type: MAKE_REQUEST_FAILURE, payload });\r\n\r\nexport const makeRequest = (route, querystring, options={}, callback=_=>{}) => {\r\n    return dispatch => {\r\n        dispatch(createMakeRequestLaunch())\r\n        fetch(server+`${route}${querystring ? querystring : ''}`, {\r\n            ...options,\r\n            mode: 'cors',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n                // 'Accept': 'application/json'\r\n            }\r\n        })\r\n            .then(res => res.json())\r\n            .then(res => {\r\n                dispatch( createMakeRequestSuccess(res, callback) );\r\n            })\r\n            .catch(e => dispatch( createMakeRequestFailure(e) ))\r\n    }\r\n}","import React from 'react';\r\nimport DelayLink from './DelayLink';\r\n\r\nfunction Nav({ withBack, searchValue, page, back, scrollY }) {\r\n\r\n    return (\r\n        <nav>\r\n            <ul>\r\n                <li><DelayLink to=\"/\">Home</DelayLink></li>\r\n                <li><DelayLink to=\"/my-list\">My List</DelayLink></li>\r\n                <li><DelayLink to=\"/popular\">Popular</DelayLink></li>\r\n                {withBack && <li><DelayLink to={{\r\n                    pathname: back,\r\n                    searchValue,\r\n                    page,\r\n                    scrollY\r\n                }}>Back</DelayLink></li>}\r\n            </ul>\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport default Nav\r\n","import React, { useState, useEffect, useContext } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { makeRequest } from '../store/actions/makeRequest.action';\r\nimport Nav from './Nav';\r\nimport { server } from '../APIs';\r\nimport HistoryContext from '../store/contexts/History.context';\r\nimport { updateUser } from '../store/actions/updateUser.action';\r\nimport { transitionPage } from '../Functions';\r\nimport imageAlt from '../img/image-alt.png';\r\n\r\nfunction Movie({ location: { searchValue, page, back, scrollY } }) {\r\n    const history = useContext(HistoryContext);\r\n    const location = useLocation();\r\n    const dispatch = useDispatch();\r\n    const movie = useSelector(store => store.makeRequest.result && store.makeRequest.result[0]);\r\n    const { loading, error } = useSelector(store => store.makeRequest);\r\n    const [saving, setSaving] = useState(false);\r\n    const [unsaving, setUnsaving] = useState(false);\r\n    const [saveError, setSaveError] = useState(null);\r\n    const user = useSelector(store => store.user.result);\r\n\r\n    function saveMovie() {\r\n        setSaving(true);\r\n        fetch(server + `movies?user=${user.username}`, {\r\n            mode: 'cors',\r\n            method: user.save_history.includes(movie.id) ? 'PUT' : 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ movieID: movie.id, inRecent: user.recent_save_history.includes(movie.id) })\r\n        })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    setSaving(false);\r\n                    dispatch( updateUser(user.username) );\r\n                } else setSaveError('Error saving movie')\r\n            })\r\n            .catch(e => setSaveError('Error saving movie'));\r\n    }\r\n\r\n    useEffect(_=> { document.getElementById('root').style.opacity = 1 }, []\r\n    );\r\n\r\n    useEffect(_=> dispatch( makeRequest('movies', '?id=' + location.pathname.split('/movies/')[1]) ), []);\r\n\r\n    useEffect(_=> {\r\n        const controller = new AbortController(),\r\n              { signal } = controller;\r\n        unsaving && (async _=> {\r\n            try {\r\n                let res;\r\n                res = await fetch(server + `movies?user=${user.username}`, {\r\n                    mode: 'cors',\r\n                    signal,\r\n                    method: 'DELETE',\r\n                    headers: { 'Content-Type': 'application/json'/*, 'Accept': 'application/json' */},\r\n                    body: JSON.stringify({ movieID: unsaving })\r\n                });\r\n                !res.ok && setSaveError('Error unsaving movie');\r\n        \r\n                let binsWithMovie = Object.entries(user.bins)\r\n                    .filter(bin => bin[1].includes(String(unsaving)));\r\n                for (let binWithMovie of binsWithMovie) {\r\n                    res = await fetch(server + `users/${user.username}/bins`, {\r\n                        mode: 'cors',\r\n                        signal,\r\n                        method: 'PATCH',\r\n                        headers: { 'Content-Type': 'application/json'/*, 'Accept': 'application/json' */},\r\n                        body: JSON.stringify({ bin: { [binWithMovie[0]]: binWithMovie[1].filter(id => id !== String(unsaving)) } })\r\n                    });\r\n                    !res.ok && setSaveError('Error unsaving movie');\r\n                }\r\n        \r\n                dispatch( updateUser(user.username) );\r\n                setUnsaving(false);\r\n            } catch (e) { e.name === 'AbortError' && console.log('Unsave aborted') }\r\n        })();\r\n\r\n        return _=> controller.abort();\r\n    }, [unsaving])\r\n\r\n    if (!movie) return <div>Error loading movie</div>\r\n\r\n    return (\r\n        <div className=\"movie-page\">\r\n                {loading ? <div>Loading...</div> : error ? <div>Error loading movie</div> : (\r\n            <>\r\n                <Nav withBack searchValue={searchValue} page={page} back={back} scrollY={scrollY} />\r\n                <div className=\"movie-page-main\" style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n                    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', width: '60vw' }}>\r\n                        <picture>\r\n                            <source srcSet={movie.cover_file} />\r\n                            <source srcSet={imageAlt} />\r\n                            <img className=\"image-movie\" alt=\"thumbnail\" type=\"image/gif\" />\r\n                        </picture>\r\n                    <label style={{ fontWeight: 'bold', margin: '1rem 0 .2rem 0' }}>{movie.title}</label>\r\n                    {user\r\n                        ? user.currently_saved.includes(movie.id)\r\n                            ? <button className=\"button-manage-movie\" onClick={_=> {\r\n                                let confirmed = true;\r\n                                if (Object.values(user.bins).reduce((acc, cur) => [...acc, ...cur], []).includes(String(movie.id))) confirmed = window.confirm('This will remove the movie from all bins. Do you still want to unsave it?');\r\n                                confirmed && setUnsaving(movie.id)\r\n                            }}>{unsaving ? 'Unsaving movie...' : 'Unsave Movie'}</button>\r\n                            : <button className=\"button-manage-movie\" onClick={saveMovie}>{saving ? 'Saving movie...' : 'Save to My List'}</button>\r\n                        : <button className=\"button-manage-movie\" onClick={_=> transitionPage(history, '/register')}>Sign in to save this movie</button>}\r\n                        {movie.description && <div className=\"movie-page-description\" style={{ margin: '2.5rem 0 3rem 0', position: 'relative' }}>\r\n                            {movie.description === 'Not available' ? 'Description not available' : movie.description}\r\n                            {movie.description !== 'Not available' && <span className=\"imdb-credit\">-Taken from <a href={movie.src_url} target=\"_blank\" rel=\"noopener noreferrer\">IMDb</a></span>}\r\n                        </div>}\r\n                    </div>\r\n                    <ul className=\"info-movie\">\r\n                        <li>\r\n                            <label>Genres: </label>\r\n                            {movie.genres && <span>{movie.genres.join(', ') || 'Not available'}</span>}\r\n                        </li>\r\n                        <li>\r\n                            <label>Rating: </label>\r\n                            {movie.mpaa_rating && <span>{movie.mpaa_rating || 'Not available'}</span>}\r\n                        </li>\r\n                        <li>\r\n                            <label>Duration: </label>\r\n                            {movie.duration_in_mins\r\n                                ? movie.duration_in_mins % 60\r\n                                    ? movie.duration_in_mins >= 60\r\n                                        ? <span>{Math.floor(movie.duration_in_mins / 60)}h {movie.duration_in_mins % 60}min</span>\r\n                                        : <span>{movie.duration_in_mins} min</span>\r\n                                    : <span>{movie.duration_in_mins % 60}h</span>\r\n                                : 'Not available'}\r\n                        </li>\r\n                        <li>\r\n                            <label>Release Date: </label>\r\n                            {movie.release_date && <span>{movie.release_date.slice(0, 4) || 'Not available'}</span>}\r\n                        </li>\r\n                        <li>\r\n                            <label>Writers: </label>\r\n                            {movie.writers && <span>{movie.writers.join(', ') || 'Not available'}</span>}\r\n                        </li>\r\n                        <li>\r\n                            <label>Directors: </label>\r\n                            {movie.directors && <span>{movie.directors.join(', ') || 'Not available'}</span>}\r\n                        </li>\r\n                        <li>\r\n                            <label>Actors: </label>\r\n                            {movie.actors && <span>{movie.actors.join(', ') || 'Not available'}</span>}\r\n                        </li>\r\n                        <li>\r\n                            <label>Languages: </label>\r\n                            {movie.languages && <span>{movie.languages.join(', ') || 'Not available'}</span>}\r\n                        </li>\r\n                        <li>\r\n                            <label>Countries: </label>\r\n                            {movie.countries && <span>{movie.countries.join(', ') || 'Not available'}</span>}\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </>\r\n            )}\r\n        </div>)\r\n}\r\n\r\nexport default Movie\r\n","import React, { useState, useContext, useEffect } from 'react';\r\nimport { server } from '../APIs';\r\nimport { useDispatch } from 'react-redux';\r\n// import UserContext from '../store/contexts/User.context';\r\nimport HistoryContext from '../store/contexts/History.context';\r\nimport { updateUser } from '../store/actions/updateUser.action';\r\nimport { transitionPage } from '../Functions';\r\n\r\nconst languageOptions = [\r\n    'Afrikaans',       'Bengali',    'Burmese',\r\n    'Cantonese',       'Czech',      'Dutch',\r\n    'English',         'Filipino',   'French',\r\n    'German',          'Hindi',      'Hungarian',\r\n    'Indonesian',      'Italian',    'Japanese',\r\n    'Korean',          'Malay',      'Mandarin',\r\n    'Polish',          'Portuguese', 'Punjabi',\r\n    'Romanian',        'Russian',    'Spanish',\r\n    'Standard Arabic', 'Sundanese',  'Swahili',\r\n    'Swedish',         'Tagalog',    'Tamil',\r\n    'Telugu',          'Thai',       'Turkish',\r\n    'Ukranian',        'Vietnamese'\r\n  ];\r\n\r\nfunction Register() {\r\n    const history = useContext(HistoryContext);\r\n    const [continued, setContinued] = useState(false);\r\n    const [info, setInfo] = useState({});\r\n    const [generalError, setGeneralError] = useState(null);\r\n    const [registrationError, setRegistrationError] = useState(null);\r\n    const [loginError, setLoginError] = useState(null);\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(_=> { document.getElementById('root').style.opacity = 1 }, []\r\n    );\r\n\r\n    function submitMainInfo(e) {\r\n        setRegistrationError(null);\r\n        e.persist();\r\n        e.preventDefault();\r\n        const children = e.target.children[1].children;\r\n        if (children[0].children[0].value.includes(' ')) { setRegistrationError('Username cannot contain a space'); return }\r\n        if (!/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/.exec(children[1].children[0].value)) { setRegistrationError('Password must be at least 8 characters with one of each of the following: upper case letter, lower case letter, number and special character'); return }\r\n        if (children[1].children[0].value !== children[2].children[0].value) { setRegistrationError('Passwords must match'); return }\r\n        (async _=> {\r\n            const response = await fetch(server + 'users/check?user=' + children[0].children[0].value);\r\n            const json = await response.json();\r\n            if (json.length) {\r\n                setRegistrationError('Username not available');\r\n                return;\r\n            }\r\n            setInfo({\r\n                username: children[0].children[0].value,\r\n                password: children[1].children[0].value\r\n            });\r\n            setContinued(true);\r\n            e.target.reset();\r\n        })();\r\n    }\r\n\r\n    function createUser(e) {\r\n        setGeneralError(null);\r\n        setRegistrationError(null);\r\n        e.persist();\r\n        e.preventDefault();\r\n        const children = e.target.children[1].children;\r\n        if (children[2].children[0].value && !/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/.exec(children[2].children[0].value)) { setRegistrationError('Invalid email address'); return }\r\n        fetch(server + 'users', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n                ...info,\r\n                name: children[0].children[0].value ? children[0].children[0].value : null,\r\n                age: children[1].children[0].selectedIndex ? Number(children[1].children[0].options[children[1].children[0].selectedIndex].text) : 0,\r\n                sex: children[1].children[1].selectedIndex ? children[1].children[1].options[children[1].children[1].selectedIndex].text : null,\r\n                languages: children[1].children[2].selectedIndex ? [children[1].children[2].options[children[1].children[2].selectedIndex].text] : null,\r\n                email: children[2].children[0].value ? children[2].children[0].value : null\r\n            })\r\n        })\r\n            .then(res => res.json())\r\n            .then(json => {\r\n                dispatch( updateUser(json.username) );\r\n                transitionPage(history, '/');\r\n            })\r\n            .catch(e => setGeneralError('Something went wrong'));\r\n        e.target.reset();\r\n    }\r\n\r\n    async function onLogin(e) {\r\n        setGeneralError(null);\r\n        setLoginError(null);\r\n        e.persist();\r\n        e.preventDefault();\r\n        const username = e.target.children[1].children[0].children[0].value,\r\n            password = e.target.children[1].children[1].children[0].value;\r\n        if (!username && !password) return;\r\n        try {\r\n            const response = await fetch(server+`users/validate`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    username,\r\n                    password\r\n                })\r\n            });\r\n            const validLogin = await response.json();\r\n            if (!validLogin) {\r\n                setLoginError('Invalid login');\r\n                return\r\n            } else {\r\n                dispatch( updateUser(username) );\r\n                setLoginError(null);\r\n                transitionPage(history, '/');\r\n            }\r\n        } catch (e) { setGeneralError('Something went wrong') }\r\n        e.target.reset();\r\n    }\r\n\r\n    return !continued\r\n        ? (\r\n        <div className=\"container\" style={{ flexDirection: 'column' }}>\r\n            {registrationError && <div style={{color: 'red', margin: '1rem' }}>{registrationError}</div>}\r\n            <form className=\"register-1\" onSubmit={submitMainInfo}>\r\n                <div className=\"prompt-register\">Please enter a username and password</div>\r\n                <ul style={{ display: 'flex', flexDirection: 'column', width: '80%', placeItems: 'center' }}>\r\n                    <li style={{ margin: '.25rem', width: '100%', maxWidth: '25rem' }}>\r\n                        <input className=\"input-register\" type=\"text\" placeholder=\"username\" key=\"username\" />\r\n                    </li>\r\n                    <li style={{ margin: '.25rem', width: '100%', maxWidth: '25rem' }}>\r\n                        <input className=\"input-register\" type=\"password\" placeholder=\"password\" key=\"password\" />\r\n                    </li>\r\n                    <li style={{ margin: '.25rem', width: '100%', maxWidth: '25rem' }}>\r\n                        <input className=\"input-register\" type=\"password\" placeholder=\"repeat password\" />\r\n                    </li>\r\n                </ul>\r\n                <div>\r\n                    <button className=\"button-register\">Continue</button>\r\n                    <button type=\"button\" onClick={_=> transitionPage(history, '/')} className=\"button-register\">Cancel</button>\r\n                </div>\r\n            </form>\r\n            {loginError\r\n                ? <div style={{color: 'red', margin: '1rem' }}>{loginError}</div>\r\n                : generalError && <div style={{ color: 'red' }}>{generalError}</div>\r\n            }\r\n            <form className=\"register-1\" onSubmit={onLogin}>\r\n                <div className=\"prompt-register\">Already have an account? Log in</div>\r\n                <ul style={{ display: 'flex', flexDirection: 'column', width: '80%', placeItems: 'center' }}>\r\n                    <li style={{ margin: '.25rem', width: '100%', maxWidth: '25rem' }}>\r\n                        <input className=\"input-register\" type=\"text\" placeholder=\"username\" />\r\n                    </li>\r\n                    <li style={{ margin: '.25rem', width: '100%', maxWidth: '25rem' }}>\r\n                        <input className=\"input-register\" type=\"password\" placeholder=\"password\" />\r\n                    </li>\r\n                </ul>\r\n                <button className=\"button-register\">Log in</button>\r\n            </form>\r\n        </div>)\r\n        : <div className=\"container\" style={{ flexDirection: 'column' }}>\r\n            {registrationError\r\n                ? <div style={{color: 'red', margin: '1rem'}}>{registrationError}</div>\r\n                : generalError && <div style={{ color: 'red' }}>{generalError}</div>\r\n            }\r\n            <form className=\"register-1\" onSubmit={createUser}>\r\n                <div className=\"prompt-register\">You can enter more information here for a better experience</div>\r\n                <ul>\r\n                    <li style={{margin: '.75rem' }}>\r\n                        <input className=\"input-register\" type=\"text\" placeholder=\"first name\" key=\"name\" />\r\n                    </li>\r\n                    <li  style={{margin: '.75rem' }}className=\"ul-create-user\">\r\n                        <select defaultValue=\"default\">\r\n                            <option key=\"-1\" value=\"default\" disabled>Select an age</option>\r\n                            {new Array(126).fill('').map((el, i) => <option key={i}>{i}</option>)}\r\n                        </select>\r\n                        <select defaultValue=\"default\">\r\n                            <option key=\"0\" value=\"default\" disabled>Select a sex</option>\r\n                            <option key=\"1\" value=\"female\">Female</option>\r\n                            <option key=\"2\" value=\"male\">Male</option>\r\n                            <option key=\"3\" value=\"other\">Other</option>\r\n                        </select>\r\n                        <select defaultValue=\"default\">\r\n                            <option key=\"-1\" value=\"default\" disabled>Select a language</option>\r\n                            {languageOptions.map((language, i) => <option key={i} >{language}</option>)}\r\n                        </select>\r\n                    </li>\r\n                    <li style={{margin: '.75rem' }}>\r\n                        <input className=\"input-register\" type=\"text\" placeholder=\"email\" />\r\n                    </li>\r\n                </ul>\r\n                <div className=\"prompt-register\" style={{ marginTop: '.5rem', marginBottom: '.3rem' }}>You can also edit these fields later</div>\r\n                <div>\r\n                    <button className=\"button-register\" >Sign up</button>\r\n                    <button type=\"button\" className=\"button-register\" onClick={_=> transitionPage(history, '/')}>Cancel</button>\r\n                </div>\r\n            </form>\r\n    </div>\r\n}\r\n\r\nexport default Register\r\n","import React, { useEffect, useRef } from 'react'\r\nimport { Simulate } from 'react-dom/test-utils';\r\n\r\nfunction Toggler({ prompt, defaultChecked, onCheck, onUncheck }) {\r\n    const checkbox = useRef(null);\r\n\r\n    useEffect(_=> {\r\n        if (defaultChecked) {\r\n            checkbox.current.checked = true;\r\n            Simulate.change(checkbox.current);\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div style={{ margin: '.2rem' }}>\r\n            <span>{prompt} </span>\r\n            <label className=\"toggler\">\r\n                <input type=\"checkbox\" ref={checkbox} onChange={e => {\r\n                    let { style } = e.target.parentElement.children[1];\r\n                    if (e.target.checked) {\r\n                        style.backgroundColor = '#2196F3';\r\n                        style.boxShadow = '0 0 1px #2196F3';\r\n                        style.setProperty('--toggler-translation', '12.5px');\r\n                        onCheck && onCheck();\r\n                    } else {\r\n                        style.backgroundColor = '#aaa';\r\n                        style.boxShadow = 'none';\r\n                        style.setProperty('--toggler-translation', 0);\r\n                        onUncheck && onUncheck();\r\n                    }\r\n                }}/>\r\n                <span />\r\n            </label>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Toggler\r\n","import React, { useState, useContext, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useLocation } from 'react-router-dom';\r\n// import UserContext from '../store/contexts/User.context';\r\nimport { makeRequest } from '../store/actions/makeRequest.action';\r\nimport HistoryContext from '../store/contexts/History.context';\r\nimport { updateUser } from '../store/actions/updateUser.action';\r\nimport Toggler from './Toggler';\r\nimport { transitionPage } from '../Functions';\r\n\r\nconst languageOptions = [\r\n    'Afrikaans',       'Bengali',    'Burmese',\r\n    'Cantonese',       'Czech',      'Dutch',\r\n    'English',         'Filipino',   'French',\r\n    'German',          'Hindi',      'Hungarian',\r\n    'Indonesian',      'Italian',    'Japanese',\r\n    'Korean',          'Malay',      'Mandarin',\r\n    'Polish',          'Portuguese', 'Punjabi',\r\n    'Romanian',        'Russian',    'Spanish',\r\n    'Standard Arabic', 'Sundanese',  'Swahili',\r\n    'Swedish',         'Tagalog',    'Tamil',\r\n    'Telugu',          'Thai',       'Turkish',\r\n    'Ukranian',        'Vietnamese'\r\n  ];\r\n\r\nlet mounted;\r\n\r\nfunction Profile() {\r\n    // const [user, setUser] = useContext(UserContext);\r\n    const [editInfoError, setEditInfoError] = useState(null);\r\n    const [editingInfo, setEditingInfo] = useState(false);\r\n    const [changingPassword, setChangingPassword] = useState(false);\r\n    const [changePasswordError, setChangePasswordError] = useState(null);\r\n    const location = useLocation();\r\n    const history = useContext(HistoryContext);\r\n    const dispatch = useDispatch();\r\n    const { error, result, loading } = useSelector(store => store.makeRequest);\r\n    const user = useSelector(store => store.user.result);\r\n    const [clearing, setClearing] = useState(false);\r\n    const [showSaveHistory, setShowSaveHistory] = useState(user && user.show_save_history);\r\n    const [showDescriptionOnHover, setShowDescriptionOnHover] = useState(user && user.show_description_on_hover);\r\n    const [message, setMessage] = useState(null);\r\n\r\n    useEffect(_=> { document.getElementById('root').style.opacity = 1 }, []\r\n    );\r\n\r\n    function editInfo(e, signal) {\r\n        if (e) {\r\n            e.persist();\r\n            e.preventDefault();\r\n            if (e.target.children[3].value && !/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/.exec(e.target.children[3].value)) { setEditInfoError('Invalid email address'); return }\r\n        }\r\n        const children = e && e.target.children,\r\n              editedInfo = {\r\n                name: e ? children[0].value : user.name,\r\n                sex: e ? children[1].children[0].selectedIndex ? children[1].children[0].options[children[1].children[0].selectedIndex].text : user.sex : user.sex,\r\n                age: e ? children[1].children[1].selectedIndex ? Number(children[1].children[1].options[children[1].children[1].selectedIndex].text) : user.age : user.age,\r\n                languages: e ? children[1].children[2].selectedIndex ? [children[1].children[2].options[children[1].children[2].selectedIndex].text] : user.languages : user.languages,\r\n                email: e ? children[2].value : user.email,\r\n                show_save_history: showSaveHistory,\r\n                show_description_on_hover: showDescriptionOnHover,\r\n                recent_save_history: clearing ? [] : user.recent_save_history\r\n        };\r\n        if (e) {\r\n            try {\r\n                new Promise(resolve => dispatch( makeRequest(`users/${user.username}`, '', {\r\n                    signal,\r\n                    method: 'PATCH',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify(editedInfo)\r\n                }) ) || resolve())\r\n                    .then(_=> {\r\n                        dispatch( updateUser(user.username) );\r\n                        setMessage('Info updated successfully');\r\n                        e.target.style.transform = 'scale(0)';\r\n                        e.target.style.maxHeight = 0;\r\n                        e.target.parentElement.parentElement.parentElement.parentElement.children[0].style.transform =\r\n                            e.target.parentElement.parentElement.parentElement.children[2].children[0].children[2].style.maxHeight === '100%'\r\n                                ? 'translate(-6.5rem, 2rem)'\r\n                                : 'translate(0)';\r\n                    });\r\n            } catch (e) { setEditInfoError('Error editing info'); console.log(e) }\r\n        }\r\n    }\r\n\r\n    useEffect(_=> {\r\n        if (!mounted) { mounted = true; return }\r\n        const controller = new AbortController(),\r\n              { signal } = controller;\r\n        editInfo(null, signal);\r\n        return _=> controller.abort();\r\n    }, [clearing, showSaveHistory, showDescriptionOnHover]);\r\n\r\n    useEffect(_=> {\r\n\r\n    }, [editingInfo]);\r\n\r\n    function changePassword(e) {\r\n        e.persist();\r\n        e.preventDefault();\r\n        setChangePasswordError(null);\r\n        const children = e.target.children,\r\n              currentPassword = children[0].value,\r\n              newPassword = children[1].value,\r\n              repeatedNewPassword = children[2].value;\r\n        if (!/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/.exec(newPassword)) { setChangePasswordError('Password must be at least 8 characters with one of each of the following: upper case letter, lower case letter, number and special character'); return }\r\n        if (newPassword !== repeatedNewPassword) { setChangePasswordError('Passwords must match'); return }\r\n        (async _=> {\r\n            await Promise.resolve().then(_=> dispatch( makeRequest(`users/${user.username}`, null, {\r\n                method: 'PUT',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ \r\n                    currentPassword,\r\n                    newPassword\r\n                })\r\n            }) ));\r\n            if (error) {\r\n                setChangePasswordError('Error changing password');\r\n            } else {\r\n                dispatch( updateUser(user.username) );\r\n                e.target.style.transform = 'scale(0)';\r\n                e.target.style.maxHeight = 0;\r\n                e.target.parentElement.parentElement.parentElement.parentElement.children[0].style.transform =\r\n                    e.target.parentElement.parentElement.parentElement.children[0].children[0].children[2].style.maxHeight === '100%'\r\n                        ? 'translate(6rem, 3.5rem)'\r\n                        : 'translate(-6rem, 2rem)';\r\n                e.target.reset();\r\n                setMessage('Password changed successfully');\r\n            }\r\n        })();\r\n    }\r\n\r\n    async function clearInfo(type) {\r\n        const editedInfo = { ...user };\r\n        if (type === 'languages') user.languages = [];\r\n        editedInfo[type] = null;\r\n        await Promise.resolve()\r\n            .then(_=> dispatch( makeRequest(`users/${user.username}`, null, {\r\n            method: 'PATCH',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n                name: editedInfo.name,\r\n                email: editedInfo.email,\r\n                languages: editedInfo.languages,\r\n                age: editedInfo.age,\r\n                sex: editedInfo.sex,\r\n                show_save_history: user.show_save_history,\r\n                show_description_on_hover: user.show_description_on_hover,\r\n                recent_save_history: user.recent_save_history\r\n            })\r\n        }) ));\r\n        dispatch( updateUser(user.username) );\r\n    }\r\n\r\n    return (<div className=\"profile\">{\r\n        user && user.username === location.pathname.split('/profile/')[1]\r\n        ? <div className=\"container\" style={{ flexDirection: 'column' }}>\r\n            <div className=\"register-1\" style={{ transition: 'transform 300ms ease-out'}}>\r\n                <label className=\"prompt-register\">Your info</label>\r\n                <ul className=\"info-list\">\r\n                    <li>\r\n                        <button className=\"button-register\" style={{ visibility: 'hidden' }}>Clear</button>\r\n                        <label>Username: </label>\r\n                        <span>{user.username}</span>\r\n                    </li>\r\n                    <li>\r\n                        <button className=\"button-register\" onClick={_=> clearInfo('name')}>Clear</button>\r\n                        <label>Name: </label>\r\n                        <span>{user.name || 'Not specified'}</span>\r\n                    </li>\r\n                    <li>\r\n                        <button className=\"button-register\" onClick={_=> clearInfo('sex')}>Clear</button>\r\n                        <label>Sex: </label>\r\n                        <span>{user.sex || 'Not specified'}</span>\r\n                    </li>\r\n                    <li>\r\n                        <button className=\"button-register\" onClick={_=> clearInfo('age')}>Clear</button>\r\n                        <label>Age: </label>\r\n                        <span>{user.age || 'Not specified'}</span>\r\n                    </li>\r\n                    <li>\r\n                        <button className=\"button-register\" onClick={_=> clearInfo('languages')}>Clear</button>\r\n                        <label>Language: </label>\r\n                        <span style={{ /* whiteSpace: 'normal' */ }}>{(user.languages != null && user.languages[0] != null) ? user.languages : 'Not specified'}</span>\r\n                    </li>\r\n                    <li>\r\n                        <button className=\"button-register\" onClick={_=> clearInfo('email')}>Clear</button>\r\n                        <label>Email: </label>\r\n                        <span>{user.email || 'Not specified'}</span>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <ul className=\"profile-lower\">\r\n                <li>\r\n                    <div style={{ padding: '1rem' }} className=\"register-1\">\r\n                        <button className=\"button-register\" onClick={e => {\r\n                            e.target.blur();\r\n                            let { style } = e.target.parentElement.children[2],\r\n                            otherOpen = e.target.parentElement.parentElement.parentElement.children[2].children[0].children[2].style.maxHeight === '100%';\r\n                            style.maxHeight =\r\n                            style.maxWidth =\r\n                                style.maxHeight === '100%' ? 0 : '100%';\r\n                                style.transform =\r\n                                    style.transform === 'scale(0)'\r\n                                        ? 'scale(1)'\r\n                                        : 'scale(0)';\r\n                            if (window.innerWidth < 455) return;\r\n                            e.target.parentElement.parentElement.parentElement.parentElement.children[0].style.transform =\r\n                                style.maxHeight === '100%'\r\n                                ? otherOpen\r\n                                    ? 'translate(6rem, 3rem)'\r\n                                    : 'translate(6rem, 5rem)'\r\n                                : otherOpen\r\n                                    ? 'translate(-6.5rem, 2rem)'\r\n                                    : 'translate(0)';\r\n                        }}>Edit Info</button>\r\n                        <div className=\"error-msg\" style={{ color: 'red' }}>{editInfoError}</div>\r\n                        <form onSubmit={editInfo} style={{ transform: 'scale(0)' }}>\r\n                            <input style={{ width: '92.5%', margin: '.35rem' }} className=\"input-register\" placeholder=\"name\" />\r\n                            <div style={{ margin: '.75rem' }} className=\"ul-create-user\">\r\n                                <select style={{ margin: '.35rem' }} defaultValue=\"default\">\r\n                                    <option key=\"0\" value=\"default\" disabled>Select a sex</option>\r\n                                    <option key=\"1\" value=\"female\">Female</option>\r\n                                    <option key=\"2\" value=\"male\">Male</option>\r\n                                    <option key=\"3\" value=\"other\">Other</option>\r\n                                </select>\r\n                                <select style={{ margin: '.35rem' }} defaultValue=\"default\">\r\n                                    <option key=\"-1\" value=\"default\" disabled>Select an age</option>\r\n                                    {new Array(126).fill('').map((el, i) => <option key={i}>{i}</option>)}\r\n                                </select>\r\n                                <select style={{ margin: '.35rem' }} defaultValue=\"default\">\r\n                                    <option key=\"-1\" value=\"default\" disabled>Select a language</option>\r\n                                    {languageOptions.map((lang, i) => <option key={i}>{lang}</option>)}\r\n                                </select>\r\n                            </div>\r\n                            <input style={{ width: '92.5%', margin: '.35rem' }} className=\"input-register\" placeholder=\"email\" />\r\n                            <button className=\"button-register\">Submit</button>\r\n                        </form>\r\n                    </div>\r\n                </li>\r\n                <li>\r\n                    <div style={{ padding: '1rem', fontSize: '1rem', width: '90%' }} className=\"register-1\">\r\n                        <Toggler prompt=\"Show description on hover?\" defaultChecked={showDescriptionOnHover} onCheck={_=> setShowDescriptionOnHover(true)} onUncheck={_=> setShowDescriptionOnHover(false)} />\r\n                        <Toggler className=\"toggler-profile\" prompt=\"Show Save History?\" defaultChecked={showSaveHistory} onCheck={_=> setShowSaveHistory(true)} onUncheck={_=> setShowSaveHistory(false)} />\r\n                        <button className=\"button-register\" onClick={e => {\r\n                            e.target.blur();\r\n                            user.recent_save_history.length && setClearing(true);\r\n                        }}>\r\n                            {user.recent_save_history.length\r\n                                ? clearing\r\n                                    ? 'Clearing...'\r\n                                    : 'Clear Save History'\r\n                                : 'History Cleared'\r\n                            }\r\n                        </button>\r\n                    </div>\r\n                </li>\r\n                <li>\r\n                    <div style={{ padding: '1rem'}} className=\"register-1\">\r\n                        <button className=\"button-register\" onClick={e => {\r\n                            e.target.blur();\r\n                            let { style } = e.target.parentElement.children[2],\r\n                            otherOpen = e.target.parentElement.parentElement.parentElement.children[0].children[0].children[2].style.maxHeight === '100%';;\r\n                            style.maxHeight =\r\n                            style.maxWidth =\r\n                                style.maxHeight === '100%' ? 0 : '100%';\r\n                                style.transform =\r\n                                    style.transform === 'scale(0)'\r\n                                        ? 'scale(1)'\r\n                                        : 'scale(0)';\r\n                            if (window.innerWidth < 455) return;\r\n                            e.target.parentElement.parentElement.parentElement.parentElement.children[0].style.transform =\r\n                                style.maxHeight === '100%'\r\n                                    ? otherOpen\r\n                                        ? 'translate(6rem, 3.5rem)'\r\n                                        : 'translate(-6rem, 2rem)'\r\n                                    : otherOpen\r\n                                        ? 'translate(6rem, 5rem)'\r\n                                        : 'translate(0)';\r\n                        }}>Change Password</button>\r\n                        <div className=\"error-msg\" style={{ color: 'red' }}>{changePasswordError}</div>\r\n                        <form onSubmit={changePassword} style={{ transform: 'scale(0)' }}>\r\n                            <input style={{ width: '92.5%' }} className=\"input-register\" type=\"password\" placeholder=\"Enter current password\" />\r\n                            <input style={{ width: '92.5%' }} className=\"input-register\" type=\"password\" placeholder=\"Enter new password\" />\r\n                            <input style={{ width: '92.5%' }} className=\"input-register\" type=\"password\" placeholder=\"Repeat new password\" />\r\n                            <button className=\"button-register\">Submit</button>\r\n                        </form>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n            {message && <div style={{ color: 'white', margin: '.8rem', padding: '1rem' }}>{message}</div>}\r\n            <button style={{ margin: '1rem', backgroundColor: 'var(--bg-color-dark)', color: 'var(--color-offset)', minHeight: '2.3rem' }} onMouseOver={e => {\r\n                e.target.style.backgroundColor = 'var(--color-offset)';\r\n                e.target.style.color = 'var(--bg-color-dark)';\r\n            }} onFocus={e => {\r\n                e.target.style.backgroundColor = 'var(--color-offset)';\r\n                e.target.style.color = 'var(--bg-color-dark)';\r\n            }} onMouseOut={e => {\r\n                e.target.style.backgroundColor = 'var(--bg-color-dark)';\r\n                e.target.style.color = 'var(--color-offset)';\r\n            }} onBlur={e => {\r\n                e.target.style.backgroundColor = 'var(--bg-color-dark)';\r\n                e.target.style.color = 'var(--color-offset)';\r\n            }} className=\"button\" onClick={_=> transitionPage(history, '/')}>Back to Home</button>\r\n        </div>\r\n        : (\r\n            <>\r\n                <div style={{ margin: '1rem 0 .25rem 1rem' }}>You must be logged in as \"{location.pathname.split('/profile/')[1]}\" to view this page</div>\r\n                <button style={{ marginTop: '.5rem' }} onMouseOver={e => {\r\n                    e.target.style.backgroundColor = 'var(--bg-color-light)';\r\n                    e.target.style.color = 'var(--color-offset)';\r\n                }} onFocus={e => {\r\n                    e.target.style.backgroundColor = 'var(--bg-color-light)';\r\n                    e.target.style.color = 'var(--color-offset)';\r\n                }} onMouseOut={e => {\r\n                    e.target.style.backgroundColor = 'var(--color-offset)';\r\n                    e.target.style.color = 'var(--bg-color-dark)'\r\n                }} onBlur={e => {\r\n                    e.target.style.backgroundColor = 'var(--color-offset)';\r\n                    e.target.style.color = 'var(--bg-color-dark)'\r\n                }} className=\"button\" onClick={_=> transitionPage(history, '/')}>Back to Home</button>\r\n            </>\r\n        )}\r\n    </div>)\r\n}\r\n\r\nexport default Profile\r\n","import React, { useState } from 'react';\r\nimport { server } from '../APIs';\r\nimport { useSelector } from 'react-redux';\r\n\r\nfunction StarRater() {\r\n    const user = useSelector(store => store.user.result);\r\n    const [starRating, setStarRating] = useState(0);\r\n\r\n    function rate(rating) {\r\n        setStarRating(rating);\r\n        try {\r\n            fetch(server + 'search', {\r\n                mode: 'cors',\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json'/*, 'Accept': 'application/json' */ },\r\n                body: JSON.stringify({ rating, username: user ? user.username : null })\r\n            })\r\n        } catch (e) { console.log(e) }\r\n    }\r\n\r\n    return (\r\n        <div className=\"star-rater\">\r\n            <label style={{ marginRight: '.5rem' }}>How would you rate these suggestions?</label>\r\n            <span>\r\n                {[1,2,3,4,5].map(el => starRating >= el\r\n                    ? <i key={el} className=\"fas fa-star\" onClick={_=> rate(el)} style={{ cursor: 'pointer' }} />\r\n                    : <i key={el} className=\"far fa-star\" onClick={_=> rate(el)} style={{ cursor: 'pointer' }} />\r\n                )}\r\n            </span>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default StarRater\r\n","import React, { useState, useEffect, useContext, useRef } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { search } from '../store/actions/search.action';\r\nimport Nav from './Nav';\r\nimport DelayLink from './DelayLink';\r\nimport StarRater from './StarRater';\r\nimport imageAlt from '../img/image-alt.png';\r\n\r\nfunction Search({ location }) {\r\n    const mounted = useRef(0);\r\n    const { loading, searchValue, result } = useSelector(store => store.search);\r\n    const dispatch = useDispatch();\r\n    const [page, setPage] = useState(1);\r\n    const user = useSelector(store => store.user.result);\r\n\r\n    const nextButton1 = useRef(null),\r\n          nextButton2 = useRef(null),\r\n          previousButton1 = useRef(null),\r\n          previousButton2 = useRef(null);\r\n\r\n\r\n    useEffect(_=> {\r\n        !sessionStorage.getItem('searchCache') && sessionStorage.setItem('searchCache', JSON.stringify({ [searchValue]: [[]] }));\r\n    })\r\n    \r\n    useEffect(_=> {\r\n        let cache = JSON.parse(sessionStorage.getItem('searchCache'));\r\n        if (mounted.current && cache[searchValue] && !cache[searchValue][page]) {\r\n            cache[searchValue].push( result.map(movie => movie.id) );\r\n            sessionStorage.setItem('searchCache', JSON.stringify(cache));\r\n        }\r\n    }, [result]);\r\n\r\n    useEffect(_=> { document.getElementById('root').style.opacity = 1 }, []\r\n    );\r\n\r\n    useEffect(_=> {\r\n        if (!mounted.current && location.page > 1) {\r\n            setTimeout(_=> {\r\n                [nextButton1, nextButton2].forEach(btn => btn.current.style.transform = 'translateX(calc(190px - 1rem))');\r\n                [previousButton1, previousButton2].forEach(btn => {\r\n                    btn.current.style.opacity = 1;\r\n                    btn.current.style.pointerEvents = 'auto';\r\n                });\r\n            }, 150);\r\n        }\r\n        // if (!mounted.current && location.withNext)\r\n        !mounted.current && location.page && setPage(location.page);\r\n    }, []);\r\n\r\n    useEffect(_=> {\r\n        if (!location.page || mounted.current++) {\r\n            const cache = sessionStorage.getItem('searchCache')[searchValue] && sessionStorage.getItem('searchCache')[searchValue][page];\r\n            cache\r\n                ? dispatch( search(user ? user.username : null, searchValue, page, cache.join(',')) )\r\n                : dispatch( search(user ? user.username : null, searchValue, page) );\r\n        }\r\n    }, [page]);\r\n\r\n    useEffect(_=> {\r\n        if (result && (result.length < 11) && nextButton1.current) {\r\n            [nextButton1, nextButton2].forEach(btn => {\r\n                btn.current.style.opacity = 0;\r\n                btn.current.style.pointerEvents = 'none';\r\n            });\r\n        } else if (result && nextButton1.current) {\r\n            [nextButton1, nextButton2].forEach(btn => {\r\n                btn.current.style.opacity = 1;\r\n                btn.current.style.pointerEvents = 'auto';\r\n            });\r\n        }\r\n        if (page === 1 && previousButton1.current) {\r\n            [previousButton1, previousButton2].forEach(btn => {\r\n                btn.current.style.opacity = 0;\r\n                btn.current.style.pointerEvents = 'none';\r\n            });\r\n            [nextButton1, nextButton2].forEach(btn => btn.current.style.transform = 'translateX(0)');\r\n        } else if (previousButton1.current) {\r\n            [previousButton1, previousButton2].forEach(btn => {\r\n                btn.current.style.opacity = 1;\r\n                btn.current.style.pointerEvents = 'auto';\r\n            });\r\n        }\r\n        if (page === 2)\r\n            [nextButton1, nextButton2].forEach(btn => btn.current.style.transform = 'translateX(calc(190px - 1rem))');\r\n    }, [result]);\r\n\r\n    function onSearch(e) {\r\n        e.persist();\r\n        e.preventDefault();\r\n        setPage(1);\r\n        if (!e.target.children[0].value) return;\r\n        const cache = sessionStorage.getItem('searchCache')[searchValue] && sessionStorage.getItem('searchCache')[searchValue][page];\r\n        cache\r\n            ? dispatch( search(user ? user.username : null, e.target.children[0].value, page, cache.join(',')) )\r\n            : dispatch( search(user ? user.username : null, e.target.children[0].value, page) );\r\n        e.target.reset();\r\n    }\r\n\r\n    return (\r\n        <div className=\"search-page\">\r\n            <Nav />\r\n            \r\n            <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center' }}>\r\n                <div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center', width: '60vw', marginBottom: '1.5rem' }}>\r\n                    <label style={{ margin: '.4rem 0', fontSize: '1.3rem' }}>\"{searchValue}\"</label>\r\n                    <StarRater />\r\n                    <form onSubmit={onSearch}>\r\n                        <input style={{ marginTop: '.8rem' }} className=\"search\" type=\"text\" placeholder=\"Search actors, genres, directors\" />\r\n                    </form>\r\n                </div>\r\n                <div style={{ visibility: loading || !result.length  ? 'visible' : 'hidden' }}>{\r\n                    mounted && loading\r\n                        ? 'Loading...'\r\n                        : !result.length\r\n                            ? 'No results found'\r\n                            : 'Results Below'\r\n                }</div>\r\n                <div className=\"search-results-container\" style={{ display: result ? 'block' : 'none' }}>\r\n                    <div style={{ posiiton: 'relative', display: 'flex', justifyContent: 'space-between', width: '100%', height: '100%' }}>\r\n                        <button ref={previousButton1} className=\"button-v2\" style={{ pointerEvents: 'none', opacity: 0, transition: 'opacity 550ms ease-in-out' }} onClick={e => {\r\n                            e.target.blur();\r\n                            setPage(page - 1)\r\n                        }}>Previous</button>\r\n                        <button ref={nextButton1} className=\"button-v2\" style={{ opacity: 1, transition: 'opacity 550ms ease-in-out, transform 550ms ease-in-out' }} onClick={e => {\r\n                            e.target.blur();\r\n                            setPage(page + 1);\r\n                        }}>Next</button>\r\n                    </div>\r\n                    {!result.length ? null : <ul className=\"search-results\">\r\n                        {result.slice(0, 10).map((result, i) =>\r\n                            <li key={i}>\r\n                                <DelayLink to={{\r\n                                    pathname: `movies/${result.id}`,\r\n                                    searchValue,\r\n                                    page,\r\n                                    back: '/search'\r\n                                }}>\r\n                                    <picture>\r\n                                        <source srcSet={result.cover_file} />\r\n                                        <source srcSet={imageAlt} />\r\n                                        <img alt=\"thumbnail\" type=\"image/gif\" />\r\n                                    </picture>\r\n                                </DelayLink>\r\n                                <span className=\"search-results-info\">\r\n                                    <DelayLink to={{\r\n                                        pathname: `movies/${result.id}`,\r\n                                        searchValue,\r\n                                        page,\r\n                                        back: '/search'\r\n                                    }}>\r\n                                        <span style={{ color: 'white', position: 'relative', zIndex: '5' }}>\r\n                                            <label>{result.title}</label>\r\n                                            { result.genres && <span> | {result.genres.join(', ')}</span>}\r\n                                            {result.mpaa_rating !== 'Not available' && <span> | {result.mpaa_rating}</span>}\r\n                                            {result.duration_in_mins ? result.duration_in_mins % 60\r\n                                                ? result.duration_in_mins >= 60\r\n                                                    ? <span> | {Math.floor(result.duration_in_mins / 60)}h {result.duration_in_mins % 60} min</span>\r\n                                                    : <span> | {result.duration_in_mins} min</span>\r\n                                                : <span> | {result.duration_in_mins % 60}h</span>\r\n                                            : null}\r\n                                            {result.release_date && <span> | {result.release_date.slice(0, 4)}</span>}\r\n                                        </span>\r\n                                    </DelayLink>\r\n                                </span>\r\n                            </li>\r\n                        )}\r\n                    </ul>}\r\n\r\n                    <div style={{ posiiton: 'relative', display: 'flex', justifyContent: 'space-between', width: '100%', height: '100%', marginBottom: '4rem'}}>\r\n                        <button ref={previousButton2} className=\"button-v2\" style={{ pointerEvents: 'none', opacity: 0, transition: 'opacity 550ms ease-in-out' }} onClick={e => {\r\n                            e.target.blur();\r\n                            setPage(page - 1)\r\n                        }}>Previous</button>\r\n                        <button ref={nextButton2} style={{ transition: 'transform 550ms ease-in-out, opacity 550ms ease-in-out' }} className=\"button-v2\" onClick={e => {\r\n                            e.target.blur();\r\n                            setPage(page + 1)\r\n                        }}>Next</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Search\r\n","import React, { useState, useEffect, useContext, useRef } from 'react';\r\nimport HistoryContext from '../store/contexts/History.context';\r\nimport { transitionPage } from '../Functions';\r\n\r\nconst sections = [\r\n    [{label: 'Overview', content: `Choosie is a service for simplifying movie selection. With Choosie you have a guide to help you find the perfect movie, as well as a tool for organizing your movie-watching activity in the future. Additionally, Choosie lends itself as a resource for viewing information related to any movie in its 100,000 title catalog as well as what is new and popular in the Choosie community. If you can't choose a movie, just use Choosie!`}, {label: 'Start', content: `Selecting the 'Start' button on the home screen will initiate a questionnaire to help you find the kind of movies you're looking for. You will be able to select one or more answers to each question, advancing by selecting the blue button in the bottom right during each phase.`}, {label: 'My List', content: `You can navigate to a personal store of saved movies by selecting 'My List' from the home screen or navigation bar. Here you'll be able to keep track of any movies on your \"to-watch\" list and any others you don't want to forget about. You can create multiple 'bins' to store related movies and label them to your preference in order to manage your collection more easily.`}, {label: 'Popular', content: `In 'Popular' you can view movies that are currently trending, were released recently, or have been saved by many other users on both a short- and long-term basis.`}],\r\n    [{label: 'About Me', content: `My name is Nick Barak and I'm a self-taught developer. I recently graduated from the University of California, Santa Barbara with a degree in Economics & Accounting and am currently pursuing a career in software engineering. Choosie is my first major project and I am happy to have been able to utilize a lot of the things that I have learned since I started learning to code in the creation of this application. This project is the first of many to come.`}, {label: 'Contact', content: `You can contact me by email at nicholasjbarak@gmail.com. I am always looking for feedback for improvement so don't hesitate to send me suggestions or complaints.`}]\r\n], slogan = `Choosie is the solution for those without problems.`;\r\n\r\nfunction Help() {\r\n    const history = useContext(HistoryContext);\r\n    const frame = useRef(null);\r\n    const frame2 = useRef(null);\r\n\r\n    useEffect(_=> { document.getElementById('root').style.opacity = 1 }, []\r\n    );\r\n\r\n    const [state, setState] = useState({\r\n        more: false,\r\n        sections: sections[0]\r\n    });\r\n\r\n    useEffect(_=> setState({...state, sections: sections[state.more ? 1 : 0]}), [state.more]);\r\n\r\n    return (\r\n        <div className=\"container transition-frame help-container\" ref={frame}>\r\n            <div className=\"help\">\r\n                <h2>What is <span style={{ fontWeight: 600 }} className=\"logo\">Choosie</span>?</h2>\r\n                <article style={{ width: '100%' }}>\r\n                    <br />\r\n                    <div style={{ fontWeight: 'bold' }}>{slogan}</div>\r\n                    <br />\r\n                    <div>\r\n                        {state.sections.map((section, i) =>\r\n                            <section key={i}>\r\n                                <label>{section.label}</label>\r\n                                <div>{section.content}</div>\r\n                            </section>\r\n                        )}\r\n                    </div>\r\n                </article>\r\n                <div style={{ position: 'relative', display: 'flex', width: '100%' }}>\r\n                    <button className=\"button-v2\"  onClick={_=> transitionPage(history, '/')}>Back to Home</button>\r\n                    <button style={{ right: 0, left: 'auto'}} className=\"button-v2\" onClick={_=> {\r\n                        frame.current.style.opacity = 0;\r\n                        setTimeout(_=> {\r\n                            setState({...state, more: !state.more});\r\n                            history.push('/help');\r\n                            frame.current.style.opacity = 1;\r\n                        }, 750);\r\n                    }}>{state.more ? 'Previous' : 'More'}</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Help\r\n","import React, { useState, useReducer } from 'react';\r\n\r\nconst ageRatings = ['G', 'PG', 'PG-13', 'TV-14', 'R/TV-MA', 'NR'],\r\n      durations = ['30min', '1h', '1h 30min', '2h', '2h 30min', '3h'],\r\n      genres = ['Action', 'Comedy', 'Drama', 'Thriller', 'Family', 'Fantasy', 'Animation'],\r\n    //   saveDates = ['2 days ago', '1 week ago', '2 weeks ago', '3 weeks ago', '1 month ago', '2 months ago', '3 months ago', '6 months ago', '1 year ago'],\r\n      releaseDates = ['1920', '1930', '1940', '1950', '1960', '1970', '1980', '1990', '2000', '2010', '2020'],\r\n      filterOptionsInit = [ [ [ 'init', 'init', 'higher' ], [ ...ageRatings ] ] ];\r\n\r\nfunction Filter({ displayList, dispatchDisplayList }) {\r\n    const [filterOptions, dispatchFilterOptions] = useReducer(filterOptionsReducer, JSON.parse( JSON.stringify(filterOptionsInit) ));\r\n    const [filterID, setFilterID] = useState(0);\r\n\r\n    const makeFilter = id => (\r\n        <span>\r\n            <select defaultValue={filterOptions[id][0][0]}\r\n                onChange={e => {\r\n                    dispatchFilterOptions({\r\n                    type: e.target.options[e.target.selectedIndex].text,\r\n                    payload: { id, select: 0 }\r\n                });\r\n                dispatchFilterOptions({\r\n                    type: \"init\",\r\n                    payload: { id, select: 1 }\r\n                });\r\n                if (e.target.parentElement.children.length > 1) {\r\n                    e.target.parentElement.children[1].selectedIndex = 0;\r\n                    e.target.parentElement.children[2].children[0].children[0].checked = true;\r\n                }\r\n            }}>\r\n                <option key=\"-1\" value=\"init\" disabled>Select an option</option>\r\n                <option key=\"0\" value=\"Age Rating\">Age Rating</option>\r\n                <option key=\"1\" value=\"Duration\">Duration</option>\r\n                <option key=\"2\" value=\"Genre\">Genre</option>\r\n                {/* <option key=\"3\" value=\"Date Saved\">Date Saved</option> */}\r\n                <option key=\"4\" value=\"Release Date\">Release Date</option>\r\n            </select>\r\n            {filterOptions[id][0][0] !== 'init' && (\r\n            <>\r\n                <select style={{ marginLeft: '.35rem' }} defaultValue={filterOptions[id][0][1]}\r\n                    onChange={e => {\r\n                        dispatchFilterOptions({\r\n                        type: e.target.options[e.target.selectedIndex].text,\r\n                        payload: { id, select: 1 }\r\n                    });\r\n                    dispatchDisplayList( deriveFilterValues(e.target.parentElement.parentElement.parentElement) );\r\n                }}>\r\n                    <option key=\"-1\" value=\"init\" disabled>Select an option</option>\r\n                    {filterOptions[id][1].map((option, i) => <option key={i} value={option}>{option}</option>)}\r\n                </select>\r\n                <span>\r\n                    <label style={{ marginLeft: '.35rem' }}><input style={{ margin: '.5' }} type=\"radio\" name={`filterByRadio_${id}`} value=\"higher\" defaultChecked={filterOptions[id][0][2] === 'higher' ? true : false} onChange={e => {\r\n                        dispatchFilterOptions({ type: 'higher', payload: { id, select: 2 }});\r\n                        dispatchDisplayList( deriveFilterValues(e.target.parentElement.parentElement.parentElement.parentElement.parentElement) );\r\n                    }} />higher/later</label>\r\n                    <label style={{ marginLeft: '.35rem' }}><input style={{ margin: '.5' }} type=\"radio\" name={`filterByRadio_${id}`} value=\"lower\" defaultChecked={filterOptions[id][0][2] === 'lower' ? true : false} onChange={e => {\r\n                        dispatchFilterOptions({ type: 'lower', payload: { id, select: 2 }});\r\n                        dispatchDisplayList( deriveFilterValues(e.target.parentElement.parentElement.parentElement.parentElement.parentElement) );\r\n                    }} />lower/earlier</label>\r\n                    <label style={{ marginLeft: '.35rem' }}><input style={{ margin: '.5' }} type=\"radio\" name={`filterByRadio_${id}`} value=\"exact\" defaultChecked={filterOptions[id][0][2] === 'exact' ? true : false} onChange={e => {\r\n                        dispatchFilterOptions({ type: 'exact', payload: { id, select: 2 }});\r\n                        dispatchDisplayList( deriveFilterValues(e.target.parentElement.parentElement.parentElement.parentElement.parentElement) );\r\n                    }} />exact</label>\r\n                </span>\r\n            </>\r\n            )}\r\n        </span>\r\n    );\r\n\r\n    function filterOptionsReducer(state, { type, payload }) {\r\n        let newState = [ ...state ];\r\n        if (type === 'Clear Filters') return JSON.parse( JSON.stringify(filterOptionsInit) );\r\n        if (type !== 'New Filter') newState[payload.id][0].splice(payload.select, 1, type);\r\n\r\n        switch (type) {\r\n            default: break;\r\n            case 'Age Rating':\r\n                newState[payload.id][1].splice(0, state[payload.id][1].length, ...ageRatings);\r\n                break;\r\n            case 'Duration':\r\n                newState[payload.id][1].splice(0, state[payload.id][1].length, ...durations);\r\n                break;\r\n            case 'Genre':\r\n                newState[payload.id][1].splice(0, state[payload.id][1].length, ...genres);\r\n                break;\r\n            // case 'Date Saved':\r\n            //     newState[payload.id][1].splice(0, state[payload.id][1].length, ...saveDates);\r\n            //     break;\r\n            case 'Release Date':\r\n                newState[payload.id][1].splice(0, state[payload.id][1].length, ...releaseDates);\r\n                break;\r\n            case 'New Filter':\r\n                newState.push(JSON.parse( JSON.stringify(filterOptionsInit[0]) ));\r\n                break;\r\n        }\r\n        return newState;\r\n    }\r\n\r\n    const deriveFilterValues = ul => Array.from(ul.children, li => {\r\n        const children = li.children[0].children;\r\n        if (!children[1]) return null;\r\n        const type = children[0].options[children[0].selectedIndex].text,\r\n            payload = {\r\n                value: children[1].options[children[1].selectedIndex].text,\r\n                range: Array.from(children[2].children).find(child => child.children[0].checked).children[0].value\r\n            };\r\n        return ({ type, payload });\r\n    }).filter(filter => filter);\r\n\r\n    return (\r\n        <form className=\"filter\" onSubmit={e => {\r\n            e.persist();\r\n            e.preventDefault();\r\n            dispatchFilterOptions({ type: 'Clear Filters' });\r\n            dispatchDisplayList(null);\r\n            setFilterID(0);\r\n            e.target.reset();\r\n        }} style={{ marginBottom: '2rem' }}>\r\n            <label>Filter by: </label>\r\n            <ul style={{ margin: '.7rem 1.5rem' }}>\r\n                <li key=\"0\">\r\n                    {makeFilter(0)}\r\n                    {filterID === 0 && filterOptions[0][0][0] !== 'init' && <button className=\"button-filter\" type=\"button\" onClick={e => {\r\n                        dispatchFilterOptions({ type: 'New Filter' });\r\n                        setFilterID(filterID + 1);\r\n                    }}>+</button>}\r\n                </li>\r\n                {filterID > 1 && new Array(filterID-1).fill(null).map((filter, i) => <li key={i+1}>{makeFilter(i+1)}</li>)}\r\n                {filterID > 0 &&\r\n                    <li key={filterID}>\r\n                        {makeFilter(filterID)}\r\n                        {filterOptions[filterID][0][0] !== 'init' && <button className=\"button-filter\" type=\"button\" onClick={e => {\r\n                            dispatchFilterOptions({ type: 'New Filter' });\r\n                            setFilterID(filterID + 1);\r\n                        }}> + </button>}\r\n                    </li>\r\n                }\r\n            </ul>\r\n            <button style={{ backgroundColor: 'transparent', border: 'none', color: 'white' }} onMouseOver={e => {\r\n                e.target.style.color = 'red';\r\n                e.target.style.cursor = 'pointer';\r\n            }} onMouseOut={e => e.target.style.color = 'white'}>Reset</button>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default Filter\r\n","import React, { useState, useReducer, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { server } from '../APIs';\r\nimport { updateUser } from '../store/actions/updateUser.action';\r\nimport { makeRequest } from '../store/actions/makeRequest.action';\r\nimport Filter from './Filter';\r\nimport imageAlt from '../img/image-alt.png';\r\nimport DelayLink from './DelayLink';\r\n\r\nfunction MovieList({ movies, heading, headingMargin, withFilter, displaying, lowerMargin, locationdetails }) {\r\n    const [displayList, dispatchDisplayList] = useReducer(displayListReducer, movies);\r\n    const [unsaving, setUnsaving] = useState(false);\r\n    const [saveError, setSaveError] = useState(null);\r\n    const [removingFromHistory, setRemovingFromHistory] = useState(false);\r\n    const [removingFromHistoryError, setRemovingFromHistoryError] = useState(null);\r\n    const [removingFromBin, setRemovingFromBin] = useState(false);\r\n    const [removingFromBinError, setRemovingFromBinError] = useState(null);\r\n    const user = useSelector(store => store.user.result);\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(_=> {\r\n        dispatchDisplayList();\r\n    }, [movies]);\r\n\r\n    useEffect(_=> {\r\n        const controller = new AbortController(),\r\n                { signal } = controller;\r\n\r\n            removingFromBin && (async _=> {\r\n                try {\r\n                    let res = await fetch(server + `users/${user.username}/bins`, {\r\n                        mode: 'cors',\r\n                        signal,\r\n                        method: 'PATCH',\r\n                        headers: { 'Content-Type': 'application/json'/*, 'Accept': 'application/json' */},\r\n                        body: JSON.stringify({ bin: { [displaying]: user.bins[displaying].filter(id => id !== String(removingFromBin)) } })\r\n                    });\r\n                    !res.ok && setSaveError('Error removing movie from bin');\r\n        \r\n                dispatch( updateUser(user.username) );\r\n                dispatch( makeRequest(`movies/list`, `?movies=${user.bins[displaying].filter(id => id !== String(removingFromBin))}`) );\r\n                } catch (e) { e.name === 'AbortError' && console.log('Removal from bin aborted') }\r\n            })();\r\n\r\n            unsaving && (async _=> {\r\n                try {\r\n                    let res;\r\n                    res = await fetch(server + `movies?user=${user.username}`, {\r\n                        mode: 'cors',\r\n                        signal,\r\n                        method: 'DELETE',\r\n                        headers: { 'Content-Type': 'application/json'/*, 'Accept': 'application/json' */},\r\n                        body: JSON.stringify({ movieID: unsaving })\r\n                    });\r\n                    !res.ok && setSaveError('Error unsaving movie');\r\n            \r\n                    let binsWithMovie = Object.entries(user.bins)\r\n                        .filter(bin => bin[1].includes(String(unsaving)));\r\n                    for (let binWithMovie of binsWithMovie) {\r\n                        res = await fetch(server + `users/${user.username}/bins`, {\r\n                            mode: 'cors',\r\n                            signal,\r\n                            method: 'PATCH',\r\n                            headers: { 'Content-Type': 'application/json'/*, 'Accept': 'application/json' */},\r\n                            body: JSON.stringify({ bin: { [binWithMovie[0]]: binWithMovie[1].filter(id => id !== String(unsaving)) } })\r\n                        });\r\n                        !res.ok && setSaveError('Error unsaving movie');\r\n                    }\r\n            \r\n                    dispatch( updateUser(user.username) );\r\n                    dispatch( makeRequest(`movies/list`,\r\n                        `?movies=${displaying === 'Currently Saved'\r\n                            ? user.currently_saved.filter(id => id !== unsaving)\r\n                            : user.bins[displaying].filter(id => id !== String(unsaving))}`\r\n                        )\r\n                    );\r\n                } catch (e) { e.name === 'AbortError' && console.log('Unsave aborted') }\r\n            })();\r\n\r\n            removingFromHistory && (async _=> {\r\n                try {\r\n                    let res;\r\n                    res = await fetch(server + `users/${user.username}`, {\r\n                        mode: 'cors',\r\n                        signal,\r\n                        method: 'PATCH',\r\n                        headers: { 'Content-Type': 'application/json'/*, 'Accept': 'application/json' */},\r\n                        body: JSON.stringify({\r\n                            name: user.name,\r\n                            sex: user.sex,\r\n                            age: user.age,\r\n                            languages: user.languages,\r\n                            country: user.country,\r\n                            email: user.email,\r\n                            show_save_history: user.show_save_history,\r\n                            recent_save_history: user.recent_save_history.filter(id => id !== removingFromHistory)\r\n                        })\r\n                    });\r\n                    !res.ok && setRemovingFromHistoryError('Error removing movie from save history')\r\n\r\n                    dispatch( updateUser(user.username) );\r\n                    dispatch( makeRequest(`movies/list`, `?movies=` + user.recent_save_history.filter(id => id !== removingFromHistory)) );\r\n                } catch (e) { e.name === 'AbortError' && console.log('Removal from history aborted') }\r\n            })();\r\n\r\n        if (unsaving || removingFromBin || removingFromHistory) return _=> controller.abort();\r\n    }, [unsaving, removingFromBin, removingFromHistory])\r\n    \r\n\r\n    function displayListReducer(state, filters) {\r\n        if (!movies) return state;\r\n        const newState = [ ...movies ];\r\n        if (!filters) return newState;\r\n        for (let { type, payload: { value, range } } of filters) {\r\n            let ratings, duration;\r\n            switch (type) {\r\n                default: break;\r\n                case 'Age Rating':\r\n                    if (range === 'exact') {\r\n                        newState.splice(0, newState.length, ...newState.filter(movie => movie.mpaa_rating === value));\r\n                        break;\r\n                    }\r\n                    switch (value) {\r\n                        default: return state;\r\n                        case 'G':\r\n                            ratings = range === 'higher' ? null : ['G'];\r\n                            break;\r\n                        case 'PG':\r\n                            ratings = range === 'higher' ? ['PG', 'PG-13', 'TV-14', 'R', 'TV-MA', 'NR'] : ['G', 'PG'];\r\n                            break;\r\n                        case 'PG-13':\r\n                            ratings = range === 'higher' ? ['PG-13', 'TV-14', 'R', 'TV-MA', 'NR'] : ['G', 'PG', 'PG-13'];\r\n                            break;\r\n                        case 'TV-14':\r\n                            ratings = range === 'higher' ? ['TV-14', 'R', 'TV-MA', 'NR'] : ['G', 'PG', 'PG-13', 'TV-14'];\r\n                            break;\r\n                        case 'R/TV-MA':\r\n                            ratings = range === 'higher' ? ['R', 'TV-MA', 'NR'] : ['G', 'PG', 'PG-13', 'TV-14', 'R', 'TV-MA'];\r\n                            break;\r\n                        case 'NR':\r\n                            ratings = range === 'higher' ? ['NR'] : null;\r\n                            break;\r\n                    }\r\n                    newState.splice(0, newState.length, ...newState.filter(movie => ratings ? ratings.includes(movie.mpaa_rating) : movies));\r\n                    break;\r\n                case 'Duration':\r\n                    switch (value) {\r\n                        default: break;\r\n                        case '30min': duration = 30; break;\r\n                        case '1h': duration = 60; break;\r\n                        case '1h 30min': duration = 90; break;\r\n                        case '2h': duration = 120; break;\r\n                        case '2h 30min': duration = 150; break;\r\n                        case '3h': duration = 180; break;\r\n                    }\r\n                    if (range === 'exact') {\r\n                        newState.splice(0, newState.length, ...newState.filter(movie => movie.duration_in_mins === duration));\r\n                        break;\r\n                    }\r\n                    newState.splice(0, newState.length, ...newState.filter(movie => range === 'higher' ? movie.duration_in_mins - duration >= 0 : movie.duration_in_mins - duration <= 0));\r\n                    break;\r\n                case 'Genre':\r\n                    newState.splice(0, newState.length, ...newState.filter(movie => movie.genres.filter(genre => value.includes(genre)).length));\r\n                    break;\r\n                case 'Date Saved':\r\n                    break;\r\n                case 'Release Date':\r\n                    if (range === 'exact') {\r\n                        newState.splice(0, newState.length, ...newState.filter(movie => movie.release_date && Number(value) === Number(movie.release_date.slice(0, 4))));\r\n                        break;\r\n                    }\r\n                    newState.splice(0, newState.length, ...newState.filter(movie => {\r\n                        const year = movie.release_date && Number(movie.release_date.slice(0, 4));\r\n                        return range === 'higher' ? year >= Number(value) : year <= Number(value);\r\n                    }));\r\n                    break;\r\n            }\r\n        }\r\n        return newState;\r\n    }\r\n\r\n    return (\r\n        <div className=\"movie-list\" style={{ flex: 4, marginBottom: lowerMargin || '11rem' }}>\r\n            <h2 className=\"movie-list-heading\" style={{ textAlign: 'center', marginBottom: headingMargin }}>{heading}</h2>\r\n            {withFilter && <Filter displayList={displayList} dispatchDisplayList={dispatchDisplayList} />}\r\n            <ul id=\"display-row\">\r\n                {displayList.map((movie, i) =>\r\n                    <li key={i}>\r\n                        <DelayLink to={locationdetails\r\n                            ? {\r\n                                pathname: `movies/${movie.id}`,\r\n                                searchValue: locationdetails.searchValue,\r\n                                page: locationdetails.page,\r\n                                back: locationdetails.back,\r\n                                scrollY: locationdetails.scrollY\r\n                            }\r\n                            : `movies/${movie.id}`\r\n                        }>\r\n                            <picture>\r\n                                <source srcSet={movie.cover_file} />\r\n                                <source srcSet={imageAlt} />\r\n                                <img alt=\"thumbnail\" type=\"image/gif\" onDrag={e => {\r\n                                e.preventDefault();\r\n                                e.dataTransfer.setData('text/plain', movie.id);\r\n                                }} />\r\n                            </picture>\r\n                        </DelayLink>\r\n                        <div className=\"display-row-movie-title\" style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n                            <DelayLink to={locationdetails\r\n                                ? {\r\n                                    pathname: `movies/${movie.id}`,\r\n                                    searchValue: locationdetails.searchValue,\r\n                                    page: locationdetails.page,\r\n                                    back: locationdetails.back,\r\n                                    scrollY: locationdetails.scrollY\r\n                                }\r\n                                : `movies/${movie.id}`\r\n                            } tabIndex=\"-1\">\r\n                                <label>{movie.title}</label>\r\n                            </DelayLink>\r\n                            {displaying === 'Save History'\r\n                                ? <button className=\"button-manage-movie\" onClick={_=> setRemovingFromHistory(movie.id)}>{removingFromHistory ? 'Removing...' : 'Remove'}</button>\r\n                                : displaying !== 'Popular'\r\n                                    ? displaying === 'Currently Saved'\r\n                                        ? <button className=\"button-manage-movie\" onClick={_=> {\r\n                                            let confirmed = true;\r\n                                            if (Object.values(user.bins).reduce((acc, cur) => [...acc, ...cur], []).includes(String(movie.id))) confirmed = window.confirm('This will remove the movie from all bins. Do you still want to unsave it?');\r\n                                            confirmed && setUnsaving(movie.id)\r\n                                        }}>{unsaving ? 'Unsaving...' : 'Unsave'}</button>\r\n                                        : displaying === 'Query'\r\n                                            ? null\r\n                                            : <span>\r\n                                            <button className=\"button-manage-movie\" onClick={_=> {\r\n                                                let confirmed = true;\r\n                                                if (Object.entries(user.bins).reduce((acc, [key, val]) => key !== displaying ? [ ...acc, ...val ]  : acc, []).includes(String(movie.id))) confirmed = window.confirm('This will remove the movie from other bins. Do you still want to unsave it?');\r\n                                                confirmed && setUnsaving(movie.id);\r\n                                            }}>{unsaving ? 'Unsaving...' : 'Unsave'}</button>\r\n                                            <button className=\"button-manage-movie\" onClick={_=> setRemovingFromBin(movie.id)} style={{ marginLeft: '.25rem' }}>Take Out</button>\r\n                                        </span>\r\n                                    : null\r\n                            }\r\n                        </div>\r\n                        {(!user || user.show_description_on_hover) && <div className=\"movie-description\">\r\n                            {(!movie.description || movie.description === 'Not available')\r\n                                ? 'Description not available'\r\n                                : movie.description.length > (window.outerWith > 450 ? 200 : 125)\r\n                                    ? movie.description.slice(0, window.innerWidth > 450 ? 200 : 125) + '...'\r\n                                    : movie.description}\r\n                        </div>}\r\n                    </li>)}\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MovieList\r\n","import { ReducerPrototype } from \"./prototype.reducer\";\r\n\r\nexport const QUERY_LAUNCH = 'QUERY_LAUNCH',\r\n      QUERY_SUCCESS = 'QUERY_SUCCESS',\r\n      QUERY_FAILURE = 'QUERY_FAILURE';\r\n\r\nexport default ReducerPrototype(QUERY_LAUNCH, QUERY_SUCCESS, QUERY_FAILURE)","export function ActionPrototype(LAUNCH_TYPE, SUCCESS_TYPE, FAILURE_TYPE, url, options={}) {\r\n    return (...params) => {\r\n        params.forEach((param, i) => { url = url.replace(`!{${i+1}}!`, param) });\r\n        return dispatch => {\r\n            dispatch({ type: LAUNCH_TYPE });\r\n            fetch(url, options)\r\n                .then(res => res.json())\r\n                .then(payload => {\r\n                    dispatch({ type: SUCCESS_TYPE, payload });\r\n                })\r\n                .catch(payload => dispatch({ type: FAILURE_TYPE, payload }));\r\n        }\r\n    }\r\n}","import { server } from '../../APIs';\r\nimport { QUERY_LAUNCH, QUERY_SUCCESS, QUERY_FAILURE } from '../reducers/query.reducer';\r\nimport { ActionPrototype } from './prototype.action';\r\n\r\nexport const query = ActionPrototype(QUERY_LAUNCH, QUERY_SUCCESS, QUERY_FAILURE, server+`query`)","import React, { useState, useRef, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport Nav from './Nav';\r\nimport MovieList from './MovieList';\r\nimport { makeRequest } from '../store/actions/makeRequest.action';\r\nimport StarRater from './StarRater';\r\nimport { query } from '../store/actions/query.action';\r\nimport { server } from '../APIs';\r\nimport { slideDisplayRow } from '../Functions';\r\nimport { uuid } from 'uuidv4';\r\n\r\nclass QueryContent {\r\n    constructor(prompt, buttonSet, nextButton) {\r\n        this.prompt = prompt;\r\n        this.buttonSet = [ ...buttonSet];\r\n        this.nextButton = nextButton;\r\n    }\r\n}\r\n\r\nconst phases = [\r\n    new QueryContent('Feeling a particular genre?', [ ['Action', 'Comedy', 'Drama', 'Thriller'] ], 'Show More'),\r\n    new QueryContent('You can select more than one if you want', [ ['Romance', 'Sci-Fi', 'Fantasy', 'Family', ''], ['Mystery', 'Documentary', 'Sport', 'Western'], ['Animation', 'Adventure', 'Superhero', 'War', ''], ['Crime', 'Musical', 'Biography', 'Horror'], ['Action', 'Comedy', 'Drama', 'Thriller'] ], 'Next'),\r\n    new QueryContent('Want to apply any time constraints?', [ [{'60': '1 hour'}, {'120': '2 hours'}, {'150': '2.5 hours'}] ], 'None'),\r\n    new QueryContent('Time periods preferred?', [ ['1970s', '1980s', 'Earlier', 'Any'], ['1990s', '2000s', 'Later'] ], 'Next')\r\n]\r\n\r\nconst phase3MobileButtonSet = ['Earlier', '1970s', '1980s', '1990s', '2000s', 'Later', 'Any'];\r\n\r\nfunction Query({ location }) {\r\n    const user = useSelector(store => store.user.result);\r\n    const [phase, setPhase] = useState(0);\r\n    const { prompt, buttonSet, nextButton } = phase < 4 && phases[phase];\r\n    const answers = useRef([[]]);\r\n    const { loading, error, result } = useSelector(store => store.makeRequest);\r\n    const [set, setSet] = useState(1);\r\n    const dispatch = useDispatch();\r\n    const mainNextButton = useRef(null);\r\n    const mainNextButton2 = useRef(null);\r\n    const mainPrevButton = useRef(null);\r\n    const mainPrevButton2 = useRef(null);\r\n    const [movies, setMovies] = useState([]);\r\n    const frame = useRef(null);\r\n    const frame2 = useRef(null);\r\n    const mounted = useRef(false);\r\n\r\n    useEffect(_=> { document.getElementById('root').style.opacity = 1 }, []\r\n    );\r\n\r\n    useEffect(_=> {\r\n        if (location.searchValue) {\r\n            answers.current = location.searchValue;\r\n            setPhase(4);\r\n            setSet(location.page);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(_=> {\r\n        if (phase > 3) {\r\n            const genres = answers.current[0].length\r\n                ? `&genres=${answers.current[0]}`\r\n                : '',\r\n            timeConstraint = answers.current[1].length\r\n                ? answers.current[1][0] !== 'none' && `&timeConstraint=${answers.current[1]}`\r\n                : '',\r\n            timePeriods =\r\n                (answers.current[2].length && !answers.current[2].includes('Any'))\r\n                    ? `&timePeriods=${answers.current[2]}`\r\n                    : '';\r\n        \r\n            document.getElementsByClassName('transition-frame')[0].style.opacity = 1;\r\n            setTimeout(_=> dispatch( makeRequest(`start`, (genres || timeConstraint || timePeriods) && '?set=' + set + genres + timeConstraint + timePeriods, {}, slideDisplayRow(200, null, 3)) ), 300);\r\n            if (!mounted.current && location.page > 1) {\r\n                setTimeout(_=> {\r\n                    [mainNextButton, mainNextButton2].forEach(btn => {\r\n                        if (btn.current) btn.current.style.transform = 'translateX(calc(190px - 1rem))'\r\n                    });\r\n                    [mainPrevButton, mainPrevButton2].forEach(btn => {\r\n                        if (btn.current) {\r\n                            btn.current.style.opacity = 1;\r\n                            btn.current.style.pointerEvents = 'auto';\r\n                        }\r\n                    });\r\n                }, 200);\r\n                mounted.current = true;\r\n            }\r\n        } else if (phase > 1) answers.current.push([]);\r\n    }, [phase, set]);\r\n\r\n    useEffect(_=> {\r\n        setMovies(result);\r\n    }, [result]);\r\n\r\n    function manageFilters(e) {\r\n        e.preventDefault();\r\n        let { style } = e.target;\r\n        let index = phase ? phase - 1 : phase;\r\n        if (phase === 2) {\r\n            e.target.style.backgroundColor = 'var(--color-offset)';\r\n            e.target.style.color = 'var(--bg-color-dark)';\r\n            answers.current[1] = [e.target.value];\r\n            frame.current.style.opacity = 0;\r\n            setTimeout(_=> {\r\n                setPhase(phase + 1);\r\n                frame.current.style.opacity = 1;\r\n            }, 750);\r\n            return;\r\n        }\r\n        if (answers.current[index].includes(e.target.textContent)) {\r\n            answers.current[index] = answers.current[index].filter(filter => index === 1 ? filter !== e.target.value: filter !== e.target.textContent);\r\n            style.backgroundColor = 'var(--color-offset)';\r\n            style.color = 'var(--bg-color-dark)';\r\n        } else {\r\n            style.backgroundColor = 'var(--bg-color-dark)';\r\n            style.color = 'var(--color-offset)';\r\n            answers.current[index] = [ ...answers.current[index], e.target.textContent ];\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"query\">\r\n            <Nav />\r\n            \r\n            {phase < 4 && <div className=\"container\" style={{ position: 'absolute', zIndex: '-1', height: '100vh', top: 0 }}>\r\n                <div className=\"frame transition-frame\" ref={frame}>\r\n                    <h2 className=\"query-prompt\">{prompt}</h2>\r\n                    {(window.innerWidth > 455 || ![1, 3].includes(phase))\r\n                        ? buttonSet.map((set, i) => <ul key={i}className=\"button-wrapper button-wrapper-full\">\r\n                        {(_=> {\r\n                            const buttons = (phase === 0 && user)\r\n                                ? Object.entries(user.genre_selection).sort(([, a], [, b]) => b - a).map(([key]) => key).slice(0, 4)\r\n                                : set;\r\n                            return buttons.map((button, j) => <li key={j}><button className=\"button\" onClick={manageFilters} style={\r\n                            button\r\n                                ? (phase === 1 && answers.current[0].includes(button))\r\n                                    ? { color: 'var(--color-offset)', backgroundColor: 'var(--bg-color-dark)' }\r\n                                    : { color: 'var(-bg-color-dark)', backgroundColor: 'var(--color-offset)' }\r\n                                : { visibility: 'hidden' }\r\n                            } value={phase === 2 && Object.keys(button)[0]}\r\n                                onMouseOver={e => {\r\n                                    e.target.style.backgroundColor = 'var(--bg-color-dark)';\r\n                                    e.target.style.color = 'var(--color-offset)';\r\n                                }}\r\n                                onFocus={e => {\r\n                                    e.target.style.backgroundColor='var(--bg-color-dark)';\r\n                                    e.target.style.color = 'var(--color-offset)';\r\n                                }}\r\n                                onMouseOut={e => {\r\n                                    if (answers.current[phase > 0 ? phase - 1 : phase] && !answers.current[phase > 0 ? phase - 1 : phase].includes(e.target.textContent)) {\r\n                                        e.target.style.backgroundColor = 'var(--color-offset)';\r\n                                        e.target.style.color = 'var(--bg-color-dark)';\r\n                                    }\r\n                                }}\r\n                                onBlur={e => {\r\n                                    if (answers.current[phase === 1 ? phase - 1 : phase] && !answers.current[phase > 0 ? phase - 1 : phase].includes(e.target.textContent)) {\r\n                                        e.target.style.backgroundColor = 'var(--color-offset)';\r\n                                        e.target.style.color = 'var(--bg-color-dark)';\r\n                                    }\r\n                                }}\r\n                            >{phase === 2 ? Object.values(button)[0] : button}</button></li>)\r\n                        })()}\r\n                        {i === buttonSet.length - 1 && <li>\r\n                            <button className=\"button query-next\" onClick={e => {\r\n                                if (user && phase === 1)\r\n                                    fetch(server + 'start?user=' + user.username, {\r\n                                        mode: 'cors',\r\n                                        method: 'POST',\r\n                                        headers: { 'Content-Type': 'application/json'/*, 'Accept': 'application/json' */},\r\n                                        body: JSON.stringify({\r\n                                            genres: answers.current[0].map(answer => ({[answer]: user.genre_selection[answer] + 1} ))\r\n                                        })\r\n                                    });\r\n                                frame.current.style.opacity = 0;\r\n                                setTimeout(_=> {\r\n                                    setPhase(phase + 1);\r\n                                    if (frame.current) frame.current.style.opacity = 1;\r\n                                    if (frame2.current) frame2.current.style.opacity = 1;\r\n                                }, 750);\r\n                                [...e.target.parentElement.parentElement.parentElement.children].slice(1)\r\n                                    .forEach(ul => [...ul.children]\r\n                                        .forEach(li => {\r\n                                        li.children[0].style.color = 'var(--bg-color-dark';\r\n                                        li.children[0].style.backgroundColor = 'var(--color-offset)';\r\n                                    })\r\n                                );\r\n                            }}>{nextButton}</button>\r\n                        </li>}\r\n                    </ul>)\r\n                    : <ul className=\"button-wrappper button-wrapper-mobile\">{\r\n                        (phase === 3\r\n                            ? phase3MobileButtonSet\r\n                            : buttonSet.reduce((acc, cur) => [...acc, ...cur], []).filter(btn => btn)).map((button, i, buttons) => <>\r\n                            <li key={uuid()}><button className=\"button\"\r\n                                onClick={manageFilters} style={\r\n                                    button\r\n                                        ? (phase === 1 && answers.current[0].includes(button))\r\n                                            ? { color: 'var(--color-offset)', backgroundColor: 'var(--bg-color-dark)' }\r\n                                            : { color: 'var(-bg-color-dark)', backgroundColor: 'var(--color-offset)' }\r\n                                        : { visibility: 'hidden' }\r\n                                    } value={phase === 2 && Object.keys(button)[0]}\r\n                                        onMouseOver={e => {\r\n                                            e.target.style.backgroundColor = 'var(--bg-color-dark)';\r\n                                            e.target.style.color = 'var(--color-offset)';\r\n                                        }}\r\n                                        onFocus={e => {\r\n                                            e.target.style.backgroundColor='var(--bg-color-dark)';\r\n                                            e.target.style.color = 'var(--color-offset)';\r\n                                        }}\r\n                                        onMouseOut={e => {\r\n                                            if (answers.current[phase > 0 ? phase - 1 : phase] && !answers.current[phase > 0 ? phase - 1 : phase].includes(e.target.textContent)) {\r\n                                                e.target.style.backgroundColor = 'var(--color-offset)';\r\n                                                e.target.style.color = 'var(--bg-color-dark)';\r\n                                            }\r\n                                        }}\r\n                                        onBlur={e => {\r\n                                            if (answers.current[phase === 1 ? phase - 1 : phase] && !answers.current[phase > 0 ? phase - 1 : phase].includes(e.target.textContent)) {\r\n                                                e.target.style.backgroundColor = 'var(--color-offset)';\r\n                                                e.target.style.color = 'var(--bg-color-dark)';\r\n                                            }\r\n                                        }}\r\n                                    >{phase === 2 ? Object.values(button)[0] : button}</button></li>\r\n                            {i === buttons.length - 1 && <li>\r\n                                <button className=\"button query-next\" onClick={e => {\r\n                                    if (user && phase === 1)\r\n                                        fetch(server + 'start?user=' + user.username, {\r\n                                            mode: 'cors',\r\n                                            method: 'POST',\r\n                                            headers: { 'Content-Type': 'application/json'/*, 'Accept': 'application/json' */},\r\n                                            body: JSON.stringify({\r\n                                                genres: answers.current[0].map(answer => ({[answer]: user.genre_selection[answer] + 1} ))\r\n                                            })\r\n                                        });\r\n                                    frame.current.style.opacity = 0;\r\n                                    setTimeout(_=> {\r\n                                        setPhase(phase + 1);\r\n                                        if (frame.current) frame.current.style.opacity = 1;\r\n                                        if (frame2.current) frame2.current.style.opacity = 1;\r\n                                    }, 750);\r\n                                    [...e.target.parentElement.parentElement.parentElement.children].slice(1)\r\n                                        .forEach(ul => [...ul.children]\r\n                                            .forEach(li => {\r\n                                            li.children[0].style.color = 'var(--bg-color-dark';\r\n                                            li.children[0].style.backgroundColor = 'var(--color-offset)';\r\n                                        })\r\n                                    );\r\n                                }}>{nextButton}</button>\r\n                            </li>}\r\n                        </>)}</ul>\r\n                    }\r\n                </div>\r\n            </div>}\r\n            {/* {<div>{loading ? 'Loading movies...' : error ? 'Error loading movies' : null}</div>} */}\r\n            {phase > 3 && <div style={{ display: phase < 4 ? 'none' : 'block', opacity: 0, position: 'relative' }} ref={frame2} className=\"transition-frame\">\r\n                <div className=\"button-v2-container\" style={{ position: 'absolute', display: 'flex', justifyContent: 'space-between', left: 0, top: '1.5rem' }}>\r\n                    <button className=\"button-v2\" style={{ pointerEvents: 'none', opacity: 0, left: '1.5rem', transition: 'opacity 550ms ease-in-out' }} onClick={e => {\r\n                        if (set === 2) {\r\n                            [e.target, mainPrevButton2.current].forEach(btn => {\r\n                                btn.style.opacity = 0;\r\n                                btn.parentElement.children[1].style.transform = 'translateX(0)';\r\n                                btn.style.pointerEvents = 'none';\r\n                            });\r\n                        }\r\n                        e.target.blur();\r\n                        slideDisplayRow(0, null, 2);\r\n                        setSet(set - 1)\r\n                    }} ref={mainPrevButton}>Previous</button>\r\n                    <button style={{ left: '1.5rem', transition: 'transform 550ms ease-in-out' }} className=\"button-v2\" onClick={e => {\r\n                        if (set === 1) {\r\n                            [e.target, mainNextButton2.current].forEach(btn => {\r\n                                btn.style.transform = 'translateX(calc(190px - 1rem))';\r\n                                btn.parentElement.children[0].style.opacity = 1;\r\n                                btn.parentElement.children[0].style.pointerEvents = 'auto';\r\n                            });\r\n                        }\r\n                        e.target.blur();\r\n                        slideDisplayRow(0, null, 1);\r\n                        setSet(set + 1)\r\n                    }} ref={mainNextButton}>Next</button>\r\n                </div>\r\n                <MovieList movies={movies || [{title:'mission failed'}]} heading=\"Here are some movies you might be interested in\" displaying=\"Query\" lowerMargin=\"4rem\" headingMargin=\"3.5rem\" locationdetails={{\r\n                    searchValue: answers.current,\r\n                    page: set,\r\n                    back: '/query'\r\n                }}/>\r\n                <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', marginBottom: '9.25rem' }}>\r\n                    <StarRater />\r\n                </div>\r\n                <div className=\"button-v2-container\" style={{ position: 'absolute', display: 'flex', justifyContent: 'space-between', bottom: '5rem', left: 0 }}>\r\n                    <button className=\"button-v2\" style={{ pointerEvents: 'none', opacity: 0, left: '1.5rem', transition: 'opacity 550ms ease-in-out' }} onClick={e => {\r\n                        if (set === 2) {\r\n                            [e.target, mainPrevButton.current].forEach(btn => {\r\n                                btn.style.opacity = 0;\r\n                                btn.parentElement.children[1].style.transform = 'translateX(0)';\r\n                                btn.style.pointerEvents = 'none';\r\n                            });\r\n                        }\r\n                        e.target.blur();\r\n                        slideDisplayRow(0, null, 2);\r\n                        setSet(set - 1)\r\n                    }} ref={mainPrevButton2}>Previous</button>\r\n                    <button style={{ left: '1.5rem', transition: 'transform 550ms ease-in-out' }} className=\"button-v2\" onClick={e => {\r\n                        if (set === 1) {\r\n                            [e.target, mainNextButton.current].forEach(btn => {\r\n                                btn.style.transform = 'translateX(calc(190px - 1rem))';\r\n                                btn.parentElement.children[0].style.opacity = 1;\r\n                                btn.parentElement.children[0].style.pointerEvents = 'auto';\r\n                            });\r\n                        }\r\n                        e.target.blur();\r\n                        slideDisplayRow(0, null, 1);\r\n                        setSet(set + 1)\r\n                    }} ref={mainNextButton2}>Next</button>\r\n                </div>\r\n            </div>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Query\r\n","import { ReducerPrototype } from \"./prototype.reducer\";\r\n\r\nexport const GET_CURRENTLY_SAVED_LAUNCH = 'GET_CURRENTLY_SAVED_LAUNCH',\r\n    GET_CURRENTLY_SAVED_SUCCESS = 'GET_CURRENTLY_SAVED_SUCCESS',\r\n    GET_CURRENTLY_SAVED_FAILURE = 'GET_CURRENTLY_SAVED_FAILURE';\r\n\r\nexport default ReducerPrototype(GET_CURRENTLY_SAVED_LAUNCH, GET_CURRENTLY_SAVED_SUCCESS, GET_CURRENTLY_SAVED_FAILURE)","import { GET_CURRENTLY_SAVED_LAUNCH, GET_CURRENTLY_SAVED_SUCCESS, GET_CURRENTLY_SAVED_FAILURE } from \"../reducers/getCurrentlySaved.reducer\";\r\nimport { server } from '../../APIs';\r\nimport { ActionPrototype } from \"./prototype.action\";\r\n\r\nexport const getCurrentlySaved = ActionPrototype(GET_CURRENTLY_SAVED_LAUNCH, GET_CURRENTLY_SAVED_SUCCESS, GET_CURRENTLY_SAVED_FAILURE, server+`movies/list?movies=!{1}!`)","import React, { useState, createContext } from 'react';\r\n\r\nexport const BinManagerContext = createContext(false);\r\n\r\nexport function BinManagerProvider({ children }) {\r\n    const [binManagerOpen, setBinManagerOpen] = useState(false);\r\n\r\n    return (\r\n        <BinManagerContext.Provider value={[ binManagerOpen, setBinManagerOpen ]}>\r\n            {children}\r\n        </BinManagerContext.Provider>\r\n    )\r\n}\r\n\r\nexport default BinManagerContext","import React, { useState, useContext } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { server } from '../APIs';\r\n// import UserContext from '../store/contexts/User.context';\r\nimport BinManagerContext from '../store/contexts/BinManager.context.js';\r\nimport { updateUser } from '../store/actions/updateUser.action';\r\nimport { makeRequest } from '../store/actions/makeRequest.action';\r\n\r\nfunction BinManager({ movies, displaying, setDisplaying }) {\r\n    // const [user, setUser] = useContext(UserContext);\r\n    const dispatch = useDispatch();\r\n    const user = useSelector(store => store.user.result);\r\n\r\n    const [error, setError] = useState(null);\r\n    const [deleteBin, setDeleteBin] = useState(true);\r\n    const [addMovie, setAddMovie] = useState(true);\r\n    const [updateBinClicked, setUpdateBinClicked] = useState(false);\r\n    const [binToUpdate, setBinToUpdate] = useState(null);\r\n    const [, setBinManagerOpen] = useContext(BinManagerContext);\r\n\r\n\r\n    async function manageBins(e, method, bin, callback, errorhandler = _=> console.log('Error managing bins', e)) {\r\n        e.persist();\r\n        e.preventDefault();\r\n        try {\r\n            const response = await fetch(server + `users/${user.username}/bins`, {\r\n                method,\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ bin })\r\n            });\r\n            setError(null) || response.ok\r\n                ? callback && callback()\r\n                : errorhandler()\r\n        } catch (e) { errorhandler() }\r\n    }\r\n\r\n    function createBin(e) {\r\n        e.persist();\r\n        e.preventDefault();\r\n        if (Object.keys(user.bins).includes(e.target.children[1].children[0].value)) return setError('Bin already exists');\r\n        user && manageBins(e, 'POST', { [e.target.children[1].children[0].value]: [] },\r\n            _=> dispatch( updateUser(user.username) ),\r\n            _=> setError('Error creating bin')\r\n        );\r\n        e.target.reset();\r\n    }\r\n\r\n    function deleteOrEmptyBin(e) {\r\n        e.persist();\r\n        e.preventDefault();\r\n        const bin = e.target.children[1].children[0].options[e.target.children[1].children[0].selectedIndex].text;\r\n        user && manageBins(e, deleteBin ? 'DELETE' : 'PUT', deleteBin ? bin : { [bin]: [] },\r\n            _=> {\r\n                dispatch( updateUser(user.username) );\r\n                if (displaying === bin && deleteBin) {\r\n                    dispatch( makeRequest('movies/list', '?movies=' + movies.map(movie => movie.id).join(',')) );\r\n                    setDisplaying('Currently Saved');\r\n                } else if (!deleteBin) {\r\n                    dispatch( makeRequest('movies/list', '?movies=') );\r\n                }\r\n            },\r\n            _=> setError(`Error ${deleteBin ? 'deleting' : 'emptying'} bin`)\r\n        )\r\n    }\r\n\r\n    function updateBin(e) {\r\n        e.persist();\r\n        e.preventDefault();\r\n        const toUpdate = e.target.children[1].children[0].options[e.target.children[1].children[0].selectedIndex];\r\n        if (!updateBinClicked) {\r\n            setUpdateBinClicked(true);\r\n            setBinToUpdate(toUpdate.text);\r\n        } else {\r\n            const updatedMovies = addMovie\r\n                ? [ ...user.bins[binToUpdate], toUpdate.value ]\r\n                : user.bins[binToUpdate].filter(movie => movie !== toUpdate.value);\r\n            user && fetch(server + `users/${user.username}/bins`, {\r\n                mode: 'cors',\r\n                method: 'PATCH',\r\n                headers: { 'Content-Type': 'application/json'/*, 'Accept': 'application/json' */},\r\n                body: JSON.stringify({\r\n                    bin: { [binToUpdate]: updatedMovies }\r\n                })\r\n            })\r\n                .then(res => {\r\n                    if (res.ok) {\r\n                        dispatch( updateUser(user.username) );\r\n                        dispatch( makeRequest('movies/list', '?movies=' + updatedMovies) );\r\n                    } else setError('Error updating bin');\r\n                });\r\n            setDisplaying(binToUpdate);\r\n            setUpdateBinClicked(false);\r\n            setBinToUpdate(null);\r\n            e.target.reset();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div style={{ position: 'absolute', top: 0, left: 0, right: 0, bottom: '33%', display: 'flex', justifyContent: 'center', alignItems: 'center', pointerEvents: 'none' }}>\r\n        <div className=\"bin-manager\">\r\n            {error && <div style={{ color: 'red' }}>{error}</div>}\r\n            <label style={{ fontWeight: 600 }}>Bin Manager</label>\r\n            <form onSubmit={createBin}>\r\n                <label className=\"label-bin-manager\">Create a new bin</label>\r\n                <span className=\"bin-manager-form-p2\">\r\n                    <input style={{ borderRadius: '2px', padding: '.25rem', height: '1.35rem' }} type=\"text\" placeholder=\"Enter bin name\" autoComplete=\"off\" />\r\n                    <button className=\"button-register\">Create Bin</button>\r\n                </span>\r\n            </form>\r\n            {Object.keys(user.bins).length > 0 &&\r\n            <>\r\n                <form onSubmit={updateBin}>\r\n                    <label className=\"label-bin-manager\">Add movies to a bin or remove them</label>\r\n                    <span className=\"bin-manager-form-p2\">\r\n                        <select style={{ marginRight: '.5rem' }}>\r\n                            {user.currently_saved.length\r\n                                ? updateBinClicked\r\n                                    ? addMovie\r\n                                        ? user.currently_saved\r\n                                            .filter(id => !user.bins[binToUpdate].includes(String(id)))\r\n                                            .map((id, i) => <option key={i} value={id}>{movies.find(movie => movie.id === id).title}</option>)\r\n                                        : user.bins[binToUpdate]\r\n                                            .map((id, i) => <option key={i} value={id}>{movies.find(movie => movie.id === Number(id)).title}</option>)\r\n                                    : addMovie\r\n                                        ? Object.entries(user.bins).filter(([, val]) => val.length < user.currently_saved.length).length\r\n                                            ? Object.entries(user.bins).filter(([, val]) => val.length < user.currently_saved.length)\r\n                                                .map(([key], i) => <option key={i}>{key}</option>)\r\n                                            : <option key=\"-1\">All bins are full</option>\r\n                                        : Object.entries(user.bins).filter(([, val]) => val.length).length\r\n                                            ? Object.entries(user.bins).filter(([, val]) => val.length)\r\n                                                .map(([key], i) => <option key={i}>{key}</option>)\r\n                                            : <option key=\"-1\">All bins are empty</option>\r\n                                : <option key=\"-1\">You don't have any saved movies!</option>\r\n                            }\r\n                        </select>\r\n                        {!updateBinClicked && user.currently_saved.length > 0 &&\r\n                        (<>\r\n                            <label><input type=\"radio\" name=\"addOrRemoveMovie\" value=\"Add\" defaultChecked onChange={e => setAddMovie(!addMovie)}/>Add</label>\r\n                            <label style={{ marginLeft: '.35rem' }}><input type=\"radio\" name=\"addOrRemoveMovie\" value=\"Remove\" onChange={e => setAddMovie(!addMovie)} />Remove</label>\r\n                        </>)}\r\n                        {Object.entries(user.bins)\r\n                            .filter(([, val]) => addMovie\r\n                                ? val.length < user.currently_saved.length\r\n                                : val.length > 0).length > 0\r\n                                && <button className=\"button-register\">{updateBinClicked ? 'Update Bin' : addMovie ? 'Add To' : 'Remove From'}</button>\r\n                        }\r\n                    </span>\r\n                </form>\r\n                <form onSubmit={deleteOrEmptyBin}>\r\n                    <label className=\"label-bin-manager\">Delete or empty a bin</label>\r\n                    <span className=\"bin-manager-form-p2\">\r\n                        <select style={{ marginRight: '.5rem' }}>\r\n                            {Object.entries(user.bins)\r\n                                .filter(([, val]) => deleteBin || val.length)\r\n                                .map((bin, i) => <option key={i}>{bin}</option>).length\r\n                                    ? Object.entries(user.bins)\r\n                                        .filter(([, val]) => deleteBin || val.length)\r\n                                        .map(([key], i) => <option key={i}>{key}</option>)\r\n                                    : <option key=\"-1\">All bins are empty</option>\r\n                            }\r\n                        </select>\r\n                        <label><input type=\"radio\" name=\"deleteOrEmptyBin\" value=\"Delete\" defaultChecked onChange={e => setDeleteBin(!deleteBin)}/>Delete</label>\r\n                        <label style={{ marginLeft: '.35rem' }}><input type=\"radio\" name=\"deleteOrEmptyBin\" value=\"Empty\" onChange={e => setDeleteBin(!deleteBin)} />Empty </label>\r\n                        {Object.entries(user.bins)\r\n                            .filter(([, val]) => deleteBin || val.length)\r\n                            .map((bin, i) => <option key={i}>{bin}</option>).length > 0 &&\r\n                                <button className=\"button-register\">{deleteBin ? 'Delete' : 'Empty'} Bin</button>\r\n                        }\r\n                    </span>\r\n                </form>\r\n            </>\r\n            }\r\n            {Object.keys(user.bins).length > 0 && <button className=\"button-register\" onClick={_=> setBinManagerOpen(false)}>Close</button>}\r\n        </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BinManager\r\n","import React, { useState, useEffect, useContext } from 'react';\r\n// import UserContext from '../store/contexts/User.context';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { makeRequest } from '../store/actions/makeRequest.action';\r\nimport { getCurrentlySaved } from '../store/actions/getCurrentlySaved.action';\r\nimport Nav from './Nav';\r\nimport MovieList from './MovieList';\r\nimport BinManager from './BinManager';\r\nimport BinManagerContext from '../store/contexts/BinManager.context.js';\r\nimport DelayLink from './DelayLink';\r\nimport { server } from '../APIs';\r\nimport { updateUser } from '../store/actions/updateUser.action';\r\nimport { slideDisplayRow } from '../Functions';\r\n\r\nexport default function MyList() {\r\n\r\n    const dispatch = useDispatch();\r\n    const { loading, result, error } = useSelector(store => store.makeRequest);\r\n    const [binManagerOpen, setBinManagerOpen] = useContext(BinManagerContext);\r\n    const [showBins, setShowBins] = useState(false);\r\n    const user = useSelector(store => store.user.result);\r\n    const currentlySaved = useSelector(store => store.currentlySaved.result);\r\n    const [displaying, setDisplaying] = useState('Currently Saved');\r\n    const [creatingBin, setCreatingBin] = useState(false);\r\n    const [creatingBinError, setCreatingBinError] = useState(null);\r\n    const [updatingBinError, setUpdatingBinError] = useState(null);\r\n\r\n    useEffect(_=> { document.getElementById('root').style.opacity = 1 }, []);\r\n\r\n    useEffect(_=> {\r\n        if (user) {\r\n            dispatch( makeRequest('movies/list', '?movies=' + user.currently_saved.join(','), {}, _=> slideDisplayRow(50, false)) );\r\n            dispatch( getCurrentlySaved(user.currently_saved) );\r\n        }\r\n    }, []);\r\n\r\n    useEffect(_=> { if (!showBins) setCreatingBin(false) }, [showBins])\r\n\r\n    async function createBin(e) {\r\n        e.persist();\r\n            e.preventDefault();\r\n            const binName = e.target.children[0].value;\r\n        try {\r\n            if (Object.keys(user.bins).includes(binName)) return setCreatingBinError('Bin already exists');\r\n            setCreatingBinError(null);\r\n                const response = await fetch(server + `users/${user.username}/bins`, {\r\n                    headers: { 'Content-Type': 'application/json'},\r\n                    method: 'POST',\r\n                    body: JSON.stringify({ bin: { [binName]: [] }})\r\n                });\r\n                if (response.ok) {\r\n                    dispatch( updateUser(user.username) );\r\n                } else setCreatingBinError('Error creating bin');\r\n        } catch (e) { console.log(e) }\r\n        finally {\r\n            if (!Object.keys(user.bins).includes(binName)) {\r\n                setCreatingBin(false);\r\n                e.target.reset();\r\n            }\r\n        }\r\n    }\r\n\r\n    async function updateBin(e) {\r\n        e.persist();\r\n        e.preventDefault();\r\n        setUpdatingBinError(null);\r\n        let res;\r\n        const id = e.dataTransfer.getData('text/plain').split('/movies/')[1];\r\n        try {\r\n            if (!user.currently_saved.includes(Number(id))) {\r\n                res = await fetch(server + `movies?user=${user.username}`, {\r\n                    mode: 'cors',\r\n                    method: 'PUT',\r\n                    headers: { 'Content-Type': 'application/json'/*, 'Accept': 'application/json' */},\r\n                    body: JSON.stringify({ movieID: Number(id), inRecent: true })\r\n                });\r\n                !res.ok && setUpdatingBinError('Error updating bin');\r\n            }\r\n\r\n            res = await fetch(server + `users/${user.username}/bins`, {\r\n                mode: 'cors',\r\n                method: 'PATCH',\r\n                headers: { 'Content-Type': 'application/json'/*, 'Accept': 'application/json' */},\r\n                body: JSON.stringify({\r\n                    bin: { [e.target.textContent]: [ ...user.bins[e.target.textContent], id ] }\r\n                })\r\n            });\r\n            res.ok\r\n                ? dispatch( updateUser(user.username) )\r\n                : setUpdatingBinError('Error updating bin');\r\n        } catch (e) { console.log(e) }\r\n    }\r\n\r\n    const onClickYourBins = e => {\r\n        e.preventDefault();\r\n        let { style } = e.target.parentElement.children[1]\r\n        if (showBins) {\r\n            style.maxHeight = 0;\r\n            style.transform = 'scaleY(0)';\r\n        } else {\r\n            style.maxHeight = '100%';\r\n            style.transform = 'scaleY(1)';\r\n        }\r\n        setShowBins(!showBins);\r\n        setCreatingBinError(null);\r\n    }\r\n\r\nreturn (\r\n        <div className=\"my-list\" style={{ display: 'flex', overflow: 'hidden' }}>\r\n            <div style={{ display: 'flex', flexDirection: 'column '}}>\r\n                <Nav />\r\n                {user && <ul className=\"sidebar\">\r\n                    {<li className=\"sidebar-li-hover\" onClick={e => {\r\n                            if (displaying !== 'Currently Saved') slideDisplayRow();\r\n                            setTimeout(_=> dispatch( makeRequest('movies/list', '?movies=' + user.currently_saved.join(','), {}, _=> slideDisplayRow(150, false)) ), 150);\r\n                            setDisplaying('Currently Saved');\r\n                        }} tabIndex=\"0\">Currently Saved</li>\r\n                    }\r\n                    { user.show_save_history && <li className=\"sidebar-li-hover\" onClick={e => {\r\n                            if (displaying !== 'Save History') slideDisplayRow();\r\n                            setTimeout(_=> dispatch( makeRequest('movies/list', '?movies=' + user.recent_save_history.join(','), {}, _=> slideDisplayRow(150, false)) ), 150);\r\n                            setDisplaying('Save History');\r\n                        }} tabIndex=\"0\">Save History</li>\r\n                    }\r\n                    <li>\r\n                        {<div>\r\n                                <label onFocus={e => e.target.style.color = showBins ? 'white' : 'var(--color-offset)'} onBlur={e => e.target.style.color = showBins ? 'var(--color-offset)' : 'red'} tabIndex=\"0\" style={{ outline: 'none', cursor: 'pointer' }} onClick={onClickYourBins} onKeyDown={e => e.keyCode === 13 && onClickYourBins(e)} onMouseOver={e => e.target.style.color = showBins ? 'white' : 'var(--color-offset)'} onMouseOut={e => e.target.style.color = showBins ? 'var(--color-offset)' : 'red'}>Your Bins</label>\r\n                                <ul style={{ maxHeight: 0, transform: 'scaleY(0)', transformOrigin: 'top', transition: 'max-height 175ms ease-out, transform 175ms ease-out' }}>\r\n                                    {Object.keys(user.bins).map((bin, i) =>\r\n                                        <li onFocus={e => e.target.style.color = 'var(--color-offset)'} onBlur={e => e.target.style.color = 'red'} tabIndex={showBins ? 0 : '-1'} onMouseOver={e => {\r\n                                            e.target.style.color = 'var(--color-offset)';\r\n                                            e.target.style.cursor = 'pointer'\r\n                                        }} onMouseOut={e => e.target.style.color = 'red'} style={{ marginLeft: '1.25rem', outline: 'none' }} key={i} onClick={e => {\r\n                                            e.preventDefault();\r\n                                            if (displaying !== bin) slideDisplayRow();\r\n                                            setTimeout(_=> dispatch( makeRequest('movies/list', '?movies=' + user.bins[bin].join(','), {}, _=> slideDisplayRow(150, false)) ), 150);\r\n                                            setDisplaying(bin);\r\n                                            setShowBins(!showBins);\r\n                                            setCreatingBinError(null);\r\n                                        }} onKeyDown={e => {\r\n                                            e.preventDefault();\r\n                                            if (e.keyCode === 13) {\r\n                                                if (displaying !== bin) slideDisplayRow();\r\n                                                setTimeout(_=> dispatch( makeRequest('movies/list', '?movies=' + user.bins[bin].join(','), {}, _=> slideDisplayRow(150, false)) ), 150);\r\n                                                setDisplaying(bin);\r\n                                                setShowBins(!showBins);\r\n                                                setCreatingBinError(null);\r\n                                            }\r\n                                        }} onDrop={e => {\r\n                                            e.preventDefault();\r\n                                            // console.log(user.currently_saved.length);\r\n                                            !user.currently_saved.includes( Number(e.dataTransfer.getData('text/plain').split('/movies/')[1]) )\r\n                                                ? window.confirm('Save movie and add to bin?') && updateBin(e)\r\n                                                : updateBin(e);\r\n                                        }} onDragOver={e => { e.preventDefault(); e.target.style.color = 'white' }} onDragLeave={e => { e.preventDefault(); e.target.style.color = 'red' }}>\r\n                                            {bin}\r\n                                        </li>\r\n                                    )}\r\n                                    <li style={{ marginLeft: '1.25rem' }}>\r\n                                        {creatingBin\r\n                                            ? <form onSubmit={createBin}>\r\n                                                <input style={{\r\n                                                    borderRadius: '2px',\r\n                                                    padding: '.25rem',\r\n                                                    height: '1.3rem', width: '110px' }} type=\"text\" placeholder=\"Enter bin name\" />\r\n                                            </form>\r\n                                            : <button tabIndex=\"0\" onClick={_=> setCreatingBin(true)} onFocus={e => e.target.style.transform = 'scale(1.15)'} onBlur={e => e.target.style.transform = 'scale(1)'} onKeyDown={e => e.keyCode === 13 && setCreatingBin(true)} style={{ backgroundColor: 'transparent', border: 'none', color: 'red', fontWeight: 'bold',\r\n                                            fontSize: '1.1rem',\r\n                                            transition: 'transform 50ms ease-out'\r\n                                            }} onMouseOver={e => {\r\n                                            e.target.style.transform = 'scale(1.15)'; e.target.style.cursor = 'pointer'\r\n                                        }} onMouseOut={e => e.target.style.transform = 'scale(1)'}>+</button>\r\n                                        }\r\n                                    </li>\r\n                                    {creatingBinError && <div style={{ color: 'red' }}>{creatingBinError}</div>}\r\n                                </ul>\r\n                            </div>\r\n                        }\r\n                    </li>\r\n                    <li>\r\n                        <button \r\n                        onMouseOver={e =>  e.target.style.backgroundColor = 'var(--bg-color-light)'\r\n                        } onMouseOut={e => {\r\n                            if (document.activeElement !== e.target)\r\n                                e.target.style.backgroundColor = 'var(--color-offset)'\r\n                        }} onFocus={e => e.target.style.backgroundColor = 'var(--bg-color-light)'} onBlur={e => {\r\n                            if (![...document.querySelectorAll(':hover')].includes(e.target))\r\n                                e.target.style.backgroundColor = 'var(--color-offset)'\r\n                        }} style={{ marginTop: '1rem', marginLeft: '.25rem' }}className=\"button\" onClick={e => {\r\n                            e.target.blur();\r\n                            setBinManagerOpen(!binManagerOpen);\r\n                        }}>Manage Bins</button>\r\n                    </li>\r\n                </ul>}\r\n            </div>\r\n            \r\n            {user\r\n                ? error ? <div style={{ marginTop: '25%', width: '100%', textAlign: 'center' }}>Error loading movies</div> :\r\n                    <MovieList withFilter displaying={displaying} movies={result} headingMargin=\"2rem\" heading={(_=> {\r\n                        switch (displaying) {\r\n                            default: return console.log(JSON.stringify(result)) || result.length\r\n                                ? `This is what was in \"${displaying}\"`\r\n                                : 'This bin was empty!';\r\n                            case 'Currently Saved':\r\n                                return result.length\r\n                                    ? 'Here\\'s your complete list of movies'\r\n                                    : 'Save movies by going to their page';\r\n                            case 'Save History':\r\n                                return result.length\r\n                                    ? 'These are all the movies you\\'ve ever saved'\r\n                                    : 'Save movies by going to their page';\r\n                        }\r\n                    })()}/>\r\n                : <h2 style={{ flex: 4, position: 'absolute', margin: '7rem 0 0 2.5rem' }}><DelayLink to=\"/register\"><span style={{ color: '#cc0000' }} onMouseOver={e => { e.target.style.textDecoration = 'underline' }} onMouseOut={e => { e.target.style.textDecoration = 'none' }}>Log in</span></DelayLink> to see your saved movies</h2>\r\n            }\r\n            {user && binManagerOpen && <BinManager movies={currentlySaved} displaying={displaying} setDisplaying={setDisplaying}></BinManager>}\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport Nav from './Nav';\r\nimport MovieList from './MovieList';\r\nimport { makeRequest } from '../store/actions/makeRequest.action';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { slideDisplayRow } from '../Functions';\r\nimport { Simulate } from 'react-dom/test-utils';\r\n\r\n// let mounted;\r\n\r\nfunction Popular({ location }) {\r\n    const dispatch = useDispatch();\r\n    const { loading, error, result } = useSelector(store => store.makeRequest);\r\n    const [heading, setHeading] = useState('Here\\'s what movies are currently trending');\r\n    const [set, setSet] = useState(1);\r\n    const [column, setColumn] = useState('trending');\r\n    const nextButton = useRef(null),\r\n          previousButton = useRef(null);\r\n    const scrollYRef = useRef(0);\r\n    const [scrollY, setScrollY] = useState(0);\r\n    // !sessionStorage.getItem('popularCache') && sessionStorage.setItem('popularCache', JSON.stringify({\r\n    //     trending: [[]],\r\n    //     release_date: [[]],\r\n    //     times_saved: [[]],\r\n    //     times_saved_this_month: [[]]\r\n    // }));\r\n\r\n    // useEffect(_=> {\r\n    //     let cache = JSON.parse(sessionStorage.getItem('popularCache'));\r\n    //     if (mounted && (!cache[column][set] || !cache[column][set].length)) {\r\n    //         cache[column].push( result.map(({ id }) => id) );\r\n    //         sessionStorage.setItem('popularCache', JSON.stringify(cache));\r\n    //     }\r\n    // }, [result]);\r\n\r\n    useEffect(_=> {\r\n        document.getElementById('root').style.opacity = 1;\r\n        // mounted = true;\r\n        dispatch( makeRequest(`popular`, `?column=${column}&set=${set}`, {}, _=> slideDisplayRow(150, false)));\r\n    }, []);\r\n\r\n    useEffect(_=> {\r\n        setTimeout(_=> {\r\n            if (1 || (result && result.length < 19)) {\r\n                nextButton.current.style.opacity = 1;\r\n                nextButton.current.style.pointerEvents = 'auto';\r\n            }\r\n        }, 150);\r\n    }, []);\r\n\r\n    useEffect(_=> {\r\n        window.addEventListener('scroll', _=> {\r\n            scrollYRef.current = window.scrollY;\r\n        });\r\n    }, []);\r\n\r\n    useEffect(_=> setScrollY(scrollYRef.current), [scrollY.current]);\r\n\r\n    useEffect(_=> {\r\n        setTimeout(_=> {\r\n            location.searchValue && setColumn(location.searchValue);\r\n            location.page && setSet(location.page);\r\n            location.scrollY && window.scrollTo(0, location.scrollY);\r\n            nextButton.current.style.opacity = 1;\r\n            nextButton.current.style.pointerEvents = 'auto';\r\n            if (location.page > 1) {\r\n                nextButton.current.style.transform = `translateX(calc(${window.innerWidth > 850 ? '190' : '140'}px - 1rem))`;\r\n                nextButton.current.parentElement.children[0].style.opacity = 1;\r\n                nextButton.current.parentElement.children[0].style.pointerEvents = 'auto';\r\n            }\r\n        }, 155);\r\n    }, []);\r\n\r\n    useEffect(_=> {\r\n        // const cache = JSON.parse(sessionStorage.getItem('popularCache'))[column][set];\r\n        // cache\r\n        //     ? dispatch( makeRequest(`movies/list`, `?movies=${cache.join(',')}`, {}, _=> slideDisplayRow(150, false)) )\r\n            dispatch( makeRequest(`popular`, `?column=${column}&set=${set}`, {}, _=> slideDisplayRow(150, false)));\r\n        switch (column) {\r\n            default: break;\r\n            case 'trending':\r\n                setHeading('Here\\'s what movies are currently trending');\r\n                break;\r\n            case 'recent_releases':\r\n                setHeading('Here are the newest movies on record');\r\n                break;\r\n            case 'most_saved_this_month':\r\n                setHeading('Here are the most popular movies this month');\r\n                break;\r\n            case 'most_saved':\r\n                setHeading('Here are the most saved movies to date');\r\n                break;\r\n        }\r\n    }, [column, set]);\r\n\r\n    useEffect(_=> {\r\n        (async _=> {\r\n            if (result && (result.length < 20) && nextButton.current) {\r\n                nextButton.current.style.opacity = 0;\r\n                nextButton.current.style.pointerEvents = 'none';\r\n            } else if (result && nextButton.current) {\r\n                nextButton.current.style.opacity = 1;\r\n                nextButton.current.style.pointerEvents = 'auto';\r\n            }\r\n            if (set === 1 && previousButton.current) {\r\n                previousButton.current.style.opacity = 0;\r\n                previousButton.current.style.pointerEvents = 'none';\r\n                nextButton.current.style.transform = 'translateX(0)';\r\n            } else if (previousButton.current) {\r\n                previousButton.current.style.opacity = 1;\r\n                previousButton.current.style.pointerEvents = 'auto';\r\n            }\r\n            if (set === 2)\r\n                nextButton.current.style.transform = 'translate(calc(190px - 1rem))';\r\n        })();\r\n    }, [column]);\r\n\r\n    const onClickOrEnter = (e, column) => {\r\n        if (!e || e.keyCode === 13) {\r\n            slideDisplayRow();\r\n            setSet(1);\r\n            setColumn(column);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"popular\" style={{ display: 'flex', overflow: 'hidden' }}>\r\n                <div className=\"popular-full-sidebar\" style={{ display: 'flex', flexDirection: 'column' }}>\r\n                    <Nav />\r\n                    <ul className=\"sidebar\">\r\n                        <li tabIndex=\"0\" onKeyDown={e => column !== 'trending' && onClickOrEnter(e, 'trending')} className=\"sidebar-li-hover\" key=\"0\" onClick={_=> column !== 'trending' && onClickOrEnter(null, 'trending')}>Trending</li>\r\n                        <li tabIndex=\"0\" onKeyDown={e => column !== 'recent_releases' && onClickOrEnter(e, 'recent_releases')} className=\"sidebar-li-hover\" key=\"1\" onClick={_=> column !== 'recent_releases' && onClickOrEnter(null, 'recent_releases')}>Recent Releases</li>\r\n                        <li tabIndex=\"0\" onKeyDown={e => column !== 'most_saved_this_month' && onClickOrEnter(e, 'most_saved_this_month')} className=\"sidebar-li-hover\" key=\"2\" onClick={_=> column !== 'most_saved_this_month' && onClickOrEnter(null, 'most_saved_this_month')}>Most Saved This Month</li>\r\n                        <li tabIndex=\"0\" onKeyDown={e => column !== 'most_saved' && onClickOrEnter(e, 'most_saved')} className=\"sidebar-li-hover\" key=\"3\" onClick={_=> column !== 'most_saved' && onClickOrEnter(null, 'most_saved')}>Most Saved All Time</li>\r\n                        <li className=\"popular-button-container\" style={{ width: '100%' }}>\r\n                            <div style={{ posiiton: 'relative', display: 'flex', justifyContent: 'space-between', width: '100%', height: '100%' }}>\r\n                                <button className=\"button-v2\" style={{ pointerEvents: 'none', opacity: 0, transition: 'opacity 550ms ease-in-out' }} onClick={e => {\r\n                                    if (set === 2) {\r\n                                        e.target.style.opacity = 0;\r\n                                        e.target.parentElement.children[1].style.transform = 'translateX(0)';\r\n                                        e.target.style.pointerEvents = 'none';\r\n                                    }\r\n                                    e.target.blur();\r\n                                    slideDisplayRow();\r\n                                    setSet(set - 1);\r\n                                }} ref={previousButton}>Previous</button>\r\n                                <button style={{ transition: 'transform 550ms ease-in-out' }} className=\"button-v2\" onClick={e => {\r\n                                    if (set === 1) {\r\n                                        e.target.style.transform = `translateX(calc(${window.innerWidth > 850 ? '190' : '140'}px - 1rem))`;\r\n                                        e.target.parentElement.children[0].style.opacity = 1;\r\n                                        e.target.parentElement.children[0].style.pointerEvents = 'auto';\r\n                                    }\r\n                                    e.target.blur();\r\n                                    slideDisplayRow();\r\n                                    setSet(set + 1);\r\n                                }} ref={nextButton}>Next</button>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                \r\n                <div style={{ flex: 4, marginBottom: '2rem' }}>\r\n                    {<MovieList movies={result} heading={error ? \r\n                    'Error loading movies' : heading} headingMargin=\"4rem\" displaying={'Popular'}\r\n                    locationdetails={{ searchValue: column, page: set, back: '/popular', scrollY }}/>    \r\n                    }\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Popular\r\n","import React from 'react';\nimport './App.css';\nimport { Route, Switch } from 'react-router-dom';\nimport Home from './components/Home';\nimport Movie from './components/Movie';\nimport Register from './components/Register';\nimport Profile from './components/Profile';\nimport Search from './components/Search';\nimport Help from './components/Help';\nimport Query from './components/Query';\nimport MyList from './components/MyList';\nimport Popular from './components/Popular';\nimport { transitionPage } from './Functions';\n\nfunction App() {\n  \n  return (\n      <Switch>\n        <Route path='/' exact component={Home} />\n        <Route path='/movies/:id' component={Movie} />\n        <Route path='/register' exact component={Register} />\n        <Route path='/profile/:username' exact component={Profile} />\n        <Route path='/search' exact component={Search} />\n        <Route path='/help' exact component={Help} />\n        <Route path='/query' exact component={Query} />\n        <Route path='/my-list' exact component={MyList} />\n        <Route path='/popular' exact component={Popular} />\n        <Route path=\"/\" render={({ history, location }) => {\n          \n          document.getElementById('root').style.opacity = 1;\n\n          return (\n            <>\n                <div style={{ margin: '1rem 0 .25rem 1rem' }}>You must be logged in as \"{location.pathname.split('/profile/')[1]}\" to view this page</div>\n                <button style={{ marginTop: '.5rem' }} onMouseOver={e => {\n                    e.target.style.backgroundColor = 'var(--bg-color-light)';\n                    e.target.style.color = 'var(--color-offset)';\n                }} onFocus={e => {\n                    e.target.style.backgroundColor = 'var(--bg-color-light)';\n                    e.target.style.color = 'var(--color-offset)';\n                }} onMouseOut={e => {\n                    e.target.style.backgroundColor = 'var(--color-offset)';\n                    e.target.style.color = 'var(--bg-color-dark)'\n                }} onBlur={e => {\n                    e.target.style.backgroundColor = 'var(--color-offset)';\n                    e.target.style.color = 'var(--bg-color-dark)'\n                }} className=\"button\" onClick={_=> transitionPage(history, '/')}>Back to Home</button>\n            </>\n        )\n      }} />\n      </Switch>\n  );\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\r\nimport { HistoryProvider } from './contexts/History.context';\r\nimport { UserProvider } from './contexts/User.context';\r\nimport { BinManagerProvider } from './contexts/BinManager.context';\r\n\r\nexport default ({ children }) => (\r\n    <BinManagerProvider>\r\n        <UserProvider>\r\n            <HistoryProvider>\r\n                {children}\r\n            </HistoryProvider>\r\n        </UserProvider>\r\n    </BinManagerProvider>\r\n)","import { combineReducers } from 'redux';\r\nimport makeRequest from './reducers/makeRequest.reducer';\r\nimport search from './reducers/search.reducer';\r\nimport user from './reducers/updateUser.reducer';\r\nimport currentlySaved from './reducers/getCurrentlySaved.reducer';\r\nimport query from './reducers/query.reducer';\r\n\r\nexport default combineReducers({ makeRequest, search, user, currentlySaved, query })","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter } from 'react-router-dom'\nimport Context from './store/Context';\nimport { createStore, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux';\nimport thunk from 'redux-thunk';\nimport reducer from './store/reducer';\n\n\nconst store = createStore(reducer, applyMiddleware(thunk));\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <Provider store={store}>\n        <Context>\n          <App />\n        </Context>\n      </Provider>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}