(this.webpackJsonpchoosie_react=this.webpackJsonpchoosie_react||[]).push([[0],{33:function(e,t,n){e.exports=n.p+"static/media/image-alt.7496b72d.png"},35:function(e,t,n){e.exports=n(49)},39:function(e,t,n){},40:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(18),o=n.n(l),c=(n(39),n(40),n(7)),i=n(4),s=n.n(i),u=n(9),m=n(1),d=n(2),p=new URL("http://localhost:8082"),f=Object(a.createContext)(null),g=function(e){var t=e.children,n=Object(c.f)();return r.a.createElement(f.Provider,{value:n},t)},b=f,h=n(3),y={loading:!1,result:null,error:null},v=function(e){return{type:"UPDATE_USER_FAILURE",payload:e}},E=function(e){return function(t){e?(t({type:"UPDATE_USER_LAUNCH"}),fetch(p+"users/".concat(e)).then((function(e){return e.json()})).then((function(e){t({type:"UPDATE_USER_SUCCESS",payload:e[0]})})).catch((function(e){return t(v(e))}))):t(v(null))}};var O=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.user.result})),n=Object(a.useContext)(b),l=Object(a.useState)(!1),o=Object(m.a)(l,2),c=o[0],i=o[1],f=Object(a.useState)(null),g=Object(m.a)(f,2),h=g[0],y=g[1],v=Object(a.useRef)(null),O=Object(a.useRef)(null);Object(a.useEffect)((function(e){h&&v.current?(v.current.style.transform="translateY(1rem)",O.current.style.transform="translateY(1.4rem)"):v.current&&(v.current.style.transform="translateY(0)",O.current.style.transform="translateY(0)")}),[h]);var j=function(){var t=Object(u.a)(s.a.mark((function t(n){var a,r,l,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.persist(),n.preventDefault(),a=n.target.children[0].value,r=n.target.children[2].value,a||r){t.next=7;break}return y(null),i(!1),t.abrupt("return");case 7:return t.prev=7,t.next=10,fetch(p+"users/".concat(a));case 10:return l=t.sent,t.next=13,l.json();case 13:if((o=t.sent)[0]){t.next=17;break}return y("Invalid login"),t.abrupt("return");case 17:String(o[0].password)===r?(e(E(a)),y(null)):y("Invalid login"),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(7),y("Something went wrong"),console.log(t.t0);case 24:case"end":return t.stop()}}),t,null,[[7,20]])})));return function(e){return t.apply(this,arguments)}}();function x(e){e.target.style.color="red"}function k(e){e.persist(),setTimeout((function(t){return e.target.style.color="white"}),250)}return t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{color:"var(--color-offset)",fontSize:"1.75rem",margin:"1rem 0 0 1rem"}},"Welcome, ",t.name||t.username),r.a.createElement("span",{style:{padding:"0 2rem"}},r.a.createElement("button",{onClick:function(t){e(E(null)),i(!1)},style:{color:"white",cursor:"pointer",backgroundColor:"transparent",border:"none",marginRight:".5rem"},onMouseOver:function(e){return e.target.style.color="silver"},onMouseOut:function(e){return e.target.style.color="white"},onFocus:function(e){return e.target.style.color="silver"},onBlur:function(e){return e.target.style.color="white"}},"Log out"),r.a.createElement("button",{onClick:function(e){return n.push("profile/".concat(t.username))},style:{color:"white",cursor:"pointer",backgroundColor:"transparent",border:"none",marginLeft:".5rem"},onMouseOver:function(e){return e.target.style.color="silver"},onMouseOut:function(e){return e.target.style.color="white"},onFocus:function(e){return e.target.style.color="silver"},onBlur:function(e){return e.target.style.color="white"}},"View profile"))):c?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:O,style:{position:"absolute",top:"-1rem",left:"2.8rem",color:"red",transition:"transform 300ms ease-in-out"}},h),r.a.createElement("form",{onSubmit:j,ref:v,style:{backgroundColor:"transparent",margin:"1rem",display:"inline-block",transition:"transform 300ms ease-in-out"}},r.a.createElement("input",{style:{padding:".25rem",height:"1.25rem",marginBottom:".2rem"},type:"text",placeholder:"username"}),r.a.createElement("br",null),r.a.createElement("input",{style:{padding:".25rem",height:"1.25rem"},type:"password",placeholder:"password"}),r.a.createElement("br",null),r.a.createElement("div",{style:{marginTop:".25rem",display:"flex",justifyContent:"space-between"}},r.a.createElement("button",{className:"button-manage-movie",onClick:function(e){return e.target.blur()}},"Log in"),r.a.createElement("button",{className:"button-manage-movie",onClick:function(e){e.persist(),e.preventDefault(),e.stopPropagation(),n.push("/register")}},"Sign up")))):r.a.createElement("button",{className:"button-login",onClick:function(e){return i(!0)}},r.a.createElement("span",{style:{transition:"color 250ms ease-in"},onMouseOver:x,onMouseOut:k},"L"),r.a.createElement("span",{style:{transition:"color 250ms ease-in"},onMouseOver:x,onMouseOut:k},"o"),r.a.createElement("span",{style:{transition:"color 250ms ease-in"},onMouseOver:x,onMouseOut:k},"g"),r.a.createElement("span",{style:{transition:"color 250ms ease-in",marginLeft:".35rem"},onMouseOver:x,onMouseOut:k},"i"),r.a.createElement("span",{style:{transition:"color 250ms ease-in"},onMouseOver:x,onMouseOut:k},"n"))},j=n(8);var x=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.b,{to:"/help",className:"link-help"},"What is ",r.a.createElement("span",{className:"logo",style:{fontWeight:600}},"Choosie"),"?"),r.a.createElement("div",{style:{position:"absolute",bottom:".85rem",right:"1rem",color:"black",userSelect:"none"}},"\xa9 2020 Choosie | Nick Barak"))},k={loading:!1,searchValue:null,result:[],error:null},w=function(e,t,n){return function(a){a({type:"SEARCH_LAUNCH",payload:t}),fetch(p+"search?user=".concat(e,"&search=").concat(t,"&page=").concat(n)).then((function(e){return e.json()})).then((function(e){a(function(e){return{type:"SEARCH_SUCCESS",payload:e}}(e))})).catch((function(e){return a(function(e){return{type:"SEARCH_FAILURE",payload:e}}(e))}))}},C=Object(a.createContext)(null),S=function(e){var t=e.children,n=Object(a.useState)(C._currentValue),l=Object(m.a)(n,2),o=l[0],c=l[1];return r.a.createElement(C.Provider,{value:[o,c]},t)},N=C;var _=function(){var e=Object(d.b)(),t=Object(a.useContext)(b),n=Object(a.useContext)(N),l=Object(m.a)(n,1)[0],o=function(){var n=Object(u.a)(s.a.mark((function n(a){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a.persist(),a.preventDefault();try{e(w(l?l.username:null,a.target.children[0].value,1)),a.target.reset(),t.push("/search")}catch(a){console.log(a)}case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();function c(e,n){l&&fetch("".concat(p,"home/").concat(l.username),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({button:e})}).then((function(e){return!e.ok&&console.log("Something went wrong")})).catch((function(e){return console.log(e)})),t.push(n)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{history:t}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"frame"},r.a.createElement("h1",{className:"logo",style:{userSelect:"none",fontSize:45}},"Choosie"),r.a.createElement("form",{onSubmit:o},r.a.createElement("input",{className:"search",type:"text",placeholder:"Search actors, genres, directors",style:{margin:"1.5rem 1.5rem"}})),r.a.createElement("ul",{className:"button-wrapper"},r.a.createElement("li",null,r.a.createElement("button",{className:"button",onClick:function(e){return c("my_list","/my-list")}},"My List")),r.a.createElement("li",null,r.a.createElement("button",{className:"button",onClick:function(e){return c("start","/query")}},"Start")),r.a.createElement("li",null,r.a.createElement("button",{className:"button",onClick:function(e){return c("popular","/popular")}},"Popular"))))),r.a.createElement(x,null))},R=n(6),T=n(11),D=n(21),A={loading:!1,result:[],error:null},U=function(e){return{type:"MAKE_REQUEST_SUCCESS",payload:e}},I=function(e){return{type:"MAKE_REQUEST_FAILURE",payload:e}},M=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(a){a({type:"MAKE_REQUEST_LAUNCH"}),fetch(p+"".concat(e).concat(t||""),n).then((function(e){return e.json()})).then((function(e){a(U(e))})).catch((function(e){return a(I(e))}))}};var P=function(e){var t=e.withSearch,n=e.searchValue;return r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(j.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(j.b,{to:"/my-list"},"My List")),r.a.createElement("li",null,r.a.createElement(j.b,{to:"/popular"},"Popular")),t&&r.a.createElement("li",null,r.a.createElement(j.b,{to:{pathname:"/search",searchValue:n}},"Back to Search"))))};var L=function(e){var t=e.location.searchValue,n=Object(a.useContext)(b),l=Object(c.g)(),o=Object(d.b)(),i=Object(d.c)((function(e){return e.makeRequest.result[0]})),f=Object(d.c)((function(e){return e.makeRequest})),g=f.loading,h=f.error,y=Object(a.useState)(!1),v=Object(m.a)(y,2),O=v[0],j=v[1],x=Object(a.useState)(!1),k=Object(m.a)(x,2),w=k[0],C=k[1],S=Object(a.useState)(null),N=Object(m.a)(S,2),_=(N[0],N[1]),A=Object(d.c)((function(e){return e.user.result}));return Object(a.useEffect)((function(e){return o(M("movies","?id="+l.pathname.split("/movies/")[1]))}),[]),Object(a.useEffect)((function(e){var t=new AbortController,n=t.signal;return w&&function(){var e=Object(u.a)(s.a.mark((function e(t){var a,r,l,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(p+"movies?user=".concat(A.username),{signal:n,method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({movieID:w})});case 3:!e.sent.ok&&_("Error unsaving movie"),a=Object.entries(A.bins).filter((function(e){return e[1].includes(String(w))})),r=Object(D.a)(a),e.prev=7,r.s();case 9:if((l=r.n()).done){e.next=17;break}return c=l.value,e.next=13,fetch(p+"users/".concat(A.username,"/bins"),{signal:n,method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({bin:Object(T.a)({},c[0],c[1].filter((function(e){return e!==String(w)})))})});case 13:!e.sent.ok&&_("Error unsaving movie");case 15:e.next=9;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),r.e(e.t0);case 22:return e.prev=22,r.f(),e.finish(22);case 25:o(E(A.username)),C(!1),e.next=32;break;case 29:e.prev=29,e.t1=e.catch(0),"AbortError"===e.t1.name&&console.log("Unsave aborted");case 32:case"end":return e.stop()}}),e,null,[[0,29],[7,19,22,25]])})));return function(t){return e.apply(this,arguments)}}()(),function(e){return t.abort()}}),[w]),i?g?r.a.createElement("div",null,"Loading..."):h?r.a.createElement("div",null,"Error loading movie"):r.a.createElement(r.a.Fragment,null,r.a.createElement(P,{withSearch:t,searchValue:t}),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",transform:"translateY(-3.5rem)"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"60vw"}},r.a.createElement("img",{className:"image-movie",src:i.cover_file,alt:"not available"}),r.a.createElement("label",{style:{fontWeight:"bold",margin:"1rem 0 .2rem 0"}},i.title),A?A.currently_saved.includes(i.id)?r.a.createElement("button",{className:"button-manage-movie",onClick:function(e){var t=!0;Object.values(A.bins).reduce((function(e,t){return[].concat(Object(R.a)(e),Object(R.a)(t))}),[]).includes(String(i.id))&&(t=window.confirm("This will remove the movie from all bins. Do you still want to unsave it?")),t&&C(i.id)}},w?"Unsaving movie...":"Unsave Movie"):r.a.createElement("button",{className:"button-manage-movie",onClick:function(){j(!0),fetch(p+"movies?user=".concat(A.username),{method:A.save_history.includes(i.id)?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({movieID:i.id,inRecent:A.recent_save_history.includes(i.id)})}).then((function(e){e.ok?(j(!1),o(E(A.username))):_("Error saving movie")})).catch((function(e){return _("Error saving movie")}))}},O?"Saving movie...":"Save to My List"):r.a.createElement("button",{className:"button-manage-movie",onClick:function(e){return n.push("/register")}},"Sign in to save this movie"),i.description&&r.a.createElement("div",{style:{margin:"2.5rem 0 3rem 0",textAlign:"justify"}},"Not available"===i.description?"Description not available":i.description)),r.a.createElement("ul",{className:"info-movie"},r.a.createElement("li",null,r.a.createElement("label",null,"Genres: "),i.genres&&r.a.createElement("span",null,i.genres.join(", ")||"Not available")),r.a.createElement("li",null,r.a.createElement("label",null,"Rating: "),i.mpaa_rating&&r.a.createElement("span",null,i.mpaa_rating||"Not available")),r.a.createElement("li",null,r.a.createElement("label",null,"Duration: "),i.duration_in_mins?i.duration_in_mins%60?i.duration_in_mins>=60?r.a.createElement("span",null,Math.floor(i.duration_in_mins/60),"h ",i.duration_in_mins%60,"min"):r.a.createElement("span",null,i.duration_in_mins," min"):r.a.createElement("span",null,i.duration_in_mins%60,"h"):"Not available"),r.a.createElement("li",null,r.a.createElement("label",null,"Release Date: "),i.release_date&&r.a.createElement("span",null,i.release_date.slice(0,4)||"Not available")),r.a.createElement("li",null,r.a.createElement("label",null,"Writers: "),i.writers&&r.a.createElement("span",null,i.writers.join(", ")||"Not available")),r.a.createElement("li",null,r.a.createElement("label",null,"Directors: "),i.directors&&r.a.createElement("span",null,i.directors.join(", ")||"Not available")),r.a.createElement("li",null,r.a.createElement("label",null,"Actors: "),i.actors&&r.a.createElement("span",null,i.actors.join(", ")||"Not available")),r.a.createElement("li",null,r.a.createElement("label",null,"Languages: "),i.languages&&r.a.createElement("span",null,i.languages.join(", ")||"Not available")),r.a.createElement("li",null,r.a.createElement("label",null,"Countries: "),i.countries&&r.a.createElement("span",null,i.countries.join(", ")||"Not available"))))):r.a.createElement("div",null,"Error loading movie")},H=["Afrikaans","Bengali","Burmese","Cantonese","Czech","Dutch","English","Filipino","French","German","Hindi","Hungarian","Indonesian","Italian","Japanese","Korean","Malay","Mandarin","Polish","Portuguese","Punjabi","Romanian","Russian","Spanish","Standard Arabic","Sundanese","Swahili","Swedish","Tagalog","Tamil","Telugu","Thai","Turkish","Ukranian","Vietnamese"];var F=function(){var e=Object(a.useContext)(b),t=Object(a.useState)(!1),n=Object(m.a)(t,2),l=n[0],o=n[1],c=Object(a.useState)({}),i=Object(m.a)(c,2),f=i[0],g=i[1],y=Object(a.useState)(null),v=Object(m.a)(y,2),O=v[0],j=v[1],x=Object(a.useState)(null),k=Object(m.a)(x,2),w=k[0],C=k[1],S=Object(a.useState)(null),N=Object(m.a)(S,2),_=N[0],R=N[1],T=Object(d.b)();function D(){return(D=Object(u.a)(s.a.mark((function t(n){var a,r,l,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(j(null),R(null),n.persist(),n.preventDefault(),a=n.target.children[1].children[0].children[0].value,r=n.target.children[1].children[1].children[0].value,a||r){t.next=7;break}return t.abrupt("return");case 7:return t.prev=7,t.next=10,fetch(p+"users/".concat(a));case 10:return l=t.sent,t.next=13,l.json();case 13:if((o=t.sent)[0]){t.next=17;break}return R("Invalid login"),t.abrupt("return");case 17:String(o[0].password)===r?(T(E(o[0].username)),e.push("/")):R("Invalid login"),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(7),j("Something went wrong");case 23:n.target.reset();case 24:case"end":return t.stop()}}),t,null,[[7,20]])})))).apply(this,arguments)}return l?r.a.createElement("div",{className:"container",style:{flexDirection:"column"}},w?r.a.createElement("div",{style:{color:"red",margin:"1rem"}},w):O&&r.a.createElement("div",{style:{color:"maroon"}},O),r.a.createElement("form",{className:"register-1",onSubmit:function(t){j(null),C(null),t.persist(),t.preventDefault();var n=t.target.children[1].children;!n[2].children[0].value||/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/.exec(n[2].children[0].value)?(fetch(p+"users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(h.a)(Object(h.a)({},f),{},{name:n[0].children[0].value?n[1].children[0].value:null,age:n[1].children[0].selectedIndex?Number(n[1].children[0].options[n[1].children[0].selectedIndex].text):0,sex:n[1].children[1].selectedIndex?n[1].children[1].options[n[1].children[1].selectedIndex].text:null,languages:n[1].children[2].selectedIndex?n[1].children[2].options[n[1].children[2].selectedIndex].text:null,email:n[2].children[0].value?n[2].children[0].value:null}))}).then((function(e){return e.json()})).then((function(t){T(E(t.username)),e.push("/")})).catch((function(e){return j("Something went wrong")})),t.target.reset()):C("Invalid email address")}},r.a.createElement("div",{className:"prompt-register"},"You can enter more information here for a better experience"),r.a.createElement("ul",null,r.a.createElement("li",{style:{margin:".75rem"}},r.a.createElement("input",{className:"input-register",type:"text",placeholder:"first name",key:"name"})),r.a.createElement("li",{style:{margin:".75rem"},className:"ul-create-user"},r.a.createElement("select",{defaultValue:"default"},r.a.createElement("option",{key:"-1",value:"default",disabled:!0},"Select an age"),new Array(126).fill("").map((function(e,t){return r.a.createElement("option",{key:t},t)}))),r.a.createElement("select",{defaultValue:"default"},r.a.createElement("option",{key:"0",value:"default",disabled:!0},"Select a sex"),r.a.createElement("option",{key:"1",value:"female"},"Female"),r.a.createElement("option",{key:"2",value:"male"},"Male"),r.a.createElement("option",{key:"3",value:"other"},"Other")),r.a.createElement("select",{defaultValue:"default"},r.a.createElement("option",{key:"-1",value:"default",disabled:!0},"Select a language"),H.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement("li",{style:{margin:".75rem"}},r.a.createElement("input",{className:"input-register",type:"text",placeholder:"email"}))),r.a.createElement("div",{className:"prompt-register",style:{marginTop:".5rem",marginBottom:".3rem"}},"You can also edit these fields later"),r.a.createElement("div",null,r.a.createElement("button",{className:"button-register"},"Sign up"),r.a.createElement("button",{className:"button-register",onClick:function(t){return e.push("/")}},"Cancel")))):r.a.createElement("div",{className:"container",style:{flexDirection:"column"}},w&&r.a.createElement("div",{style:{color:"red",margin:"1rem"}},w),r.a.createElement("form",{className:"register-1",onSubmit:function(e){C(null),e.persist(),e.preventDefault();var t=e.target.children[1].children;t[0].children[0].value.includes(" ")?C("Username cannot contain a space"):/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/.exec(t[1].children[0].value)?t[1].children[0].value===t[2].children[0].value?function(){var n=Object(u.a)(s.a.mark((function n(a){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(p+"users/check?user="+t[0].children[0].value);case 2:return r=n.sent,n.next=5,r.json();case 5:if(!n.sent.length){n.next=9;break}return C("Username not available"),n.abrupt("return");case 9:g({username:t[0].children[0].value,password:t[1].children[0].value}),o(!0),e.target.reset();case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()():C("Passwords must match"):C("Password must be at least 8 characters with one of each of the following: upper case letter, lower case letter, number and special character")}},r.a.createElement("div",{className:"prompt-register"},"Please enter a username and password or sign in with another platform"),r.a.createElement("ul",{style:{display:"flex",flexDirection:"column",width:"80%",placeItems:"center"}},r.a.createElement("li",{style:{margin:".25rem",width:"100%",maxWidth:"25rem"}},r.a.createElement("input",{className:"input-register",type:"text",placeholder:"username",key:"username"})),r.a.createElement("li",{style:{margin:".25rem",width:"100%",maxWidth:"25rem"}},r.a.createElement("input",{className:"input-register",type:"password",placeholder:"password",key:"password"})),r.a.createElement("li",{style:{margin:".25rem",width:"100%",maxWidth:"25rem"}},r.a.createElement("input",{className:"input-register",type:"password",placeholder:"repeat password"}))),r.a.createElement("div",null,r.a.createElement("button",{className:"button-register"},"Continue"),r.a.createElement("button",{onClick:function(t){return e.push("/")},className:"button-register"},"Cancel"))),_?r.a.createElement("div",{style:{color:"red",margin:"1rem"}},_):O&&r.a.createElement("div",{style:{color:"maroon"}},O),r.a.createElement("form",{className:"register-1",onSubmit:function(e){return D.apply(this,arguments)}},r.a.createElement("div",{className:"prompt-register"},"Already have an account? Log in"),r.a.createElement("ul",{style:{display:"flex",flexDirection:"column",width:"80%",placeItems:"center"}},r.a.createElement("li",{style:{margin:".25rem",width:"100%",maxWidth:"25rem"}},r.a.createElement("input",{className:"input-register",type:"text",placeholder:"username"})),r.a.createElement("li",{style:{margin:".25rem",width:"100%",maxWidth:"25rem"}},r.a.createElement("input",{className:"input-register",type:"password",placeholder:"password"}))),r.a.createElement("button",{className:"button-register"},"Log in")))},B=n(31);var V,z=function(e){var t=e.prompt,n=e.defaultChecked,l=e.onCheck,o=e.onUncheck,c=Object(a.useRef)(null);return Object(a.useEffect)((function(e){n&&(c.current.checked=!0,B.Simulate.change(c.current))}),[]),r.a.createElement("div",{style:{margin:".2rem"}},r.a.createElement("span",null,t," "),r.a.createElement("label",{className:"toggler"},r.a.createElement("input",{type:"checkbox",ref:c,onChange:function(e){var t=e.target.parentElement.children[1].style;e.target.checked?(t.backgroundColor="#2196F3",t.boxShadow="0 0 1px #2196F3",t.setProperty("--toggler-translation","12.5px"),l&&l()):(t.backgroundColor="#aaa",t.boxShadow="none",t.setProperty("--toggler-translation",0),o&&o())}}),r.a.createElement("span",null)))},G=["Afrikaans","Bengali","Burmese","Cantonese","Czech","Dutch","English","Filipino","French","German","Hindi","Hungarian","Indonesian","Italian","Japanese","Korean","Malay","Mandarin","Polish","Portuguese","Punjabi","Romanian","Russian","Spanish","Standard Arabic","Sundanese","Swahili","Swedish","Tagalog","Tamil","Telugu","Thai","Turkish","Ukranian","Vietnamese"];var Y=function(){var e=Object(a.useState)(null),t=Object(m.a)(e,2),n=t[0],l=t[1],o=Object(a.useState)(!1),i=Object(m.a)(o,2),p=i[0],f=(i[1],Object(a.useState)(!1)),g=Object(m.a)(f,2),y=(g[0],g[1],Object(a.useState)(null)),v=Object(m.a)(y,2),O=v[0],j=v[1],x=Object(c.g)(),k=Object(a.useContext)(b),w=Object(d.b)(),C=Object(d.c)((function(e){return e.makeRequest})),S=C.error,N=(C.result,C.loading,Object(d.c)((function(e){return e.user.result}))),_=Object(a.useState)(!1),R=Object(m.a)(_,2),T=R[0],D=R[1],A=Object(a.useState)(N&&N.show_save_history),U=Object(m.a)(A,2),I=U[0],P=U[1],L=Object(a.useState)(N&&N.show_description_on_hover),H=Object(m.a)(L,2),F=H[0],B=H[1],Y=Object(a.useState)(null),J=Object(m.a)(Y,2),W=J[0],K=J[1];function q(e,t){if(e&&(e.persist(),e.preventDefault(),e.target.children[3].value&&!/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/.exec(e.target.children[3].value)))l("Invalid email address");else{var n=e&&e.target.children,a={name:e?n[0].value:N.name,sex:e&&n[1].children[0].selectedIndex?n[1].children[0].options[n[1].children[0].selectedIndex].text:N.sex,age:e&&n[1].children[1].selectedIndex?Number(n[1].children[1].options[n[1].children[1].selectedIndex].text):N.age,languages:e&&n[1].children[2].selectedIndex?[n[1].children[2].options[n[1].children[2].selectedIndex].text]:N.languages,country:e?n[2].value:N.country,email:e?n[3].value:N.email,show_save_history:I,show_description_on_hover:F,recent_save_history:T?[]:N.recent_save_history};if(e)try{new Promise((function(e){return w(M("users/".concat(N.username),"",{signal:t,method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}))||e()})).then((function(t){w(E(N.username)),K("Info updated successfully"),e.target.style.transform="scale(0)",e.target.style.maxHeight=0,e.target.parentElement.parentElement.parentElement.parentElement.children[0].style.transform="100%"===e.target.parentElement.parentElement.parentElement.children[2].children[0].children[2].style.maxHeight?"translate(-6.5rem, 2rem)":"translate(0)"}))}catch(e){l("Error editing info"),console.log(e)}}}function Q(e){return $.apply(this,arguments)}function $(){return($=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(h.a)({},N),"languages"===t&&(N.languages=[]),n[t]=null,e.next=5,Promise.resolve().then((function(e){return w(M("users/".concat(N.username),null,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n.name,email:n.email,languages:n.languages,country:n.country,age:n.age,sex:n.sex,show_save_history:N.show_save_history,show_description_on_hover:N.show_description_on_hover,recent_save_history:N.recent_save_history})}))}));case 5:w(E(N.username));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(e){if(V){var t=new AbortController;return q(null,t.signal),function(e){return t.abort()}}V=!0}),[T,I,F]),Object(a.useEffect)((function(e){}),[p]),N&&N.username===x.pathname.split("/profile/")[1]?r.a.createElement("div",{className:"container",style:{flexDirection:"column"}},r.a.createElement("div",{className:"register-1",style:{transition:"transform 300ms ease-out"}},r.a.createElement("label",{className:"prompt-register"},"Your info"),r.a.createElement("ul",{className:"info-list"},r.a.createElement("li",null,r.a.createElement("button",{className:"button-register",style:{visibility:"hidden"}},"Clear"),r.a.createElement("label",null,"Username: "),r.a.createElement("span",null,N.username)),r.a.createElement("li",null,r.a.createElement("button",{className:"button-register",onClick:function(e){return Q("name")}},"Clear"),r.a.createElement("label",null,"Name: "),r.a.createElement("span",null,N.name||"Not specified")),r.a.createElement("li",null,r.a.createElement("button",{className:"button-register",onClick:function(e){return Q("sex")}},"Clear"),r.a.createElement("label",null,"Sex: "),r.a.createElement("span",null,N.sex||"Not specified")),r.a.createElement("li",null,r.a.createElement("button",{className:"button-register",onClick:function(e){return Q("age")}},"Clear"),r.a.createElement("label",null,"Age: "),r.a.createElement("span",null,N.age||"Not specified")),r.a.createElement("li",null,r.a.createElement("button",{className:"button-register",onClick:function(e){return Q("languages")}},"Clear"),r.a.createElement("label",null,"Language: "),r.a.createElement("span",{style:{}},N.languages[0].length?N.languages:"Not specified")),r.a.createElement("li",null,r.a.createElement("button",{className:"button-register",onClick:function(e){return Q("country")}},"Clear"),r.a.createElement("label",null,"Country: "),r.a.createElement("span",null,N.country||"Not specified")),r.a.createElement("li",null,r.a.createElement("button",{className:"button-register",onClick:function(e){return Q("email")}},"Clear"),r.a.createElement("label",null,"Email: "),r.a.createElement("span",null,N.email||"Not specified")))),r.a.createElement("ul",{className:"profile-lower"},r.a.createElement("li",null,r.a.createElement("div",{style:{padding:"1rem"},className:"register-1"},r.a.createElement("button",{className:"button-register",onClick:function(e){e.target.blur();var t=e.target.parentElement.children[2].style,n="100%"===e.target.parentElement.parentElement.parentElement.children[2].children[0].children[2].style.maxHeight;t.maxHeight=t.maxWidth="100%"===t.maxHeight?0:"100%",t.transform="scale(0)"===t.transform?"scale(1)":"scale(0)",e.target.parentElement.parentElement.parentElement.parentElement.children[0].style.transform="100%"===t.maxHeight?n?"translate(6rem, 3rem)":"translate(6rem, 5rem)":n?"translate(-6.5rem, 2rem)":"translate(0)"}},"Edit Info"),r.a.createElement("div",{className:"error-msg",style:{color:"maroon"}},n),r.a.createElement("form",{onSubmit:q,style:{transform:"scale(0)"}},r.a.createElement("input",{style:{width:"92.5%",margin:".35rem"},className:"input-register",placeholder:"name"}),r.a.createElement("div",{style:{margin:".75rem"},className:"ul-create-user"},r.a.createElement("select",{style:{margin:".35rem"},defaultValue:"default"},r.a.createElement("option",{key:"0",value:"default",disabled:!0},"Select a sex"),r.a.createElement("option",{key:"1",value:"female"},"Female"),r.a.createElement("option",{key:"2",value:"male"},"Male"),r.a.createElement("option",{key:"3",value:"other"},"Other")),r.a.createElement("select",{style:{margin:".35rem"},defaultValue:"default"},r.a.createElement("option",{key:"-1",value:"default",disabled:!0},"Select an age"),new Array(126).fill("").map((function(e,t){return r.a.createElement("option",{key:t},t)}))),r.a.createElement("select",{style:{margin:".35rem"},defaultValue:"default"},r.a.createElement("option",{key:"-1",value:"default",disabled:!0},"Select a language"),G.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement("input",{style:{width:"92.5%",margin:".35rem"},className:"input-register",placeholder:"country"}),r.a.createElement("input",{style:{width:"92.5%",margin:".35rem"},className:"input-register",placeholder:"email"}),r.a.createElement("button",{className:"button-register"},"Submit")))),r.a.createElement("li",null,r.a.createElement("div",{style:{padding:"1rem",fontSize:"1rem",width:"90%"},className:"register-1"},r.a.createElement(z,{prompt:"Show description on hover?",defaultChecked:F,onCheck:function(e){return B(!0)},onUncheck:function(e){return B(!1)}}),r.a.createElement(z,{className:"toggler-profile",prompt:"Show Save History?",defaultChecked:I,onCheck:function(e){return P(!0)},onUncheck:function(e){return P(!1)}}),r.a.createElement("button",{className:"button-register",onClick:function(e){e.target.blur(),N.recent_save_history.length&&D(!0)}},N.recent_save_history.length?T?"Clearing...":"Clear Save History":"History Cleared"))),r.a.createElement("li",null,r.a.createElement("div",{style:{padding:"1rem"},className:"register-1"},r.a.createElement("button",{className:"button-register",onClick:function(e){e.target.blur();var t=e.target.parentElement.children[2].style,n="100%"===e.target.parentElement.parentElement.parentElement.children[0].children[0].children[2].style.maxHeight;t.maxHeight=t.maxWidth="100%"===t.maxHeight?0:"100%",t.transform="scale(0)"===t.transform?"scale(1)":"scale(0)",e.target.parentElement.parentElement.parentElement.parentElement.children[0].style.transform="100%"===t.maxHeight?n?"translate(6rem, 3.5rem)":"translate(-6rem, 2rem)":n?"translate(6rem, 5rem)":"translate(0)"}},"Change Password"),r.a.createElement("div",{className:"error-msg",style:{color:"maroon"}},O),r.a.createElement("form",{onSubmit:function(e){e.persist(),e.preventDefault(),j(null);var t=e.target.children,n=t[0].value,a=t[1].value,r=t[2].value;n===N.password?/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/.exec(a)?a===r?function(){var t=Object(u.a)(s.a.mark((function t(r){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then((function(e){return w(M("users/".concat(N.username),null,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:n,newPassword:a})}))}));case 2:S?j("Error changing password"):(w(E(N.username)),e.target.style.transform="scale(0)",e.target.style.maxHeight=0,e.target.parentElement.parentElement.parentElement.parentElement.children[0].style.transform="100%"===e.target.parentElement.parentElement.parentElement.children[0].children[0].children[2].style.maxHeight?"translate(6rem, 3.5rem)":"translate(-6rem, 2rem)",e.target.reset(),K("Password changed successfully"));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()():j("Passwords must match"):j("Password must be at least 8 characters with one of each of the following: upper case letter, lower case letter, number and special character"):j("Entry for current password was incorrect")},style:{transform:"scale(0)"}},r.a.createElement("input",{style:{width:"92.5%"},className:"input-register",type:"password",placeholder:"Enter current password"}),r.a.createElement("input",{style:{width:"92.5%"},className:"input-register",type:"password",placeholder:"Enter new password"}),r.a.createElement("input",{style:{width:"92.5%"},className:"input-register",type:"password",placeholder:"Repeat new password"}),r.a.createElement("button",{className:"button-register"},"Submit"))))),W&&r.a.createElement("div",{style:{color:"white",margin:".8rem",padding:"1rem"}},W),r.a.createElement("button",{style:{margin:"1rem",backgroundColor:"var(--bg-color-dark)",color:"var(--color-offset)"},onMouseOver:function(e){e.target.style.backgroundColor="var(--color-offset)",e.target.style.color="var(--bg-color-dark)"},onFocus:function(e){e.target.style.backgroundColor="var(--color-offset)",e.target.style.color="var(--bg-color-dark)"},onMouseOut:function(e){e.target.style.backgroundColor="var(--bg-color-dark)",e.target.style.color="var(--color-offset)"},onBlur:function(e){e.target.style.backgroundColor="var(--bg-color-dark)",e.target.style.color="var(--color-offset)"},className:"button",onClick:function(e){return k.push("/")}},"Back to Home")):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{margin:"1rem 0 .25rem 1rem"}},'You must be logged in as "',x.pathname.split("/profile/")[1],'" to view this page'),r.a.createElement("button",{style:{marginTop:".5rem"},onMouseOver:function(e){e.target.style.backgroundColor="var(--bg-color-light)",e.target.style.color="var(--color-offset)"},onFocus:function(e){e.target.style.backgroundColor="var(--bg-color-light)",e.target.style.color="var(--color-offset)"},onMouseOut:function(e){e.target.style.backgroundColor="var(--color-offset)",e.target.style.color="var(--bg-color-dark)"},onBlur:function(e){e.target.style.backgroundColor="var(--color-offset)",e.target.style.color="var(--bg-color-dark)"},className:"button",onClick:function(e){return k.push("/")}},"Back to Home"))};var J,W=function(){var e=Object(d.c)((function(e){return e.user.result})),t=Object(a.useState)(0),n=Object(m.a)(t,2),l=n[0],o=n[1];function c(t){o(t);try{fetch(p+"search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rating:t,username:e?e.username:null})})}catch(n){console.log(n)}}return r.a.createElement("div",null,r.a.createElement("label",{style:{marginRight:".5rem",fontSize:"1rem"}},"How would you rate these suggestions?"),r.a.createElement("span",null,[1,2,3,4,5].map((function(e){return l>=e?r.a.createElement("i",{key:e,className:"fas fa-star",onClick:function(t){return c(e)},style:{cursor:"pointer"}}):r.a.createElement("i",{key:e,className:"far fa-star",onClick:function(t){return c(e)},style:{cursor:"pointer"}})}))))};var K=function(e){var t=e.location,n=(Object(a.useContext)(b),Object(d.c)((function(e){return e.search}))),l=n.loading,o=n.searchValue,c=n.result,i=Object(d.b)(),s=Object(a.useState)(1),u=Object(m.a)(s,2),p=u[0],f=u[1],g=Object(d.c)((function(e){return e.user.result})),h=Object(a.useRef)(null),y=Object(a.useRef)(null),v=Object(a.useRef)(null),E=Object(a.useRef)(null);return Object(a.useEffect)((function(e){i(w(g?g.username:null,t.searchValue?J?o:t.searchValue:o,p)),J=!0}),[p]),Object(a.useEffect)((function(e){c&&c.length<11&&h.current?[h,y].forEach((function(e){e.current.style.opacity=0,e.current.style.pointerEvents="none"})):c&&h.current&&[h,y].forEach((function(e){e.current.style.opacity=1,e.current.style.pointerEvents="auto"})),1===p&&v.current?([v,E].forEach((function(e){e.current.style.opacity=0,e.current.style.pointerEvents="none"})),[h,y].forEach((function(e){return e.current.style.transform="translateX(0)"}))):v.current&&[v,E].forEach((function(e){e.current.style.opacity=1,e.current.style.pointerEvents="auto"})),2===p&&[h,y].forEach((function(e){return e.current.style.transform="translate(calc(190px - 1rem))"}))}),[c]),r.a.createElement(r.a.Fragment,null,r.a.createElement(P,null),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"60vw",marginBottom:!l&&c?"1.5rem":"2rem"}},r.a.createElement("label",{style:{margin:".4rem 0",fontSize:"1.3rem"}},'"',o,'"'),r.a.createElement(W,null),r.a.createElement("form",{onSubmit:function(e){e.persist(),e.preventDefault(),f(1),e.target.children[0].value&&(i(w(g?g.username:null,e.target.children[0].value,p)),e.target.reset())}},r.a.createElement("input",{style:{marginTop:".8rem"},className:"search",type:"text",placeholder:"Search actors, genres, directors"}))),l?r.a.createElement("div",null,"Loading..."):c?null:r.a.createElement("div",null,"No results found"),r.a.createElement("div",{style:{display:c?"block":"none",width:"60vw"}},r.a.createElement("div",{style:{posiiton:"relative",display:"flex",justifyContent:"space-between",width:"100%",height:"100%"}},r.a.createElement("button",{ref:v,className:"button-v2",style:{pointerEvents:"none",opacity:0,left:"20vw",transition:"opacity 550ms ease-in-out"},onClick:function(e){e.target.blur(),f(p-1)}},"Previous"),r.a.createElement("button",{ref:h,className:"button-v2",style:{left:"20vw",opacity:1,transition:"opacity 550ms ease-in-out, transform 550ms ease-in-out"},onClick:function(e){e.target.blur(),f(p+1)}},"Next")),c&&r.a.createElement("ul",{className:"search-results"},c.slice(0,10).map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(j.b,{to:{pathname:"movies/".concat(e.id),searchValue:o}},r.a.createElement("img",{src:e.cover_file,alt:"not available"})),r.a.createElement("span",{className:"search-results-info"},r.a.createElement(j.b,{to:{pathname:"movies/".concat(e.id),searchValue:o}},r.a.createElement("span",{style:{fontSize:"1.3rem",color:"white",position:"relative",zIndex:"5"}},r.a.createElement("label",null,e.title),r.a.createElement("span",null," | ",e.genres.join(", ")),r.a.createElement("span",null," | ",e.mpaa_rating),e.duration_in_mins%60?e.duration_in_mins>=60?r.a.createElement("span",null," | ",Math.floor(e.duration_in_mins/60),"h ",e.duration_in_mins%60," min"):r.a.createElement("span",null," | ",e.duration_in_mins," min"):r.a.createElement("span",null," | ",e.duration_in_mins%60,"h"),r.a.createElement("span",null," | ",e.release_date.slice(0,4))))))}))),r.a.createElement("div",{style:{posiiton:"relative",display:"flex",justifyContent:"space-between",width:"100%",height:"100%",transform:"translateY(-.5rem)",marginBottom:"4rem"}},r.a.createElement("button",{ref:E,className:"button-v2",style:{pointerEvents:"none",opacity:0,left:"1rem",transition:"opacity 550ms ease-in-out"},onClick:function(e){e.target.blur(),f(p-1)}},"Previous"),r.a.createElement("button",{ref:y,style:{left:"1rem",transition:"transform 550ms ease-in-out, opacity 550ms ease-in-out"},className:"button-v2",onClick:function(e){e.target.blur(),f(p+1)}},"Next")))))},q=[[{label:"Overview",content:"Choosie is an intelligent service for simplifying movie selection. It employs machine learning technology - primarily in the form of deep learning - to understand those who use it. That means that it is able to translate your input through a series of data modifications to a language that a computer can make sense of effectively. In doing this, Choosie learns how to serve you individually - from your personal tastes to your typical selection process - so you will truly receive tailored assistance."},{label:"Start",content:"Selecting the 'Start' button on the home screen will initiate a questionnaire"},{label:"My List",content:"You can navigate to a personal store of saved movies by selecting 'My List' from the home screen or navigation bar. Here you'll be able to keep track of any movies on your \"to-watch\" list and any others you don't want to forget about. You can create multiple 'bins' to store related movies and label them to your preference in order to manage your collection more easily."},{label:"Popular",content:"In 'Popular' you can view movies that are currently trending, released recently, or have been saved by many other users."}],[{label:"About Me",content:"My name is Nick Barak and I'm a self-taught developer. I recently graduated from the University of California, Santa Barbara with a degree in Economics & Accounting and am currently pursuing a career in software engineering. Choosie is my first major project and I am happy to have been able to utilize a lot of the things that I have learned since I started learning to code in the creation of this application. This project is the first of many to come."},{label:"Contact",content:"You can contact me by email at nicholasjbarak@gmail.com. I am always looking for feedback for improvement so don't hesitate to send me suggestions or complaints."}]];var Q=function(){var e=Object(a.useContext)(b),t=Object(a.useState)({more:!1,sections:q[0]}),n=Object(m.a)(t,2),l=n[0],o=n[1];return Object(a.useEffect)((function(e){return o(Object(h.a)(Object(h.a)({},l),{},{sections:q[l.more?1:0]}))}),[l.more]),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"help"},r.a.createElement("h2",null,"What is ",r.a.createElement("span",{style:{fontWeight:600},className:"logo"},"Choosie"),"?"),r.a.createElement("article",{style:{width:"100%"}},r.a.createElement("br",null),r.a.createElement("div",{style:{fontWeight:"bold"}},"Choosie is the solution for those without problems."),r.a.createElement("br",null),l.sections.map((function(e,t){return r.a.createElement("section",{key:t},r.a.createElement("label",null,e.label),r.a.createElement("div",null,e.content))}))),r.a.createElement("div",{style:{position:"relative",display:"flex",width:"100%"}},r.a.createElement("button",{className:"button-v2",onClick:function(t){return e.push("/")}},"Back to Home"),r.a.createElement("button",{style:{right:0,left:"auto"},className:"button-v2",onClick:function(t){o(Object(h.a)(Object(h.a)({},l),{},{more:!l.more})),e.push("/help")}},l.more?"Previous":"More"))))},$=n(32),X=["G","PG","PG-13","TV-14","R/TV-MA","NR"],Z=["30min","1h","1h 30min","2h","2h 30min","3h"],ee=["Action","Comedy","Drama","Thriller","Family","Fantasy","Animation"],te=["2 days ago","1 week ago","2 weeks ago","3 weeks ago","1 month ago","2 months ago","3 months ago","6 months ago","1 year ago"],ne=["1920","1930","1940","1950","1960","1970","1980","1990","2000","2010","2020"],ae=[[["init","init","higher"],[].concat(X)]];var re=function(e){e.displayList;var t=e.dispatchDisplayList,n=Object(a.useReducer)((function(e,t){var n,a,r,l,o,c=t.type,i=t.payload,s=Object(R.a)(e);if("Clear Filters"===c)return JSON.parse(JSON.stringify(ae));"New Filter"!==c&&s[i.id][0].splice(i.select,1,c);switch(c){default:break;case"Age Rating":(n=s[i.id][1]).splice.apply(n,[0,e[i.id][1].length].concat(X));break;case"Duration":(a=s[i.id][1]).splice.apply(a,[0,e[i.id][1].length].concat(Z));break;case"Genre":(r=s[i.id][1]).splice.apply(r,[0,e[i.id][1].length].concat(ee));break;case"Date Saved":(l=s[i.id][1]).splice.apply(l,[0,e[i.id][1].length].concat(te));break;case"Release Date":(o=s[i.id][1]).splice.apply(o,[0,e[i.id][1].length].concat(ne));break;case"New Filter":s.push(JSON.parse(JSON.stringify(ae[0])))}return s}),JSON.parse(JSON.stringify(ae))),l=Object(m.a)(n,2),o=l[0],c=l[1],i=Object(a.useState)(0),s=Object(m.a)(i,2),u=s[0],d=s[1],p=function(e){return r.a.createElement("span",null,r.a.createElement("select",{defaultValue:o[e][0][0],onChange:function(t){c({type:t.target.options[t.target.selectedIndex].text,payload:{id:e,select:0}}),c({type:"init",payload:{id:e,select:1}}),t.target.parentNode.children.length>1&&(t.target.parentNode.children[1].selectedIndex=0,t.target.parentNode.children[2].children[0].children[0].checked=!0)}},r.a.createElement("option",{key:"-1",value:"init",disabled:!0},"Select an option"),r.a.createElement("option",{key:"0",value:"Age Rating"},"Age Rating"),r.a.createElement("option",{key:"1",value:"Duration"},"Duration"),r.a.createElement("option",{key:"2",value:"Genre"},"Genre"),r.a.createElement("option",{key:"3",value:"Date Saved"},"Date Saved"),r.a.createElement("option",{key:"4",value:"Release Date"},"Release Date")),"init"!==o[e][0][0]&&r.a.createElement(r.a.Fragment,null,r.a.createElement("select",{style:{marginLeft:".35rem"},defaultValue:o[e][0][1],onChange:function(n){c({type:n.target.options[n.target.selectedIndex].text,payload:{id:e,select:1}}),t(f(n.target.parentNode.parentNode.parentNode))}},r.a.createElement("option",{key:"-1",value:"init",disabled:!0},"Select an option"),o[e][1].map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),r.a.createElement("span",null,r.a.createElement("label",{style:{marginLeft:".35rem"}},r.a.createElement("input",{style:{margin:".5"},type:"radio",name:"filterByRadio_".concat(e),value:"higher",defaultChecked:"higher"===o[e][0][2],onChange:function(n){c({type:"higher",payload:{id:e,select:2}}),t(f(n.target.parentNode.parentNode.parentNode.parentNode.parentNode))}}),"higher/later"),r.a.createElement("label",{style:{marginLeft:".35rem"}},r.a.createElement("input",{style:{margin:".5"},type:"radio",name:"filterByRadio_".concat(e),value:"lower",defaultChecked:"lower"===o[e][0][2],onChange:function(n){c({type:"lower",payload:{id:e,select:2}}),t(f(n.target.parentNode.parentNode.parentNode.parentNode.parentNode))}}),"lower/earlier"),r.a.createElement("label",{style:{marginLeft:".35rem"}},r.a.createElement("input",{style:{margin:".5"},type:"radio",name:"filterByRadio_".concat(e),value:"exact",defaultChecked:"exact"===o[e][0][2],onChange:function(n){c({type:"exact",payload:{id:e,select:2}}),t(f(n.target.parentNode.parentNode.parentNode.parentNode.parentNode))}}),"exact"))))},f=function(e){return Array.from(e.children,(function(e){var t=e.children[0].children;return t[1]?{type:t[0].options[t[0].selectedIndex].text,payload:{value:t[1].options[t[1].selectedIndex].text,range:Array.from(t[2].children).find((function(e){return e.children[0].checked})).children[0].value}}:null})).filter((function(e){return e}))};return r.a.createElement("form",{className:"filter",onSubmit:function(e){e.persist(),e.preventDefault(),c({type:"Clear Filters"}),t(null),d(0),e.target.reset()},style:{marginBottom:"2rem"}},r.a.createElement("label",null,"Filter by: "),r.a.createElement("ul",{style:{margin:".7rem 1.5rem"}},r.a.createElement("li",{key:"0"},p(0),0===u&&"init"!==o[0][0][0]&&r.a.createElement("button",{className:"button-filter",type:"button",onClick:function(e){c({type:"New Filter"}),d(u+1)}},"+")),u>1&&new Array(u-1).fill(null).map((function(e,t){return r.a.createElement("li",{key:t+1},p(t+1))})),u>0&&r.a.createElement("li",{key:u},p(u),"init"!==o[u][0][0]&&r.a.createElement("button",{className:"button-filter",type:"button",onClick:function(e){c({type:"New Filter"}),d(u+1)}}," + "))),r.a.createElement("button",{style:{backgroundColor:"transparent",border:"none",color:"white"},onMouseOver:function(e){e.target.style.color="red",e.target.style.cursor="pointer"},onMouseOut:function(e){return e.target.style.color="white"}},"Reset"))},le=n(33),oe=n.n(le);var ce=function(e){var t=e.movies,n=e.heading,l=e.headingMargin,o=e.withFilter,c=e.displaying,i=e.lowerMargin,f=Object(a.useReducer)((function(e,n){var a=Object(R.a)(t);if(!n)return a;var r,l=Object(D.a)(n);try{var o=function(){var n=r.value,l=n.type,o=n.payload,c=o.value,i=o.range,s=void 0,u=void 0;switch(l){default:break;case"Age Rating":if("exact"===i){a.splice.apply(a,[0,a.length].concat(Object(R.a)(a.filter((function(e){return e.mpaa_rating===c})))));break}switch(c){default:return{v:e};case"G":s="higher"===i?null:["G"];break;case"PG":s="higher"===i?["PG","PG-13","TV-14","R","TV-MA","NR"]:["G","PG"];break;case"PG-13":s="higher"===i?["PG-13","TV-14","R","TV-MA","NR"]:["G","PG","PG-13"];break;case"TV-14":s="higher"===i?["TV-14","R","TV-MA","NR"]:["G","PG","PG-13","TV-14"];break;case"R/TV-MA":s="higher"===i?["R","TV-MA","NR"]:["G","PG","PG-13","TV-14","R","TV-MA"];break;case"NR":s="higher"===i?["NR"]:null}a.splice.apply(a,[0,a.length].concat(Object(R.a)(a.filter((function(e){return s?s.includes(e.mpaa_rating):t})))));break;case"Duration":switch(c){default:break;case"30min":u=30;break;case"1h":u=60;break;case"1h 30min":u=90;break;case"2h":u=120;break;case"2h 30min":u=150;break;case"3h":u=180}if("exact"===i){a.splice.apply(a,[0,a.length].concat(Object(R.a)(a.filter((function(e){return e.duration_in_mins===u})))));break}a.splice.apply(a,[0,a.length].concat(Object(R.a)(a.filter((function(e){return"higher"===i?e.duration_in_mins-u>=0:e.duration_in_mins-u<=0})))));break;case"Genre":a.splice.apply(a,[0,a.length].concat(Object(R.a)(a.filter((function(e){return e.genres.filter((function(e){return c.includes(e)})).length})))));break;case"Date Saved":break;case"Release Date":if("exact"===i){a.splice.apply(a,[0,a.length].concat(Object(R.a)(a.filter((function(e){return Number(c)===Number(e.release_date.slice(0,4))})))));break}a.splice.apply(a,[0,a.length].concat(Object(R.a)(a.filter((function(e){var t=Number(e.release_date.slice(0,4));return"higher"===i?t>=Number(c):t<=Number(c)})))))}};for(l.s();!(r=l.n()).done;){var c=o();if("object"===typeof c)return c.v}}catch(i){l.e(i)}finally{l.f()}return a}),t),g=Object(m.a)(f,2),b=g[0],h=g[1],y=Object(a.useState)(!1),v=Object(m.a)(y,2),O=v[0],x=v[1],k=Object(a.useState)(null),w=Object(m.a)(k,2),C=(w[0],w[1]),S=Object(a.useState)(!1),N=Object(m.a)(S,2),_=N[0],A=N[1],U=Object(a.useState)(null),I=Object(m.a)(U,2),P=(I[0],I[1]),L=Object(a.useState)(!1),H=Object(m.a)(L,2),F=H[0],B=H[1],V=Object(a.useState)(null),z=Object(m.a)(V,2),G=(z[0],z[1],Object(d.c)((function(e){return e.user.result}))),Y=Object(d.b)();return Object(a.useEffect)((function(e){var t=new AbortController,n=t.signal;if(F&&function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(p+"users/".concat(G.username,"/bins"),{signal:n,method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({bin:Object(T.a)({},c,G.bins[c].filter((function(e){return e!==String(F)})))})});case 3:!e.sent.ok&&C("Error removing movie from bin"),Y(E(G.username)),Y(M("movies/list","?movies=".concat(G.bins[c].filter((function(e){return e!==String(F)}))))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),"AbortError"===e.t0.name&&console.log("Removal from bin aborted");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()(),O&&function(){var e=Object(u.a)(s.a.mark((function e(t){var a,r,l,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(p+"movies?user=".concat(G.username),{signal:n,method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({movieID:O})});case 3:!e.sent.ok&&C("Error unsaving movie"),a=Object.entries(G.bins).filter((function(e){return e[1].includes(String(O))})),r=Object(D.a)(a),e.prev=7,r.s();case 9:if((l=r.n()).done){e.next=17;break}return o=l.value,e.next=13,fetch(p+"users/".concat(G.username,"/bins"),{signal:n,method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({bin:Object(T.a)({},o[0],o[1].filter((function(e){return e!==String(O)})))})});case 13:!e.sent.ok&&C("Error unsaving movie");case 15:e.next=9;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),r.e(e.t0);case 22:return e.prev=22,r.f(),e.finish(22);case 25:Y(E(G.username)),Y(M("movies/list","?movies=".concat("Currently Saved"===c?G.currently_saved.filter((function(e){return e!==O})):G.bins[c].filter((function(e){return e!==String(O)}))))),e.next=32;break;case 29:e.prev=29,e.t1=e.catch(0),"AbortError"===e.t1.name&&console.log("Unsave aborted");case 32:case"end":return e.stop()}}),e,null,[[0,29],[7,19,22,25]])})));return function(t){return e.apply(this,arguments)}}()(),_&&function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(p+"users/".concat(G.username),{signal:n,method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:G.name,sex:G.sex,age:G.age,languages:G.languages,country:G.country,email:G.email,show_save_history:G.show_save_history,recent_save_history:G.recent_save_history.filter((function(e){return e!==_}))})});case 3:!e.sent.ok&&P("Error removing movie from save history"),Y(E(G.username)),Y(M("movies/list","?movies="+G.recent_save_history.filter((function(e){return e!==_})))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),"AbortError"===e.t0.name&&console.log("Removal from history aborted");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()(),O||F||_)return function(e){return t.abort()}}),[O,F,_]),r.a.createElement("div",{style:{flex:4,margin:"3rem 3rem ".concat(i||"11rem"," 3rem")}},r.a.createElement("h2",{style:{textAlign:"center",marginBottom:l}},n),o&&r.a.createElement(re,{displayList:b,dispatchDisplayList:h}),r.a.createElement("ul",{className:"display-row"},b.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(j.b,{to:"movies/".concat(e.id)},r.a.createElement("img",{src:e.cover_file,onError:function(e){e.target.src=oe.a,e.target.style.width="200px",e.target.style.height="267.5px",e.target.style.boxShadow="none"},alt:"Not available",onDrag:function(t){t.preventDefault(),t.dataTransfer.setData("text/plain",e.id)}})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(j.b,{to:"movies/".concat(e.id),tabIndex:"-1"},r.a.createElement("label",null,e.title)),"Save History"===c?r.a.createElement("button",{className:"button-manage-movie",onClick:function(t){return A(e.id)}},_?"Removing...":"Remove"):"Popular"!==c?"Currently Saved"===c?r.a.createElement("button",{className:"button-manage-movie",onClick:function(t){var n=!0;Object.values(G.bins).reduce((function(e,t){return[].concat(Object(R.a)(e),Object(R.a)(t))}),[]).includes(String(e.id))&&(n=window.confirm("This will remove the movie from all bins. Do you still want to unsave it?")),n&&x(e.id)}},O?"Unsaving...":"Unsave"):"Query"===c?null:r.a.createElement("span",null,r.a.createElement("button",{className:"button-manage-movie",onClick:function(t){var n=!0;Object.entries(G.bins).reduce((function(e,t){var n=Object(m.a)(t,2),a=n[0],r=n[1];return a!==c?[].concat(Object(R.a)(e),Object(R.a)(r)):e}),[]).includes(String(e.id))&&(n=window.confirm("This will remove the movie from other bins. Do you still want to unsave it?")),n&&x(e.id)}},O?"Unsaving...":"Unsave"),r.a.createElement("button",{className:"button-manage-movie",onClick:function(t){return B(e.id)},style:{marginLeft:".25rem"}},"Take Out")):null),(!G||G.show_description_on_hover)&&r.a.createElement("div",{className:"movie-description"},e.description&&"Not available"!==e.description?e.description.length>200?e.description.slice(0,200)+"...":e.description:"Description not available"))}))))},ie={loading:!1,error:null,result:[]},se=function e(t,n,a){Object($.a)(this,e),this.prompt=t,this.buttonSet=Object(R.a)(n),this.nextButton=a},ue=[new se("Feeling a particular genre?",[["Action","Comedy","Drama","Thriller"]],"Show More"),new se("You can select more than one if you want",[["Romance","Sci-Fi","Fantasy","Family",""],["Cyber","Medieval","Documentary","Tragedy"],["Action","Comedy","Drama","Thriller"]],"Next"),new se("Want to apply any time constraints?",[[{60:"1 hour"},{120:"2 hours"},{150:"2.5 hours"}]],"None"),new se("Time periods preferred?",[["1970s","1980s","Earlier","Any"],["1990s","2000s","Later"]],"Next")];var me=function(e){var t=Object(a.useState)(0),n=Object(m.a)(t,2),l=n[0],o=n[1],c=l<4&&ue[l],i=c.prompt,s=c.buttonSet,u=c.nextButton,f=Object(a.useRef)([[]]),g=Object(d.c)((function(e){return e.makeRequest})),b=(g.loading,g.error,g.result),h=Object(a.useState)(1),y=Object(m.a)(h,2),v=y[0],E=y[1],O=Object(d.b)();function j(e){e.preventDefault();var t=e.target.style,n=l?l-1:l;f.current[n].includes(e.target.textContent)?(f.current[n]=f.current[n].filter((function(t){return 1===n?t!==e.target.value:t!==e.target.textContent})),t.backgroundColor="var(--color-offset)",t.color="var(--bg-color-dark)"):(t.backgroundColor="var(--bg-color-dark)",t.color="var(--color-offset)",f.current[n]=[].concat(Object(R.a)(f.current[n]),[1===n?e.target.value:e.target.textContent]),2===l&&o(l+1))}return Object(a.useEffect)((function(e){return O((function(e){e({type:"QUERY_LAUNCH"}),fetch(p+"...").then((function(e){return e.json()})).then((function(t){return e({type:"QUERY_SUCCESS",payload:t})})).catch((function(t){return e({type:"QUERY_FAILURE",payload:t})}))}))}),[v]),Object(a.useEffect)((function(e){if(l>3){var t=f.current[0].length?"&genres=".concat(f.current[0]):"",n=f.current[1].length?"none"!==f.current[1][0]&&"&timeConstraint=".concat(f.current[1]):"",a=f.current[2].length&&!f.current[2].includes("Any")?"&time_periods=".concat(f.current[2]):"";O(M("start",(t||n||a)&&"?set="+v+t+n+a))}else l>1&&f.current.push([])}),[l,v]),r.a.createElement(r.a.Fragment,null,r.a.createElement(P,null),l<4?r.a.createElement("div",{className:"container",style:{position:"absolute",zIndex:"-1",height:"100vh",top:0}},r.a.createElement("div",{className:"frame"},r.a.createElement("h2",{className:"query-prompt"},i),s.map((function(e,t){return r.a.createElement("ul",{key:t,className:"button-wrapper"},e.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("button",{className:"button",onClick:j,style:e?{}:{visibility:"hidden"},value:2===l&&Object.keys(e)[0]},2===l?Object.values(e)[0]:e))})),t===s.length-1&&r.a.createElement("li",null,r.a.createElement("button",{className:"button query-next",onClick:function(e){return o(l+1)}},u)))})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(ce,{movies:b||[],heading:"Here are some movies you might be interested in",displaying:"Query",lowerMargin:"4rem",headingMargin:"3.5rem"}),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(W,null)),r.a.createElement("div",{style:{posiiton:"relative",display:"flex",justifyContent:"space-between",width:"100%",height:"100%",marginBottom:"8rem",marginTop:"1.25rem"}},r.a.createElement("button",{className:"button-v2",style:{pointerEvents:"none",opacity:0,left:"1.5rem",transition:"opacity 550ms ease-in-out"},onClick:function(e){2===v&&(e.target.style.opacity=0,e.target.parentElement.children[1].style.transform="translateX(0)",e.target.style.pointerEvents="none"),e.target.blur(),E(v-1)}},"Previous"),r.a.createElement("button",{style:{left:"1.5rem",transition:"transform 550ms ease-in-out"},className:"button-v2",onClick:function(e){1===v&&(e.target.style.transform="translateX(calc(190px - 1rem))",e.target.parentElement.children[0].style.opacity=1,e.target.parentElement.children[0].style.pointerEvents="auto"),e.target.blur(),E(v+1)}},"Next"))))},de={loading:!1,result:[],error:null},pe=Object(a.createContext)(!1);function fe(e){var t=e.children,n=Object(a.useState)(!1),l=Object(m.a)(n,2),o=l[0],c=l[1];return r.a.createElement(pe.Provider,{value:[o,c]},t)}var ge=pe;var be=function(e){var t=e.movies,n=e.displaying,l=e.setDisplaying,o=Object(d.b)(),c=Object(d.c)((function(e){return e.user.result})),i=Object(a.useState)(null),f=Object(m.a)(i,2),g=f[0],b=f[1],h=Object(a.useState)(!0),y=Object(m.a)(h,2),v=y[0],O=y[1],j=Object(a.useState)(!0),x=Object(m.a)(j,2),k=x[0],w=x[1],C=Object(a.useState)(!1),S=Object(m.a)(C,2),N=S[0],_=S[1],D=Object(a.useState)(null),A=Object(m.a)(D,2),U=A[0],I=A[1],P=Object(a.useContext)(ge),L=Object(m.a)(P,2)[1];function H(e,t,n,a){return F.apply(this,arguments)}function F(){return(F=Object(u.a)(s.a.mark((function e(t,n,a,r){var l,o,i,u=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=u.length>4&&void 0!==u[4]?u[4]:function(e){return console.log("Error managing bins",t)},t.persist(),t.preventDefault(),(o=new FormData).append("bin","string"===typeof a?a:JSON.stringify(a)),e.prev=5,e.next=8,fetch(p+"users/".concat(c.username,"/bins"),{method:n,body:o});case 8:i=e.sent,b(null)||i.ok?r&&r():l(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),l();case 15:case"end":return e.stop()}}),e,null,[[5,12]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"bin-manager"},g&&r.a.createElement("div",{style:{color:"maroon"}},g),r.a.createElement("label",{style:{fontWeight:600}},"Bin Manager"),r.a.createElement("form",{onSubmit:function(e){if(e.persist(),e.preventDefault(),Object.keys(c.bins).includes(e.target.children[1].value))return b("Bin already exists");c&&H(e,"POST",Object(T.a)({},e.target.children[1].value,[]),(function(e){return o(E(c.username))}),(function(e){return b("Error creating bin")})),e.target.reset()}},r.a.createElement("label",{className:"label-bin-manager"},"Create a new bin"),r.a.createElement("input",{style:{borderRadius:"2px",padding:".25rem",height:"1.35rem"},type:"text",placeholder:"Enter bin name",autoComplete:"off"}),r.a.createElement("button",{className:"button-register"},"Create Bin")),Object.keys(c.bins).length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.persist(),e.preventDefault();var t=e.target.children[1].options[e.target.children[1].selectedIndex];if(N){var n=k?[].concat(Object(R.a)(c.bins[U]),[t.value]):c.bins[U].filter((function(e){return e!==t.value}));c&&fetch(p+"users/".concat(c.username,"/bins"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({bin:Object(T.a)({},U,n)})}).then((function(e){e.ok?(o(E(c.username)),o(M("movies/list","?movies="+n))):b("Error updating bin")})),l(U),_(!1),I(null),e.target.reset()}else _(!0),I(t.text)}},r.a.createElement("label",{className:"label-bin-manager"},"Add movies to a bin or remove them"),r.a.createElement("select",{style:{marginRight:".5rem"}},c.currently_saved.length?N?k?c.currently_saved.filter((function(e){return!c.bins[U].includes(String(e))})).map((function(e,n){return r.a.createElement("option",{key:n,value:e},t.find((function(t){return t.id===e})).title)})):c.bins[U].map((function(e,n){return r.a.createElement("option",{key:n,value:e},t.find((function(t){return t.id===Number(e)})).title)})):k?Object.entries(c.bins).filter((function(e){return Object(m.a)(e,2)[1].length<c.currently_saved.length})).length?Object.entries(c.bins).filter((function(e){return Object(m.a)(e,2)[1].length<c.currently_saved.length})).map((function(e,t){var n=Object(m.a)(e,1)[0];return r.a.createElement("option",{key:t},n)})):r.a.createElement("option",{key:"-1"},"All bins are full"):Object.entries(c.bins).filter((function(e){return Object(m.a)(e,2)[1].length})).length?Object.entries(c.bins).filter((function(e){return Object(m.a)(e,2)[1].length})).map((function(e,t){var n=Object(m.a)(e,1)[0];return r.a.createElement("option",{key:t},n)})):r.a.createElement("option",{key:"-1"},"All bins are empty"):r.a.createElement("option",{key:"-1"},"You don't have any saved movies!")),!N&&c.currently_saved.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"addOrRemoveMovie",value:"Add",defaultChecked:!0,onChange:function(e){return w(!k)}}),"Add"),r.a.createElement("label",{style:{marginLeft:".35rem"}},r.a.createElement("input",{type:"radio",name:"addOrRemoveMovie",value:"Remove",onChange:function(e){return w(!k)}}),"Remove")),Object.entries(c.bins).filter((function(e){var t=Object(m.a)(e,2)[1];return k?t.length<c.currently_saved.length:t.length>0})).length>0&&r.a.createElement("button",{className:"button-register"},N?"Update Bin":k?"Add To":"Remove From")),r.a.createElement("form",{onSubmit:function(e){var a=e.target.children[1].options[e.target.children[1].selectedIndex].text;c&&H(e,v?"DELETE":"PUT",v?a:Object(T.a)({},a,[]),(function(e){o(E(c.username)),n===a&&v?(o(M("movies/list","?movies="+t.map((function(e){return e.id})))),l("Currently Saved")):v||o(M("movies/list","?movies="))}),(function(e){return b("Error ".concat(v?"deleting":"emptying"," bin"))}))}},r.a.createElement("label",{className:"label-bin-manager"},"Delete or empty a bin"),r.a.createElement("select",{style:{marginRight:".5rem"}},Object.entries(c.bins).filter((function(e){var t=Object(m.a)(e,2)[1];return v||t.length})).map((function(e,t){return r.a.createElement("option",{key:t},e)})).length?Object.entries(c.bins).filter((function(e){var t=Object(m.a)(e,2)[1];return v||t.length})).map((function(e,t){var n=Object(m.a)(e,1)[0];return r.a.createElement("option",{key:t},n)})):r.a.createElement("option",{key:"-1"},"All bins are empty")),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"deleteOrEmptyBin",value:"Delete",defaultChecked:!0,onChange:function(e){return O(!v)}}),"Delete"),r.a.createElement("label",{style:{marginLeft:".35rem"}},r.a.createElement("input",{type:"radio",name:"deleteOrEmptyBin",value:"Empty",onChange:function(e){return O(!v)}}),"Empty "),Object.entries(c.bins).filter((function(e){var t=Object(m.a)(e,2)[1];return v||t.length})).map((function(e,t){return r.a.createElement("option",{key:t},e)})).length>0&&r.a.createElement("button",{className:"button-register"},v?"Delete":"Empty"," Bin"))),Object.keys(c.bins).length>0&&r.a.createElement("button",{className:"button-register",onClick:function(e){return L(!1)}},"Close"))};function he(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.makeRequest})),n=t.loading,l=t.result,o=t.error,c=Object(a.useContext)(ge),i=Object(m.a)(c,2),f=i[0],g=i[1],b=Object(a.useState)(!1),h=Object(m.a)(b,2),y=h[0],v=h[1],O=Object(d.c)((function(e){return e.user.result})),x=Object(d.c)((function(e){return e.currentlySaved.result})),k=Object(a.useState)("Currently Saved"),w=Object(m.a)(k,2),C=w[0],S=w[1],N=Object(a.useState)(!1),_=Object(m.a)(N,2),D=_[0],A=_[1],U=Object(a.useState)(null),I=Object(m.a)(U,2),L=I[0],H=I[1],F=Object(a.useState)(null),B=Object(m.a)(F,2),V=(B[0],B[1]);function z(){return(z=Object(u.a)(s.a.mark((function t(n){var a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.persist(),n.preventDefault(),a=n.target.children[0].value,t.prev=3,!Object.keys(O.bins).includes(a)){t.next=6;break}return t.abrupt("return",H("Bin already exists"));case 6:return H(null),(r=new FormData).append("bin",JSON.stringify(Object(T.a)({},a,[]))),t.next=11,fetch(p+"users/".concat(O.username,"/bins"),{method:"POST",body:r});case 11:t.sent.ok?e(E(O.username)):H("Error creating bin"),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),console.log(t.t0);case 18:return t.prev=18,Object.keys(O.bins).includes(a)||(A(!1),n.target.reset()),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[3,15,18,21]])})))).apply(this,arguments)}function G(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(u.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.persist(),n.preventDefault(),V(null),a=n.dataTransfer.getData("text/plain").split("/movies/")[1],t.prev=4,O.currently_saved.includes(Number(a))){t.next=10;break}return t.next=8,fetch(p+"movies?user=".concat(O.username),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({movieID:Number(a),inRecent:!0})});case 8:!t.sent.ok&&V("Error updating bin");case 10:return t.next=12,fetch(p+"users/".concat(O.username,"/bins"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({bin:Object(T.a)({},n.target.textContent,[].concat(Object(R.a)(O.bins[n.target.textContent]),[a]))})});case 12:t.sent.ok?e(E(O.username)):V("Error updating bin"),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(4),console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[4,16]])})))).apply(this,arguments)}Object(a.useEffect)((function(t){var n;O&&(e(M("movies/list","?movies="+O.currently_saved)),e((n=O.currently_saved,function(e){e({type:"GET_CURRENTLY_SAVED_LAUNCH"}),fetch(p+"movies/list?movies=".concat(n)).then((function(e){return e.json()})).then((function(t){e({type:"GET_CURRENTLY_SAVED_SUCCESS",payload:t})})).catch((function(t){return e({type:"GET_CURRENTLY_SAVED_FAILURE",payload:t})}))})))}),[]),Object(a.useEffect)((function(e){y||A(!1)}),[y]);var J=function(e){e.preventDefault();var t=e.target.parentElement.children[1].style;y?(t.maxHeight=0,t.transform="scaleY(0)"):(t.maxHeight="100%",t.transform="scaleY(1)"),v(!y),H(null)};return n?r.a.createElement("div",null,"Loading..."):o?r.a.createElement("div",null,"Error loading movies"):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",overflow:"hidden"}},r.a.createElement("div",{style:{display:"flex",height:"100vh",flexDirection:"column "}},r.a.createElement(P,null),O&&r.a.createElement("ul",{className:"sidebar"},r.a.createElement("li",{className:"sidebar-li-hover",onClick:function(t){e(M("movies/list","?movies="+O.currently_saved)),S("Currently Saved")},tabIndex:"0"},"Currently Saved"),O.show_save_history&&r.a.createElement("li",{className:"sidebar-li-hover",onClick:function(t){e(M("movies/list","?movies="+O.recent_save_history)),S("Save History")},tabIndex:"0"},"Save History"),r.a.createElement("li",null,Object.entries(O.bins).length?r.a.createElement("div",null,r.a.createElement("label",{onFocus:function(e){return e.target.style.color=y?"white":"var(--color-offset)"},onBlur:function(e){return e.target.style.color=y?"var(--color-offset)":"red"},tabIndex:"0",style:{outline:"none",cursor:"pointer"},onClick:J,onKeyDown:function(e){return 13===e.keyCode&&J(e)},onMouseOver:function(e){return e.target.style.color=y?"white":"var(--color-offset)"},onMouseOut:function(e){return e.target.style.color=y?"var(--color-offset)":"red"}},"Your Bins"),r.a.createElement("ul",{style:{maxHeight:0,transform:"scaleY(0)",transformOrigin:"top",transition:"max-height 175ms ease-out, transform 175ms ease-out"}},Object.keys(O.bins).map((function(t,n){return r.a.createElement("li",{onFocus:function(e){return e.target.style.color="var(--color-offset)"},onBlur:function(e){return e.target.style.color="red"},tabIndex:y?0:"-1",onMouseOver:function(e){e.target.style.color="var(--color-offset)",e.target.style.cursor="pointer"},onMouseOut:function(e){return e.target.style.color="red"},style:{marginLeft:"1.25rem",outline:"none"},key:n,onClick:function(n){n.preventDefault(),e(M("movies/list","?movies="+O.bins[t])),S(t),v(!y),H(null)},onKeyDown:function(n){n.preventDefault(),13===n.keyCode&&(e(M("movies/list","?movies="+O.bins[t])),S(t),v(!y),H(null))},onDrop:function(e){e.preventDefault(),console.log(O.currently_saved.length),(O.currently_saved.includes(Number(e.dataTransfer.getData("text/plain").split("/movies/")[1]))||window.confirm("Save movie and add to bin?"))&&G(e)},onDragOver:function(e){e.preventDefault(),e.target.style.color="blue"},onDragLeave:function(e){e.preventDefault(),e.target.style.color="black"}},t)})),r.a.createElement("li",{style:{marginLeft:"1.25rem"}},D?r.a.createElement("form",{onSubmit:function(e){return z.apply(this,arguments)}},r.a.createElement("input",{style:{borderRadius:"2px",padding:".25rem",height:"1.3rem",width:"110px"},type:"text",placeholder:"Enter bin name"})):r.a.createElement("button",{tabIndex:"0",onClick:function(e){return A(!0)},onFocus:function(e){return e.target.style.transform="scale(1.15)"},onBlur:function(e){return e.target.style.transform="scale(1)"},onKeyDown:function(e){return 13===e.keyCode&&A(!0)},style:{backgroundColor:"transparent",border:"none",color:"red",fontWeight:"bold",fontSize:"1.1rem",transition:"transform 50ms ease-out"},onMouseOver:function(e){e.target.style.transform="scale(1.15)",e.target.style.cursor="pointer"},onMouseOut:function(e){return e.target.style.transform="scale(1)"}},"+")),L&&r.a.createElement("div",{style:{color:"maroon"}},L))):"Use the bin manager to organize your movies"),r.a.createElement("li",null,r.a.createElement("button",{onMouseOver:function(e){return e.target.style.backgroundColor="var(--bg-color-light)"},onMouseOut:function(e){document.activeElement!==e.target&&(e.target.style.backgroundColor="var(--color-offset)")},onFocus:function(e){return e.target.style.backgroundColor="var(--bg-color-light)"},onBlur:function(e){Object(R.a)(document.querySelectorAll(":hover")).includes(e.target)||(e.target.style.backgroundColor="var(--color-offset)")},style:{marginTop:"1rem",marginLeft:".25rem"},className:"button",onClick:function(e){e.target.blur(),g(!f)}},"Manage Bins")))),O?r.a.createElement(ce,{withFilter:!0,displaying:C,movies:l,headingMargin:"2rem",heading:function(e){switch(C){default:return l.length?'This is what was in "'.concat(C,'"'):"This bin was empty!";case"Currently Saved":return l.length?"Here's your complete list of movies":"Save movies by going to their page";case"Save History":return l.length?"These are all the movies you've ever saved":"Save movies by going to their page"}}()}):r.a.createElement("h2",{style:{flex:4,position:"absolute",margin:"7rem 0 0 2.5rem"}},r.a.createElement(j.b,{to:"/register"},"Log in")," to see your saved movies")),O&&f&&r.a.createElement(be,{movies:x,displaying:C,setDisplaying:S}))}var ye=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.makeRequest})),n=t.loading,l=t.error,o=t.result,c=Object(a.useState)("Here's what movies are currently trending"),i=Object(m.a)(c,2),s=i[0],u=i[1],p=Object(a.useState)(1),f=Object(m.a)(p,2),g=f[0],b=f[1],h=Object(a.useState)("trending"),y=Object(m.a)(h,2),v=y[0],E=y[1];return Object(a.useEffect)((function(t){switch(e(M("popular","?column=".concat("trending"===v?"release_date":v,"&set=").concat(g))),v){default:break;case"trending":u("Here's what movies are currently trending");break;case"release_date":u("Here are the newest movies on record");break;case"times_saved_this_month":u("Here are the most popular movies this month");break;case"times_saved":u("Here are the most saved movies to date")}}),[v,g]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",overflow:"hidden"}},r.a.createElement("div",{style:{display:"flex",height:"100vh",flexDirection:"column"}},r.a.createElement(P,null),r.a.createElement("ul",{className:"sidebar"},r.a.createElement("li",{tabIndex:"0",onKeyDown:function(e){return 13===e.keyCode&&E("trending")},className:"sidebar-li-hover",key:"0",onClick:function(e){return E("trending")}},"Trending"),r.a.createElement("li",{tabIndex:"0",onKeyDown:function(e){return 13===e.keyCode&&E("release_date")},className:"sidebar-li-hover",key:"1",onClick:function(e){return E("release_date")}},"Recent Releases"),r.a.createElement("li",{tabIndex:"0",onKeyDown:function(e){return 13===e.keyCode&&E("times_saved_this_month")},className:"sidebar-li-hover",key:"2",onClick:function(e){return E("times_saved_this_month")}},"Most Saved This Month"),r.a.createElement("li",{tabIndex:"0",onKeyDown:function(e){return 13===e.keyCode&&E("times_saved")},className:"sidebar-li-hover",key:"3",onClick:function(e){return E("times_saved")}},"Most Saved All Time"),r.a.createElement("li",{style:{marginTop:"2.5rem",height:"23px",width:"100%"}},r.a.createElement("div",{style:{posiiton:"relative",display:"flex",justifyContent:"space-between",width:"100%",height:"100%"}},r.a.createElement("button",{className:"button-v2",style:{pointerEvents:"none",opacity:0,left:"1rem",transition:"opacity 550ms ease-in-out"},onClick:function(e){2===g&&(e.target.style.opacity=0,e.target.parentElement.children[1].style.transform="translateX(0)",e.target.style.pointerEvents="none"),e.target.blur(),b(g-1)}},"Previous"),r.a.createElement("button",{style:{left:"1rem",transition:"transform 550ms ease-in-out"},className:"button-v2",onClick:function(e){1===g&&(e.target.style.transform="translateX(calc(190px - 1rem))",e.target.parentElement.children[0].style.opacity=1,e.target.parentElement.children[0].style.pointerEvents="auto"),e.target.blur(),b(g+1)}},"Next"))))),r.a.createElement("div",{style:{flex:4,marginBottom:"2rem"}},l&&r.a.createElement("div",null,l),n?r.a.createElement("div",null,"Loading movies..."):r.a.createElement(ce,{movies:o,heading:s,headingMargin:"4rem",displaying:"Popular"}))))};var ve=function(e){return r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/",exact:!0,component:_}),r.a.createElement(c.a,{path:"/movies/:id",component:L}),r.a.createElement(c.a,{path:"/register",exact:!0,component:F}),r.a.createElement(c.a,{path:"/profile/:id",exact:!0,component:Y}),r.a.createElement(c.a,{path:"/search",exact:!0,component:K}),r.a.createElement(c.a,{path:"/help",exact:!0,component:Q}),r.a.createElement(c.a,{path:"/query",exact:!0,component:me}),r.a.createElement(c.a,{path:"/my-list",exact:!0,component:he}),r.a.createElement(c.a,{path:"/popular",exact:!0,component:ye}),r.a.createElement(c.a,{path:"/",render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"404: Not Found"),r.a.createElement("button",{onClick:function(t){return e.history.push("/")}},"Back to Home"))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ee=function(e){var t=e.children;return r.a.createElement(fe,null,r.a.createElement(S,null,r.a.createElement(g,null,t)))},Oe=n(15),je=n(34),xe=Object(Oe.c)({makeRequest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){default:return e;case"MAKE_REQUEST_LAUNCH":return Object(h.a)(Object(h.a)({},e),{},{loading:!0});case"MAKE_REQUEST_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{loading:!1,result:a,error:null});case"MAKE_REQUEST_FAILURE":return Object(h.a)(Object(h.a)({},e),{},{loading:!1,result:[],error:a})}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){default:return e;case"SEARCH_LAUNCH":return Object(h.a)(Object(h.a)({},e),{},{loading:!0,searchValue:a});case"SEARCH_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{loading:!1,result:a,error:null});case"SEARCH_FAILURE":return Object(h.a)(Object(h.a)({},e),{},{loading:!1,result:[],error:a})}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,r=Object(h.a)({},e);switch(n){default:break;case"UPDATE_USER_LAUNCH":r.loading=!0;break;case"UPDATE_USER_SUCCESS":r.loading=!1,r.error=null,r.result=a;break;case"UPDATE_USER_FAILURE":r.loading=!1,r.error=a,r.result=null}return r},currentlySaved:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){default:return e;case"GET_CURRENTLY_SAVED_LAUNCH":return Object(h.a)(Object(h.a)({},e),{},{loading:!0});case"GET_CURRENTLY_SAVED_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{loading:!1,result:a,error:null});case"GET_CURRENTLY_SAVED_FAILURE":return Object(h.a)(Object(h.a)({},e),{},{loading:!1,result:[],error:a})}},query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,r=Object(h.a)({},e);switch(n){case"QUERY_LAUNCH":r.loading=!0;break;case"QUERY_SUCCESS":r.loading=!1,r.error=null,r.result=a;break;case"QUERY_FAILURE":r.loading=!1,r.error=a,r.result=[]}return r}}),ke=Object(Oe.d)(xe,Object(Oe.a)(je.a));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j.a,null,r.a.createElement(d.a,{store:ke},r.a.createElement(Ee,null,r.a.createElement(ve,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.30474081.chunk.js.map