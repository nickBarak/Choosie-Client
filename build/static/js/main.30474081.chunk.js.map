{"version":3,"sources":["img/image-alt.png","APIs.js","store/contexts/History.context.js","store/reducers/updateUser.reducer.js","store/actions/updateUser.action.js","components/Login.js","components/Footer.js","store/reducers/search.reducer.js","store/actions/search.action.js","store/contexts/User.context.js","components/Home.js","store/reducers/makeRequest.reducer.js","store/actions/makeRequest.action.js","components/Nav.js","components/Movie.js","components/Register.js","components/Toggler.js","components/Profile.js","components/StarRater.js","components/Search.js","components/Help.js","components/Filter.js","components/MovieList.js","store/reducers/query.reducer.js","components/Query.js","store/actions/query.action.js","store/reducers/getCurrentlySaved.reducer.js","store/contexts/BinManager.context.js","components/BinManager.js","components/MyList.js","store/actions/getCurrentlySaved.action.js","components/Popular.js","App.js","serviceWorker.js","store/Context.js","store/reducer.js","index.js"],"names":["module","exports","server","URL","HistoryContext","createContext","HistoryProvider","children","history","useHistory","Provider","value","initialState","loading","result","error","createUpdateUserFailure","payload","type","updateUser","username","dispatch","fetch","then","res","json","catch","e","Login","useDispatch","user","useSelector","store","useContext","useState","open","setOpen","setError","loginForm","useRef","errorRef","useEffect","_","current","style","transform","onLogin","a","persist","preventDefault","target","password","response","String","console","log","mouseOverLogin","color","mouseOutLogin","setTimeout","fontSize","margin","name","padding","onClick","cursor","backgroundColor","border","marginRight","onMouseOver","onMouseOut","onFocus","onBlur","push","marginLeft","ref","position","top","left","transition","onSubmit","display","height","marginBottom","placeholder","marginTop","justifyContent","className","blur","stopPropagation","Footer","to","fontWeight","searchValue","search","query","page","createSearchSuccess","createSearchFailure","UserContext","UserProvider","_currentValue","state","setState","Home","onSearch","reset","button","route","method","headers","body","JSON","stringify","ok","userSelect","createMakeRequestSuccess","createMakeRequestFailure","makeRequest","querystring","options","Nav","withSearch","pathname","Movie","location","useLocation","movie","saving","setSaving","unsaving","setUnsaving","setSaveError","split","controller","AbortController","signal","movieID","binsWithMovie","Object","entries","bins","filter","bin","includes","binWithMovie","id","abort","flexDirection","alignItems","width","src","cover_file","alt","title","currently_saved","confirmed","values","reduce","acc","cur","window","confirm","save_history","inRecent","recent_save_history","description","textAlign","genres","join","mpaa_rating","duration_in_mins","Math","floor","release_date","slice","writers","directors","actors","languages","countries","languageOptions","Register","continued","setContinued","info","setInfo","generalError","setGeneralError","registrationError","setRegistrationError","loginError","setLoginError","exec","age","selectedIndex","Number","text","sex","email","key","defaultValue","disabled","Array","fill","map","el","i","language","length","placeItems","maxWidth","Toggler","mounted","prompt","defaultChecked","onCheck","onUncheck","checkbox","checked","Simulate","change","onChange","parentElement","boxShadow","setProperty","Profile","editInfoError","setEditInfoError","editingInfo","changePasswordError","setChangePasswordError","clearing","setClearing","show_save_history","showSaveHistory","setShowSaveHistory","show_description_on_hover","showDescriptionOnHover","setShowDescriptionOnHover","message","setMessage","editInfo","editedInfo","country","Promise","resolve","maxHeight","clearInfo","visibility","otherOpen","lang","currentPassword","newPassword","repeatedNewPassword","StarRater","starRating","setStarRating","rate","rating","Search","setPage","nextButton1","nextButton2","previousButton1","previousButton2","forEach","btn","opacity","pointerEvents","posiiton","zIndex","sections","label","content","Help","more","section","right","ageRatings","durations","saveDates","releaseDates","filterOptionsInit","Filter","displayList","dispatchDisplayList","useReducer","newState","parse","splice","select","filterOptions","dispatchFilterOptions","filterID","setFilterID","makeFilter","parentNode","deriveFilterValues","option","ul","from","li","range","find","child","MovieList","movies","heading","headingMargin","withFilter","displaying","lowerMargin","filters","ratings","duration","genre","year","removingFromHistory","setRemovingFromHistory","setRemovingFromHistoryError","removingFromBin","setRemovingFromBin","flex","onError","imageAlt","onDrag","dataTransfer","setData","tabIndex","val","QueryContent","buttonSet","nextButton","this","phases","Query","props","phase","setPhase","answers","set","setSet","manageFilters","index","textContent","timeConstraint","timePeriods","j","keys","BinManagerContext","BinManagerProvider","binManagerOpen","setBinManagerOpen","BinManager","setDisplaying","deleteBin","setDeleteBin","addMovie","setAddMovie","updateBinClicked","setUpdateBinClicked","binToUpdate","setBinToUpdate","manageBins","callback","errorhandler","formData","FormData","append","borderRadius","autoComplete","toUpdate","updatedMovies","MyList","showBins","setShowBins","currentlySaved","creatingBin","setCreatingBin","creatingBinError","setCreatingBinError","setUpdatingBinError","binName","updateBin","getData","movieIDs","onClickYourBins","overflow","outline","onKeyDown","keyCode","transformOrigin","onDrop","onDragOver","onDragLeave","document","activeElement","querySelectorAll","Popular","setHeading","column","setColumn","App","path","exact","component","render","Boolean","hostname","match","combineReducers","createStore","reducer","applyMiddleware","thunk","ReactDOM","StrictMode","Context","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.30474081.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/image-alt.7496b72d.png\";","export const server = new URL('http://localhost:8082');\r\n\r\nexport default { server };","import React, { createContext } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nexport const HistoryContext = createContext(null);\r\n\r\nexport const HistoryProvider = ({ children }) => {\r\n    const history = useHistory();\r\n\r\n    return (\r\n        <HistoryContext.Provider value={history}>\r\n            {children}\r\n        </HistoryContext.Provider>\r\n    )\r\n}\r\n\r\nexport default HistoryContext;","export const UPDATE_USER_LAUNCH = 'UPDATE_USER_LAUNCH',\r\n             UPDATE_USER_SUCCESS = 'UPDATE_USER_SUCCESS',\r\n             UPDATE_USER_FAILURE = 'UPDATE_USER_FAILURE';\r\n\r\nconst initialState = {\r\n    loading: false,\r\n    result: null,\r\n    error: null\r\n}\r\n\r\nexport default (state=initialState, { type, payload }) => {\r\n    const newState = { ...state };\r\n    switch (type) {\r\n        default: break;\r\n        case UPDATE_USER_LAUNCH:\r\n            newState.loading = true;\r\n            break;\r\n        case UPDATE_USER_SUCCESS:\r\n            newState.loading = false;\r\n            newState.error = null;\r\n            newState.result = payload;\r\n            break;\r\n        case UPDATE_USER_FAILURE:\r\n            newState.loading = false;\r\n            newState.error = payload;\r\n            newState.result = null;\r\n            break;\r\n    }\r\n    return newState;\r\n}","import { server } from '../../APIs';\r\nimport { UPDATE_USER_LAUNCH, UPDATE_USER_SUCCESS, UPDATE_USER_FAILURE } from '../reducers/updateUser.reducer';\r\n\r\nexport const createUpdateUserLaunch = _=> ({ type: UPDATE_USER_LAUNCH }),\r\n             createUpdateUserSuccess = payload => ({ type: UPDATE_USER_SUCCESS, payload }),\r\n             createUpdateUserFailure = payload => ({ type: UPDATE_USER_FAILURE, payload });\r\n\r\n\r\nexport const updateUser = username => {\r\n    return dispatch => {\r\n        if (!username) {\r\n            dispatch( createUpdateUserFailure(null) );\r\n            return;\r\n        }\r\n        dispatch( createUpdateUserLaunch() );\r\n        fetch(server + `users/${username}`)\r\n            .then(res => res.json())\r\n            .then(res => { dispatch( createUpdateUserSuccess(res[0]) ) })\r\n            .catch(e => dispatch( createUpdateUserFailure(e) ));\r\n    }\r\n}","import React, { useState, useContext, useEffect, useRef } from 'react';\r\nimport { server } from '../APIs';\r\n// import UserContext from '../store/contexts/User.context';\r\nimport HistoryContext from '../store/contexts/History.context';\r\nimport { updateUser } from '../store/actions/updateUser.action';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nfunction Login() {\r\n    const dispatch = useDispatch();\r\n    const user = useSelector(store => store.user.result);\r\n    const history = useContext(HistoryContext);\r\n    // const [user, setUser] = useContext(UserContext);\r\n    const [open, setOpen] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const loginForm = useRef(null);\r\n    const errorRef = useRef(null);\r\n\r\n    useEffect(_=> {\r\n        if (error && loginForm.current) {\r\n            loginForm.current.style.transform = 'translateY(1rem)';\r\n            errorRef.current.style.transform = 'translateY(1.4rem)';\r\n        } else if (loginForm.current) {\r\n            loginForm.current.style.transform = 'translateY(0)';\r\n            errorRef.current.style.transform = 'translateY(0)';\r\n        }\r\n    }, [error])\r\n\r\n    const onLogin = async e => {\r\n        e.persist();\r\n        e.preventDefault();\r\n        const username = e.target.children[0].value,\r\n            password = e.target.children[2].value;\r\n        if (!username && !password) {\r\n            setError(null);\r\n            setOpen(false);\r\n            return;\r\n        }\r\n        try {\r\n            const response = await fetch(server+`users/${username}`),\r\n            json = await response.json();\r\n            if (!json[0]) { setError('Invalid login'); return }\r\n            if (String(json[0].password) === password) {\r\n                dispatch( updateUser(username) );\r\n                setError(null);\r\n            } else setError(`Invalid login`);\r\n        } catch (e) { setError('Something went wrong'); console.log(e) }\r\n    }\r\n    \r\n    function goToRegister(e) {\r\n        e.persist();\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        history.push('/register')\r\n    }\r\n\r\n    function mouseOverLogin(e) {\r\n        e.target.style.color = 'red';\r\n    }\r\n\r\n    function mouseOutLogin(e) {\r\n        e.persist();\r\n        setTimeout(_=> e.target.style.color = 'white', 250);\r\n    }\r\n\r\n    return user\r\n            ? (\r\n                <>\r\n                    <div style={{ color: 'var(--color-offset)', fontSize: '1.75rem', margin: '1rem 0 0 1rem' }}>Welcome, {user.name || user.username}</div>\r\n                    <span style={{ padding: '0 2rem' }}>\r\n                        <button onClick={_=> { dispatch( updateUser(null) ); setOpen(false) }}style={{ color: 'white', cursor: 'pointer', backgroundColor: 'transparent', border: 'none', marginRight: '.5rem' }} onMouseOver={e => e.target.style.color = 'silver'} onMouseOut={e => e.target.style.color = 'white'} onFocus={e => e.target.style.color = 'silver'} onBlur={e => e.target.style.color = 'white'}>Log out</button>\r\n                        <button onClick={_=> history.push(`profile/${user.username}`)} style={{ color: 'white', cursor: 'pointer', backgroundColor: 'transparent', border: 'none', marginLeft: '.5rem' }} onMouseOver={e => e.target.style.color = 'silver'} onMouseOut={e => e.target.style.color = 'white'} onFocus={e => e.target.style.color = 'silver'} onBlur={e => e.target.style.color = 'white'}>View profile</button>\r\n                    </span>\r\n                </>\r\n            )\r\n            : open \r\n                ? (\r\n                    <>\r\n                        <div ref={errorRef} style={{ position: 'absolute', top: '-1rem', left: '2.8rem', color: 'red', transition: 'transform 300ms ease-in-out' }}>{error}</div>\r\n                        <form onSubmit={onLogin} ref={loginForm} style={{backgroundColor: 'transparent', margin: '1rem', display: 'inline-block', transition: 'transform 300ms ease-in-out'}}>\r\n                            <input style={{ padding: '.25rem', height: '1.25rem', marginBottom: '.2rem'}} type=\"text\" placeholder=\"username\" />\r\n                            <br />\r\n                            <input style={{ padding: '.25rem', height: '1.25rem' }} type=\"password\" placeholder=\"password\" />\r\n                            <br />\r\n                            <div style={{ marginTop: '.25rem', display: 'flex', justifyContent: 'space-between' }}>\r\n                                <button className=\"button-manage-movie\" onClick={e => e.target.blur()}>Log in</button>\r\n                                <button className=\"button-manage-movie\"onClick={goToRegister}>Sign up</button>\r\n                            </div>\r\n                        </form>\r\n                    </>\r\n                )\r\n                : <button className=\"button-login\" onClick={_=> setOpen(true)}>\r\n                    <span style={{ transition: 'color 250ms ease-in' }} onMouseOver={mouseOverLogin} onMouseOut={mouseOutLogin}>L</span>\r\n                    <span style={{ transition: 'color 250ms ease-in' }} onMouseOver={mouseOverLogin} onMouseOut={mouseOutLogin}>o</span>\r\n                    <span style={{ transition: 'color 250ms ease-in' }} onMouseOver={mouseOverLogin} onMouseOut={mouseOutLogin}>g</span>\r\n                    <span style={{ transition: 'color 250ms ease-in', marginLeft: '.35rem' }} onMouseOver={mouseOverLogin} onMouseOut={mouseOutLogin}>i</span>\r\n                    <span style={{ transition: 'color 250ms ease-in' }} onMouseOver={mouseOverLogin} onMouseOut={mouseOutLogin}>n</span>\r\n                </button>\r\n        \r\n}\r\n\r\nexport default Login\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Footer() {\r\n    return (\r\n        <>\r\n            <Link to=\"/help\" className=\"link-help\">What is <span className=\"logo\" style={{ fontWeight: 600 }}>Choosie</span>?</Link>\r\n            <div style={{'position': 'absolute', 'bottom': '.85rem', 'right': '1rem', 'color': 'black', 'userSelect': 'none'}}> 2020 Choosie | Nick Barak</div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Footer\r\n","export const SEARCH_LAUNCH = 'SEARCH_LAUNCH',\r\n    SEARCH_SUCCESS = 'SEARCH_SUCCESS',\r\n    SEARCH_FAILURE = 'SEARCH_FAILURE';\r\n\r\nconst initialState = {\r\n    loading: false,\r\n    searchValue: null,\r\n    result: [],\r\n    error: null\r\n};\r\n\r\nexport default (state=initialState, { type, payload }) => {\r\n    switch (type) {\r\n        default: return state;\r\n        case SEARCH_LAUNCH:\r\n            return {\r\n                ...state,\r\n                loading: true,\r\n                searchValue: payload\r\n            }\r\n        case SEARCH_SUCCESS:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                result: payload,\r\n                error: null\r\n            }\r\n        case SEARCH_FAILURE:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                result: [],\r\n                error: payload\r\n            }\r\n    }\r\n}","import { SEARCH_LAUNCH, SEARCH_SUCCESS, SEARCH_FAILURE } from \"../reducers/search.reducer\";\r\nimport { server } from '../../APIs';\r\n\r\nexport const createSearchLaunch = payload => ({ type: SEARCH_LAUNCH, payload }),\r\n    createSearchSuccess = payload => ({ type: SEARCH_SUCCESS, payload }),\r\n    createSearchFailure = payload => ({ type: SEARCH_FAILURE, payload });\r\n\r\nexport const search = (username, query, page) => {\r\n    return dispatch => {\r\n        dispatch(createSearchLaunch(query))\r\n        fetch(server+`search?user=${username}&search=${query}&page=${page}`)\r\n            .then(res => res.json())\r\n            .then(res => {\r\n                dispatch( createSearchSuccess(res) );\r\n            })\r\n            .catch(e => dispatch( createSearchFailure(e) ))\r\n    }\r\n}","import React, { useState, createContext } from 'react';\r\n\r\nexport const UserContext = createContext(null);\r\n\r\nexport const UserProvider = ({ children }) => {\r\n    const [state, setState] = useState(UserContext._currentValue);\r\n    \r\n    return (\r\n        <UserContext.Provider value={[ state, setState ]}>\r\n            {children}\r\n        </UserContext.Provider>\r\n    )\r\n}\r\n\r\nexport default UserContext;","import React, { useContext } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport Login from './Login';\r\nimport Footer from './Footer';\r\nimport { search } from '../store/actions/search.action';\r\nimport UserContext from '../store/contexts/User.context';\r\nimport HistoryContext from '../store/contexts/History.context';\r\nimport { server } from '../APIs';\r\n\r\nfunction Home() {\r\n    const dispatch = useDispatch();\r\n    const history = useContext(HistoryContext);\r\n    const [user] = useContext(UserContext);\r\n\r\n    const onSearch = async e => {\r\n        e.persist();\r\n        e.preventDefault();\r\n        try { \r\n            dispatch( search(user ? user.username : null, e.target.children[0].value, 1) );\r\n            e.target.reset();\r\n            history.push('/search')\r\n        } catch (e) { console.log(e) }\r\n    }\r\n\r\n    function onClick(button, route) {\r\n        user && fetch(`${server}home/${user.username}`, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ button })\r\n        })\r\n            .then(res => !res.ok && console.log('Something went wrong'))\r\n            .catch(e => console.log(e));\r\n        history.push(route);\r\n    }\r\n    \r\n    return (\r\n        <>\r\n            <Login history={history} />\r\n            <div className=\"container\">\r\n                <div className=\"frame\">\r\n                    <h1 className=\"logo\" style={{ userSelect: 'none', fontSize: 45}}>Choosie</h1>\r\n                    <form onSubmit={onSearch}>\r\n                        <input className=\"search\" type=\"text\" placeholder=\"Search actors, genres, directors\" style={{ margin: '1.5rem 1.5rem'}} />\r\n                    </form>\r\n                    <ul className=\"button-wrapper\">\r\n                        <li><button className=\"button\" onClick={_=> onClick('my_list', '/my-list')}>My List</button></li>\r\n                        <li><button className=\"button\" onClick={_=> onClick('start', '/query')}>Start</button></li>\r\n                        <li><button className=\"button\" onClick={_=> onClick('popular', '/popular')}>Popular</button></li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <Footer />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Home\r\n","export const MAKE_REQUEST_LAUNCH = 'MAKE_REQUEST_LAUNCH',\r\n    MAKE_REQUEST_SUCCESS = 'MAKE_REQUEST_SUCCESS',\r\n    MAKE_REQUEST_FAILURE = 'MAKE_REQUEST_FAILURE';\r\n\r\nconst initialState = {\r\n    loading: false,\r\n    result: [],\r\n    error: null\r\n};\r\n\r\nexport default (state=initialState, { type, payload }) => {\r\n    switch (type) {\r\n        default: return state;;\r\n        case MAKE_REQUEST_LAUNCH:\r\n            return {\r\n                ...state,\r\n                loading: true\r\n            }\r\n        case MAKE_REQUEST_SUCCESS:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                result: payload,\r\n                error: null\r\n            }\r\n        case MAKE_REQUEST_FAILURE:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                result: [],\r\n                error: payload\r\n            }\r\n    }\r\n}","import { MAKE_REQUEST_LAUNCH, MAKE_REQUEST_SUCCESS, MAKE_REQUEST_FAILURE } from \"../reducers/makeRequest.reducer\";\r\nimport { server } from '../../APIs';\r\n\r\nexport const createMakeRequestLaunch = _=> ({ type: MAKE_REQUEST_LAUNCH }),\r\n    createMakeRequestSuccess = payload => ({ type: MAKE_REQUEST_SUCCESS, payload }),\r\n    createMakeRequestFailure = payload => ({ type: MAKE_REQUEST_FAILURE, payload });\r\n\r\nexport const makeRequest = (route, querystring, options={}) => {\r\n    return dispatch => {\r\n        dispatch(createMakeRequestLaunch())\r\n        fetch(server+`${route}${querystring ? querystring : ''}`, options)\r\n            .then(res => res.json())\r\n            .then(res => {\r\n                dispatch( createMakeRequestSuccess(res) );\r\n            })\r\n            .catch(e => dispatch( createMakeRequestFailure(e) ))\r\n    }\r\n}","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Nav({ withSearch, searchValue }) {\r\n    return (\r\n        <nav>\r\n            <ul>\r\n                <li><Link to=\"/\">Home</Link></li>\r\n                <li><Link to=\"/my-list\">My List</Link></li>\r\n                <li><Link to=\"/popular\">Popular</Link></li>\r\n                {withSearch && <li><Link to={{\r\n                    pathname: \"/search\",\r\n                    searchValue\r\n                }}>Back to Search</Link></li>}\r\n            </ul>\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport default Nav\r\n","import React, { useState, useEffect, useContext } from 'react';\r\nimport { useLocation, Link } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { makeRequest } from '../store/actions/makeRequest.action';\r\nimport Nav from './Nav';\r\nimport { server } from '../APIs';\r\nimport HistoryContext from '../store/contexts/History.context';\r\nimport { updateUser } from '../store/actions/updateUser.action';\r\n\r\nfunction Movie({ location: { searchValue } }) {\r\n    const history = useContext(HistoryContext);\r\n    const location = useLocation();\r\n    const dispatch = useDispatch();\r\n    const movie = useSelector(store => store.makeRequest.result[0]);\r\n    const { loading, error } = useSelector(store => store.makeRequest);\r\n    // const [user, setUser] = useContext(UserContext);\r\n    const [saving, setSaving] = useState(false);\r\n    const [unsaving, setUnsaving] = useState(false);\r\n    const [saveError, setSaveError] = useState(null);\r\n    const user = useSelector(store => store.user.result);\r\n\r\n    function saveMovie() {\r\n        setSaving(true);\r\n        fetch(server + `movies?user=${user.username}`, {\r\n            method: user.save_history.includes(movie.id) ? 'PUT' : 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ movieID: movie.id, inRecent: user.recent_save_history.includes(movie.id) })\r\n        })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    setSaving(false);\r\n                    dispatch( updateUser(user.username) );\r\n                } else setSaveError('Error saving movie')\r\n            })\r\n            .catch(e => setSaveError('Error saving movie'));\r\n    }\r\n\r\n    useEffect(_=> dispatch( makeRequest('movies', '?id=' + location.pathname.split('/movies/')[1]) ), []);\r\n\r\n    useEffect(_=> {\r\n        const controller = new AbortController(),\r\n              { signal } = controller;\r\n        unsaving && (async _=> {\r\n            try {\r\n                let res;\r\n                res = await fetch(server + `movies?user=${user.username}`, {\r\n                    signal,\r\n                    method: 'DELETE',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({ movieID: unsaving })\r\n                });\r\n                !res.ok && setSaveError('Error unsaving movie');\r\n        \r\n                let binsWithMovie = Object.entries(user.bins)\r\n                    .filter(bin => bin[1].includes(String(unsaving)));\r\n                for (let binWithMovie of binsWithMovie) {\r\n                    res = await fetch(server + `users/${user.username}/bins`, {\r\n                        signal,\r\n                        method: 'PATCH',\r\n                        headers: { 'Content-Type': 'application/json' },\r\n                        body: JSON.stringify({ bin: { [binWithMovie[0]]: binWithMovie[1].filter(id => id !== String(unsaving)) } })\r\n                    });\r\n                    !res.ok && setSaveError('Error unsaving movie');\r\n                }\r\n        \r\n                dispatch( updateUser(user.username) );\r\n                setUnsaving(false);\r\n            } catch (e) { e.name === 'AbortError' && console.log('Unsave aborted') }\r\n        })();\r\n\r\n        return _=> controller.abort();\r\n    }, [unsaving])\r\n\r\n    if (!movie) return <div>Error loading movie</div>\r\n\r\n    return loading ? <div>Loading...</div> : error ? <div>Error loading movie</div> : (\r\n        <>\r\n            <Nav withSearch={searchValue} searchValue={searchValue} />\r\n            <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', transform: 'translateY(-3.5rem)' }}>\r\n                <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', width: '60vw' }}><img className=\"image-movie\" src={movie.cover_file} alt=\"not available\" />\r\n                <label style={{ fontWeight: 'bold', margin: '1rem 0 .2rem 0' }}>{movie.title}</label>\r\n                {user\r\n                    ? user.currently_saved.includes(movie.id)\r\n                        ? <button className=\"button-manage-movie\" onClick={_=> {\r\n                            let confirmed = true;\r\n                            if (Object.values(user.bins).reduce((acc, cur) => [...acc, ...cur], []).includes(String(movie.id))) confirmed = window.confirm('This will remove the movie from all bins. Do you still want to unsave it?');\r\n                            confirmed && setUnsaving(movie.id)\r\n                        }}>{unsaving ? 'Unsaving movie...' : 'Unsave Movie'}</button>\r\n                        : <button className=\"button-manage-movie\" onClick={saveMovie}>{saving ? 'Saving movie...' : 'Save to My List'}</button>\r\n                    : <button className=\"button-manage-movie\" onClick={_=> history.push('/register')}>Sign in to save this movie</button>}\r\n                    {movie.description && <div style={{ margin: '2.5rem 0 3rem 0', textAlign: 'justify'}}>{movie.description === 'Not available' ? 'Description not available' : movie.description}</div>}\r\n                </div>\r\n                <ul className=\"info-movie\">\r\n                    <li>\r\n                        <label>Genres: </label>\r\n                        {movie.genres && <span>{movie.genres.join(', ') || 'Not available'}</span>}\r\n                    </li>\r\n                    <li>\r\n                        <label>Rating: </label>\r\n                        {movie.mpaa_rating && <span>{movie.mpaa_rating || 'Not available'}</span>}\r\n                    </li>\r\n                    <li>\r\n                        <label>Duration: </label>\r\n                        {movie.duration_in_mins\r\n                            ? movie.duration_in_mins % 60\r\n                                ? movie.duration_in_mins >= 60\r\n                                    ? <span>{Math.floor(movie.duration_in_mins / 60)}h {movie.duration_in_mins % 60}min</span>\r\n                                    : <span>{movie.duration_in_mins} min</span>\r\n                                : <span>{movie.duration_in_mins % 60}h</span>\r\n                            : 'Not available'}\r\n                    </li>\r\n                    <li>\r\n                        <label>Release Date: </label>\r\n                        {movie.release_date && <span>{movie.release_date.slice(0, 4) || 'Not available'}</span>}\r\n                    </li>\r\n                    <li>\r\n                        <label>Writers: </label>\r\n                        {movie.writers && <span>{movie.writers.join(', ') || 'Not available'}</span>}\r\n                    </li>\r\n                    <li>\r\n                        <label>Directors: </label>\r\n                        {movie.directors && <span>{movie.directors.join(', ') || 'Not available'}</span>}\r\n                    </li>\r\n                    <li>\r\n                        <label>Actors: </label>\r\n                        {movie.actors && <span>{movie.actors.join(', ') || 'Not available'}</span>}\r\n                    </li>\r\n                    <li>\r\n                        <label>Languages: </label>\r\n                        {movie.languages && <span>{movie.languages.join(', ') || 'Not available'}</span>}\r\n                    </li>\r\n                    <li>\r\n                        <label>Countries: </label>\r\n                        {movie.countries && <span>{movie.countries.join(', ') || 'Not available'}</span>}\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Movie\r\n","import React, { useState, useContext } from 'react';\r\nimport { server } from '../APIs';\r\nimport { useDispatch } from 'react-redux';\r\n// import UserContext from '../store/contexts/User.context';\r\nimport HistoryContext from '../store/contexts/History.context';\r\nimport { updateUser } from '../store/actions/updateUser.action';\r\n\r\nconst languageOptions = [\r\n    'Afrikaans',       'Bengali',    'Burmese',\r\n    'Cantonese',       'Czech',      'Dutch',\r\n    'English',         'Filipino',   'French',\r\n    'German',          'Hindi',      'Hungarian',\r\n    'Indonesian',      'Italian',    'Japanese',\r\n    'Korean',          'Malay',      'Mandarin',\r\n    'Polish',          'Portuguese', 'Punjabi',\r\n    'Romanian',        'Russian',    'Spanish',\r\n    'Standard Arabic', 'Sundanese',  'Swahili',\r\n    'Swedish',         'Tagalog',    'Tamil',\r\n    'Telugu',          'Thai',       'Turkish',\r\n    'Ukranian',        'Vietnamese'\r\n  ];\r\n\r\nfunction Register() {\r\n    const history = useContext(HistoryContext);\r\n    const [continued, setContinued] = useState(false);\r\n    const [info, setInfo] = useState({});\r\n    const [generalError, setGeneralError] = useState(null);\r\n    const [registrationError, setRegistrationError] = useState(null);\r\n    const [loginError, setLoginError] = useState(null);\r\n    const dispatch = useDispatch();\r\n\r\n    function submitMainInfo(e) {\r\n        setRegistrationError(null);\r\n        e.persist();\r\n        e.preventDefault();\r\n        const children = e.target.children[1].children;\r\n        if (children[0].children[0].value.includes(' ')) { setRegistrationError('Username cannot contain a space'); return }\r\n        if (!/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/.exec(children[1].children[0].value)) { setRegistrationError('Password must be at least 8 characters with one of each of the following: upper case letter, lower case letter, number and special character'); return }\r\n        if (children[1].children[0].value !== children[2].children[0].value) { setRegistrationError('Passwords must match'); return }\r\n        (async _=> {\r\n            const response = await fetch(server + 'users/check?user=' + children[0].children[0].value);\r\n            const json = await response.json();\r\n            if (json.length) {\r\n                setRegistrationError('Username not available');\r\n                return;\r\n            }\r\n            setInfo({\r\n                username: children[0].children[0].value,\r\n                password: children[1].children[0].value\r\n            });\r\n            setContinued(true);\r\n            e.target.reset();\r\n        })();\r\n    }\r\n\r\n    function createUser(e) {\r\n        setGeneralError(null);\r\n        setRegistrationError(null);\r\n        e.persist();\r\n        e.preventDefault();\r\n        const children = e.target.children[1].children;\r\n        if (children[2].children[0].value && !/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/.exec(children[2].children[0].value)) { setRegistrationError('Invalid email address'); return }\r\n        fetch(server + 'users', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n                ...info,\r\n                name: children[0].children[0].value ? children[1].children[0].value : null,\r\n                age: children[1].children[0].selectedIndex ? Number(children[1].children[0].options[children[1].children[0].selectedIndex].text) : 0,\r\n                sex: children[1].children[1].selectedIndex ? children[1].children[1].options[children[1].children[1].selectedIndex].text : null,\r\n                languages: children[1].children[2].selectedIndex ? children[1].children[2].options[children[1].children[2].selectedIndex].text : null,\r\n                email: children[2].children[0].value ? children[2].children[0].value : null\r\n            })\r\n        })\r\n            .then(res => res.json())\r\n            .then(json => {\r\n                dispatch( updateUser(json.username) );\r\n                history.push('/');\r\n            })\r\n            .catch(e => setGeneralError('Something went wrong'));\r\n        e.target.reset();\r\n    }\r\n\r\n    async function onLogin(e) {\r\n        setGeneralError(null);\r\n        setLoginError(null);\r\n        e.persist();\r\n        e.preventDefault();\r\n        const username = e.target.children[1].children[0].children[0].value,\r\n            password = e.target.children[1].children[1].children[0].value;\r\n        if (!username && !password) return;\r\n        try {\r\n            const response = await fetch(server+`users/${username}`),\r\n            json = await response.json();\r\n            if (!json[0]) { setLoginError('Invalid login'); return }\r\n            if (String(json[0].password) === password) {\r\n                dispatch( updateUser(json[0].username) );\r\n                history.push('/');\r\n            } else setLoginError(`Invalid login`);\r\n        } catch (e) { setGeneralError('Something went wrong') }\r\n        e.target.reset();\r\n    }\r\n\r\n    return !continued\r\n        ? (\r\n        <div className=\"container\" style={{ flexDirection: 'column' }}>\r\n            {registrationError && <div style={{color: 'red', margin: '1rem' }}>{registrationError}</div>}\r\n            <form className=\"register-1\" onSubmit={submitMainInfo}>\r\n                <div className=\"prompt-register\">Please enter a username and password or sign in with another platform</div>\r\n                <ul style={{ display: 'flex', flexDirection: 'column', width: '80%', placeItems: 'center' }}>\r\n                    <li style={{ margin: '.25rem', width: '100%', maxWidth: '25rem' }}>\r\n                        <input className=\"input-register\" type=\"text\" placeholder=\"username\" key=\"username\" />\r\n                    </li>\r\n                    <li style={{ margin: '.25rem', width: '100%', maxWidth: '25rem' }}>\r\n                        <input className=\"input-register\" type=\"password\" placeholder=\"password\" key=\"password\" />\r\n                    </li>\r\n                    <li style={{ margin: '.25rem', width: '100%', maxWidth: '25rem' }}>\r\n                        <input className=\"input-register\" type=\"password\" placeholder=\"repeat password\" />\r\n                    </li>\r\n                </ul>\r\n                <div>\r\n                    <button className=\"button-register\">Continue</button>\r\n                    <button onClick={_=> history.push('/')} className=\"button-register\">Cancel</button>\r\n                </div>\r\n            </form>\r\n            {loginError\r\n                ? <div style={{color: 'red', margin: '1rem' }}>{loginError}</div>\r\n                : generalError && <div style={{ color: 'maroon' }}>{generalError}</div>\r\n            }\r\n            <form className=\"register-1\" onSubmit={onLogin}>\r\n                <div className=\"prompt-register\">Already have an account? Log in</div>\r\n                <ul style={{ display: 'flex', flexDirection: 'column', width: '80%', placeItems: 'center' }}>\r\n                    <li style={{ margin: '.25rem', width: '100%', maxWidth: '25rem' }}>\r\n                        <input className=\"input-register\" type=\"text\" placeholder=\"username\" />\r\n                    </li>\r\n                    <li style={{ margin: '.25rem', width: '100%', maxWidth: '25rem' }}>\r\n                        <input className=\"input-register\" type=\"password\" placeholder=\"password\" />\r\n                    </li>\r\n                </ul>\r\n                <button className=\"button-register\">Log in</button>\r\n            </form>\r\n        </div>)\r\n        : <div className=\"container\" style={{ flexDirection: 'column' }}>\r\n            {registrationError\r\n                ? <div style={{color: 'red', margin: '1rem'}}>{registrationError}</div>\r\n                : generalError && <div style={{ color: 'maroon' }}>{generalError}</div>\r\n            }\r\n            <form className=\"register-1\" onSubmit={createUser}>\r\n                <div className=\"prompt-register\">You can enter more information here for a better experience</div>\r\n                <ul>\r\n                    <li style={{margin: '.75rem' }}>\r\n                        <input className=\"input-register\" type=\"text\" placeholder=\"first name\" key=\"name\" />\r\n                    </li>\r\n                    <li  style={{margin: '.75rem' }}className=\"ul-create-user\">\r\n                        <select defaultValue=\"default\">\r\n                            <option key=\"-1\" value=\"default\" disabled>Select an age</option>\r\n                            {new Array(126).fill('').map((el, i) => <option key={i}>{i}</option>)}\r\n                        </select>\r\n                        <select defaultValue=\"default\">\r\n                            <option key=\"0\" value=\"default\" disabled>Select a sex</option>\r\n                            <option key=\"1\" value=\"female\">Female</option>\r\n                            <option key=\"2\" value=\"male\">Male</option>\r\n                            <option key=\"3\" value=\"other\">Other</option>\r\n                        </select>\r\n                        <select defaultValue=\"default\">\r\n                            <option key=\"-1\" value=\"default\" disabled>Select a language</option>\r\n                            {languageOptions.map((language, i) => <option key={i} >{language}</option>)}\r\n                        </select>\r\n                    </li>\r\n                    <li style={{margin: '.75rem' }}>\r\n                        <input className=\"input-register\" type=\"text\" placeholder=\"email\" />\r\n                    </li>\r\n                </ul>\r\n                <div className=\"prompt-register\" style={{ marginTop: '.5rem', marginBottom: '.3rem' }}>You can also edit these fields later</div>\r\n                <div>\r\n                    <button className=\"button-register\" >Sign up</button>\r\n                    <button className=\"button-register\" onClick={_=> history.push('/')}>Cancel</button>\r\n                </div>\r\n            </form>\r\n    </div>\r\n}\r\n\r\nexport default Register\r\n","import React, { useEffect, useRef } from 'react'\r\nimport { Simulate } from 'react-dom/test-utils';\r\n\r\nfunction Toggler({ prompt, defaultChecked, onCheck, onUncheck }) {\r\n    const checkbox = useRef(null);\r\n\r\n    useEffect(_=> {\r\n        if (defaultChecked) {\r\n            checkbox.current.checked = true;\r\n            Simulate.change(checkbox.current);\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div style={{ margin: '.2rem' }}>\r\n            <span>{prompt} </span>\r\n            <label className=\"toggler\">\r\n                <input type=\"checkbox\" ref={checkbox} onChange={e => {\r\n                    let { style } = e.target.parentElement.children[1];\r\n                    if (e.target.checked) {\r\n                        style.backgroundColor = '#2196F3';\r\n                        style.boxShadow = '0 0 1px #2196F3';\r\n                        style.setProperty('--toggler-translation', '12.5px');\r\n                        onCheck && onCheck();\r\n                    } else {\r\n                        style.backgroundColor = '#aaa';\r\n                        style.boxShadow = 'none';\r\n                        style.setProperty('--toggler-translation', 0);\r\n                        onUncheck && onUncheck();\r\n                    }\r\n                }}/>\r\n                <span />\r\n            </label>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Toggler\r\n","import React, { useState, useContext, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useLocation } from 'react-router-dom';\r\n// import UserContext from '../store/contexts/User.context';\r\nimport { makeRequest } from '../store/actions/makeRequest.action';\r\nimport HistoryContext from '../store/contexts/History.context';\r\nimport { updateUser } from '../store/actions/updateUser.action';\r\nimport Toggler from './Toggler';\r\n\r\nconst languageOptions = [\r\n    'Afrikaans',       'Bengali',    'Burmese',\r\n    'Cantonese',       'Czech',      'Dutch',\r\n    'English',         'Filipino',   'French',\r\n    'German',          'Hindi',      'Hungarian',\r\n    'Indonesian',      'Italian',    'Japanese',\r\n    'Korean',          'Malay',      'Mandarin',\r\n    'Polish',          'Portuguese', 'Punjabi',\r\n    'Romanian',        'Russian',    'Spanish',\r\n    'Standard Arabic', 'Sundanese',  'Swahili',\r\n    'Swedish',         'Tagalog',    'Tamil',\r\n    'Telugu',          'Thai',       'Turkish',\r\n    'Ukranian',        'Vietnamese'\r\n  ];\r\n\r\nlet mounted;\r\n\r\nfunction Profile() {\r\n    // const [user, setUser] = useContext(UserContext);\r\n    const [editInfoError, setEditInfoError] = useState(null);\r\n    const [editingInfo, setEditingInfo] = useState(false);\r\n    const [changingPassword, setChangingPassword] = useState(false);\r\n    const [changePasswordError, setChangePasswordError] = useState(null);\r\n    const location = useLocation();\r\n    const history = useContext(HistoryContext);\r\n    const dispatch = useDispatch();\r\n    const { error, result, loading } = useSelector(store => store.makeRequest);\r\n    const user = useSelector(store => store.user.result);\r\n    const [clearing, setClearing] = useState(false);\r\n    const [showSaveHistory, setShowSaveHistory] = useState(user && user.show_save_history);\r\n    const [showDescriptionOnHover, setShowDescriptionOnHover] = useState(user && user.show_description_on_hover);\r\n    const [message, setMessage] = useState(null);\r\n\r\n    function editInfo(e, signal) {\r\n        if (e) {\r\n            e.persist();\r\n            e.preventDefault();\r\n            if (e.target.children[3].value && !/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/.exec(e.target.children[3].value)) { setEditInfoError('Invalid email address'); return }\r\n        }\r\n        const children = e && e.target.children,\r\n              editedInfo = {\r\n                name: e ? children[0].value : user.name,\r\n                sex: e ? children[1].children[0].selectedIndex ? children[1].children[0].options[children[1].children[0].selectedIndex].text : user.sex : user.sex,\r\n                age: e ? children[1].children[1].selectedIndex ? Number(children[1].children[1].options[children[1].children[1].selectedIndex].text) : user.age : user.age,\r\n                languages: e ? children[1].children[2].selectedIndex ? [children[1].children[2].options[children[1].children[2].selectedIndex].text] : user.languages : user.languages,\r\n                country: e ? children[2].value : user.country,\r\n                email: e ? children[3].value : user.email,\r\n                show_save_history: showSaveHistory,\r\n                show_description_on_hover: showDescriptionOnHover,\r\n                recent_save_history: clearing ? [] : user.recent_save_history\r\n        };\r\n        if (e) {\r\n            try {\r\n                new Promise(resolve => dispatch( makeRequest(`users/${user.username}`, '', {\r\n                    signal,\r\n                    method: 'PATCH',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify(editedInfo)\r\n                }) ) || resolve())\r\n                    .then(_=> {\r\n                        dispatch( updateUser(user.username) );\r\n                        setMessage('Info updated successfully');\r\n                        e.target.style.transform = 'scale(0)';\r\n                        e.target.style.maxHeight = 0;\r\n                        e.target.parentElement.parentElement.parentElement.parentElement.children[0].style.transform =\r\n                            e.target.parentElement.parentElement.parentElement.children[2].children[0].children[2].style.maxHeight === '100%'\r\n                                ? 'translate(-6.5rem, 2rem)'\r\n                                : 'translate(0)';\r\n                    });\r\n            } catch (e) { setEditInfoError('Error editing info'); console.log(e) }\r\n        }\r\n    }\r\n\r\n    useEffect(_=> {\r\n        if (!mounted) { mounted = true; return }\r\n        const controller = new AbortController(),\r\n              { signal } = controller;\r\n        editInfo(null, signal);\r\n        return _=> controller.abort();\r\n    }, [clearing, showSaveHistory, showDescriptionOnHover]);\r\n\r\n    useEffect(_=> {\r\n\r\n    }, [editingInfo]);\r\n\r\n    function changePassword(e) {\r\n        e.persist();\r\n        e.preventDefault();\r\n        setChangePasswordError(null);\r\n        const children = e.target.children,\r\n              currentPassword = children[0].value,\r\n              newPassword = children[1].value,\r\n              repeatedNewPassword = children[2].value;\r\n        if (currentPassword !== user.password) { setChangePasswordError('Entry for current password was incorrect'); return }\r\n        if (!/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/.exec(newPassword)) { setChangePasswordError('Password must be at least 8 characters with one of each of the following: upper case letter, lower case letter, number and special character'); return }\r\n        if (newPassword !== repeatedNewPassword) { setChangePasswordError('Passwords must match'); return }\r\n        (async _=> {\r\n            await Promise.resolve().then(_=> dispatch( makeRequest(`users/${user.username}`, null, {\r\n                method: 'PUT',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ \r\n                    currentPassword,\r\n                    newPassword\r\n                })\r\n            }) ));\r\n            if (error) {\r\n                setChangePasswordError('Error changing password');\r\n            } else {\r\n                dispatch( updateUser(user.username) );\r\n                e.target.style.transform = 'scale(0)';\r\n                e.target.style.maxHeight = 0;\r\n                e.target.parentElement.parentElement.parentElement.parentElement.children[0].style.transform =\r\n                    e.target.parentElement.parentElement.parentElement.children[0].children[0].children[2].style.maxHeight === '100%'\r\n                        ? 'translate(6rem, 3.5rem)'\r\n                        : 'translate(-6rem, 2rem)';\r\n                e.target.reset();\r\n                setMessage('Password changed successfully');\r\n            }\r\n        })();\r\n    }\r\n\r\n    async function clearInfo(type) {\r\n        const editedInfo = { ...user };\r\n        if (type === 'languages') user.languages = [];\r\n        editedInfo[type] = null;\r\n        await Promise.resolve()\r\n            .then(_=> dispatch( makeRequest(`users/${user.username}`, null, {\r\n            method: 'PATCH',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n                name: editedInfo.name,\r\n                email: editedInfo.email,\r\n                languages: editedInfo.languages,\r\n                country: editedInfo.country,\r\n                age: editedInfo.age,\r\n                sex: editedInfo.sex,\r\n                show_save_history: user.show_save_history,\r\n                show_description_on_hover: user.show_description_on_hover,\r\n                recent_save_history: user.recent_save_history\r\n            })\r\n        }) ));\r\n        dispatch( updateUser(user.username) );\r\n    }\r\n\r\n    return (\r\n        user && user.username === location.pathname.split('/profile/')[1]\r\n        ? <div className=\"container\" style={{ flexDirection: 'column' }}>\r\n            <div className=\"register-1\" style={{ transition: 'transform 300ms ease-out'}}>\r\n                <label className=\"prompt-register\">Your info</label>\r\n                <ul className=\"info-list\">\r\n                    <li>\r\n                        <button className=\"button-register\" style={{ visibility: 'hidden' }}>Clear</button>\r\n                        <label>Username: </label>\r\n                        <span>{user.username}</span>\r\n                    </li>\r\n                    <li>\r\n                        <button className=\"button-register\" onClick={_=> clearInfo('name')}>Clear</button>\r\n                        <label>Name: </label>\r\n                        <span>{user.name || 'Not specified'}</span>\r\n                    </li>\r\n                    <li>\r\n                        <button className=\"button-register\" onClick={_=> clearInfo('sex')}>Clear</button>\r\n                        <label>Sex: </label>\r\n                        <span>{user.sex || 'Not specified'}</span>\r\n                    </li>\r\n                    <li>\r\n                        <button className=\"button-register\" onClick={_=> clearInfo('age')}>Clear</button>\r\n                        <label>Age: </label>\r\n                        <span>{user.age || 'Not specified'}</span>\r\n                    </li>\r\n                    <li>\r\n                        <button className=\"button-register\" onClick={_=> clearInfo('languages')}>Clear</button>\r\n                        <label>Language: </label>\r\n                        <span style={{ /* whiteSpace: 'normal' */ }}>{user.languages[0].length ? user.languages : 'Not specified'}</span>\r\n                    </li>\r\n                    <li>\r\n                        <button className=\"button-register\" onClick={_=> clearInfo('country')}>Clear</button>\r\n                        <label>Country: </label>\r\n                        <span>{user.country || 'Not specified'}</span>\r\n                    </li>\r\n                    <li>\r\n                        <button className=\"button-register\" onClick={_=> clearInfo('email')}>Clear</button>\r\n                        <label>Email: </label>\r\n                        <span>{user.email || 'Not specified'}</span>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <ul className=\"profile-lower\">\r\n                <li>\r\n                    <div style={{ padding: '1rem' }} className=\"register-1\">\r\n                        <button className=\"button-register\" onClick={e => {\r\n                            e.target.blur();\r\n                            let { style } = e.target.parentElement.children[2],\r\n                            otherOpen = e.target.parentElement.parentElement.parentElement.children[2].children[0].children[2].style.maxHeight === '100%';\r\n                            style.maxHeight =\r\n                            style.maxWidth =\r\n                                style.maxHeight === '100%' ? 0 : '100%';\r\n                                style.transform =\r\n                                    style.transform === 'scale(0)'\r\n                                        ? 'scale(1)'\r\n                                        : 'scale(0)';\r\n                                e.target.parentElement.parentElement.parentElement.parentElement.children[0].style.transform =\r\n                                    style.maxHeight === '100%'\r\n                                    ? otherOpen\r\n                                        ? 'translate(6rem, 3rem)'\r\n                                        : 'translate(6rem, 5rem)'\r\n                                    : otherOpen\r\n                                        ? 'translate(-6.5rem, 2rem)'\r\n                                        : 'translate(0)';\r\n                        }}>Edit Info</button>\r\n                        <div className=\"error-msg\" style={{ color: 'maroon' }}>{editInfoError}</div>\r\n                        <form onSubmit={editInfo} style={{ transform: 'scale(0)' }}>\r\n                            <input style={{ width: '92.5%', margin: '.35rem' }} className=\"input-register\" placeholder=\"name\" />\r\n                            <div style={{ margin: '.75rem' }} className=\"ul-create-user\">\r\n                                <select style={{ margin: '.35rem' }} defaultValue=\"default\">\r\n                                    <option key=\"0\" value=\"default\" disabled>Select a sex</option>\r\n                                    <option key=\"1\" value=\"female\">Female</option>\r\n                                    <option key=\"2\" value=\"male\">Male</option>\r\n                                    <option key=\"3\" value=\"other\">Other</option>\r\n                                </select>\r\n                                <select style={{ margin: '.35rem' }} defaultValue=\"default\">\r\n                                    <option key=\"-1\" value=\"default\" disabled>Select an age</option>\r\n                                    {new Array(126).fill('').map((el, i) => <option key={i}>{i}</option>)}\r\n                                </select>\r\n                                <select style={{ margin: '.35rem' }} defaultValue=\"default\">\r\n                                    <option key=\"-1\" value=\"default\" disabled>Select a language</option>\r\n                                    {languageOptions.map((lang, i) => <option key={i}>{lang}</option>)}\r\n                                </select>\r\n                            </div>\r\n                            <input style={{ width: '92.5%', margin: '.35rem' }} className=\"input-register\" placeholder=\"country\" />\r\n                            <input style={{ width: '92.5%', margin: '.35rem' }} className=\"input-register\" placeholder=\"email\" />\r\n                            <button className=\"button-register\">Submit</button>\r\n                        </form>\r\n                    </div>\r\n                </li>\r\n                <li>\r\n                    <div style={{ padding: '1rem', fontSize: '1rem', width: '90%' }} className=\"register-1\">\r\n                        <Toggler prompt=\"Show description on hover?\" defaultChecked={showDescriptionOnHover} onCheck={_=> setShowDescriptionOnHover(true)} onUncheck={_=> setShowDescriptionOnHover(false)} />\r\n                        <Toggler className=\"toggler-profile\" prompt=\"Show Save History?\" defaultChecked={showSaveHistory} onCheck={_=> setShowSaveHistory(true)} onUncheck={_=> setShowSaveHistory(false)} />\r\n                        <button className=\"button-register\" onClick={e => {\r\n                            e.target.blur();\r\n                            user.recent_save_history.length && setClearing(true);\r\n                        }}>\r\n                            {user.recent_save_history.length\r\n                                ? clearing\r\n                                    ? 'Clearing...'\r\n                                    : 'Clear Save History'\r\n                                : 'History Cleared'\r\n                            }\r\n                        </button>\r\n                    </div>\r\n                </li>\r\n                <li>\r\n                    <div style={{ padding: '1rem'}} className=\"register-1\">\r\n                        <button className=\"button-register\" onClick={e => {\r\n                            e.target.blur();\r\n                            let { style } = e.target.parentElement.children[2],\r\n                            otherOpen = e.target.parentElement.parentElement.parentElement.children[0].children[0].children[2].style.maxHeight === '100%';;\r\n                            style.maxHeight =\r\n                            style.maxWidth =\r\n                                style.maxHeight === '100%' ? 0 : '100%';\r\n                                style.transform =\r\n                                    style.transform === 'scale(0)'\r\n                                        ? 'scale(1)'\r\n                                        : 'scale(0)';\r\n                            e.target.parentElement.parentElement.parentElement.parentElement.children[0].style.transform =\r\n                                style.maxHeight === '100%'\r\n                                    ? otherOpen\r\n                                        ? 'translate(6rem, 3.5rem)'\r\n                                        : 'translate(-6rem, 2rem)'\r\n                                    : otherOpen\r\n                                        ? 'translate(6rem, 5rem)'\r\n                                        : 'translate(0)';\r\n                        }}>Change Password</button>\r\n                        <div className=\"error-msg\" style={{ color: 'maroon' }}>{changePasswordError}</div>\r\n                        <form onSubmit={changePassword} style={{ transform: 'scale(0)' }}>\r\n                            <input style={{ width: '92.5%' }} className=\"input-register\" type=\"password\" placeholder=\"Enter current password\" />\r\n                            <input style={{ width: '92.5%' }} className=\"input-register\" type=\"password\" placeholder=\"Enter new password\" />\r\n                            <input style={{ width: '92.5%' }} className=\"input-register\" type=\"password\" placeholder=\"Repeat new password\" />\r\n                            <button className=\"button-register\">Submit</button>\r\n                        </form>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n            {message && <div style={{ color: 'white', margin: '.8rem', padding: '1rem' }}>{message}</div>}\r\n            <button style={{ margin: '1rem', backgroundColor: 'var(--bg-color-dark)', color: 'var(--color-offset)' }} onMouseOver={e => {\r\n                e.target.style.backgroundColor = 'var(--color-offset)';\r\n                e.target.style.color = 'var(--bg-color-dark)';\r\n            }} onFocus={e => {\r\n                e.target.style.backgroundColor = 'var(--color-offset)';\r\n                e.target.style.color = 'var(--bg-color-dark)';\r\n            }} onMouseOut={e => {\r\n                e.target.style.backgroundColor = 'var(--bg-color-dark)';\r\n                e.target.style.color = 'var(--color-offset)';\r\n            }} onBlur={e => {\r\n                e.target.style.backgroundColor = 'var(--bg-color-dark)';\r\n                e.target.style.color = 'var(--color-offset)';\r\n            }} className=\"button\" onClick={_=> history.push('/')}>Back to Home</button>\r\n        </div>\r\n        : (\r\n            <>\r\n                <div style={{ margin: '1rem 0 .25rem 1rem' }}>You must be logged in as \"{location.pathname.split('/profile/')[1]}\" to view this page</div>\r\n                <button style={{ marginTop: '.5rem' }} onMouseOver={e => {\r\n                    e.target.style.backgroundColor = 'var(--bg-color-light)';\r\n                    e.target.style.color = 'var(--color-offset)';\r\n                }} onFocus={e => {\r\n                    e.target.style.backgroundColor = 'var(--bg-color-light)';\r\n                    e.target.style.color = 'var(--color-offset)';\r\n                }} onMouseOut={e => {\r\n                    e.target.style.backgroundColor = 'var(--color-offset)';\r\n                    e.target.style.color = 'var(--bg-color-dark)'\r\n                }} onBlur={e => {\r\n                    e.target.style.backgroundColor = 'var(--color-offset)';\r\n                    e.target.style.color = 'var(--bg-color-dark)'\r\n                }} className=\"button\" onClick={_=> history.push('/')}>Back to Home</button>\r\n            </>\r\n        )\r\n    )\r\n}\r\n\r\nexport default Profile\r\n","import React, { useState } from 'react';\r\nimport { server } from '../APIs';\r\nimport { useSelector } from 'react-redux';\r\n\r\nfunction StarRater() {\r\n    const user = useSelector(store => store.user.result);\r\n    const [starRating, setStarRating] = useState(0);\r\n\r\n    function rate(rating) {\r\n        setStarRating(rating);\r\n        try {\r\n            fetch(server + 'search', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ rating, username: user ? user.username : null })\r\n            })\r\n        } catch (e) { console.log(e) }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <label style={{ marginRight: '.5rem', fontSize: '1rem' }}>How would you rate these suggestions?</label>\r\n            <span>\r\n                {[1,2,3,4,5].map(el => starRating >= el\r\n                    ? <i key={el} className=\"fas fa-star\" onClick={_=> rate(el)} style={{ cursor: 'pointer' }} />\r\n                    : <i key={el} className=\"far fa-star\" onClick={_=> rate(el)} style={{ cursor: 'pointer' }} />\r\n                )}\r\n            </span>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default StarRater\r\n","import React, { useState, useEffect, useContext, useRef } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { search } from '../store/actions/search.action';\r\nimport Nav from './Nav';\r\nimport { Link } from 'react-router-dom';\r\nimport HistoryContext from '../store/contexts/History.context';\r\nimport StarRater from './StarRater';\r\n\r\nlet mounted;\r\n\r\nfunction Search({ location }) {\r\n    const history = useContext(HistoryContext);\r\n    const { loading, searchValue, result } = useSelector(store => store.search);\r\n    const dispatch = useDispatch();\r\n    const [page, setPage] = useState(1);\r\n    const user = useSelector(store => store.user.result);\r\n\r\n    const nextButton1 = useRef(null),\r\n          nextButton2 = useRef(null),\r\n          previousButton1 = useRef(null),\r\n          previousButton2 = useRef(null);\r\n\r\n    useEffect(_=> {\r\n        dispatch( search(user ? user.username : null, location.searchValue ? mounted ? searchValue : location.searchValue : searchValue, page) );\r\n        mounted = true;\r\n    }, [page]);\r\n\r\n    useEffect(_=> {\r\n        if (result && (result.length < 11) && nextButton1.current) {\r\n            [nextButton1, nextButton2].forEach(btn => {\r\n                btn.current.style.opacity = 0;\r\n                btn.current.style.pointerEvents = 'none';\r\n            });\r\n        } else if (result && nextButton1.current) {\r\n            [nextButton1, nextButton2].forEach(btn => {\r\n                btn.current.style.opacity = 1;\r\n                btn.current.style.pointerEvents = 'auto';\r\n            });\r\n        }\r\n        if (page === 1 && previousButton1.current) {\r\n            [previousButton1, previousButton2].forEach(btn => {\r\n                btn.current.style.opacity = 0;\r\n                btn.current.style.pointerEvents = 'none';\r\n            });\r\n            [nextButton1, nextButton2].forEach(btn => btn.current.style.transform = 'translateX(0)')\r\n        } else if (previousButton1.current) {\r\n            [previousButton1, previousButton2].forEach(btn => {\r\n                btn.current.style.opacity = 1;\r\n                btn.current.style.pointerEvents = 'auto';\r\n            });\r\n        }\r\n        if (page === 2)\r\n            [nextButton1, nextButton2].forEach(btn => btn.current.style.transform = 'translate(calc(190px - 1rem))');\r\n    }, [result]);\r\n\r\n    function onSearch(e) {\r\n        e.persist();\r\n        e.preventDefault();\r\n        setPage(1);\r\n        if (!e.target.children[0].value) return;\r\n        dispatch( search(user ? user.username : null, e.target.children[0].value, page) );\r\n        e.target.reset();\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Nav />\r\n            \r\n            <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center' }}>\r\n                <div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center', width: '60vw', marginBottom: !loading && result ? '1.5rem' : '2rem' }}>\r\n                    <label style={{ margin: '.4rem 0', fontSize: '1.3rem' }}>\"{searchValue}\"</label>\r\n                    <StarRater />\r\n                    <form onSubmit={onSearch}>\r\n                        <input style={{ marginTop: '.8rem' }} className=\"search\" type=\"text\" placeholder=\"Search actors, genres, directors\" />\r\n                    </form>\r\n                </div>\r\n                {loading\r\n                    ? <div>Loading...</div>\r\n                    : !result\r\n                        ? <div>No results found</div>\r\n                        : null\r\n                }\r\n                <div style={{ display: result ? 'block' : 'none', width: '60vw' }}>\r\n                    <div style={{ posiiton: 'relative', display: 'flex', justifyContent: 'space-between', width: '100%', height: '100%' }}>\r\n                        <button ref={previousButton1} className=\"button-v2\" style={{ pointerEvents: 'none', opacity: 0, left: '20vw', transition: 'opacity 550ms ease-in-out' }} onClick={e => {\r\n                            e.target.blur();\r\n                            setPage(page - 1)\r\n                        }}>Previous</button>\r\n                        <button ref={nextButton1} className=\"button-v2\" style={{ left: '20vw', opacity: 1, transition: 'opacity 550ms ease-in-out, transform 550ms ease-in-out' }} onClick={e => {\r\n                            e.target.blur();\r\n                            setPage(page + 1);\r\n                        }}>Next</button>\r\n                    </div>\r\n                    {result && <ul className=\"search-results\">\r\n                        {result.slice(0, 10).map((result, i) =>\r\n                            <li key={i}>\r\n                                <Link to={{\r\n                                    pathname: `movies/${result.id}`,\r\n                                    searchValue\r\n                                }}>\r\n                                    <img src={result.cover_file} alt=\"not available\" />\r\n                                </Link>\r\n                                <span className=\"search-results-info\">\r\n                                    <Link to={{\r\n                                        pathname: `movies/${result.id}`,\r\n                                    searchValue\r\n                                    }}>\r\n                                        <span style={{ fontSize: '1.3rem', color: 'white', position: 'relative', zIndex: '5' }}>\r\n                                            <label>{result.title}</label>\r\n                                            <span> | {result.genres.join(', ')}</span>\r\n                                            <span> | {result.mpaa_rating}</span>\r\n                                            {result.duration_in_mins % 60\r\n                                                ? result.duration_in_mins >= 60\r\n                                                    ? <span> | {Math.floor(result.duration_in_mins / 60)}h {result.duration_in_mins % 60} min</span>\r\n                                                    : <span> | {result.duration_in_mins} min</span>\r\n                                                : <span> | {result.duration_in_mins % 60}h</span>\r\n                                            }\r\n                                            <span> | {result.release_date.slice(0, 4)}</span>\r\n                                        </span>\r\n                                    </Link>\r\n                                </span>\r\n                            </li>\r\n                        )}\r\n                    </ul>}\r\n\r\n                    <div style={{ posiiton: 'relative', display: 'flex', justifyContent: 'space-between', width: '100%', height: '100%', transform: 'translateY(-.5rem)', marginBottom: '4rem'}}>\r\n                        <button ref={previousButton2} className=\"button-v2\" style={{ pointerEvents: 'none', opacity: 0, left: '1rem', transition: 'opacity 550ms ease-in-out' }} onClick={e => {\r\n                            e.target.blur();\r\n                            setPage(page - 1)\r\n                        }}>Previous</button>\r\n                        <button ref={nextButton2} style={{ left: '1rem', transition: 'transform 550ms ease-in-out, opacity 550ms ease-in-out' }} className=\"button-v2\" onClick={e => {\r\n                            e.target.blur();\r\n                            setPage(page + 1)\r\n                        }}>Next</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Search\r\n","import React, { useState, useEffect, useContext } from 'react';\r\nimport HistoryContext from '../store/contexts/History.context';\r\n\r\nconst sections = [\r\n    [{label: 'Overview', content: `Choosie is an intelligent service for simplifying movie selection. It employs machine learning technology - primarily in the form of deep learning - to understand those who use it. That means that it is able to translate your input through a series of data modifications to a language that a computer can make sense of effectively. In doing this, Choosie learns how to serve you individually - from your personal tastes to your typical selection process - so you will truly receive tailored assistance.`}, {label: 'Start', content: `Selecting the 'Start' button on the home screen will initiate a questionnaire`}, {label: 'My List', content: `You can navigate to a personal store of saved movies by selecting 'My List' from the home screen or navigation bar. Here you'll be able to keep track of any movies on your \"to-watch\" list and any others you don't want to forget about. You can create multiple 'bins' to store related movies and label them to your preference in order to manage your collection more easily.`}, {label: 'Popular', content: `In 'Popular' you can view movies that are currently trending, released recently, or have been saved by many other users.`}],\r\n    [{label: 'About Me', content: `My name is Nick Barak and I'm a self-taught developer. I recently graduated from the University of California, Santa Barbara with a degree in Economics & Accounting and am currently pursuing a career in software engineering. Choosie is my first major project and I am happy to have been able to utilize a lot of the things that I have learned since I started learning to code in the creation of this application. This project is the first of many to come.`}, {label: 'Contact', content: `You can contact me by email at nicholasjbarak@gmail.com. I am always looking for feedback for improvement so don't hesitate to send me suggestions or complaints.`}]\r\n], slogan = `Choosie is the solution for those without problems.`;\r\n\r\nfunction Help() {\r\n    const history = useContext(HistoryContext);\r\n\r\n    const [state, setState] = useState({\r\n        more: false,\r\n        sections: sections[0]\r\n    });\r\n\r\n    useEffect(_=> setState({...state, sections: sections[state.more ? 1 : 0]}), [state.more]);\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"help\">\r\n                <h2>What is <span style={{ fontWeight: 600 }} className=\"logo\">Choosie</span>?</h2>\r\n                <article style={{ width: '100%' }}>\r\n                    <br />\r\n                    <div style={{ fontWeight: 'bold' }}>{slogan}</div>\r\n                    <br />\r\n                    {state.sections.map((section, i) =>\r\n                        <section key={i}>\r\n                            <label>{section.label}</label>\r\n                            <div>{section.content}</div>\r\n                        </section>\r\n                    )}\r\n                </article>\r\n                <div style={{ position: 'relative', display: 'flex', width: '100%' }}>\r\n                    <button className=\"button-v2\"  onClick={_=> history.push('/')}>Back to Home</button>\r\n                    <button style={{ right: 0, left: 'auto'}} className=\"button-v2\" onClick={_=> { setState({...state, more: !state.more}); history.push('/help') }}>{state.more ? 'Previous' : 'More'}</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Help\r\n","import React, { useState, useReducer } from 'react';\r\n\r\nconst ageRatings = ['G', 'PG', 'PG-13', 'TV-14', 'R/TV-MA', 'NR'],\r\n      durations = ['30min', '1h', '1h 30min', '2h', '2h 30min', '3h'],\r\n      genres = ['Action', 'Comedy', 'Drama', 'Thriller', 'Family', 'Fantasy', 'Animation'],\r\n      saveDates = ['2 days ago', '1 week ago', '2 weeks ago', '3 weeks ago', '1 month ago', '2 months ago', '3 months ago', '6 months ago', '1 year ago'],\r\n      releaseDates = ['1920', '1930', '1940', '1950', '1960', '1970', '1980', '1990', '2000', '2010', '2020'],\r\n      filterOptionsInit = [ [ [ 'init', 'init', 'higher' ], [ ...ageRatings ] ] ];\r\n\r\nfunction Filter({ displayList, dispatchDisplayList }) {\r\n    const [filterOptions, dispatchFilterOptions] = useReducer(filterOptionsReducer, JSON.parse( JSON.stringify(filterOptionsInit) ) );\r\n    const [filterID, setFilterID] = useState(0);\r\n\r\n    const makeFilter = id => (\r\n        <span>\r\n            <select defaultValue={filterOptions[id][0][0]}\r\n                onChange={e => {\r\n                    dispatchFilterOptions({\r\n                    type: e.target.options[e.target.selectedIndex].text,\r\n                    payload: { id, select: 0 }\r\n                });\r\n                dispatchFilterOptions({\r\n                    type: \"init\",\r\n                    payload: { id, select: 1 }\r\n                });\r\n                if (e.target.parentNode.children.length > 1) {\r\n                    e.target.parentNode.children[1].selectedIndex = 0;\r\n                    e.target.parentNode.children[2].children[0].children[0].checked = true;\r\n                }\r\n            }}>\r\n                <option key=\"-1\" value=\"init\" disabled>Select an option</option>\r\n                <option key=\"0\" value=\"Age Rating\">Age Rating</option>\r\n                <option key=\"1\" value=\"Duration\">Duration</option>\r\n                <option key=\"2\" value=\"Genre\">Genre</option>\r\n                <option key=\"3\" value=\"Date Saved\">Date Saved</option>\r\n                <option key=\"4\" value=\"Release Date\">Release Date</option>\r\n            </select>\r\n            {filterOptions[id][0][0] !== 'init' && (\r\n            <>\r\n                <select style={{ marginLeft: '.35rem' }} defaultValue={filterOptions[id][0][1]}\r\n                    onChange={e => {\r\n                        dispatchFilterOptions({\r\n                        type: e.target.options[e.target.selectedIndex].text,\r\n                        payload: { id, select: 1 }\r\n                    });\r\n                    dispatchDisplayList( deriveFilterValues(e.target.parentNode.parentNode.parentNode) );\r\n                }}>\r\n                    <option key=\"-1\" value=\"init\" disabled>Select an option</option>\r\n                    {filterOptions[id][1].map((option, i) => <option key={i} value={option}>{option}</option>)}\r\n                </select>\r\n                <span>\r\n                    <label style={{ marginLeft: '.35rem' }}><input style={{ margin: '.5' }} type=\"radio\" name={`filterByRadio_${id}`} value=\"higher\" defaultChecked={filterOptions[id][0][2] === 'higher' ? true : false} onChange={e => {\r\n                        dispatchFilterOptions({ type: 'higher', payload: { id, select: 2 }});\r\n                        dispatchDisplayList( deriveFilterValues(e.target.parentNode.parentNode.parentNode.parentNode.parentNode) );\r\n                    }} />higher/later</label>\r\n                    <label style={{ marginLeft: '.35rem' }}><input style={{ margin: '.5' }} type=\"radio\" name={`filterByRadio_${id}`} value=\"lower\" defaultChecked={filterOptions[id][0][2] === 'lower' ? true : false} onChange={e => {\r\n                        dispatchFilterOptions({ type: 'lower', payload: { id, select: 2 }});\r\n                        dispatchDisplayList( deriveFilterValues(e.target.parentNode.parentNode.parentNode.parentNode.parentNode) );\r\n                    }} />lower/earlier</label>\r\n                    <label style={{ marginLeft: '.35rem' }}><input style={{ margin: '.5' }} type=\"radio\" name={`filterByRadio_${id}`} value=\"exact\" defaultChecked={filterOptions[id][0][2] === 'exact' ? true : false} onChange={e => {\r\n                        dispatchFilterOptions({ type: 'exact', payload: { id, select: 2 }});\r\n                        dispatchDisplayList( deriveFilterValues(e.target.parentNode.parentNode.parentNode.parentNode.parentNode) );\r\n                    }} />exact</label>\r\n                </span>\r\n            </>\r\n            )}\r\n        </span>\r\n    );\r\n\r\n    function filterOptionsReducer(state, { type, payload }) {\r\n        let newState = [ ...state ];\r\n        if (type === 'Clear Filters') return JSON.parse( JSON.stringify(filterOptionsInit) );\r\n        if (type !== 'New Filter') newState[payload.id][0].splice(payload.select, 1, type);\r\n\r\n        switch (type) {\r\n            default: break;\r\n            case 'Age Rating':\r\n                newState[payload.id][1].splice(0, state[payload.id][1].length, ...ageRatings);\r\n                break;\r\n            case 'Duration':\r\n                newState[payload.id][1].splice(0, state[payload.id][1].length, ...durations);\r\n                break;\r\n            case 'Genre':\r\n                newState[payload.id][1].splice(0, state[payload.id][1].length, ...genres);\r\n                break;\r\n            case 'Date Saved':\r\n                newState[payload.id][1].splice(0, state[payload.id][1].length, ...saveDates);\r\n                break;\r\n            case 'Release Date':\r\n                newState[payload.id][1].splice(0, state[payload.id][1].length, ...releaseDates);\r\n                break;\r\n            case 'New Filter':\r\n                newState.push(JSON.parse( JSON.stringify(filterOptionsInit[0]) ));\r\n                break;\r\n        }\r\n        return newState;\r\n    }\r\n\r\n    const deriveFilterValues = ul => Array.from(ul.children, li => {\r\n        const children = li.children[0].children;\r\n        if (!children[1]) return null;\r\n        const type = children[0].options[children[0].selectedIndex].text,\r\n            payload = {\r\n                value: children[1].options[children[1].selectedIndex].text,\r\n                range: Array.from(children[2].children).find(child => child.children[0].checked).children[0].value\r\n            };\r\n        return ({ type, payload });\r\n    }).filter(filter => filter);\r\n\r\n    return (\r\n        <form className=\"filter\" onSubmit={e => {\r\n            e.persist();\r\n            e.preventDefault();\r\n            dispatchFilterOptions({ type: 'Clear Filters' });\r\n            dispatchDisplayList(null);\r\n            setFilterID(0);\r\n            e.target.reset();\r\n        }} style={{ marginBottom: '2rem' }}>\r\n            <label>Filter by: </label>\r\n            <ul style={{ margin: '.7rem 1.5rem' }}>\r\n                <li key=\"0\">\r\n                    {makeFilter(0)}\r\n                    {filterID === 0 && filterOptions[0][0][0] !== 'init' && <button className=\"button-filter\" type=\"button\" onClick={e => {\r\n                        dispatchFilterOptions({ type: 'New Filter' });\r\n                        setFilterID(filterID + 1);\r\n                    }}>+</button>}\r\n                </li>\r\n                {filterID > 1 && new Array(filterID-1).fill(null).map((filter, i) => <li key={i+1}>{makeFilter(i+1)}</li>)}\r\n                {filterID > 0 &&\r\n                    <li key={filterID}>\r\n                        {makeFilter(filterID)}\r\n                        {filterOptions[filterID][0][0] !== 'init' && <button className=\"button-filter\" type=\"button\" onClick={e => {\r\n                            dispatchFilterOptions({ type: 'New Filter' });\r\n                            setFilterID(filterID + 1);\r\n                        }}> + </button>}\r\n                    </li>\r\n                }\r\n            </ul>\r\n            <button style={{ backgroundColor: 'transparent', border: 'none', color: 'white' }} onMouseOver={e => {\r\n                e.target.style.color = 'red';\r\n                e.target.style.cursor = 'pointer';\r\n            }} onMouseOut={e => e.target.style.color = 'white'}>Reset</button>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default Filter\r\n","import React, { useState, useReducer, useEffect, useRef } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { server } from '../APIs';\r\nimport { updateUser } from '../store/actions/updateUser.action';\r\nimport { makeRequest } from '../store/actions/makeRequest.action';\r\nimport Filter from './Filter';\r\nimport imageAlt from '../img/image-alt.png';\r\n\r\nfunction MovieList({ movies, heading, headingMargin, withFilter, displaying, lowerMargin }) {\r\n    const [displayList, dispatchDisplayList] = useReducer(displayListReducer, movies);\r\n    const [unsaving, setUnsaving] = useState(false);\r\n    const [saveError, setSaveError] = useState(null);\r\n    const [removingFromHistory, setRemovingFromHistory] = useState(false);\r\n    const [removingFromHistoryError, setRemovingFromHistoryError] = useState(null);\r\n    const [removingFromBin, setRemovingFromBin] = useState(false);\r\n    const [removingFromBinError, setRemovingFromBinError] = useState(null);\r\n    const user = useSelector(store => store.user.result);\r\n    const dispatch = useDispatch();\r\n        \r\n\r\n    useEffect(_=> {\r\n        const controller = new AbortController(),\r\n                { signal } = controller;\r\n\r\n            removingFromBin && (async _=> {\r\n                try {\r\n                    let res = await fetch(server + `users/${user.username}/bins`, {\r\n                        signal,\r\n                        method: 'PATCH',\r\n                        headers: { 'Content-Type': 'application/json' },\r\n                        body: JSON.stringify({ bin: { [displaying]: user.bins[displaying].filter(id => id !== String(removingFromBin)) } })\r\n                    });\r\n                    !res.ok && setSaveError('Error removing movie from bin');\r\n        \r\n                dispatch( updateUser(user.username) );\r\n                dispatch( makeRequest(`movies/list`, `?movies=${user.bins[displaying].filter(id => id !== String(removingFromBin))}`) );\r\n                } catch (e) { e.name === 'AbortError' && console.log('Removal from bin aborted') }\r\n            })();\r\n\r\n            unsaving && (async _=> {\r\n                try {\r\n                    let res;\r\n                    res = await fetch(server + `movies?user=${user.username}`, {\r\n                        signal,\r\n                        method: 'DELETE',\r\n                        headers: { 'Content-Type': 'application/json' },\r\n                        body: JSON.stringify({ movieID: unsaving })\r\n                    });\r\n                    !res.ok && setSaveError('Error unsaving movie');\r\n            \r\n                    let binsWithMovie = Object.entries(user.bins)\r\n                        .filter(bin => bin[1].includes(String(unsaving)));\r\n                    for (let binWithMovie of binsWithMovie) {\r\n                        res = await fetch(server + `users/${user.username}/bins`, {\r\n                            signal,\r\n                            method: 'PATCH',\r\n                            headers: { 'Content-Type': 'application/json' },\r\n                            body: JSON.stringify({ bin: { [binWithMovie[0]]: binWithMovie[1].filter(id => id !== String(unsaving)) } })\r\n                        });\r\n                        !res.ok && setSaveError('Error unsaving movie');\r\n                    }\r\n            \r\n                    dispatch( updateUser(user.username) );\r\n                    dispatch( makeRequest(`movies/list`,\r\n                        `?movies=${displaying === 'Currently Saved'\r\n                            ? user.currently_saved.filter(id => id !== unsaving)\r\n                            : user.bins[displaying].filter(id => id !== String(unsaving))}`\r\n                        )\r\n                    );\r\n                } catch (e) { e.name === 'AbortError' && console.log('Unsave aborted') }\r\n            })();\r\n\r\n            removingFromHistory && (async _=> {\r\n                try {\r\n                    let res;\r\n                    res = await fetch(server + `users/${user.username}`, {\r\n                        signal,\r\n                        method: 'PATCH',\r\n                        headers: { 'Content-Type': 'application/json' },\r\n                        body: JSON.stringify({\r\n                            name: user.name,\r\n                            sex: user.sex,\r\n                            age: user.age,\r\n                            languages: user.languages,\r\n                            country: user.country,\r\n                            email: user.email,\r\n                            show_save_history: user.show_save_history,\r\n                            recent_save_history: user.recent_save_history.filter(id => id !== removingFromHistory)\r\n                        })\r\n                    });\r\n                    !res.ok && setRemovingFromHistoryError('Error removing movie from save history')\r\n\r\n                    dispatch( updateUser(user.username) );\r\n                    dispatch( makeRequest(`movies/list`, `?movies=` + user.recent_save_history.filter(id => id !== removingFromHistory)) );\r\n                } catch (e) { e.name === 'AbortError' && console.log('Removal from history aborted') }\r\n            })();\r\n\r\n        if (unsaving || removingFromBin || removingFromHistory) return _=> controller.abort();\r\n    }, [unsaving, removingFromBin, removingFromHistory])\r\n    \r\n\r\n    function displayListReducer(state, filters) {\r\n        const newState = [ ...movies ];\r\n        if (!filters) return newState;\r\n        for (let { type, payload: { value, range } } of filters) {\r\n            let ratings, duration;\r\n            switch (type) {\r\n                default: break;\r\n                case 'Age Rating':\r\n                    if (range === 'exact') {\r\n                        newState.splice(0, newState.length, ...newState.filter(movie => movie.mpaa_rating === value));\r\n                        break;\r\n                    }\r\n                    switch (value) {\r\n                        default: return state;\r\n                        case 'G':\r\n                            ratings = range === 'higher' ? null : ['G'];\r\n                            break;\r\n                        case 'PG':\r\n                            ratings = range === 'higher' ? ['PG', 'PG-13', 'TV-14', 'R', 'TV-MA', 'NR'] : ['G', 'PG'];\r\n                            break;\r\n                        case 'PG-13':\r\n                            ratings = range === 'higher' ? ['PG-13', 'TV-14', 'R', 'TV-MA', 'NR'] : ['G', 'PG', 'PG-13'];\r\n                            break;\r\n                        case 'TV-14':\r\n                            ratings = range === 'higher' ? ['TV-14', 'R', 'TV-MA', 'NR'] : ['G', 'PG', 'PG-13', 'TV-14'];\r\n                            break;\r\n                        case 'R/TV-MA':\r\n                            ratings = range === 'higher' ? ['R', 'TV-MA', 'NR'] : ['G', 'PG', 'PG-13', 'TV-14', 'R', 'TV-MA'];\r\n                            break;\r\n                        case 'NR':\r\n                            ratings = range === 'higher' ? ['NR'] : null;\r\n                            break;\r\n                    }\r\n                    newState.splice(0, newState.length, ...newState.filter(movie => ratings ? ratings.includes(movie.mpaa_rating) : movies));\r\n                    break;\r\n                case 'Duration':\r\n                    switch (value) {\r\n                        default: break;\r\n                        case '30min': duration = 30; break;\r\n                        case '1h': duration = 60; break;\r\n                        case '1h 30min': duration = 90; break;\r\n                        case '2h': duration = 120; break;\r\n                        case '2h 30min': duration = 150; break;\r\n                        case '3h': duration = 180; break;\r\n                    }\r\n                    if (range === 'exact') {\r\n                        newState.splice(0, newState.length, ...newState.filter(movie => movie.duration_in_mins === duration));\r\n                        break;\r\n                    }\r\n                    newState.splice(0, newState.length, ...newState.filter(movie => range === 'higher' ? movie.duration_in_mins - duration >= 0 : movie.duration_in_mins - duration <= 0));\r\n                    break;\r\n                case 'Genre':\r\n                    newState.splice(0, newState.length, ...newState.filter(movie => movie.genres.filter(genre => value.includes(genre)).length));\r\n                    break;\r\n                case 'Date Saved':\r\n                    break;\r\n                case 'Release Date':\r\n                    if (range === 'exact') {\r\n                        newState.splice(0, newState.length, ...newState.filter(movie => Number(value) === Number(movie.release_date.slice(0, 4))));\r\n                        break;\r\n                    }\r\n                    newState.splice(0, newState.length, ...newState.filter(movie => {\r\n                        const year = Number(movie.release_date.slice(0, 4));\r\n                        return range === 'higher' ? year >= Number(value) : year <= Number(value);\r\n                    }));\r\n                    break;\r\n            }\r\n        }\r\n        return newState;\r\n    }\r\n\r\n    return (\r\n        <div style={{ flex: 4, margin: `3rem 3rem ${lowerMargin || '11rem'} 3rem` }}>\r\n            <h2 style={{ textAlign: 'center', marginBottom: headingMargin }}>{heading}</h2>\r\n            {withFilter && <Filter displayList={displayList} dispatchDisplayList={dispatchDisplayList} />}\r\n            <ul className=\"display-row\">\r\n                {displayList.map((movie, i) =>\r\n                    <li key={i}>\r\n                        <Link to={`movies/${movie.id}`}>\r\n                            <img src={movie.cover_file} onError={e => {\r\n                                e.target.src = imageAlt;\r\n                                e.target.style.width = '200px';\r\n                                e.target.style.height = '267.5px';\r\n                                e.target.style.boxShadow = 'none';\r\n                            }} alt=\"Not available\" onDrag={e => {\r\n                                e.preventDefault();\r\n                                e.dataTransfer.setData('text/plain', movie.id);\r\n                            }} />\r\n                        </Link>\r\n                        <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n                            <Link to={`movies/${movie.id}`} tabIndex=\"-1\">\r\n                                <label>{movie.title}</label>\r\n                            </Link>\r\n                            {displaying === 'Save History'\r\n                                ? <button className=\"button-manage-movie\" onClick={_=> setRemovingFromHistory(movie.id)}>{removingFromHistory ? 'Removing...' : 'Remove'}</button>\r\n                                : displaying !== 'Popular'\r\n                                    ? displaying === 'Currently Saved'\r\n                                        ? <button className=\"button-manage-movie\" onClick={_=> {\r\n                                            let confirmed = true;\r\n                                            if (Object.values(user.bins).reduce((acc, cur) => [...acc, ...cur], []).includes(String(movie.id))) confirmed = window.confirm('This will remove the movie from all bins. Do you still want to unsave it?');\r\n                                            confirmed && setUnsaving(movie.id)\r\n                                        }}>{unsaving ? 'Unsaving...' : 'Unsave'}</button>\r\n                                        : displaying === 'Query'\r\n                                            ? null\r\n                                            : <span>\r\n                                            <button className=\"button-manage-movie\" onClick={_=> {\r\n                                                let confirmed = true;\r\n                                                if (Object.entries(user.bins).reduce((acc, [key, val]) => key !== displaying ? [ ...acc, ...val ]  : acc, []).includes(String(movie.id))) confirmed = window.confirm('This will remove the movie from other bins. Do you still want to unsave it?');\r\n                                                confirmed && setUnsaving(movie.id);\r\n                                            }}>{unsaving ? 'Unsaving...' : 'Unsave'}</button>\r\n                                            <button className=\"button-manage-movie\" onClick={_=> setRemovingFromBin(movie.id)} style={{ marginLeft: '.25rem' }}>Take Out</button>\r\n                                        </span>\r\n                                    : null\r\n                            }\r\n                        </div>\r\n                        {(!user || user.show_description_on_hover) && <div className=\"movie-description\">\r\n                            {(!movie.description || movie.description === 'Not available')\r\n                                ? 'Description not available'\r\n                                : movie.description.length > 200\r\n                                    ? movie.description.slice(0, 200) + '...'\r\n                                    : movie.description}\r\n                        </div>}\r\n                    </li>)}\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MovieList\r\n","export const QUERY_LAUNCH = 'QUERY_LAUNCH',\r\n      QUERY_SUCCESS = 'QUERY_SUCCESS',\r\n      QUERY_FAILURE = 'QUERY_FAILURE';\r\n\r\nconst initialState = {\r\n    loading: false,\r\n    error: null,\r\n    result: []\r\n}\r\n\r\nexport default (state=initialState, { type, payload }) => {\r\n    const newState = { ...state };\r\n    switch (type) {\r\n        case QUERY_LAUNCH:\r\n            newState.loading = true;\r\n            break;\r\n        case QUERY_SUCCESS:\r\n            newState.loading = false;\r\n            newState.error = null;\r\n            newState.result = payload;\r\n            break;\r\n        case QUERY_FAILURE:\r\n            newState.loading = false;\r\n            newState.error = payload;\r\n            newState.result = [];\r\n            break;\r\n        default: break;\r\n    }\r\n    return newState;\r\n}","import React, { useState, useRef, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport Nav from './Nav';\r\nimport MovieList from './MovieList';\r\nimport { makeRequest } from '../store/actions/makeRequest.action';\r\nimport StarRater from './StarRater';\r\nimport { query } from '../store/actions/query.action';\r\n\r\nclass QueryContent {\r\n    constructor(prompt, buttonSet, nextButton) {\r\n        this.prompt = prompt;\r\n        this.buttonSet = [ ...buttonSet];\r\n        this.nextButton = nextButton;\r\n    }\r\n}\r\n\r\nconst phases = [\r\n    new QueryContent('Feeling a particular genre?', [ ['Action', 'Comedy', 'Drama', 'Thriller'] ], 'Show More'),\r\n    new QueryContent('You can select more than one if you want', [ ['Romance', 'Sci-Fi', 'Fantasy', 'Family', ''], ['Cyber', 'Medieval', 'Documentary', 'Tragedy'], ['Action', 'Comedy', 'Drama', 'Thriller'] ], 'Next'),\r\n    new QueryContent('Want to apply any time constraints?', [ [{'60': '1 hour'}, {'120': '2 hours'}, {'150': '2.5 hours'}] ], 'None'),\r\n    new QueryContent('Time periods preferred?', [ ['1970s', '1980s', 'Earlier', 'Any'], ['1990s', '2000s', 'Later'] ], 'Next')\r\n]\r\n\r\nfunction Query(props) {\r\n    const [phase, setPhase] = useState(0);\r\n    const { prompt, buttonSet, nextButton } = phase < 4 && phases[phase];\r\n    const answers = useRef([[]]);\r\n    const { loading, error, result } = useSelector(store => store.makeRequest);\r\n    const [set, setSet] = useState(1);\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(_=> dispatch( query('...') ), [set]);\r\n\r\n    useEffect(_=> {\r\n        if (phase > 3) {\r\n            const genres = answers.current[0].length\r\n                ? `&genres=${answers.current[0]}`\r\n                : '',\r\n            timeConstraint = answers.current[1].length\r\n                ? answers.current[1][0] !== 'none' && `&timeConstraint=${answers.current[1]}`\r\n                : '',\r\n            timePeriods =\r\n                (answers.current[2].length && !answers.current[2].includes('Any'))\r\n                    ? `&time_periods=${answers.current[2]}`\r\n                    : '';\r\n\r\n            dispatch( makeRequest(`start`, (genres || timeConstraint || timePeriods) && '?set=' + set + genres + timeConstraint + timePeriods) );\r\n        } else if (phase > 1) answers.current.push([]);\r\n    }, [phase, set]);\r\n\r\n    function manageFilters(e) {\r\n        e.preventDefault();\r\n        let { style } = e.target;\r\n        let index = phase ? phase - 1 : phase;\r\n        if (answers.current[index].includes(e.target.textContent)) {\r\n            answers.current[index] = answers.current[index].filter(filter => index === 1 ? filter !== e.target.value: filter !== e.target.textContent);\r\n            style.backgroundColor = 'var(--color-offset)';\r\n            style.color = 'var(--bg-color-dark)';\r\n        } else {\r\n            style.backgroundColor = 'var(--bg-color-dark)';\r\n            style.color = 'var(--color-offset)';\r\n            answers.current[index] = [ ...answers.current[index], index === 1 ? e.target.value : e.target.textContent ];\r\n            phase === 2 && setPhase(phase + 1);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Nav />\r\n            \r\n            {phase < 4\r\n                ? \r\n                <div className=\"container\" style={{ position: 'absolute', zIndex: '-1', height: '100vh', top: 0 }}>\r\n                    <div className=\"frame\">\r\n                        <h2 className=\"query-prompt\">{prompt}</h2>\r\n                        {buttonSet.map((set, i) => <ul key={i}className=\"button-wrapper\">\r\n                            {set.map((button, j) => <li key={j}><button className=\"button\" onClick={manageFilters} style={button ? {} : { visibility: 'hidden' }} value={phase === 2 && Object.keys(button)[0]}>{phase === 2 ? Object.values(button)[0] : button}</button></li>)}\r\n                            {i === buttonSet.length - 1 && <li>\r\n                                <button className=\"button query-next\" onClick={_=> setPhase(phase + 1)}>{nextButton}</button>\r\n                            </li>}\r\n                        </ul>)}\r\n                    </div>\r\n                </div>\r\n                : <>\r\n                    <MovieList movies={result || []} heading=\"Here are some movies you might be interested in\" displaying=\"Query\" lowerMargin=\"4rem\" headingMargin=\"3.5rem\"/>\r\n                    <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n                        <StarRater />\r\n                    </div>\r\n                    <div style={{ posiiton: 'relative', display: 'flex', justifyContent: 'space-between', width: '100%', height: '100%', marginBottom: '8rem', marginTop: '1.25rem' }}>\r\n                        <button className=\"button-v2\" style={{ pointerEvents: 'none', opacity: 0, left: '1.5rem', transition: 'opacity 550ms ease-in-out' }} onClick={e => {\r\n                            if (set === 2) {\r\n                                e.target.style.opacity = 0;\r\n                                e.target.parentElement.children[1].style.transform = 'translateX(0)';\r\n                                e.target.style.pointerEvents = 'none';\r\n                            }\r\n                            e.target.blur();\r\n                            setSet(set - 1)\r\n                        }}>Previous</button>\r\n                        <button style={{ left: '1.5rem', transition: 'transform 550ms ease-in-out' }} className=\"button-v2\" onClick={e => {\r\n                            if (set === 1) {\r\n                                e.target.style.transform = 'translateX(calc(190px - 1rem))';\r\n                                e.target.parentElement.children[0].style.opacity = 1;\r\n                                e.target.parentElement.children[0].style.pointerEvents = 'auto'\r\n                            }\r\n                            e.target.blur();\r\n                            setSet(set + 1)\r\n                        }}>Next</button>\r\n                    </div>\r\n                </>}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Query\r\n","import { server } from '../../APIs';\r\nimport { QUERY_LAUNCH, QUERY_SUCCESS, QUERY_FAILURE } from '../reducers/query.reducer';\r\n\r\nconst createQueryLaunch = _=> ({ type: QUERY_LAUNCH }),\r\n      createQuerySuccess = payload => ({ type: QUERY_SUCCESS, payload }),\r\n      createQueryFailure = payload => ({ type: QUERY_FAILURE, payload });\r\n\r\nexport const query = () => {\r\n    return dispatch => {\r\n        dispatch( createQueryLaunch() );\r\n        fetch(server + '...')\r\n            .then(res => res.json())\r\n            .then(json => dispatch( createQuerySuccess(json) ))\r\n            .catch(e => dispatch( createQueryFailure(e) ));\r\n    }\r\n}","export const GET_CURRENTLY_SAVED_LAUNCH = 'GET_CURRENTLY_SAVED_LAUNCH',\r\n    GET_CURRENTLY_SAVED_SUCCESS = 'GET_CURRENTLY_SAVED_SUCCESS',\r\n    GET_CURRENTLY_SAVED_FAILURE = 'GET_CURRENTLY_SAVED_FAILURE';\r\n\r\nconst initialState = {\r\n    loading: false,\r\n    result: [],\r\n    error: null\r\n};\r\n\r\nexport default (state=initialState, { type, payload }) => {\r\n    switch (type) {\r\n        default: return state;;\r\n        case GET_CURRENTLY_SAVED_LAUNCH:\r\n            return {\r\n                ...state,\r\n                loading: true\r\n            }\r\n        case GET_CURRENTLY_SAVED_SUCCESS:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                result: payload,\r\n                error: null\r\n            }\r\n        case GET_CURRENTLY_SAVED_FAILURE:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                result: [],\r\n                error: payload\r\n            }\r\n    }\r\n}","import React, { useState, createContext } from 'react';\r\n\r\nexport const BinManagerContext = createContext(false);\r\n\r\nexport function BinManagerProvider({ children }) {\r\n    const [binManagerOpen, setBinManagerOpen] = useState(false);\r\n\r\n    return (\r\n        <BinManagerContext.Provider value={[ binManagerOpen, setBinManagerOpen ]}>\r\n            {children}\r\n        </BinManagerContext.Provider>\r\n    )\r\n}\r\n\r\nexport default BinManagerContext","import React, { useState, useEffect, useContext, useRef } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { server } from '../APIs';\r\n// import UserContext from '../store/contexts/User.context';\r\nimport BinManagerContext from '../store/contexts/BinManager.context.js';\r\nimport { updateUser } from '../store/actions/updateUser.action';\r\nimport { makeRequest } from '../store/actions/makeRequest.action';\r\n\r\nfunction BinManager({ movies, displaying, setDisplaying }) {\r\n    // const [user, setUser] = useContext(UserContext);\r\n    const dispatch = useDispatch();\r\n    const user = useSelector(store => store.user.result);\r\n\r\n    const [error, setError] = useState(null);\r\n    const [deleteBin, setDeleteBin] = useState(true);\r\n    const [addMovie, setAddMovie] = useState(true);\r\n    const [updateBinClicked, setUpdateBinClicked] = useState(false);\r\n    const [binToUpdate, setBinToUpdate] = useState(null);\r\n    const [, setBinManagerOpen] = useContext(BinManagerContext);\r\n\r\n\r\n    async function manageBins(e, method, bin, callback, errorhandler = _=> console.log('Error managing bins', e)) {\r\n        e.persist();\r\n        e.preventDefault();\r\n        const formData = new FormData();\r\n        formData.append('bin', typeof bin === 'string' ? bin : JSON.stringify(bin));\r\n        try {\r\n            const response = await fetch(server + `users/${user.username}/bins`, {\r\n                method,\r\n                body: formData\r\n            });\r\n            setError(null) || response.ok\r\n                ? callback && callback()\r\n                : errorhandler()\r\n        } catch (e) { errorhandler() }\r\n    }\r\n\r\n    function createBin(e) {\r\n        e.persist();\r\n        e.preventDefault();\r\n        if (Object.keys(user.bins).includes(e.target.children[1].value)) return setError('Bin already exists');\r\n        user && manageBins(e, 'POST', { [e.target.children[1].value]: [] },\r\n            _=> dispatch( updateUser(user.username) ),\r\n            _=> setError('Error creating bin')\r\n        );\r\n        e.target.reset();\r\n    }\r\n\r\n    function deleteOrEmptyBin(e) {\r\n        const bin = e.target.children[1].options[e.target.children[1].selectedIndex].text;\r\n        user && manageBins(e, deleteBin ? 'DELETE' : 'PUT', deleteBin ? bin : { [bin]: [] },\r\n            _=> {\r\n                dispatch( updateUser(user.username) );\r\n                if (displaying === bin && deleteBin) {\r\n                    dispatch( makeRequest('movies/list', '?movies=' + movies.map(movie => movie.id)) );\r\n                    setDisplaying('Currently Saved');\r\n                } else if (!deleteBin) {\r\n                    dispatch( makeRequest('movies/list', '?movies=') );\r\n                }\r\n            },\r\n            _=> setError(`Error ${deleteBin ? 'deleting' : 'emptying'} bin`)\r\n        )\r\n    }\r\n\r\n    function updateBin(e) {\r\n        e.persist();\r\n        e.preventDefault();\r\n        const toUpdate = e.target.children[1].options[e.target.children[1].selectedIndex];\r\n        if (!updateBinClicked) {\r\n            setUpdateBinClicked(true);\r\n            setBinToUpdate(toUpdate.text);\r\n        } else {\r\n            const updatedMovies = addMovie\r\n                ? [ ...user.bins[binToUpdate], toUpdate.value ]\r\n                : user.bins[binToUpdate].filter(movie => movie !== toUpdate.value);\r\n            user && fetch(server + `users/${user.username}/bins`, {\r\n                method: 'PATCH',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    bin: { [binToUpdate]: updatedMovies }\r\n                })\r\n            })\r\n                .then(res => {\r\n                    if (res.ok) {\r\n                        dispatch( updateUser(user.username) );\r\n                        dispatch( makeRequest('movies/list', '?movies=' + updatedMovies) );\r\n                    } else setError('Error updating bin');\r\n                });\r\n            setDisplaying(binToUpdate);\r\n            setUpdateBinClicked(false);\r\n            setBinToUpdate(null);\r\n            e.target.reset();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"bin-manager\">\r\n            {error && <div style={{ color: 'maroon' }}>{error}</div>}\r\n            <label style={{ fontWeight: 600 }}>Bin Manager</label>\r\n            <form onSubmit={createBin}>\r\n                <label className=\"label-bin-manager\">Create a new bin</label>\r\n                <input style={{ borderRadius: '2px', padding: '.25rem', height: '1.35rem' }} type=\"text\" placeholder=\"Enter bin name\" autoComplete=\"off\" />\r\n                <button className=\"button-register\">Create Bin</button>\r\n            </form>\r\n            {Object.keys(user.bins).length > 0 &&\r\n            <>\r\n                <form onSubmit={updateBin}>\r\n                    <label className=\"label-bin-manager\">Add movies to a bin or remove them</label>\r\n                    <select style={{ marginRight: '.5rem' }}>\r\n                        {user.currently_saved.length\r\n                            ? updateBinClicked\r\n                                ? addMovie\r\n                                    ? user.currently_saved\r\n                                        .filter(id => !user.bins[binToUpdate].includes(String(id)))\r\n                                        .map((id, i) => <option key={i} value={id}>{movies.find(movie => movie.id === id).title}</option>)\r\n                                    : user.bins[binToUpdate]\r\n                                        .map((id, i) => <option key={i} value={id}>{movies.find(movie => movie.id === Number(id)).title}</option>)\r\n                                : addMovie\r\n                                    ? Object.entries(user.bins).filter(([, val]) => val.length < user.currently_saved.length).length\r\n                                        ? Object.entries(user.bins).filter(([, val]) => val.length < user.currently_saved.length)\r\n                                            .map(([key], i) => <option key={i}>{key}</option>)\r\n                                        : <option key=\"-1\">All bins are full</option>\r\n                                    : Object.entries(user.bins).filter(([, val]) => val.length).length\r\n                                        ? Object.entries(user.bins).filter(([, val]) => val.length)\r\n                                            .map(([key], i) => <option key={i}>{key}</option>)\r\n                                        : <option key=\"-1\">All bins are empty</option>\r\n                            : <option key=\"-1\">You don't have any saved movies!</option>\r\n                        }\r\n                    </select>\r\n                    {!updateBinClicked && user.currently_saved.length > 0 &&\r\n                    (<>\r\n                        <label><input type=\"radio\" name=\"addOrRemoveMovie\" value=\"Add\" defaultChecked onChange={e => setAddMovie(!addMovie)}/>Add</label>\r\n                        <label style={{ marginLeft: '.35rem' }}><input type=\"radio\" name=\"addOrRemoveMovie\" value=\"Remove\" onChange={e => setAddMovie(!addMovie)} />Remove</label>\r\n                    </>)}\r\n                    {Object.entries(user.bins)\r\n                        .filter(([, val]) => addMovie\r\n                            ? val.length < user.currently_saved.length\r\n                            : val.length > 0).length > 0\r\n                            && <button className=\"button-register\">{updateBinClicked ? 'Update Bin' : addMovie ? 'Add To' : 'Remove From'}</button>\r\n                    }\r\n                </form>\r\n                <form onSubmit={deleteOrEmptyBin}>\r\n                    <label className=\"label-bin-manager\">Delete or empty a bin</label>\r\n                    <select style={{ marginRight: '.5rem' }}>\r\n                        {Object.entries(user.bins)\r\n                            .filter(([, val]) => deleteBin || val.length)\r\n                            .map((bin, i) => <option key={i}>{bin}</option>).length\r\n                                ? Object.entries(user.bins)\r\n                                    .filter(([, val]) => deleteBin || val.length)\r\n                                    .map(([key], i) => <option key={i}>{key}</option>)\r\n                                : <option key=\"-1\">All bins are empty</option>\r\n                        }\r\n                    </select>\r\n                    <label><input type=\"radio\" name=\"deleteOrEmptyBin\" value=\"Delete\" defaultChecked onChange={e => setDeleteBin(!deleteBin)}/>Delete</label>\r\n                    <label style={{ marginLeft: '.35rem' }}><input type=\"radio\" name=\"deleteOrEmptyBin\" value=\"Empty\" onChange={e => setDeleteBin(!deleteBin)} />Empty </label>\r\n                    {Object.entries(user.bins)\r\n                        .filter(([, val]) => deleteBin || val.length)\r\n                        .map((bin, i) => <option key={i}>{bin}</option>).length > 0 &&\r\n                            <button className=\"button-register\">{deleteBin ? 'Delete' : 'Empty'} Bin</button>\r\n                    }\r\n                </form>\r\n            </>\r\n            }\r\n            {Object.keys(user.bins).length > 0 && <button className=\"button-register\" onClick={_=> setBinManagerOpen(false)}>Close</button>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BinManager\r\n","import React, { useState, useEffect, useContext } from 'react';\r\n// import UserContext from '../store/contexts/User.context';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { makeRequest } from '../store/actions/makeRequest.action';\r\nimport { getCurrentlySaved } from '../store/actions/getCurrentlySaved.action';\r\nimport Nav from './Nav';\r\nimport MovieList from './MovieList';\r\nimport BinManager from './BinManager';\r\nimport BinManagerContext from '../store/contexts/BinManager.context.js';\r\nimport { Link } from 'react-router-dom';\r\nimport { server } from '../APIs';\r\nimport { updateUser } from '../store/actions/updateUser.action';\r\n\r\nexport default function MyList() {\r\n\r\n    const dispatch = useDispatch();\r\n    const { loading, result, error } = useSelector(store => store.makeRequest);\r\n    const [binManagerOpen, setBinManagerOpen] = useContext(BinManagerContext);\r\n    const [showBins, setShowBins] = useState(false);\r\n    const user = useSelector(store => store.user.result);\r\n    const currentlySaved = useSelector(store => store.currentlySaved.result);\r\n    const [displaying, setDisplaying] = useState('Currently Saved');\r\n    const [creatingBin, setCreatingBin] = useState(false);\r\n    const [creatingBinError, setCreatingBinError] = useState(null);\r\n    const [updatingBinError, setUpdatingBinError] = useState(null);\r\n\r\n    useEffect(_=> {\r\n        if (user) {\r\n            dispatch( makeRequest('movies/list', '?movies=' + user.currently_saved) );\r\n            dispatch( getCurrentlySaved(user.currently_saved) );\r\n        }\r\n    }, []);\r\n\r\n    useEffect(_=> { if (!showBins) setCreatingBin(false) }, [showBins])\r\n\r\n    async function createBin(e) {\r\n        e.persist();\r\n            e.preventDefault();\r\n            const binName = e.target.children[0].value;\r\n        try {\r\n            if (Object.keys(user.bins).includes(binName)) return setCreatingBinError('Bin already exists');\r\n            setCreatingBinError(null);\r\n            const formData = new FormData();\r\n            formData.append('bin', JSON.stringify({ [binName]: [] }) );\r\n                const response = await fetch(server + `users/${user.username}/bins`, {\r\n                    method: 'POST',\r\n                    body: formData\r\n                });\r\n                if (response.ok) {\r\n                    dispatch( updateUser(user.username) );\r\n                } else setCreatingBinError('Error creating bin');\r\n        } catch (e) { console.log(e) }\r\n        finally {\r\n            if (!Object.keys(user.bins).includes(binName)) {\r\n                setCreatingBin(false);\r\n                e.target.reset();\r\n            }\r\n        }\r\n    }\r\n\r\n    async function updateBin(e) {\r\n        e.persist();\r\n        e.preventDefault();\r\n        setUpdatingBinError(null);\r\n        let res;\r\n        const id = e.dataTransfer.getData('text/plain').split('/movies/')[1];\r\n        try {\r\n            if (!user.currently_saved.includes(Number(id))) {\r\n                res = await fetch(server + `movies?user=${user.username}`, {\r\n                    method: 'PUT',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({ movieID: Number(id), inRecent: true })\r\n                });\r\n                !res.ok && setUpdatingBinError('Error updating bin');\r\n            }\r\n\r\n            res = await fetch(server + `users/${user.username}/bins`, {\r\n                method: 'PATCH',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    bin: { [e.target.textContent]: [ ...user.bins[e.target.textContent], id ] }\r\n                })\r\n            });\r\n            res.ok\r\n                ? dispatch( updateUser(user.username) )\r\n                : setUpdatingBinError('Error updating bin');\r\n        } catch (e) { console.log(e) }\r\n    }\r\n\r\n    const onClickYourBins = e => {\r\n        e.preventDefault();\r\n        let { style } = e.target.parentElement.children[1]\r\n        if (showBins) {\r\n            style.maxHeight = 0;\r\n            style.transform = 'scaleY(0)';\r\n        } else {\r\n            style.maxHeight = '100%';\r\n            style.transform = 'scaleY(1)';\r\n        }\r\n        setShowBins(!showBins);\r\n        setCreatingBinError(null);\r\n    }\r\n\r\nreturn loading ? <div>Loading...</div> : error ? <div>Error loading movies</div> : (\r\n        <>\r\n            <div style={{ display: 'flex', overflow: 'hidden' }}>\r\n                <div style={{ display: 'flex', height: '100vh', flexDirection: 'column '}}>\r\n                    <Nav />\r\n                    {user && <ul className=\"sidebar\">\r\n                        {<li className=\"sidebar-li-hover\" onClick={e => {\r\n                                dispatch( makeRequest('movies/list', '?movies=' + user.currently_saved) );\r\n                                setDisplaying('Currently Saved');\r\n                            }} tabIndex=\"0\">Currently Saved</li>\r\n                        }\r\n                        { user.show_save_history && <li className=\"sidebar-li-hover\" onClick={e => {\r\n                                dispatch( makeRequest('movies/list', '?movies=' + user.recent_save_history) );\r\n                                setDisplaying('Save History');\r\n                            }} tabIndex=\"0\">Save History</li>\r\n                        }\r\n                        <li>\r\n                            {Object.entries(user.bins).length\r\n                                    ? \r\n                                    <div>\r\n                                        <label onFocus={e => e.target.style.color = showBins ? 'white' : 'var(--color-offset)'} onBlur={e => e.target.style.color = showBins ? 'var(--color-offset)' : 'red'} tabIndex=\"0\" style={{ outline: 'none', cursor: 'pointer' }} onClick={onClickYourBins} onKeyDown={e => e.keyCode === 13 && onClickYourBins(e)} onMouseOver={e => e.target.style.color = showBins ? 'white' : 'var(--color-offset)'} onMouseOut={e => e.target.style.color = showBins ? 'var(--color-offset)' : 'red'}>Your Bins</label>\r\n                                        <ul style={{ maxHeight: 0, transform: 'scaleY(0)', transformOrigin: 'top', transition: 'max-height 175ms ease-out, transform 175ms ease-out' }}>\r\n                                            {Object.keys(user.bins).map((bin, i) =>\r\n                                                <li onFocus={e => e.target.style.color = 'var(--color-offset)'} onBlur={e => e.target.style.color = 'red'} tabIndex={showBins ? 0 : '-1'} onMouseOver={e => {\r\n                                                    e.target.style.color = 'var(--color-offset)';\r\n                                                    e.target.style.cursor = 'pointer'\r\n                                                }} onMouseOut={e => e.target.style.color = 'red'} style={{ marginLeft: '1.25rem', outline: 'none' }} key={i} onClick={e => {\r\n                                                    e.preventDefault();\r\n                                                    dispatch( makeRequest('movies/list', '?movies=' + user.bins[bin]) );\r\n                                                    setDisplaying(bin);\r\n                                                    setShowBins(!showBins);\r\n                                                    setCreatingBinError(null);\r\n                                                }} onKeyDown={e => {\r\n                                                    e.preventDefault();\r\n                                                    if (e.keyCode === 13) {\r\n                                                        dispatch( makeRequest('movies/list', '?movies=' + user.bins[bin]) );\r\n                                                        setDisplaying(bin);\r\n                                                        setShowBins(!showBins);\r\n                                                        setCreatingBinError(null);\r\n                                                    }\r\n                                                }} onDrop={e => {\r\n                                                    e.preventDefault();\r\n                                                    console.log(user.currently_saved.length);\r\n                                                    !user.currently_saved.includes( Number(e.dataTransfer.getData('text/plain').split('/movies/')[1]) )\r\n                                                        ? window.confirm('Save movie and add to bin?') && updateBin(e)\r\n                                                        : updateBin(e);\r\n                                                }} onDragOver={e => { e.preventDefault(); e.target.style.color = 'blue' }} onDragLeave={e => { e.preventDefault(); e.target.style.color = 'black' }}>\r\n                                                    {bin}\r\n                                                </li>\r\n                                            )}\r\n                                            <li style={{ marginLeft: '1.25rem' }}>\r\n                                                {creatingBin\r\n                                                    ? <form onSubmit={createBin}>\r\n                                                        <input style={{\r\n                                                            borderRadius: '2px',\r\n                                                            padding: '.25rem',\r\n                                                            height: '1.3rem', width: '110px' }} type=\"text\" placeholder=\"Enter bin name\" />\r\n                                                    </form>\r\n                                                    : <button tabIndex=\"0\" onClick={_=> setCreatingBin(true)} onFocus={e => e.target.style.transform = 'scale(1.15)'} onBlur={e => e.target.style.transform = 'scale(1)'} onKeyDown={e => e.keyCode === 13 && setCreatingBin(true)} style={{ backgroundColor: 'transparent', border: 'none', color: 'red', fontWeight: 'bold',\r\n                                                    fontSize: '1.1rem',\r\n                                                    transition: 'transform 50ms ease-out'\r\n                                                 }} onMouseOver={e => {\r\n                                                    e.target.style.transform = 'scale(1.15)'; e.target.style.cursor = 'pointer'\r\n                                                }} onMouseOut={e => e.target.style.transform = 'scale(1)'}>+</button>\r\n                                                }\r\n                                            </li>\r\n                                            {creatingBinError && <div style={{ color: 'maroon' }}>{creatingBinError}</div>}\r\n                                        </ul>\r\n                                    </div>\r\n                                    : 'Use the bin manager to organize your movies'\r\n                            }\r\n                        </li>\r\n                        <li>\r\n                            <button \r\n                            onMouseOver={e =>  e.target.style.backgroundColor = 'var(--bg-color-light)'\r\n                            } onMouseOut={e => {\r\n                                if (document.activeElement !== e.target)\r\n                                    e.target.style.backgroundColor = 'var(--color-offset)'\r\n                            }} onFocus={e => e.target.style.backgroundColor = 'var(--bg-color-light)'} onBlur={e => {\r\n                                if (![...document.querySelectorAll(':hover')].includes(e.target))\r\n                                    e.target.style.backgroundColor = 'var(--color-offset)'\r\n                            }} style={{ marginTop: '1rem', marginLeft: '.25rem' }}className=\"button\" onClick={e => {\r\n                                e.target.blur();\r\n                                setBinManagerOpen(!binManagerOpen);\r\n                            }}>Manage Bins</button>\r\n                        </li>\r\n                    </ul>}\r\n                </div>\r\n                \r\n                {user\r\n                    ? <MovieList withFilter displaying={displaying} movies={result} headingMargin=\"2rem\" heading={(_=> {\r\n                        switch (displaying) {\r\n                            default: return result.length\r\n                                ? `This is what was in \"${displaying}\"`\r\n                                : 'This bin was empty!';\r\n                            case 'Currently Saved':\r\n                                return result.length\r\n                                    ? 'Here\\'s your complete list of movies'\r\n                                    : 'Save movies by going to their page';\r\n                            case 'Save History':\r\n                                return result.length\r\n                                    ? 'These are all the movies you\\'ve ever saved'\r\n                                    : 'Save movies by going to their page';\r\n                        }\r\n                    })()}/>\r\n                    : <h2 style={{ flex: 4, position: 'absolute', margin: '7rem 0 0 2.5rem' }}><Link to=\"/register\">Log in</Link> to see your saved movies</h2>\r\n                }\r\n            </div>\r\n\r\n            {user && binManagerOpen && <BinManager movies={currentlySaved} displaying={displaying} setDisplaying={setDisplaying}></BinManager>}\r\n        </>\r\n    )\r\n}\r\n","import { GET_CURRENTLY_SAVED_LAUNCH, GET_CURRENTLY_SAVED_SUCCESS, GET_CURRENTLY_SAVED_FAILURE } from \"../reducers/getCurrentlySaved.reducer\";\r\nimport { server } from '../../APIs';\r\n\r\nexport const createGetCurrentlySavedLaunch = _=> ({ type: GET_CURRENTLY_SAVED_LAUNCH }),\r\n    createGetCurrentlySavedSuccess = payload => ({ type: GET_CURRENTLY_SAVED_SUCCESS, payload }),\r\n    createGetCurrentlySavedFailure = payload => ({ type: GET_CURRENTLY_SAVED_FAILURE, payload });\r\n\r\nexport const getCurrentlySaved = movieIDs => {\r\n    return dispatch => {\r\n        dispatch(createGetCurrentlySavedLaunch())\r\n        fetch(server+`movies/list?movies=${movieIDs}`)\r\n            .then(res => res.json())\r\n            .then(res => {\r\n                dispatch( createGetCurrentlySavedSuccess(res) );\r\n            })\r\n            .catch(e => dispatch( createGetCurrentlySavedFailure(e) ))\r\n    }\r\n}","import React, { useState, useEffect } from 'react';\r\nimport Nav from './Nav';\r\nimport MovieList from './MovieList';\r\nimport { makeRequest } from '../store/actions/makeRequest.action';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nfunction Popular() {\r\n    const dispatch = useDispatch();\r\n    const { loading, error, result } = useSelector(store => store.makeRequest);\r\n    const [heading, setHeading] = useState('Here\\'s what movies are currently trending');\r\n    const [set, setSet] = useState(1);\r\n    const [column, setColumn] = useState('trending');\r\n\r\n    useEffect(_=> {\r\n        dispatch( makeRequest(`popular`, `?column=${column === 'trending' ? 'release_date' : column}&set=${set}`));\r\n        switch (column) {\r\n            default: break;\r\n            case 'trending':\r\n                setHeading('Here\\'s what movies are currently trending');\r\n                break;\r\n            case 'release_date':\r\n                setHeading('Here are the newest movies on record');\r\n                break;\r\n            case 'times_saved_this_month':\r\n                setHeading('Here are the most popular movies this month');\r\n                break;\r\n            case 'times_saved':\r\n                setHeading('Here are the most saved movies to date');\r\n                break;\r\n        }\r\n    }, [column, set]);\r\n\r\n    return (\r\n        <>\r\n            <div style={{ display: 'flex', overflow: 'hidden' }}>\r\n                <div style={{ display: 'flex', height: '100vh', flexDirection: 'column' }}>\r\n                    <Nav />\r\n                    <ul className=\"sidebar\">\r\n                        <li tabIndex=\"0\" onKeyDown={e => e.keyCode === 13 && setColumn('trending')} className=\"sidebar-li-hover\" key=\"0\" onClick={_=> setColumn('trending')}>Trending</li>\r\n                        <li tabIndex=\"0\" onKeyDown={e => e.keyCode === 13 && setColumn('release_date')} className=\"sidebar-li-hover\" key=\"1\" onClick={_=> setColumn('release_date')}>Recent Releases</li>\r\n                        <li tabIndex=\"0\" onKeyDown={e => e.keyCode === 13 && setColumn('times_saved_this_month')} className=\"sidebar-li-hover\" key=\"2\" onClick={_=> setColumn('times_saved_this_month')}>Most Saved This Month</li>\r\n                        <li tabIndex=\"0\" onKeyDown={e => e.keyCode === 13 && setColumn('times_saved')} className=\"sidebar-li-hover\" key=\"3\" onClick={_=> setColumn('times_saved')}>Most Saved All Time</li>\r\n                        <li style={{ marginTop: '2.5rem', height: '23px', width: '100%' }}>\r\n                            <div style={{ posiiton: 'relative', display: 'flex', justifyContent: 'space-between', width: '100%', height: '100%' }}>\r\n                                <button className=\"button-v2\" style={{ pointerEvents: 'none', opacity: 0, left: '1rem', transition: 'opacity 550ms ease-in-out' }} onClick={e => {\r\n                                    if (set === 2) {\r\n                                        e.target.style.opacity = 0;\r\n                                        e.target.parentElement.children[1].style.transform = 'translateX(0)';\r\n                                        e.target.style.pointerEvents = 'none';\r\n                                    }\r\n                                    e.target.blur();\r\n                                    setSet(set - 1)\r\n                                }}>Previous</button>\r\n                                <button style={{ left: '1rem', transition: 'transform 550ms ease-in-out' }} className=\"button-v2\" onClick={e => {\r\n                                    if (set === 1) {\r\n                                        e.target.style.transform = 'translateX(calc(190px - 1rem))';\r\n                                        e.target.parentElement.children[0].style.opacity = 1;\r\n                                        e.target.parentElement.children[0].style.pointerEvents = 'auto'\r\n                                    }\r\n                                    e.target.blur();\r\n                                    setSet(set + 1)\r\n                                }}>Next</button>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                \r\n                <div style={{ flex: 4, marginBottom: '2rem' }}>\r\n                    {error && <div>{error}</div>}\r\n                    {loading\r\n                        ? <div>Loading movies...</div>\r\n                        : <MovieList movies={result} heading={heading} headingMargin=\"4rem\" displaying={'Popular'}/>    \r\n                    }\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Popular\r\n","import React from 'react';\nimport './App.css';\nimport { Route, Switch } from 'react-router-dom';\nimport Home from './components/Home';\nimport Movie from './components/Movie';\nimport Register from './components/Register';\nimport Profile from './components/Profile';\nimport Search from './components/Search';\nimport Help from './components/Help';\nimport Query from './components/Query';\nimport MyList from './components/MyList';\nimport Popular from './components/Popular';\n\nfunction App(props) {\n  \n  return (\n      <Switch>\n        <Route path='/' exact component={Home} />\n        <Route path='/movies/:id' component={Movie} />\n        <Route path='/register' exact component={Register} />\n        <Route path='/profile/:id' exact component={Profile} />\n        <Route path='/search' exact component={Search} />\n        <Route path='/help' exact component={Help} />\n        <Route path='/query' exact component={Query} />\n        <Route path='/my-list' exact component={MyList} />\n        <Route path='/popular' exact component={Popular} />\n        <Route path=\"/\" render={props =>\n          <>\n            <div>404: Not Found</div>\n            <button onClick={_=> props.history.push('/')}>Back to Home</button>\n          </>\n        } />\n      </Switch>\n  );\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\r\nimport { HistoryProvider } from './contexts/History.context';\r\nimport { UserProvider } from './contexts/User.context';\r\nimport { BinManagerProvider } from './contexts/BinManager.context';\r\n\r\nexport default ({ children }) => (\r\n    <BinManagerProvider>\r\n        <UserProvider>\r\n            <HistoryProvider>\r\n                {children}\r\n            </HistoryProvider>\r\n        </UserProvider>\r\n    </BinManagerProvider>\r\n)","import { combineReducers } from 'redux';\r\nimport makeRequest from './reducers/makeRequest.reducer';\r\nimport search from './reducers/search.reducer';\r\nimport user from './reducers/updateUser.reducer';\r\nimport currentlySaved from './reducers/getCurrentlySaved.reducer';\r\nimport query from './reducers/query.reducer';\r\n\r\nexport default combineReducers({ makeRequest, search, user, currentlySaved, query })","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter } from 'react-router-dom'\nimport Context from './store/Context';\nimport { createStore, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux';\nimport thunk from 'redux-thunk';\nimport reducer from './store/reducer';\n\n\nconst store = createStore(reducer, applyMiddleware(thunk));\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <Provider store={store}>\n        <Context>\n          <App />\n        </Context>\n      </Provider>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}