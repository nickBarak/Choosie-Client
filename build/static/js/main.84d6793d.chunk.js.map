{"version":3,"sources":["img/image-alt.png","APIs.js","store/contexts/History.context.js","store/reducers/prototype.reducer.js","store/reducers/updateUser.reducer.js","store/actions/updateUser.action.js","Functions.js","components/Login.js","components/DelayLink.js","components/Footer.js","store/reducers/search.reducer.js","store/actions/search.action.js","components/Home.js","store/reducers/makeRequest.reducer.js","store/actions/makeRequest.action.js","components/Nav.js","components/Movie.js","components/Register.js","components/Toggler.js","components/Profile.js","components/StarRater.js","components/Search.js","components/Help.js","components/Filter.js","components/MovieList.js","components/Query.js","store/reducers/getCurrentlySaved.reducer.js","store/actions/getCurrentlySaved.action.js","store/actions/prototype.action.js","store/contexts/BinManager.context.js","components/BinManager.js","components/MyList.js","components/Popular.js","App.js","serviceWorker.js","store/contexts/User.context.js","store/Context.js","store/reducer.js","index.js"],"names":["module","exports","server","URL","HistoryContext","createContext","HistoryProvider","children","history","useHistory","Provider","value","defaultState","loading","result","error","ReducerPrototype","LAUNCH_TYPE","SUCCESS_TYPE","FAILURE_TYPE","initialState","successCallback","fn","failureCallback","state","type","payload","callback","newState","updateUser","username","dispatch","fetch","credentials","then","res","json","catch","e","root","document","getElementById","transitionPage","route","style","opacity","setTimeout","_","a","push","slideDisplayRow","timeout","down","mode","transform","destroySession","console","log","Login","useDispatch","user","useSelector","store","useContext","useState","open","setOpen","setError","loginForm","useRef","errorRef","useEffect","current","onLogin","persist","preventDefault","target","password","method","headers","body","JSON","stringify","response","validLogin","mouseOverLogin","color","mouseOutLogin","className","position","left","top","name","padding","display","flexWrap","onClick","window","location","reload","cursor","backgroundColor","border","marginRight","whiteSpace","onMouseOver","onMouseOut","onFocus","onBlur","marginLeft","ref","transition","onSubmit","width","height","marginBottom","placeholder","marginTop","justifyContent","blur","DelayLink","to","useLocation","clearTimeout","pathname","defaultPrevented","Footer","bottom","right","delay","onDelayStart","fontWeight","userSelect","searchReducerPrototype","SEARCH_LAUNCH","SEARCH_SUCCESS","SEARCH_FAILURE","searchValue","searchTitle","searchPeople","searchGenre","searchDescription","searchPrototype","query","page","movies","createSearchSuccess","createSearchFailure","searchReleaseDate","searchAgeRating","Home","onSearch","Object","values","searchActions","forEach","action","reset","button","ok","margin","undefined","createMakeRequestSuccess","createMakeRequestFailure","makeRequest","querystring","options","Nav","withBack","back","scrollY","Movie","movie","saving","setSaving","unsaving","setUnsaving","saveError","setSaveError","split","controller","AbortController","signal","movieID","binsWithMovie","entries","bins","filter","bin","includes","String","binWithMovie","id","abort","flexDirection","alignItems","srcSet","cover_file","imageAlt","alt","title","currently_saved","confirmed","reduce","acc","cur","confirm","save_history","inRecent","recent_save_history","description","href","src_url","rel","genres","join","mpaa_rating","duration_in_mins","Math","floor","release_date","slice","writers","directors","actors","languages","countries","languageOptions","Register","continued","setContinued","info","setInfo","generalError","setGeneralError","registrationError","setRegistrationError","loginError","setLoginError","exec","age","selectedIndex","Number","text","sex","email","key","defaultValue","disabled","Array","fill","map","el","i","uuid","language","length","placeItems","maxWidth","Toggler","mounted","prompt","defaultChecked","onCheck","onUncheck","checkbox","checked","Simulate","change","onChange","parentElement","boxShadow","setProperty","Profile","editInfoError","setEditInfoError","changePasswordError","setChangePasswordError","clearing","setClearing","show_save_history","showSaveHistory","setShowSaveHistory","show_description_on_hover","showDescriptionOnHover","setShowDescriptionOnHover","message","setMessage","editInfo","editedInfo","Promise","resolve","maxHeight","clearInfo","visibility","otherOpen","innerWidth","lang","fontSize","currentPassword","newPassword","repeatedNewPassword","minHeight","StarRater","starRating","setStarRating","rate","rating","Search","setPage","searchResultIDs","searchResults","nextButton1","nextButton2","previousButton1","previousButton2","sessionStorage","getItem","setItem","cache","parse","btn","pointerEvents","posiiton","zIndex","sections","label","content","Help","frame","more","setState","section","ageRatings","durations","releaseDates","filterOptionsInit","Filter","displayList","dispatchDisplayList","useReducer","splice","select","filterOptions","dispatchFilterOptions","filterID","setFilterID","makeFilter","deriveFilterValues","option","ul","from","li","range","find","child","MovieList","heading","headingMargin","withFilter","displaying","lowerMargin","locationdetails","filters","ratings","duration","genre","year","removingFromHistory","setRemovingFromHistory","removingFromBin","setRemovingFromBin","manageMovieError","setManageMovieError","country","flex","textAlign","onDrag","dataTransfer","setData","tabIndex","val","outerWith","QueryContent","buttonSet","nextButton","this","phases","60","120","150","phase3MobileButtonSet","Query","phase","setPhase","answers","resultIDs","set","setSet","mainNextButton","mainNextButton2","mainPrevButton","mainPrevButton2","frame2","manageFilters","index","textContent","timeConstraint","timePeriods","getElementsByClassName","genre_selection","sort","j","keys","answer","buttons","getCurrentlySaved","url","params","param","replace","ActionPrototype","BinManagerContext","BinManagerProvider","binManagerOpen","setBinManagerOpen","BinManager","setDisplaying","deleteBin","setDeleteBin","addMovie","setAddMovie","updateBinClicked","setUpdateBinClicked","binToUpdate","setBinToUpdate","manageBins","errorhandler","borderRadius","autoComplete","toUpdate","updatedMovies","MyList","showBins","setShowBins","currentlySaved","creatingBin","setCreatingBin","creatingBinError","setCreatingBinError","updatingBinError","setUpdatingBinError","binName","updateBin","getData","onClickYourBins","overflow","outline","onKeyDown","keyCode","transformOrigin","onDrop","onDragOver","onDragLeave","activeElement","querySelectorAll","textDecoration","Popular","setHeading","column","setColumn","previousButton","scrollYRef","setScrollY","addEventListener","scrollTo","onClickOrEnter","App","path","exact","component","render","Boolean","hostname","match","UserContext","UserProvider","_currentValue","combineReducers","createStore","reducer","applyMiddleware","thunk","ReactDOM","StrictMode","Context","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.84d6793d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/image-alt.7496b72d.png\";","export const server = new URL(\r\n    'https://api.choosie.us'\r\n    // 'https://choosie-api.herokuapp.com/'\r\n    // 'http://127.0.0.1:8082'\r\n);\r\n\r\nexport default { server };","import React, { createContext } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport const HistoryContext = createContext(null);\r\n\r\nexport const HistoryProvider = ({ children }) => {\r\n\tconst history = useHistory();\r\n\r\n\treturn (\r\n\t\t<HistoryContext.Provider value={history}>\r\n\t\t\t{children}\r\n\t\t</HistoryContext.Provider>\r\n\t);\r\n};\r\n\r\nexport default HistoryContext;\r\n","const defaultState = {\r\n\tloading: false,\r\n\tresult: [],\r\n\terror: null,\r\n};\r\n\r\n/* Generic Reducer Model */\r\nexport function ReducerPrototype(\r\n\tLAUNCH_TYPE,\r\n\tSUCCESS_TYPE,\r\n\tFAILURE_TYPE,\r\n\tinitialState = defaultState,\r\n\tsuccessCallback = fn => fn && fn(),\r\n\tfailureCallback = fn => fn && fn()\r\n) {\r\n\treturn (state = initialState, { type, payload, callback }) => {\r\n\t\tconst newState = { ...state };\r\n\t\tswitch (type) {\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t\tcase LAUNCH_TYPE:\r\n\t\t\t\tnewState.loading = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase SUCCESS_TYPE:\r\n\t\t\t\tsuccessCallback(callback);\r\n\t\t\t\tnewState.loading = false;\r\n\t\t\t\tnewState.error = null;\r\n\t\t\t\tnewState.result = payload;\r\n\t\t\t\tbreak;\r\n\t\t\tcase FAILURE_TYPE:\r\n\t\t\t\tfailureCallback(callback);\r\n\t\t\t\tnewState.loading = false;\r\n\t\t\t\tnewState.error = payload;\r\n\t\t\t\tnewState.result = null;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn newState;\r\n\t};\r\n}\r\n","import { ReducerPrototype } from \"./prototype.reducer\";\r\n\r\nexport const UPDATE_USER_LAUNCH = \"UPDATE_USER_LAUNCH\",\r\n\tUPDATE_USER_SUCCESS = \"UPDATE_USER_SUCCESS\",\r\n\tUPDATE_USER_FAILURE = \"UPDATE_USER_FAILURE\";\r\n\r\nconst initialState = {\r\n\tloading: false,\r\n\tresult: null,\r\n\terror: null,\r\n};\r\n\r\n/* Used to refresh current user data */\r\nexport default ReducerPrototype(\r\n\tUPDATE_USER_LAUNCH,\r\n\tUPDATE_USER_SUCCESS,\r\n\tUPDATE_USER_FAILURE,\r\n\tinitialState\r\n);\r\n","import { server } from \"../../APIs\";\r\nimport {\r\n\tUPDATE_USER_LAUNCH,\r\n\tUPDATE_USER_SUCCESS,\r\n\tUPDATE_USER_FAILURE,\r\n} from \"../reducers/updateUser.reducer\";\r\n\r\nexport const createUpdateUserLaunch = _ => ({ type: UPDATE_USER_LAUNCH }),\r\n\tcreateUpdateUserSuccess = payload => ({\r\n\t\ttype: UPDATE_USER_SUCCESS,\r\n\t\tpayload,\r\n\t}),\r\n\tcreateUpdateUserFailure = payload => ({\r\n\t\ttype: UPDATE_USER_FAILURE,\r\n\t\tpayload,\r\n\t});\r\n\r\n/* Used to refresh current user data */\r\nexport const updateUser = username => {\r\n\treturn dispatch => {\r\n\t\tdispatch(createUpdateUserLaunch());\r\n\t\tfetch(server + `users/${username}`, {\r\n\t\t\tcredentials: 'include'\r\n\t\t})\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(res => {\r\n\t\t\t\tdispatch(createUpdateUserSuccess(res));\r\n\t\t\t})\r\n\t\t\t.catch(e => dispatch(createUpdateUserFailure(e)));\r\n\t};\r\n};\r\n","import { server } from './APIs';\r\n\r\nconst root = document.getElementById('root');\r\n\r\nexport function transitionPage(history, route) {\r\n    root.style.opacity = 0;\r\n    history && route && setTimeout(async _=> {\r\n        await history.push(route);\r\n        root.style.opacity = 1;\r\n    }, 1500);\r\n}\r\n\r\nexport function transitionDisplayList() {\r\n    document.getElementById('display-row').style.transform = 'translateY(10vh)';\r\n    setTimeout(_=> document.getElementById('display-row').style.transform = 'translateY(0)', 500);\r\n}\r\n\r\nexport function slideDisplayRow(timeout=0, down=true, mode=0) {\r\n    setTimeout(_=> {\r\n        if (!document.getElementById('display-row')) slideDisplayRow(timeout, down, mode);\r\n\r\n        switch (mode) {\r\n            default: return;\r\n            case 0:\r\n                document.getElementById('display-row').style.transform = `translateY(${down ? '150vh' : 0})`;\r\n                break;\r\n            case 1:\r\n                document.getElementById('display-row').style.transform = `translateX(-150vw)`;\r\n                setTimeout(_=> {\r\n                    document.getElementById('display-row').style.opacity = 0;\r\n                    document.getElementById('display-row').style.transform = `translateX(300vw)`;\r\n                }, 300);\r\n                break;\r\n            case 2:\r\n                document.getElementById('display-row').style.transform = `translateX(150vw)`;\r\n                setTimeout(_=> {\r\n                    document.getElementById('display-row').style.opacity = 0;\r\n                    document.getElementById('display-row').style.transform = `translateX(-300vw)`;\r\n                }, 300);\r\n                break;\r\n            case 3:\r\n                document.getElementById('display-row').style.opacity = 1;\r\n                document.getElementById('display-row').style.transform = `translateX(0)`;\r\n        }\r\n    }, timeout);\r\n}\r\n\r\nexport async function destroySession() {\r\n    return fetch(server + 'destroy-session', { credentials: 'include' })\r\n        .catch(e => console.log(e));\r\n}","import React, { useState, useContext, useEffect, useRef } from \"react\";\r\nimport { server } from \"../APIs\";\r\nimport HistoryContext from \"../store/contexts/History.context\";\r\nimport { updateUser } from \"../store/actions/updateUser.action\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { destroySession, transitionPage } from \"../Functions\";\r\n\r\nfunction Login() {\r\n\tconst dispatch = useDispatch();\r\n\tconst user = useSelector(store => store.user.result);\r\n\tconst history = useContext(HistoryContext);\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst [error, setError] = useState(null);\r\n\tconst loginForm = useRef(null);\r\n\tconst errorRef = useRef(null);\r\n\r\n\tuseEffect(\r\n\t\t_ => {\r\n\t\t\tif (error && loginForm.current) {\r\n\t\t\t\tloginForm.current.style.transform = \"translateY(1rem)\";\r\n\t\t\t\terrorRef.current.style.transform = \"translateY(1.4rem)\";\r\n\t\t\t} else if (loginForm.current) {\r\n\t\t\t\tloginForm.current.style.transform = \"translateY(0)\";\r\n\t\t\t\terrorRef.current.style.transform = \"translateY(0)\";\r\n\t\t\t}\r\n\t\t},\r\n\t\t[error]\r\n\t);\r\n\r\n\tconst onLogin = async e => {\r\n\t\te.persist();\r\n\t\te.preventDefault();\r\n\t\tconst username = e.target.children[0].value,\r\n\t\t\tpassword = e.target.children[2].value;\r\n\t\tif (!username && !password) {\r\n\t\t\tsetError(null);\r\n\t\t\tsetOpen(false);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tawait destroySession();\r\n\t\t\tconst response = await fetch(server + `users/validate`, {\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\tcredentials: 'include',\r\n\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\tusername,\r\n\t\t\t\t\tpassword,\r\n\t\t\t\t}),\r\n\t\t\t});\r\n\t\t\tconst validLogin = await response.json();\r\n\t\t\tif (!(await validLogin)) {\r\n\t\t\t\tsetError(\"Invalid login\");\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tdispatch(updateUser(username));\r\n\t\t\t\tsetError(null);\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tsetError(\"Something went wrong\");\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n\t};\r\n\r\n\tfunction mouseOverLogin(e) {\r\n\t\te.target.style.color = \"red\";\r\n\t}\r\n\r\n\tfunction mouseOutLogin(e) {\r\n\t\te.persist();\r\n\t\tsetTimeout(_ => (e.target.style.color = \"white\"), 250);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"login\"\r\n\t\t\tstyle={{ position: \"absolute\", left: \"1rem\", top: \"1rem\" }}\r\n\t\t>\r\n\t\t\t{user ? (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"login-welcome\"\r\n\t\t\t\t\t\tstyle={{ color: \"var(--color-offset)\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tWelcome, {user.name || user.username}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tpadding: \"0 2rem\",\r\n\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\tflexWrap: \"nowrap\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={async _=> {\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\tawait fetch(server + 'destroy-session', { credentials: 'include' });\r\n\t\t\t\t\t\t\t\t\tsetOpen(false);\r\n\t\t\t\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t\t\t\t} catch (e) { console.log(e) }\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tcolor: \"white\",\r\n\t\t\t\t\t\t\t\tcursor: \"pointer\",\r\n\t\t\t\t\t\t\t\tbackgroundColor: \"transparent\",\r\n\t\t\t\t\t\t\t\tborder: \"none\",\r\n\t\t\t\t\t\t\t\tmarginRight: \".5rem\",\r\n\t\t\t\t\t\t\t\twhiteSpace: \"nowrap\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tonMouseOver={e => (e.target.style.color = \"silver\")}\r\n\t\t\t\t\t\t\tonMouseOut={e => (e.target.style.color = \"white\")}\r\n\t\t\t\t\t\t\tonFocus={e => (e.target.style.color = \"silver\")}\r\n\t\t\t\t\t\t\tonBlur={e => (e.target.style.color = \"white\")}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tLog out\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={_ =>\r\n\t\t\t\t\t\t\t\ttransitionPage(\r\n\t\t\t\t\t\t\t\t\thistory,\r\n\t\t\t\t\t\t\t\t\t`profile/${user.username}`\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tcolor: \"white\",\r\n\t\t\t\t\t\t\t\tcursor: \"pointer\",\r\n\t\t\t\t\t\t\t\tbackgroundColor: \"transparent\",\r\n\t\t\t\t\t\t\t\tborder: \"none\",\r\n\t\t\t\t\t\t\t\tmarginLeft: \".5rem\",\r\n\t\t\t\t\t\t\t\twhiteSpace: \"nowrap\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tonMouseOver={e => (e.target.style.color = \"silver\")}\r\n\t\t\t\t\t\t\tonMouseOut={e => (e.target.style.color = \"white\")}\r\n\t\t\t\t\t\t\tonFocus={e => (e.target.style.color = \"silver\")}\r\n\t\t\t\t\t\t\tonBlur={e => (e.target.style.color = \"white\")}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tView profile\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</>\r\n\t\t\t) : open ? (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tref={errorRef}\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\t\ttop: \"-2rem\",\r\n\t\t\t\t\t\t\tleft: \"1.8rem\",\r\n\t\t\t\t\t\t\tcolor: \"red\",\r\n\t\t\t\t\t\t\ttransition: \"transform 300ms ease-in-out\",\r\n\t\t\t\t\t\t\twhiteSpace: \"nowrap\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{error}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<form\r\n\t\t\t\t\t\tonSubmit={onLogin}\r\n\t\t\t\t\t\tref={loginForm}\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tbackgroundColor: \"transparent\",\r\n\t\t\t\t\t\t\tdisplay: \"inline-block\",\r\n\t\t\t\t\t\t\ttransition: \"transform 300ms ease-in-out\",\r\n\t\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tpadding: \".25rem\",\r\n\t\t\t\t\t\t\t\theight: \"1.25rem\",\r\n\t\t\t\t\t\t\t\tmarginBottom: \".2rem\",\r\n\t\t\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"username\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tpadding: \".25rem\",\r\n\t\t\t\t\t\t\t\theight: \"1.25rem\",\r\n\t\t\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tplaceholder=\"password\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tmarginTop: \".25rem\",\r\n\t\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\t\tjustifyContent: \"space-between\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"button-manage-movie\"\r\n\t\t\t\t\t\t\t\tonClick={e => e.target.blur()}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tLog in\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"button-manage-movie\"\r\n\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\ttransitionPage(history, \"/register\");\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tSign up\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</>\r\n\t\t\t) : (\r\n\t\t\t\t/* For stylistic effect */\r\n\t\t\t\t<button className=\"button-login\" onClick={_ => setOpen(true)}>\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle={{ transition: \"color 250ms ease-in\" }}\r\n\t\t\t\t\t\tonMouseOver={mouseOverLogin}\r\n\t\t\t\t\t\tonMouseOut={mouseOutLogin}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tL\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle={{ transition: \"color 250ms ease-in\" }}\r\n\t\t\t\t\t\tonMouseOver={mouseOverLogin}\r\n\t\t\t\t\t\tonMouseOut={mouseOutLogin}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\to\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle={{ transition: \"color 250ms ease-in\" }}\r\n\t\t\t\t\t\tonMouseOver={mouseOverLogin}\r\n\t\t\t\t\t\tonMouseOut={mouseOutLogin}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tg\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\ttransition: \"color 250ms ease-in\",\r\n\t\t\t\t\t\t\tmarginLeft: \".35rem\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonMouseOver={mouseOverLogin}\r\n\t\t\t\t\t\tonMouseOut={mouseOutLogin}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\ti\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle={{ transition: \"color 250ms ease-in\" }}\r\n\t\t\t\t\t\tonMouseOver={mouseOverLogin}\r\n\t\t\t\t\t\tonMouseOut={mouseOutLogin}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tn\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Login;\r\n","import React, { useEffect, useContext } from \"react\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport HistoryContext from \"../store/contexts/History.context\";\r\n\r\nfunction DelayLink({ to, className, children }) {\r\n\tlet timeout = null;\r\n\tconst history = useContext(HistoryContext);\r\n\tconst location = useLocation();\r\n\r\n\tuseEffect(_ => _ => timeout && clearTimeout(timeout), [timeout]);\r\n\r\n\tconst onClick = e => {\r\n\t\t// if trying to navigate to current page stop everything\r\n\t\tif (location && location.pathname === to) return;\r\n\t\tdocument.getElementById(\"root\").style.opacity = 0;\r\n\t\tif (e.defaultPrevented) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\te.preventDefault();\r\n\t\ttimeout = setTimeout(async _ => {\r\n\t\t\tawait history.push(to);\r\n\t\t\tdocument.getElementById(\"root\").style.opacity = 1;\r\n\t\t}, 1500);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Link className={className} to={to} onClick={onClick}>\r\n\t\t\t{children}\r\n\t\t</Link>\r\n\t);\r\n}\r\n\r\nexport default DelayLink;\r\n","import React from \"react\";\r\nimport DelayLink from \"./DelayLink\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Footer() {\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"footer\"\r\n\t\t\tstyle={{ position: \"fixed\", bottom: 0, left: 0, right: 0 }}\r\n\t\t>\r\n\t\t\t<DelayLink\r\n\t\t\t\tdelay={2000}\r\n\t\t\t\tonDelayStart={_ =>\r\n\t\t\t\t\t(document.getElementById(\"pageContainer\").style.opacity = 0)\r\n\t\t\t\t}\r\n\t\t\t\tto=\"/help\"\r\n\t\t\t\tclassName=\"link-help\"\r\n\t\t\t>\r\n\t\t\t\tWhat is{\" \"}\r\n\t\t\t\t<span className=\"logo\" style={{ fontWeight: 600 }}>\r\n\t\t\t\t\tChoosie\r\n\t\t\t\t</span>\r\n\t\t\t\t?\r\n\t\t\t</DelayLink>\r\n\t\t\t<div\r\n\t\t\t\tclassName=\"copyright\"\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\tbottom: \".85rem\",\r\n\t\t\t\t\tright: \"1rem\",\r\n\t\t\t\t\tcolor: \"black\",\r\n\t\t\t\t\tuserSelect: \"none\",\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t 2020 Choosie | Nick Barak\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Footer;\r\n","export const SEARCH_TITLE_LAUNCH = \"SEARCH_TITLE_LAUNCH\",\r\n\tSEARCH_TITLE_SUCCESS = \"SEARCH_TITLE_SUCCESS\",\r\n\tSEARCH_TITLE_FAILURE = \"SEARCH_TITLE_FAILURE\",\r\n\t\r\n\tSEARCH_PEOPLE_LAUNCH = \"SEARCH_PEOPLE_LAUNCH\",\r\n\tSEARCH_PEOPLE_SUCCESS = \"SEARCH_PEOPLE_SUCCESS\",\r\n\tSEARCH_PEOPLE_FAILURE = \"SEARCH_PEOPLE_FAILURE\",\r\n\t\r\n\tSEARCH_GENRE_LAUNCH = \"SEARCH_GENRE_LAUNCH\",\r\n\tSEARCH_GENRE_SUCCESS = \"SEARCH_GENRE_SUCCESS\",\r\n\tSEARCH_GENRE_FAILURE = \"SEARCH_GENRE_FAILURE\",\r\n\t\r\n\tSEARCH_DESCRIPTION_LAUNCH = \"SEARCH_DESCRIPTION_LAUNCH\",\r\n\tSEARCH_DESCRIPTION_SUCCESS = \"SEARCH_DESCRIPTION_SUCCESS\",\r\n\tSEARCH_DESCRIPTION_FAILURE = \"SEARCH_DESCRIPTION_FAILURE\",\r\n\r\n\tSEARCH_RELEASE_DATE_LAUNCH = \"SEARCH_RELEASE_DATE_LAUNCH\",\r\n\tSEARCH_RELEASE_DATE_SUCCESS = \"SEARCH_RELEASE_DATE_SUCCESS\",\r\n\tSEARCH_RELEASE_DATE_FAILURE = \"SEARCH_RELEASE_DATE_FAILURE\",\r\n\r\n\tSEARCH_AGE_RATING_LAUNCH = \"SEARCH_AGE_RATING_LAUNCH\",\r\n\tSEARCH_AGE_RATING_SUCCESS = \"SEARCH_AGE_RATING_SUCCESS\",\r\n\tSEARCH_AGE_RATING_FAILURE = \"SEARCH_AGE_RATING_FAILURE\";\r\n\r\nconst titleState = {\r\n\tloading: false,\r\n\tsearchValue: null,\r\n\tresult: [],\r\n\terror: null,\r\n};\r\nconst peopleState = {\r\n\tloading: false,\r\n\tsearchValue: null,\r\n\tresult: [],\r\n\terror: null,\r\n};\r\nconst genreState = {\r\n\tloading: false,\r\n\tsearchValue: null,\r\n\tresult: [],\r\n\terror: null,\r\n};\r\nconst descriptionState = {\r\n\tloading: false,\r\n\tsearchValue: null,\r\n\tresult: [],\r\n\terror: null,\r\n};\r\nconst releaseDateState = {\r\n\tloading: false,\r\n\tsearchValue: null,\r\n\tresult: [],\r\n\terror: null,\r\n};\r\nconst ageRatingState = {\r\n\tloading: false,\r\n\tsearchValue: null,\r\n\tresult: [],\r\n\terror: null,\r\n};\r\n\r\n/* Used for /search route results */\r\nconst searchReducerPrototype = (SEARCH_LAUNCH, SEARCH_SUCCESS, SEARCH_FAILURE, initialState) => (state = initialState, { type, payload }) => {\r\n\tswitch (type) {\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t\tcase SEARCH_LAUNCH:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: true,\r\n\t\t\t\tsearchValue: payload,\r\n\t\t\t};\r\n\t\tcase SEARCH_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: false,\r\n\t\t\t\tresult: payload,\r\n\t\t\t\terror: null,\r\n\t\t\t};\r\n\t\tcase SEARCH_FAILURE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: false,\r\n\t\t\t\tresult: [],\r\n\t\t\t\terror: payload,\r\n\t\t\t};\r\n\t}\r\n};\r\n\r\n\r\nexport const searchTitle = searchReducerPrototype(SEARCH_TITLE_LAUNCH, SEARCH_TITLE_SUCCESS, SEARCH_TITLE_FAILURE, titleState),\r\n\tsearchPeople = searchReducerPrototype(SEARCH_PEOPLE_LAUNCH, SEARCH_PEOPLE_SUCCESS, SEARCH_PEOPLE_FAILURE, peopleState),\r\n\tsearchGenre = searchReducerPrototype(SEARCH_GENRE_LAUNCH, SEARCH_GENRE_SUCCESS, SEARCH_GENRE_FAILURE, genreState),\r\n\tsearchDescription = searchReducerPrototype(SEARCH_DESCRIPTION_LAUNCH, SEARCH_DESCRIPTION_SUCCESS, SEARCH_DESCRIPTION_FAILURE, descriptionState),\r\n\tsearchReleaseDate = searchReducerPrototype(SEARCH_DESCRIPTION_LAUNCH, SEARCH_DESCRIPTION_SUCCESS, SEARCH_DESCRIPTION_FAILURE, releaseDateState),\r\n\tsearchAgeRating = searchReducerPrototype(SEARCH_DESCRIPTION_LAUNCH, SEARCH_DESCRIPTION_SUCCESS, SEARCH_DESCRIPTION_FAILURE, ageRatingState);","import {\r\n\tSEARCH_TITLE_LAUNCH,\r\n\tSEARCH_TITLE_SUCCESS,\r\n\tSEARCH_TITLE_FAILURE,\r\n\r\n\tSEARCH_PEOPLE_LAUNCH,\r\n\tSEARCH_PEOPLE_SUCCESS,\r\n\tSEARCH_PEOPLE_FAILURE,\r\n\r\n\tSEARCH_GENRE_LAUNCH,\r\n\tSEARCH_GENRE_SUCCESS,\r\n\tSEARCH_GENRE_FAILURE,\r\n\r\n\tSEARCH_DESCRIPTION_LAUNCH,\r\n\tSEARCH_DESCRIPTION_SUCCESS,\r\n\tSEARCH_DESCRIPTION_FAILURE,\r\n\r\n\tSEARCH_RELEASE_DATE_LAUNCH,\r\n\tSEARCH_RELEASE_DATE_SUCCESS,\r\n\tSEARCH_RELEASE_DATE_FAILURE,\r\n\r\n\tSEARCH_AGE_RATING_LAUNCH,\r\n\tSEARCH_AGE_RATING_SUCCESS,\r\n\tSEARCH_AGE_RATING_FAILURE,\r\n} from '../reducers/search.reducer';\r\nimport { server } from \"../../APIs\";\r\n\r\n\r\n/* Used for /search route results */\r\nconst searchPrototype = (SEARCH_LAUNCH, SEARCH_SUCCESS, SEARCH_FAILURE, route) => (username, query, page, movies) => {\r\n\tconst createSearchLaunch = payload => ({ type: SEARCH_LAUNCH, payload }),\r\n\t\tcreateSearchSuccess = payload => ({ type: SEARCH_SUCCESS, payload }),\r\n\t\tcreateSearchFailure = payload => ({ type: SEARCH_FAILURE, payload });\r\n\r\n\treturn dispatch => {\r\n\t\tdispatch(createSearchLaunch(query));\r\n\t\tfetch(\r\n\t\t\tserver +\r\n\t\t\t\t`search/${route}?user=${username}&search=${query}&page=${page}${\r\n\t\t\t\t\tmovies ? `&movies=${movies}` : \"\"\r\n\t\t\t\t}`,\r\n\t\t\t{ credentials: 'include' }\r\n\t\t)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(res => {\r\n\t\t\t\tdispatch(createSearchSuccess(res));\r\n\t\t\t})\r\n\t\t\t.catch(e => dispatch(createSearchFailure(e)));\r\n\t};\r\n};\r\n\r\nexport const searchTitle = searchPrototype(SEARCH_TITLE_LAUNCH, SEARCH_TITLE_SUCCESS, SEARCH_TITLE_FAILURE, 'title');\r\nexport const searchPeople = searchPrototype(SEARCH_PEOPLE_LAUNCH, SEARCH_PEOPLE_SUCCESS, SEARCH_PEOPLE_FAILURE, 'people');\r\nexport const searchGenre = searchPrototype(SEARCH_GENRE_LAUNCH, SEARCH_GENRE_SUCCESS, SEARCH_GENRE_FAILURE, 'genre');\r\nexport const searchDescription = searchPrototype(SEARCH_DESCRIPTION_LAUNCH, SEARCH_DESCRIPTION_SUCCESS, SEARCH_DESCRIPTION_FAILURE, 'description');\r\nexport const searchReleaseDate = searchPrototype(SEARCH_RELEASE_DATE_LAUNCH, SEARCH_RELEASE_DATE_SUCCESS, SEARCH_RELEASE_DATE_FAILURE, 'release-date');\r\nexport const searchAgeRating = searchPrototype(SEARCH_AGE_RATING_LAUNCH, SEARCH_AGE_RATING_SUCCESS, SEARCH_AGE_RATING_FAILURE, 'age-rating');\r\n\r\nexport default {\r\n\tsearchTitle,\r\n\tsearchPeople,\r\n\tsearchGenre,\r\n\tsearchDescription,\r\n\tsearchReleaseDate,\r\n\tsearchAgeRating\r\n}","import React, { useContext, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Login from \"./Login\";\r\nimport Footer from \"./Footer\";\r\nimport searchActions from \"../store/actions/search.action\";\r\nimport { updateUser } from \"../store/actions/updateUser.action\";\r\nimport HistoryContext from \"../store/contexts/History.context\";\r\nimport { server } from \"../APIs\";\r\nimport { transitionPage } from \"../Functions\";\r\n\r\nfunction Home() {\r\n\tconst dispatch = useDispatch();\r\n\t/* Used for redirects */\r\n\tconst history = useContext(HistoryContext);\r\n\tconst user = useSelector(store => store.user.result);\r\n\r\n\t/* Enables fading transitions */\r\n\t/* Authenticates user if cached */\r\n\tuseEffect(_ => {\r\n\t\tdocument.getElementById(\"root\").style.opacity = 1;\r\n\t\tdispatch( updateUser(true) );\r\n\t}, []);\r\n\r\n\tconst onSearch = async e => {\r\n\t\te.persist();\r\n\t\te.preventDefault();\r\n\t\ttry {\r\n\t\t\tObject.values(searchActions).forEach(action =>\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\taction(\r\n\t\t\t\t\t\tuser ? user.username : null,\r\n\t\t\t\t\t\te.target.children[0].value,\r\n\t\t\t\t\t\t1\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\te.target.reset();\r\n\t\t\thistory.push(\"/search\");\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n\t};\r\n\r\n\t/* Page transition */\r\n\tfunction onClick(button, route) {\r\n\t\tuser &&\r\n\t\t\tfetch(`${server}home/${user.username}`, {\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\tcredentials: 'include',\r\n\t\t\t\tbody: JSON.stringify({ button }),\r\n\t\t\t})\r\n\t\t\t\t.then(res => !res.ok && console.log(\"Something went wrong\"))\r\n\t\t\t\t.catch(e => console.log(e));\r\n\t\ttransitionPage(history, route);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"container home\">\r\n\t\t\t<Login history={history} />\r\n\t\t\t<div className=\"frame home-frame\">\r\n\t\t\t\t<h1 className=\"logo main-logo\" style={{ userSelect: \"none\" }}>\r\n\t\t\t\t\tChoosie\r\n\t\t\t\t</h1>\r\n\t\t\t\t<form onSubmit={onSearch}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclassName=\"search\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tplaceholder=\"Search actors, genres, directors\"\r\n\t\t\t\t\t\tstyle={{ margin: \"1.5rem 1.5rem\" }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</form>\r\n\t\t\t\t<ul className=\"button-wrapper\">\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"button\"\r\n\t\t\t\t\t\t\tonClick={_ => onClick(\"my_list\", \"/my-list\")}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tMy List\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"button\"\r\n\t\t\t\t\t\t\tonClick={_ => onClick(\"start\", \"/query\")}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tStart\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"button\"\r\n\t\t\t\t\t\t\tonClick={_ => onClick(\"popular\", \"/popular\")}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tPopular\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<Footer />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Home;\r\n","import { ReducerPrototype } from \"./prototype.reducer\";\r\n\r\nexport const MAKE_REQUEST_LAUNCH = \"MAKE_REQUEST_LAUNCH\",\r\n\tMAKE_REQUEST_SUCCESS = \"MAKE_REQUEST_SUCCESS\",\r\n\tMAKE_REQUEST_FAILURE = \"MAKE_REQUEST_FAILURE\";\r\n\r\n/* Used generally */\r\nexport default ReducerPrototype(\r\n\tMAKE_REQUEST_LAUNCH,\r\n\tMAKE_REQUEST_SUCCESS,\r\n\tMAKE_REQUEST_FAILURE,\r\n\tundefined,\r\n\tcallback => setTimeout(callback, 50)\r\n);\r\n","import {\r\n\tMAKE_REQUEST_LAUNCH,\r\n\tMAKE_REQUEST_SUCCESS,\r\n\tMAKE_REQUEST_FAILURE,\r\n} from \"../reducers/makeRequest.reducer\";\r\nimport { server } from \"../../APIs\";\r\n\r\nexport const createMakeRequestLaunch = _ => ({ type: MAKE_REQUEST_LAUNCH }),\r\n\tcreateMakeRequestSuccess = (payload, callback) => ({\r\n\t\ttype: MAKE_REQUEST_SUCCESS,\r\n\t\tpayload,\r\n\t\tcallback,\r\n\t}),\r\n\tcreateMakeRequestFailure = payload => ({\r\n\t\ttype: MAKE_REQUEST_FAILURE,\r\n\t\tpayload,\r\n\t});\r\n\r\n/* Used generally */\r\nexport const makeRequest = (\r\n\troute,\r\n\tquerystring,\r\n\toptions = {},\r\n\tcallback = _ => {}\r\n) => {\r\n\treturn dispatch => {\r\n\t\tdispatch(createMakeRequestLaunch());\r\n\t\tfetch(server + `${route}${querystring ? querystring : \"\"}`, {\r\n\t\t\t...options,\r\n\t\t\tcredentials: 'include',\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\"\r\n\t\t\t},\r\n\t\t})\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(res => {\r\n\t\t\t\tdispatch(createMakeRequestSuccess(res, callback));\r\n\t\t\t})\r\n\t\t\t.catch(e => dispatch(createMakeRequestFailure(e)));\r\n\t};\r\n};\r\n","import React from \"react\";\r\nimport DelayLink from \"./DelayLink\";\r\n\r\nfunction Nav({ withBack, searchValue, page, back, scrollY }) {\r\n\treturn (\r\n\t\t<nav>\r\n\t\t\t<ul>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<DelayLink to=\"/\">Home</DelayLink>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<DelayLink to=\"/my-list\">My List</DelayLink>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<DelayLink to=\"/popular\">Popular</DelayLink>\r\n\t\t\t\t</li>\r\n\t\t\t\t{withBack && (\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<DelayLink\r\n\t\t\t\t\t\t\tto={{\r\n\t\t\t\t\t\t\t\tpathname: back,\r\n\t\t\t\t\t\t\t\tsearchValue,\r\n\t\t\t\t\t\t\t\tpage,\r\n\t\t\t\t\t\t\t\tscrollY,\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tBack\r\n\t\t\t\t\t\t</DelayLink>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t)}\r\n\t\t\t</ul>\r\n\t\t</nav>\r\n\t);\r\n}\r\n\r\nexport default Nav;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { makeRequest } from \"../store/actions/makeRequest.action\";\r\nimport Nav from \"./Nav\";\r\nimport { server } from \"../APIs\";\r\nimport HistoryContext from \"../store/contexts/History.context\";\r\nimport { updateUser } from \"../store/actions/updateUser.action\";\r\nimport { transitionPage } from \"../Functions\";\r\nimport imageAlt from \"../img/image-alt.png\";\r\n\r\nfunction Movie({ location: { searchValue, page, back, scrollY } }) {\r\n\tconst history = useContext(HistoryContext);\r\n\tconst location = useLocation();\r\n\tconst dispatch = useDispatch();\r\n\tconst movie = useSelector(\r\n\t\tstore => store.makeRequest.result && store.makeRequest.result[0]\r\n\t);\r\n\tconst { loading, error } = useSelector(store => store.makeRequest);\r\n\tconst [saving, setSaving] = useState(false);\r\n\tconst [unsaving, setUnsaving] = useState(false);\r\n\tconst [saveError, setSaveError] = useState(null);\r\n\tconst user = useSelector(store => store.user.result);\r\n\r\n\tfunction saveMovie() {\r\n\t\tsetSaving(true);\r\n\t\tfetch(server + `movies?user=${user.username}`, {\r\n\t\t\tcredentials: 'include',\r\n\t\t\tmethod: user.save_history.includes(movie.id) ? \"PUT\" : \"POST\",\r\n\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tmovieID: movie.id,\r\n\t\t\t\tinRecent: user.recent_save_history.includes(movie.id),\r\n\t\t\t}),\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (res.ok) {\r\n\t\t\t\t\tsetSaving(false);\r\n\t\t\t\t\tsetSaveError(null);\r\n\t\t\t\t\tdispatch(updateUser(user.username));\r\n\t\t\t\t} else setSaveError(\"Error saving movie\");\r\n\t\t\t})\r\n\t\t\t.catch(e => setSaveError(\"Error saving movie\"));\r\n\t}\r\n\r\n\tuseEffect(_ => {\r\n\t\tdocument.getElementById(\"root\").style.opacity = 1;\r\n\t}, []);\r\n\r\n\tuseEffect(\r\n\t\t_ =>\r\n\t\t\tdispatch(\r\n\t\t\t\tmakeRequest(\r\n\t\t\t\t\t\"movies\",\r\n\t\t\t\t\t\"?id=\" + location.pathname.split(\"/movies/\")[1]\r\n\t\t\t\t)\r\n\t\t\t),\r\n\t\t[]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t_ => {\r\n\t\t\tconst controller = new AbortController(),\r\n\t\t\t\t{ signal } = controller;\r\n\t\t\tunsaving &&\r\n\t\t\t\t(async _ => {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlet res;\r\n\t\t\t\t\t\tres = await fetch(\r\n\t\t\t\t\t\t\tserver + `movies?user=${user.username}`,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tcredentials: 'include',\r\n\t\t\t\t\t\t\t\tsignal,\r\n\t\t\t\t\t\t\t\tmethod: \"DELETE\",\r\n\t\t\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\t\t\"Content-Type\":\r\n\t\t\t\t\t\t\t\t\t\t\"application/json\" /*, 'Accept': 'application/json' */,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tbody: JSON.stringify({ movieID: unsaving }),\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\t!res.ok && setSaveError(\"Error unsaving movie\");\r\n\r\n\t\t\t\t\t\tlet binsWithMovie = Object.entries(\r\n\t\t\t\t\t\t\tuser.bins\r\n\t\t\t\t\t\t).filter(bin => bin[1].includes(String(unsaving)));\r\n\t\t\t\t\t\tfor (let binWithMovie of binsWithMovie) {\r\n\t\t\t\t\t\t\tres = await fetch(\r\n\t\t\t\t\t\t\t\tserver + `users/${user.username}/bins`,\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tcredentials: 'include',\r\n\t\t\t\t\t\t\t\t\tsignal,\r\n\t\t\t\t\t\t\t\t\tmethod: \"PATCH\",\r\n\t\t\t\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\t\t\t\"Content-Type\":\r\n\t\t\t\t\t\t\t\t\t\t\t\"application/json\" /*, 'Accept': 'application/json' */,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\t\t\t\t\t\tbin: {\r\n\t\t\t\t\t\t\t\t\t\t\t[binWithMovie[0]]: binWithMovie[1].filter(\r\n\t\t\t\t\t\t\t\t\t\t\t\tid => id !== String(unsaving)\r\n\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t!res.ok && setSaveError(\"Error unsaving movie\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tdispatch(updateUser(user.username));\r\n\t\t\t\t\t\tsetUnsaving(false);\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\te.name === \"AbortError\" &&\r\n\t\t\t\t\t\t\tconsole.log(\"Unsave aborted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t})();\r\n\r\n\t\t\treturn _ => controller.abort();\r\n\t\t},\r\n\t\t[unsaving]\r\n\t);\r\n\r\n\tif (!movie) return <div>Error loading movie</div>;\r\n\r\n\treturn (\r\n\t\t<div className=\"movie-page\">\r\n\t\t\t{loading ? (\r\n\t\t\t\t<div>Loading...</div>\r\n\t\t\t) : error ? (\r\n\t\t\t\t<div>Error loading movie</div>\r\n\t\t\t) : (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Nav\r\n\t\t\t\t\t\twithBack\r\n\t\t\t\t\t\tsearchValue={searchValue}\r\n\t\t\t\t\t\tpage={page}\r\n\t\t\t\t\t\tback={back}\r\n\t\t\t\t\t\tscrollY={scrollY}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"movie-page-main\"\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\tflexDirection: \"column\",\r\n\t\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\t\tflexDirection: \"column\",\r\n\t\t\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\t\t\twidth: \"60vw\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<picture>\r\n\t\t\t\t\t\t\t\t<source srcSet={movie.cover_file} />\r\n\t\t\t\t\t\t\t\t<source srcSet={imageAlt} />\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tclassName=\"image-movie\"\r\n\t\t\t\t\t\t\t\t\talt=\"thumbnail\"\r\n\t\t\t\t\t\t\t\t\ttype=\"image/gif\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</picture>\r\n\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tfontWeight: \"bold\",\r\n\t\t\t\t\t\t\t\t\tmargin: \"1rem 0 .2rem 0\",\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{movie.title}\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div>{saveError}</div>\r\n\t\t\t\t\t\t\t{/* Show save option if logged in otherwise link to /register */}\r\n\t\t\t\t\t\t\t{user ? (\r\n\t\t\t\t\t\t\t\tuser.currently_saved.includes(movie.id) ? (\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"button-manage-movie\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={_ => {\r\n\t\t\t\t\t\t\t\t\t\t\tlet confirmed = true;\r\n\t\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t\tObject.values(user.bins)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.reduce(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(acc, cur) => [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...acc,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...cur,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t[]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.includes(String(movie.id))\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfirmed = window.confirm(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"This will remove the movie from all bins. Do you still want to unsave it?\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\tconfirmed && setUnsaving(movie.id);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{unsaving\r\n\t\t\t\t\t\t\t\t\t\t\t? \"Unsaving movie...\"\r\n\t\t\t\t\t\t\t\t\t\t\t: \"Unsave Movie\"}\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"button-manage-movie\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={saveMovie}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{saving\r\n\t\t\t\t\t\t\t\t\t\t\t? \"Saving movie...\"\r\n\t\t\t\t\t\t\t\t\t\t\t: \"Save to My List\"}\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"button-manage-movie\"\r\n\t\t\t\t\t\t\t\t\tonClick={_ =>\r\n\t\t\t\t\t\t\t\t\t\ttransitionPage(history, \"/register\")\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tSign in to save this movie\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{movie.description && (\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName=\"movie-page-description\"\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tmargin: \"2.5rem 0 3rem 0\",\r\n\t\t\t\t\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{movie.description === \"Not available\"\r\n\t\t\t\t\t\t\t\t\t\t? \"Description not available\"\r\n\t\t\t\t\t\t\t\t\t\t: movie.description}\r\n\t\t\t\t\t\t\t\t\t{movie.description !== \"Not available\" && (\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"imdb-credit\">\r\n\t\t\t\t\t\t\t\t\t\t\t-Taken from{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\t\thref={movie.src_url}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\tIMDb\r\n\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<ul className=\"info-movie\">\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<label>Genres: </label>\r\n\t\t\t\t\t\t\t\t{movie.genres && (\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t{movie.genres.join(\", \") ||\r\n\t\t\t\t\t\t\t\t\t\t\t\"Not available\"}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<label>Rating: </label>\r\n\t\t\t\t\t\t\t\t{movie.mpaa_rating && (\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t{movie.mpaa_rating || \"Not available\"}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<label>Duration: </label>\r\n\t\t\t\t\t\t\t\t{movie.duration_in_mins ? (\r\n\t\t\t\t\t\t\t\t\tmovie.duration_in_mins % 60 ? (\r\n\t\t\t\t\t\t\t\t\t\tmovie.duration_in_mins >= 60 ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{Math.floor(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmovie.duration_in_mins / 60\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\th {movie.duration_in_mins % 60}\r\n\t\t\t\t\t\t\t\t\t\t\t\tmin\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{movie.duration_in_mins} min\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t{movie.duration_in_mins % 60}h\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\"Not available\"\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<label>Release Date: </label>\r\n\t\t\t\t\t\t\t\t{movie.release_date && (\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t{movie.release_date.slice(0, 4) ||\r\n\t\t\t\t\t\t\t\t\t\t\t\"Not available\"}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<label>Writers: </label>\r\n\t\t\t\t\t\t\t\t{movie.writers && (\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t{movie.writers.join(\", \") ||\r\n\t\t\t\t\t\t\t\t\t\t\t\"Not available\"}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<label>Directors: </label>\r\n\t\t\t\t\t\t\t\t{movie.directors && (\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t{movie.directors.join(\", \") ||\r\n\t\t\t\t\t\t\t\t\t\t\t\"Not available\"}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<label>Actors: </label>\r\n\t\t\t\t\t\t\t\t{movie.actors && (\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t{movie.actors.join(\", \") ||\r\n\t\t\t\t\t\t\t\t\t\t\t\"Not available\"}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<label>Languages: </label>\r\n\t\t\t\t\t\t\t\t{movie.languages && (\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t{movie.languages.join(\", \") ||\r\n\t\t\t\t\t\t\t\t\t\t\t\"Not available\"}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<label>Countries: </label>\r\n\t\t\t\t\t\t\t\t{movie.countries && (\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t{movie.countries.join(\", \") ||\r\n\t\t\t\t\t\t\t\t\t\t\t\"Not available\"}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Movie;\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport { server } from \"../APIs\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport HistoryContext from \"../store/contexts/History.context\";\r\nimport { updateUser } from \"../store/actions/updateUser.action\";\r\nimport { transitionPage, destroySession } from \"../Functions\";\r\nimport { uuid } from \"uuidv4\";\r\n\r\nconst languageOptions = [\r\n\t\"Afrikaans\",\r\n\t\"Bengali\",\r\n\t\"Burmese\",\r\n\t\"Cantonese\",\r\n\t\"Czech\",\r\n\t\"Dutch\",\r\n\t\"English\",\r\n\t\"Filipino\",\r\n\t\"French\",\r\n\t\"German\",\r\n\t\"Hindi\",\r\n\t\"Hungarian\",\r\n\t\"Indonesian\",\r\n\t\"Italian\",\r\n\t\"Japanese\",\r\n\t\"Korean\",\r\n\t\"Malay\",\r\n\t\"Mandarin\",\r\n\t\"Polish\",\r\n\t\"Portuguese\",\r\n\t\"Punjabi\",\r\n\t\"Romanian\",\r\n\t\"Russian\",\r\n\t\"Spanish\",\r\n\t\"Standard Arabic\",\r\n\t\"Sundanese\",\r\n\t\"Swahili\",\r\n\t\"Swedish\",\r\n\t\"Tagalog\",\r\n\t\"Tamil\",\r\n\t\"Telugu\",\r\n\t\"Thai\",\r\n\t\"Turkish\",\r\n\t\"Ukranian\",\r\n\t\"Vietnamese\",\r\n];\r\n\r\nfunction Register() {\r\n\tconst history = useContext(HistoryContext);\r\n\tconst [continued, setContinued] = useState(false);\r\n\tconst [info, setInfo] = useState({});\r\n\tconst [generalError, setGeneralError] = useState(null);\r\n\tconst [registrationError, setRegistrationError] = useState(null);\r\n\tconst [loginError, setLoginError] = useState(null);\r\n\tconst dispatch = useDispatch();\r\n\r\n\tuseEffect(_ => {\r\n\t\tdocument.getElementById(\"root\").style.opacity = 1;\r\n\t}, []);\r\n\r\n\tfunction submitMainInfo(e) {\r\n\t\tsetRegistrationError(null);\r\n\t\te.persist();\r\n\t\te.preventDefault();\r\n\t\tconst children = e.target.children[1].children;\r\n\t\tif (children[0].children[0].value.includes(\" \")) {\r\n\t\t\tsetRegistrationError(\"Username cannot contain a space\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (\r\n\t\t\t!/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/.exec(\r\n\t\t\t\tchildren[1].children[0].value\r\n\t\t\t)\r\n\t\t) {\r\n\t\t\tsetRegistrationError(\r\n\t\t\t\t\"Password must be at least 8 characters with one of each of the following: upper case letter, lower case letter, number and special character\"\r\n\t\t\t);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (children[1].children[0].value !== children[2].children[0].value) {\r\n\t\t\tsetRegistrationError(\"Passwords must match\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t(async _ => {\r\n\t\t\tconst response = await fetch(\r\n\t\t\t\tserver + \"users/check?user=\" + children[0].children[0].value,\r\n\t\t\t\t{ credentials: 'include' }\r\n\t\t\t);\r\n\t\t\tconst json = await response.json();\r\n\t\t\tif (json.length) {\r\n\t\t\t\tsetRegistrationError(\"Username not available\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tsetInfo({\r\n\t\t\t\tusername: children[0].children[0].value,\r\n\t\t\t\tpassword: children[1].children[0].value,\r\n\t\t\t});\r\n\t\t\tsetContinued(true);\r\n\t\t\te.target.reset();\r\n\t\t})();\r\n\t}\r\n\r\n\tasync function createUser(e) {\r\n\t\tsetGeneralError(null);\r\n\t\tsetRegistrationError(null);\r\n\t\te.persist();\r\n\t\te.preventDefault();\r\n\t\tconst children = e.target.children[1].children;\r\n\t\tif (\r\n\t\t\tchildren[2].children[0].value &&\r\n\t\t\t!/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/.exec(\r\n\t\t\t\tchildren[2].children[0].value\r\n\t\t\t)\r\n\t\t) {\r\n\t\t\tsetRegistrationError(\"Invalid email address\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tawait destroySession();\r\n\t\tfetch(server + \"users\", {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\tcredentials: 'include',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\t...info,\r\n\t\t\t\tname: children[0].children[0].value\r\n\t\t\t\t\t? children[0].children[0].value\r\n\t\t\t\t\t: null,\r\n\t\t\t\tage: children[1].children[0].selectedIndex\r\n\t\t\t\t\t? Number(\r\n\t\t\t\t\t\t\tchildren[1].children[0].options[\r\n\t\t\t\t\t\t\t\tchildren[1].children[0].selectedIndex\r\n\t\t\t\t\t\t\t].text\r\n\t\t\t\t\t  )\r\n\t\t\t\t\t: 0,\r\n\t\t\t\tsex: children[1].children[1].selectedIndex\r\n\t\t\t\t\t? children[1].children[1].options[\r\n\t\t\t\t\t\t\tchildren[1].children[1].selectedIndex\r\n\t\t\t\t\t  ].text\r\n\t\t\t\t\t: null,\r\n\t\t\t\tlanguages: children[1].children[2].selectedIndex\r\n\t\t\t\t\t? [\r\n\t\t\t\t\t\t\tchildren[1].children[2].options[\r\n\t\t\t\t\t\t\t\tchildren[1].children[2].selectedIndex\r\n\t\t\t\t\t\t\t].text,\r\n\t\t\t\t\t  ]\r\n\t\t\t\t\t: null,\r\n\t\t\t\temail: children[2].children[0].value\r\n\t\t\t\t\t? children[2].children[0].value\r\n\t\t\t\t\t: null,\r\n\t\t\t}),\r\n\t\t})\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(_=> {\r\n\t\t\t\tdispatch(updateUser(true));\r\n\t\t\t\ttransitionPage(history, \"/\");\r\n\t\t\t})\r\n\t\t\t.catch(e => setGeneralError(\"Something went wrong\"));\r\n\t\te.target.reset();\r\n\t}\r\n\r\n\tasync function onLogin(e) {\r\n\t\tsetGeneralError(null);\r\n\t\tsetLoginError(null);\r\n\t\te.persist();\r\n\t\te.preventDefault();\r\n\t\tconst username = e.target.children[1].children[0].children[0].value,\r\n\t\t\tpassword = e.target.children[1].children[1].children[0].value;\r\n\t\tif (!username && !password) return;\r\n\t\ttry {\r\n\t\t\tawait destroySession();\r\n\t\t\tconst response = await fetch(server + `users/validate`, {\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\tcredentials: 'include',\r\n\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\tusername,\r\n\t\t\t\t\tpassword,\r\n\t\t\t\t}),\r\n\t\t\t});\r\n\t\t\tconst validLogin = await response.json();\r\n\t\t\tif (!validLogin) {\r\n\t\t\t\tsetLoginError(\"Invalid login\");\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tdispatch(updateUser(username));\r\n\t\t\t\tsetLoginError(null);\r\n\t\t\t\ttransitionPage(history, \"/\");\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tsetGeneralError(\"Something went wrong\");\r\n\t\t}\r\n\t\te.target.reset();\r\n\t}\r\n\r\n\t/* Register has two potential screens */\r\n\treturn !continued ? (\r\n\t\t<div className=\"container\" style={{ flexDirection: \"column\" }}>\r\n\t\t\t{registrationError && (\r\n\t\t\t\t<div style={{ color: \"red\", margin: \"1rem\" }}>\r\n\t\t\t\t\t{registrationError}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t<form className=\"register-1\" onSubmit={submitMainInfo}>\r\n\t\t\t\t<div className=\"prompt-register\">\r\n\t\t\t\t\tPlease enter a username and password\r\n\t\t\t\t</div>\r\n\t\t\t\t<ul\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\tflexDirection: \"column\",\r\n\t\t\t\t\t\twidth: \"80%\",\r\n\t\t\t\t\t\tplaceItems: \"center\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<li\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tmargin: \".25rem\",\r\n\t\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\t\tmaxWidth: \"25rem\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclassName=\"input-register\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"username\"\r\n\t\t\t\t\t\t\tkey=\"username\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tmargin: \".25rem\",\r\n\t\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\t\tmaxWidth: \"25rem\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclassName=\"input-register\"\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tplaceholder=\"password\"\r\n\t\t\t\t\t\t\tkey=\"password\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tmargin: \".25rem\",\r\n\t\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\t\tmaxWidth: \"25rem\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclassName=\"input-register\"\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tplaceholder=\"repeat password\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<button className=\"button-register\">Continue</button>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tonClick={_ => transitionPage(history, \"/\")}\r\n\t\t\t\t\t\tclassName=\"button-register\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tCancel\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t\t{loginError ? (\r\n\t\t\t\t<div style={{ color: \"red\", margin: \"1rem\" }}>{loginError}</div>\r\n\t\t\t) : (\r\n\t\t\t\tgeneralError && (\r\n\t\t\t\t\t<div style={{ color: \"red\" }}>{generalError}</div>\r\n\t\t\t\t)\r\n\t\t\t)}\r\n\t\t\t<form className=\"register-1\" onSubmit={onLogin}>\r\n\t\t\t\t<div className=\"prompt-register\">\r\n\t\t\t\t\tAlready have an account? Log in\r\n\t\t\t\t</div>\r\n\t\t\t\t<ul\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\tflexDirection: \"column\",\r\n\t\t\t\t\t\twidth: \"80%\",\r\n\t\t\t\t\t\tplaceItems: \"center\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<li\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tmargin: \".25rem\",\r\n\t\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\t\tmaxWidth: \"25rem\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclassName=\"input-register\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"username\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tmargin: \".25rem\",\r\n\t\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\t\tmaxWidth: \"25rem\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclassName=\"input-register\"\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tplaceholder=\"password\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t<button className=\"button-register\">Log in</button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t) : (\r\n\t\t<div className=\"container\" style={{ flexDirection: \"column\" }}>\r\n\t\t\t{registrationError ? (\r\n\t\t\t\t<div style={{ color: \"red\", margin: \"1rem\" }}>\r\n\t\t\t\t\t{registrationError}\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\tgeneralError && (\r\n\t\t\t\t\t<div style={{ color: \"red\" }}>{generalError}</div>\r\n\t\t\t\t)\r\n\t\t\t)}\r\n\t\t\t<form className=\"register-1\" onSubmit={createUser}>\r\n\t\t\t\t<div className=\"prompt-register\">\r\n\t\t\t\t\tYou can enter more information here for a better experience\r\n\t\t\t\t</div>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li style={{ margin: \".75rem\" }}>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclassName=\"input-register\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"first name\"\r\n\t\t\t\t\t\t\tkey=\"name\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li style={{ margin: \".75rem\" }} className=\"ul-create-user\">\r\n\t\t\t\t\t\t<select defaultValue=\"default\">\r\n\t\t\t\t\t\t\t<option key=\"-1\" value=\"default\" disabled>\r\n\t\t\t\t\t\t\t\tSelect an age\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t{new Array(126).fill(\"\").map((el, i) => (\r\n\t\t\t\t\t\t\t\t<option key={uuid()}>{i}</option>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t<select defaultValue=\"default\">\r\n\t\t\t\t\t\t\t<option key=\"0\" value=\"default\" disabled>\r\n\t\t\t\t\t\t\t\tSelect a sex\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t<option key=\"1\" value=\"female\">\r\n\t\t\t\t\t\t\t\tFemale\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t<option key=\"2\" value=\"male\">\r\n\t\t\t\t\t\t\t\tMale\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t<option key=\"3\" value=\"other\">\r\n\t\t\t\t\t\t\t\tOther\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t<select defaultValue=\"default\">\r\n\t\t\t\t\t\t\t<option key=\"-1\" value=\"default\" disabled>\r\n\t\t\t\t\t\t\t\tSelect a language\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t{languageOptions.map((language, i) => (\r\n\t\t\t\t\t\t\t\t<option key={uuid()}>{language}</option>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li style={{ margin: \".75rem\" }}>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclassName=\"input-register\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"email\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"prompt-register\"\r\n\t\t\t\t\tstyle={{ marginTop: \".5rem\", marginBottom: \".3rem\" }}\r\n\t\t\t\t>\r\n\t\t\t\t\tYou can also edit these fields later\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<button className=\"button-register\">Sign up</button>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\tclassName=\"button-register\"\r\n\t\t\t\t\t\tonClick={_ => transitionPage(history, \"/\")}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tCancel\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Register;\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { Simulate } from \"react-dom/test-utils\";\r\n\r\nfunction Toggler({ prompt, defaultChecked, onCheck, onUncheck }) {\r\n\tconst checkbox = useRef(null);\r\n\r\n\tuseEffect(_ => {\r\n\t\tif (defaultChecked) {\r\n\t\t\tcheckbox.current.checked = true;\r\n\t\t\tSimulate.change(checkbox.current);\r\n\t\t}\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div style={{ margin: \".2rem\" }}>\r\n\t\t\t<span>{prompt} </span>\r\n\t\t\t<label className=\"toggler\">\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\tref={checkbox}\r\n\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\tlet { style } = e.target.parentElement.children[1];\r\n\t\t\t\t\t\tif (e.target.checked) {\r\n\t\t\t\t\t\t\tstyle.backgroundColor = \"#2196F3\";\r\n\t\t\t\t\t\t\tstyle.boxShadow = \"0 0 1px #2196F3\";\r\n\t\t\t\t\t\t\tstyle.setProperty(\r\n\t\t\t\t\t\t\t\t\"--toggler-translation\",\r\n\t\t\t\t\t\t\t\t\"12.5px\"\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tonCheck && onCheck();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tstyle.backgroundColor = \"#aaa\";\r\n\t\t\t\t\t\t\tstyle.boxShadow = \"none\";\r\n\t\t\t\t\t\t\tstyle.setProperty(\"--toggler-translation\", 0);\r\n\t\t\t\t\t\t\tonUncheck && onUncheck();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\t<span />\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Toggler;\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { makeRequest } from \"../store/actions/makeRequest.action\";\r\nimport HistoryContext from \"../store/contexts/History.context\";\r\nimport { updateUser } from \"../store/actions/updateUser.action\";\r\nimport Toggler from \"./Toggler\";\r\nimport { transitionPage } from \"../Functions\";\r\nimport { uuid } from \"uuidv4\";\r\n\r\nconst languageOptions = [\r\n\t\"Afrikaans\",\r\n\t\"Bengali\",\r\n\t\"Burmese\",\r\n\t\"Cantonese\",\r\n\t\"Czech\",\r\n\t\"Dutch\",\r\n\t\"English\",\r\n\t\"Filipino\",\r\n\t\"French\",\r\n\t\"German\",\r\n\t\"Hindi\",\r\n\t\"Hungarian\",\r\n\t\"Indonesian\",\r\n\t\"Italian\",\r\n\t\"Japanese\",\r\n\t\"Korean\",\r\n\t\"Malay\",\r\n\t\"Mandarin\",\r\n\t\"Polish\",\r\n\t\"Portuguese\",\r\n\t\"Punjabi\",\r\n\t\"Romanian\",\r\n\t\"Russian\",\r\n\t\"Spanish\",\r\n\t\"Standard Arabic\",\r\n\t\"Sundanese\",\r\n\t\"Swahili\",\r\n\t\"Swedish\",\r\n\t\"Tagalog\",\r\n\t\"Tamil\",\r\n\t\"Telugu\",\r\n\t\"Thai\",\r\n\t\"Turkish\",\r\n\t\"Ukranian\",\r\n\t\"Vietnamese\",\r\n];\r\n\r\nlet mounted;\r\n\r\nfunction Profile() {\r\n\tconst [editInfoError, setEditInfoError] = useState(null);\r\n\tconst [changePasswordError, setChangePasswordError] = useState(null);\r\n\tconst location = useLocation();\r\n\tconst history = useContext(HistoryContext);\r\n\tconst dispatch = useDispatch();\r\n\tconst { error } = useSelector(store => store.makeRequest);\r\n\tconst user = useSelector(store => store.user.result);\r\n\tconst [clearing, setClearing] = useState(false);\r\n\tconst [showSaveHistory, setShowSaveHistory] = useState(\r\n\t\tuser && user.show_save_history\r\n\t);\r\n\tconst [showDescriptionOnHover, setShowDescriptionOnHover] = useState(\r\n\t\tuser && user.show_description_on_hover\r\n\t);\r\n\tconst [message, setMessage] = useState(null);\r\n\r\n\tuseEffect(_ => {\r\n\t\tdocument.getElementById(\"root\").style.opacity = 1;\r\n\t}, []);\r\n\r\n\tfunction editInfo(e, signal) {\r\n\t\tif (e) {\r\n\t\t\te.persist();\r\n\t\t\te.preventDefault();\r\n\t\t\tif (\r\n\t\t\t\te.target.children[3].value &&\r\n\t\t\t\t!/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/.exec(\r\n\t\t\t\t\te.target.children[3].value\r\n\t\t\t\t)\r\n\t\t\t) {\r\n\t\t\t\tsetEditInfoError(\"Invalid email address\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst children = e && e.target.children,\r\n\t\t\teditedInfo = {\r\n\t\t\t\tname: e ? children[0].value : user.name,\r\n\t\t\t\tsex: e\r\n\t\t\t\t\t? children[1].children[0].selectedIndex\r\n\t\t\t\t\t\t? children[1].children[0].options[\r\n\t\t\t\t\t\t\t\tchildren[1].children[0].selectedIndex\r\n\t\t\t\t\t\t  ].text\r\n\t\t\t\t\t\t: user.sex\r\n\t\t\t\t\t: user.sex,\r\n\t\t\t\tage: e\r\n\t\t\t\t\t? children[1].children[1].selectedIndex\r\n\t\t\t\t\t\t? Number(\r\n\t\t\t\t\t\t\t\tchildren[1].children[1].options[\r\n\t\t\t\t\t\t\t\t\tchildren[1].children[1].selectedIndex\r\n\t\t\t\t\t\t\t\t].text\r\n\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t: user.age\r\n\t\t\t\t\t: user.age,\r\n\t\t\t\tlanguages: e\r\n\t\t\t\t\t? children[1].children[2].selectedIndex\r\n\t\t\t\t\t\t? [\r\n\t\t\t\t\t\t\t\tchildren[1].children[2].options[\r\n\t\t\t\t\t\t\t\t\tchildren[1].children[2].selectedIndex\r\n\t\t\t\t\t\t\t\t].text,\r\n\t\t\t\t\t\t  ]\r\n\t\t\t\t\t\t: user.languages\r\n\t\t\t\t\t: user.languages,\r\n\t\t\t\temail: e ? children[2].value : user.email,\r\n\t\t\t\tshow_save_history: showSaveHistory,\r\n\t\t\t\tshow_description_on_hover: showDescriptionOnHover,\r\n\t\t\t\trecent_save_history: clearing ? [] : user.recent_save_history,\r\n\t\t\t};\r\n\t\tif (e) {\r\n\t\t\ttry {\r\n\t\t\t\t/* Make sure current user data in browser is updated after changes on server */\r\n\t\t\t\tnew Promise(\r\n\t\t\t\t\tresolve =>\r\n\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\tmakeRequest(`users/${user.username}`, \"\", {\r\n\t\t\t\t\t\t\t\tsignal,\r\n\t\t\t\t\t\t\t\tmethod: \"PATCH\",\r\n\t\t\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\t\t\t\t\tcredentials: 'include',\r\n\t\t\t\t\t\t\t\tbody: JSON.stringify(editedInfo),\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t) || resolve()\r\n\t\t\t\t).then(_ => {\r\n\t\t\t\t\tdispatch(updateUser(user.username));\r\n\t\t\t\t\tsetMessage(\"Info updated successfully\");\r\n\t\t\t\t\te.target.style.transform = \"scale(0)\";\r\n\t\t\t\t\te.target.style.maxHeight = 0;\r\n\t\t\t\t\te.target.parentElement.parentElement.parentElement.parentElement.children[0].style.transform =\r\n\t\t\t\t\t\te.target.parentElement.parentElement.parentElement\r\n\t\t\t\t\t\t\t.children[2].children[0].children[2].style\r\n\t\t\t\t\t\t\t.maxHeight === \"100%\"\r\n\t\t\t\t\t\t\t? \"translate(-6.5rem, 2rem)\"\r\n\t\t\t\t\t\t\t: \"translate(0)\";\r\n\t\t\t\t});\r\n\t\t\t} catch (e) {\r\n\t\t\t\tsetEditInfoError(\"Error editing info\");\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/* Prevent collisions of API requests */\r\n\tuseEffect(\r\n\t\t_ => {\r\n\t\t\tif (!mounted) {\r\n\t\t\t\tmounted = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst controller = new AbortController(),\r\n\t\t\t\t{ signal } = controller;\r\n\t\t\teditInfo(null, signal);\r\n\t\t\treturn _ => controller.abort();\r\n\t\t},\r\n\t\t[clearing, showSaveHistory, showDescriptionOnHover]\r\n\t);\r\n\r\n\tfunction changePassword(e) {\r\n\t\te.persist();\r\n\t\te.preventDefault();\r\n\t\tsetChangePasswordError(null);\r\n\t\tconst children = e.target.children,\r\n\t\t\tcurrentPassword = children[0].value,\r\n\t\t\tnewPassword = children[1].value,\r\n\t\t\trepeatedNewPassword = children[2].value;\r\n\t\tif (\r\n\t\t\t!/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/.exec(\r\n\t\t\t\tnewPassword\r\n\t\t\t)\r\n\t\t) {\r\n\t\t\tsetChangePasswordError(\r\n\t\t\t\t\"Password must be at least 8 characters with one of each of the following: upper case letter, lower case letter, number and special character\"\r\n\t\t\t);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (newPassword !== repeatedNewPassword) {\r\n\t\t\tsetChangePasswordError(\"Passwords must match\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t(async _ => {\r\n\t\t\tawait Promise.resolve().then(_ =>\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tmakeRequest(`users/${user.username}`, null, {\r\n\t\t\t\t\t\tmethod: \"PUT\",\r\n\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\t\t\tcurrentPassword,\r\n\t\t\t\t\t\t\tnewPassword,\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\tif (error) {\r\n\t\t\t\tsetChangePasswordError(\"Error changing password\");\r\n\t\t\t} else {\r\n\t\t\t\tdispatch(updateUser(user.username));\r\n\t\t\t\te.target.style.transform = \"scale(0)\";\r\n\t\t\t\te.target.style.maxHeight = 0;\r\n\t\t\t\te.target.parentElement.parentElement.parentElement.parentElement.children[0].style.transform =\r\n\t\t\t\t\te.target.parentElement.parentElement.parentElement\r\n\t\t\t\t\t\t.children[0].children[0].children[2].style.maxHeight ===\r\n\t\t\t\t\t\"100%\"\r\n\t\t\t\t\t\t? \"translate(6rem, 3.5rem)\"\r\n\t\t\t\t\t\t: \"translate(-6rem, 2rem)\";\r\n\t\t\t\te.target.reset();\r\n\t\t\t\tsetMessage(\"Password changed successfully\");\r\n\t\t\t}\r\n\t\t})();\r\n\t}\r\n\r\n\tasync function clearInfo(type) {\r\n\t\tconst editedInfo = { ...user };\r\n\t\tif (type === \"languages\") user.languages = [];\r\n\t\teditedInfo[type] = null;\r\n\t\tawait Promise.resolve().then(_ =>\r\n\t\t\tdispatch(\r\n\t\t\t\tmakeRequest(`users/${user.username}`, null, {\r\n\t\t\t\t\tmethod: \"PATCH\",\r\n\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\t\tname: editedInfo.name,\r\n\t\t\t\t\t\temail: editedInfo.email,\r\n\t\t\t\t\t\tlanguages: editedInfo.languages,\r\n\t\t\t\t\t\tage: editedInfo.age,\r\n\t\t\t\t\t\tsex: editedInfo.sex,\r\n\t\t\t\t\t\tshow_save_history: user.show_save_history,\r\n\t\t\t\t\t\tshow_description_on_hover:\r\n\t\t\t\t\t\t\tuser.show_description_on_hover,\r\n\t\t\t\t\t\trecent_save_history: user.recent_save_history,\r\n\t\t\t\t\t}),\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t);\r\n\t\tdispatch(updateUser(user.username));\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"profile\">\r\n\t\t\t{user &&\r\n\t\t\tuser.username === location.pathname.split(\"/profile/\")[1] ? (\r\n\t\t\t\t<div className=\"container\" style={{ flexDirection: \"column\" }}>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"register-1\"\r\n\t\t\t\t\t\tstyle={{ transition: \"transform 300ms ease-out\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<label className=\"prompt-register\">Your info</label>\r\n\t\t\t\t\t\t<ul className=\"info-list\">\r\n\t\t\t\t\t\t\t{/* Shows user's personal info with option to clear individual items */}\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"button-register\"\r\n\t\t\t\t\t\t\t\t\tstyle={{ visibility: \"hidden\" }}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tClear\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<label>Username: </label>\r\n\t\t\t\t\t\t\t\t<span>{user.username}</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"button-register\"\r\n\t\t\t\t\t\t\t\t\tonClick={_ => clearInfo(\"name\")}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tClear\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<label>Name: </label>\r\n\t\t\t\t\t\t\t\t<span>{user.name || \"Not specified\"}</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"button-register\"\r\n\t\t\t\t\t\t\t\t\tonClick={_ => clearInfo(\"sex\")}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tClear\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<label>Sex: </label>\r\n\t\t\t\t\t\t\t\t<span>{user.sex || \"Not specified\"}</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"button-register\"\r\n\t\t\t\t\t\t\t\t\tonClick={_ => clearInfo(\"age\")}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tClear\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<label>Age: </label>\r\n\t\t\t\t\t\t\t\t<span>{user.age || \"Not specified\"}</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"button-register\"\r\n\t\t\t\t\t\t\t\t\tonClick={_ => clearInfo(\"languages\")}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tClear\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<label>Language: </label>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tstyle={\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t/* whiteSpace: 'normal' */\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{user.languages != null &&\r\n\t\t\t\t\t\t\t\t\tuser.languages[0] != null\r\n\t\t\t\t\t\t\t\t\t\t? user.languages\r\n\t\t\t\t\t\t\t\t\t\t: \"Not specified\"}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"button-register\"\r\n\t\t\t\t\t\t\t\t\tonClick={_ => clearInfo(\"email\")}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tClear\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<label>Email: </label>\r\n\t\t\t\t\t\t\t\t<span>{user.email || \"Not specified\"}</span>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<ul className=\"profile-lower\">\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t{/* If user wants to add/change personal info */}\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tstyle={{ padding: \"1rem\" }}\r\n\t\t\t\t\t\t\t\tclassName=\"register-1\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"button-register\"\r\n\t\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\t\te.target.blur();\r\n\t\t\t\t\t\t\t\t\t\tlet {\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle,\r\n\t\t\t\t\t\t\t\t\t\t\t} = e.target.parentElement.children[2],\r\n\t\t\t\t\t\t\t\t\t\t\totherOpen =\r\n\t\t\t\t\t\t\t\t\t\t\t\te.target.parentElement\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.parentElement.parentElement\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.children[2].children[0]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.children[2].style\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.maxHeight === \"100%\";\r\n\t\t\t\t\t\t\t\t\t\tstyle.maxHeight = style.maxWidth =\r\n\t\t\t\t\t\t\t\t\t\t\tstyle.maxHeight === \"100%\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t? 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"100%\";\r\n\t\t\t\t\t\t\t\t\t\tstyle.transform =\r\n\t\t\t\t\t\t\t\t\t\t\tstyle.transform === \"scale(0)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"scale(1)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"scale(0)\";\r\n\t\t\t\t\t\t\t\t\t\tif (window.innerWidth < 455) return;\r\n\t\t\t\t\t\t\t\t\t\te.target.parentElement.parentElement.parentElement.parentElement.children[0].style.transform =\r\n\t\t\t\t\t\t\t\t\t\t\tstyle.maxHeight === \"100%\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t? otherOpen\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"translate(6rem, 3rem)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"translate(6rem, 5rem)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: otherOpen\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"translate(-6.5rem, 2rem)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"translate(0)\";\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tEdit Info\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName=\"error-msg\"\r\n\t\t\t\t\t\t\t\t\tstyle={{ color: \"red\" }}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{editInfoError}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<form\r\n\t\t\t\t\t\t\t\t\tonSubmit={editInfo}\r\n\t\t\t\t\t\t\t\t\tstyle={{ transform: \"scale(0)\" }}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\twidth: \"92.5%\",\r\n\t\t\t\t\t\t\t\t\t\t\tmargin: \".35rem\",\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"input-register\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"name\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ margin: \".75rem\" }}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"ul-create-user\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ margin: \".35rem\" }}\r\n\t\t\t\t\t\t\t\t\t\t\tdefaultValue=\"default\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<option\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"default\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\tSelect a sex\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t<option key=\"1\" value=\"female\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tFemale\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t<option key=\"2\" value=\"male\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tMale\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t<option key=\"3\" value=\"other\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tOther\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ margin: \".35rem\" }}\r\n\t\t\t\t\t\t\t\t\t\t\tdefaultValue=\"default\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<option\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey=\"-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"default\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\tSelect an age\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t{new Array(126)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.fill(\"\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t.map((el, i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option key={uuid()}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{i}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ margin: \".35rem\" }}\r\n\t\t\t\t\t\t\t\t\t\t\tdefaultValue=\"default\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<option\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey=\"-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"default\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\tSelect a language\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t{languageOptions.map((lang, i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<option key={uuid()}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{lang}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\twidth: \"92.5%\",\r\n\t\t\t\t\t\t\t\t\t\t\tmargin: \".35rem\",\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"input-register\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"email\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<button className=\"button-register\">\r\n\t\t\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t{/* If user wants to hide/clear history or toggle showing movie descriptions */}\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tpadding: \"1rem\",\r\n\t\t\t\t\t\t\t\t\tfontSize: \"1rem\",\r\n\t\t\t\t\t\t\t\t\twidth: \"90%\",\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName=\"register-1\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Toggler\r\n\t\t\t\t\t\t\t\t\tprompt=\"Show description on hover?\"\r\n\t\t\t\t\t\t\t\t\tdefaultChecked={showDescriptionOnHover}\r\n\t\t\t\t\t\t\t\t\tonCheck={_ =>\r\n\t\t\t\t\t\t\t\t\t\tsetShowDescriptionOnHover(true)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tonUncheck={_ =>\r\n\t\t\t\t\t\t\t\t\t\tsetShowDescriptionOnHover(false)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Toggler\r\n\t\t\t\t\t\t\t\t\tclassName=\"toggler-profile\"\r\n\t\t\t\t\t\t\t\t\tprompt=\"Show Save History?\"\r\n\t\t\t\t\t\t\t\t\tdefaultChecked={showSaveHistory}\r\n\t\t\t\t\t\t\t\t\tonCheck={_ => setShowSaveHistory(true)}\r\n\t\t\t\t\t\t\t\t\tonUncheck={_ => setShowSaveHistory(false)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"button-register\"\r\n\t\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\t\te.target.blur();\r\n\t\t\t\t\t\t\t\t\t\tuser.recent_save_history.length &&\r\n\t\t\t\t\t\t\t\t\t\t\tsetClearing(true);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{user.recent_save_history.length\r\n\t\t\t\t\t\t\t\t\t\t? clearing\r\n\t\t\t\t\t\t\t\t\t\t\t? \"Clearing...\"\r\n\t\t\t\t\t\t\t\t\t\t\t: \"Clear Save History\"\r\n\t\t\t\t\t\t\t\t\t\t: \"History Cleared\"}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t{/* If user wants to change password */}\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tstyle={{ padding: \"1rem\" }}\r\n\t\t\t\t\t\t\t\tclassName=\"register-1\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"button-register\"\r\n\t\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\t\te.target.blur();\r\n\t\t\t\t\t\t\t\t\t\tlet {\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle,\r\n\t\t\t\t\t\t\t\t\t\t\t} = e.target.parentElement.children[2],\r\n\t\t\t\t\t\t\t\t\t\t\totherOpen =\r\n\t\t\t\t\t\t\t\t\t\t\t\te.target.parentElement\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.parentElement.parentElement\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.children[0].children[0]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.children[2].style\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.maxHeight === \"100%\";\r\n\t\t\t\t\t\t\t\t\t\tstyle.maxHeight = style.maxWidth =\r\n\t\t\t\t\t\t\t\t\t\t\tstyle.maxHeight === \"100%\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t? 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"100%\";\r\n\t\t\t\t\t\t\t\t\t\tstyle.transform =\r\n\t\t\t\t\t\t\t\t\t\t\tstyle.transform === \"scale(0)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"scale(1)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"scale(0)\";\r\n\t\t\t\t\t\t\t\t\t\tif (window.innerWidth < 455) return;\r\n\t\t\t\t\t\t\t\t\t\te.target.parentElement.parentElement.parentElement.parentElement.children[0].style.transform =\r\n\t\t\t\t\t\t\t\t\t\t\tstyle.maxHeight === \"100%\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t? otherOpen\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"translate(6rem, 3.5rem)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"translate(-6rem, 2rem)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: otherOpen\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"translate(6rem, 5rem)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"translate(0)\";\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tChange Password\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName=\"error-msg\"\r\n\t\t\t\t\t\t\t\t\tstyle={{ color: \"red\" }}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{changePasswordError}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<form\r\n\t\t\t\t\t\t\t\t\tonSubmit={changePassword}\r\n\t\t\t\t\t\t\t\t\tstyle={{ transform: \"scale(0)\" }}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ width: \"92.5%\" }}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"input-register\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter current password\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ width: \"92.5%\" }}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"input-register\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter new password\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ width: \"92.5%\" }}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"input-register\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Repeat new password\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<button className=\"button-register\">\r\n\t\t\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t{message && (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tcolor: \"white\",\r\n\t\t\t\t\t\t\t\tmargin: \".8rem\",\r\n\t\t\t\t\t\t\t\tpadding: \"1rem\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{message}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tmargin: \"1rem\",\r\n\t\t\t\t\t\t\tbackgroundColor: \"var(--bg-color-dark)\",\r\n\t\t\t\t\t\t\tcolor: \"var(--color-offset)\",\r\n\t\t\t\t\t\t\tminHeight: \"2.3rem\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonMouseOver={e => {\r\n\t\t\t\t\t\t\te.target.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\"var(--color-offset)\";\r\n\t\t\t\t\t\t\te.target.style.color = \"var(--bg-color-dark)\";\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={e => {\r\n\t\t\t\t\t\t\te.target.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\"var(--color-offset)\";\r\n\t\t\t\t\t\t\te.target.style.color = \"var(--bg-color-dark)\";\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonMouseOut={e => {\r\n\t\t\t\t\t\t\te.target.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\"var(--bg-color-dark)\";\r\n\t\t\t\t\t\t\te.target.style.color = \"var(--color-offset)\";\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonBlur={e => {\r\n\t\t\t\t\t\t\te.target.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\"var(--bg-color-dark)\";\r\n\t\t\t\t\t\t\te.target.style.color = \"var(--color-offset)\";\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName=\"button\"\r\n\t\t\t\t\t\tonClick={_ => transitionPage(history, \"/\")}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tBack to Home\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{/* If user tries to access profile page they're not signed in as */}\r\n\t\t\t\t\t<div style={{ margin: \"1rem 0 .25rem 1rem\" }}>\r\n\t\t\t\t\t\tYou must be logged in as \"\r\n\t\t\t\t\t\t{location.pathname.split(\"/profile/\")[1]}\" to view this\r\n\t\t\t\t\t\tpage\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tstyle={{ marginTop: \".5rem\" }}\r\n\t\t\t\t\t\tonMouseOver={e => {\r\n\t\t\t\t\t\t\te.target.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\"var(--bg-color-light)\";\r\n\t\t\t\t\t\t\te.target.style.color = \"var(--color-offset)\";\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonFocus={e => {\r\n\t\t\t\t\t\t\te.target.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\"var(--bg-color-light)\";\r\n\t\t\t\t\t\t\te.target.style.color = \"var(--color-offset)\";\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonMouseOut={e => {\r\n\t\t\t\t\t\t\te.target.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\"var(--color-offset)\";\r\n\t\t\t\t\t\t\te.target.style.color = \"var(--bg-color-dark)\";\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonBlur={e => {\r\n\t\t\t\t\t\t\te.target.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\"var(--color-offset)\";\r\n\t\t\t\t\t\t\te.target.style.color = \"var(--bg-color-dark)\";\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName=\"button\"\r\n\t\t\t\t\t\tonClick={_ => transitionPage(history, \"/\")}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tBack to Home\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Profile;\r\n","import React, { useState } from \"react\";\r\nimport { server } from \"../APIs\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { uuid } from \"uuidv4\";\r\n\r\nfunction StarRater() {\r\n\tconst user = useSelector(store => store.user.result);\r\n\tconst [starRating, setStarRating] = useState(0);\r\n\r\n\tfunction rate(rating) {\r\n\t\tsetStarRating(rating);\r\n\t\ttry {\r\n\t\t\tfetch(server + \"search\", {\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\tcredentials: 'include',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\"Content-Type\":\r\n\t\t\t\t\t\t\"application/json\",\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\trating,\r\n\t\t\t\t\tusername: user ? user.username : null,\r\n\t\t\t\t}),\r\n\t\t\t});\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"star-rater\">\r\n\t\t\t<label style={{ marginRight: \".5rem\" }}>\r\n\t\t\t\tHow would you rate these suggestions?\r\n\t\t\t</label>\r\n\t\t\t<span>\r\n\t\t\t\t{[1, 2, 3, 4, 5].map(el =>\r\n\t\t\t\t\tstarRating >= el ? (\r\n\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\tkey={uuid()}\r\n\t\t\t\t\t\t\tclassName=\"fas fa-star\"\r\n\t\t\t\t\t\t\tonClick={_ => rate(el)}\r\n\t\t\t\t\t\t\tstyle={{ cursor: \"pointer\" }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\tkey={uuid()}\r\n\t\t\t\t\t\t\tclassName=\"far fa-star\"\r\n\t\t\t\t\t\t\tonClick={_ => rate(el)}\r\n\t\t\t\t\t\t\tstyle={{ cursor: \"pointer\" }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)\r\n\t\t\t\t)}\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default StarRater;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport searchActions from \"../store/actions/search.action\";\r\nimport Nav from \"./Nav\";\r\nimport DelayLink from \"./DelayLink\";\r\nimport StarRater from \"./StarRater\";\r\nimport imageAlt from \"../img/image-alt.png\";\r\nimport { uuid } from \"uuidv4\";\r\n\r\nfunction Search({ location }) {\r\n\tconst mounted = useRef(0);\r\n\tconst [page, setPage] = useState(1);\r\n\tconst searchTitle = useSelector(store => store.searchTitle);\r\n\tconst searchPeople = useSelector(store => store.searchPeople);\r\n\tconst searchGenre = useSelector(store => store.searchGenre);\r\n\tconst searchDescription = useSelector(store => store.searchDescription);\r\n\tconst searchResultIDs = [];\r\n\tconst searchResults = [searchTitle, searchPeople, searchGenre, searchDescription]\r\n\t\t.reduce((acc, cur) => [...acc, ...cur.result], [])\r\n\t\t.filter(({ id }) => !searchResultIDs.includes(id) && searchResultIDs.push(id))\r\n\t\t.slice((page - 1) * 10, page * 11);\r\n\tconst dispatch = useDispatch();\r\n\tconst user = useSelector(store => store.user.result);\r\n\r\n\tconst nextButton1 = useRef(null),\r\n\t\tnextButton2 = useRef(null),\r\n\t\tpreviousButton1 = useRef(null),\r\n\t\tpreviousButton2 = useRef(null);\r\n\r\n\tuseEffect(_ => {\r\n\t\t!sessionStorage.getItem(\"searchCache\") &&\r\n\t\t\tsessionStorage.setItem(\r\n\t\t\t\t\"searchCache\",\r\n\t\t\t\tJSON.stringify({ [searchTitle.searchValue]: [[]] })\r\n\t\t\t);\r\n\t});\r\n\r\n\tuseEffect(\r\n\t\t_ => {\r\n\t\t\tlet cache = JSON.parse(sessionStorage.getItem(\"searchCache\"));\r\n\t\t\tif (\r\n\t\t\t\tmounted.current &&\r\n\t\t\t\tcache[searchTitle.searchValue] &&\r\n\t\t\t\t!cache[searchTitle.searchValue][page]\r\n\t\t\t) {\r\n\t\t\t\tcache[searchTitle.searchValue][page] = searchResults.map(movie => movie.id);\r\n\t\t\t\tsessionStorage.setItem(\"searchCache\", JSON.stringify(cache));\r\n\t\t\t}\r\n\t\t},\r\n\t\t[searchTitle, searchPeople, searchGenre, searchDescription]\r\n\t);\r\n\r\n\tuseEffect(_ => {\r\n\t\tdocument.getElementById(\"root\").style.opacity = 1;\r\n\t}, []);\r\n\r\n\t/* Show buttons appropriately while restoring place if they're returning through \"Back\" in Nav */\r\n\tuseEffect(_ => {\r\n\t\tif (!mounted.current && location.page > 1) {\r\n\t\t\tsetTimeout(_ => {\r\n\t\t\t\t[nextButton1, nextButton2].forEach(\r\n\t\t\t\t\tbtn =>\r\n\t\t\t\t\t\t(btn.current.style.transform =\r\n\t\t\t\t\t\t\t\"translateX(calc(190px - 1rem))\")\r\n\t\t\t\t);\r\n\t\t\t\t[previousButton1, previousButton2].forEach(btn => {\r\n\t\t\t\t\tbtn.current.style.opacity = 1;\r\n\t\t\t\t\tbtn.current.style.pointerEvents = \"auto\";\r\n\t\t\t\t});\r\n\t\t\t}, 150);\r\n\t\t}\r\n\t\t// if (!mounted.current && location.withNext)\r\n\t\t!mounted.current && location.page && setPage(location.page);\r\n\t}, []);\r\n\r\n\tuseEffect(\r\n\t\t_ => {\r\n\t\t\tif (!location.page || mounted.current++) {\r\n\t\t\t\tconst cache =\r\n\t\t\t\tsessionStorage.getItem(\"searchCache\")[searchTitle.searchValue] &&\r\n\t\t\t\tsessionStorage.getItem(\"searchCache\")[searchTitle.searchValue][page];\r\n\r\n\t\t\t\tObject.values(searchActions).forEach(action => {\r\n\t\t\t\t\tcache\r\n\t\t\t\t\t\t? dispatch(\r\n\t\t\t\t\t\t\t\taction(\r\n\t\t\t\t\t\t\t\t\tuser ? user.username : null,\r\n\t\t\t\t\t\t\t\t\tsearchTitle.searchValue,\r\n\t\t\t\t\t\t\t\t\tpage,\r\n\t\t\t\t\t\t\t\t\tcache.join(\",\")\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t: dispatch(\r\n\t\t\t\t\t\t\t\taction(\r\n\t\t\t\t\t\t\t\t\tuser ? user.username : null,\r\n\t\t\t\t\t\t\t\t\tsearchTitle.searchValue,\r\n\t\t\t\t\t\t\t\t\tpage\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t[page]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t_ => {\r\n\t\t\tif (searchResults.length < 11 && nextButton1.current) {\r\n\t\t\t\t[nextButton1, nextButton2].forEach(btn => {\r\n\t\t\t\t\tbtn.current.style.opacity = 0;\r\n\t\t\t\t\tbtn.current.style.pointerEvents = \"none\";\r\n\t\t\t\t});\r\n\t\t\t} else if (searchResults && nextButton1.current) {\r\n\t\t\t\t[nextButton1, nextButton2].forEach(btn => {\r\n\t\t\t\t\tbtn.current.style.opacity = 1;\r\n\t\t\t\t\tbtn.current.style.pointerEvents = \"auto\";\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (page === 1 && previousButton1.current) {\r\n\t\t\t\t[previousButton1, previousButton2].forEach(btn => {\r\n\t\t\t\t\tbtn.current.style.opacity = 0;\r\n\t\t\t\t\tbtn.current.style.pointerEvents = \"none\";\r\n\t\t\t\t});\r\n\t\t\t\t[nextButton1, nextButton2].forEach(\r\n\t\t\t\t\tbtn => (btn.current.style.transform = \"translateX(0)\")\r\n\t\t\t\t);\r\n\t\t\t} else if (previousButton1.current) {\r\n\t\t\t\t[previousButton1, previousButton2].forEach(btn => {\r\n\t\t\t\t\tbtn.current.style.opacity = 1;\r\n\t\t\t\t\tbtn.current.style.pointerEvents = \"auto\";\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (page === 2)\r\n\t\t\t\t[nextButton1, nextButton2].forEach(\r\n\t\t\t\t\tbtn =>\r\n\t\t\t\t\t\t(btn.current.style.transform =\r\n\t\t\t\t\t\t\t\"translateX(calc(190px - 1rem))\")\r\n\t\t\t\t);\r\n\t\t},\r\n\t\t[searchTitle]\r\n\t);\r\n\r\n\tfunction onSearch(e) {\r\n\t\te.persist();\r\n\t\te.preventDefault();\r\n\t\tsetPage(1);\r\n\t\tif (!e.target.children[0].value) return;\r\n\t\tconst cache =\r\n\t\t\tsessionStorage.getItem(\"searchCache\")[searchTitle.searchValue] &&\r\n\t\t\tsessionStorage.getItem(\"searchCache\")[searchTitle.searchValue][page];\r\n\t\t\r\n\t\tObject.values(searchActions).forEach(action => {\r\n\t\t\tcache\r\n\t\t\t\t? dispatch(\r\n\t\t\t\t\t\taction(\r\n\t\t\t\t\t\t\tuser ? user.username : null,\r\n\t\t\t\t\t\t\te.target.children[0].value,\r\n\t\t\t\t\t\t\tpage,\r\n\t\t\t\t\t\t\tcache.join(\",\")\r\n\t\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t\t: dispatch(\r\n\t\t\t\t\t\taction(\r\n\t\t\t\t\t\t\tuser ? user.username : null,\r\n\t\t\t\t\t\t\te.target.children[0].value,\r\n\t\t\t\t\t\t\tpage\r\n\t\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t});\r\n\t\te.target.reset();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"search-page\">\r\n\t\t\t<Nav />\r\n\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\tflexDirection: \"column\",\r\n\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\tjustifyContent: \"center\",\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\tflexDirection: \"column\",\r\n\t\t\t\t\t\tjustifyContent: \"center\",\r\n\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\twidth: \"60vw\",\r\n\t\t\t\t\t\tmarginBottom: \"1.5rem\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<label style={{ margin: \".4rem 0\", fontSize: \"1.3rem\" }}>\r\n\t\t\t\t\t\t\"{searchTitle.searchValue}\"\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<StarRater />\r\n\t\t\t\t\t<form onSubmit={onSearch}>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tstyle={{ marginTop: \".8rem\" }}\r\n\t\t\t\t\t\t\tclassName=\"search\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"Search actors, genres, directors\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tvisibility:\r\n\t\t\t\t\t\t(searchTitle.loading || searchPeople.loading || searchGenre.loading || searchDescription.loading) || !searchResults.length ? \"visible\" : \"hidden\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{mounted && (searchTitle.loading || searchPeople.loading || searchGenre.loading || searchDescription.loading)\r\n\t\t\t\t\t\t? \"Loading...\"\r\n\t\t\t\t\t\t: !searchResults.length\r\n\t\t\t\t\t\t\t? \"No results found\"\r\n\t\t\t\t\t\t\t: \"Results Below\"}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"search-results-container\"\r\n\t\t\t\t\tstyle={{ display: searchTitle.result ? \"block\" : \"none\" }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tposiiton: \"relative\",\r\n\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\tjustifyContent: \"space-between\",\r\n\t\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\t\theight: \"100%\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tref={previousButton1}\r\n\t\t\t\t\t\t\tclassName=\"button-v2\"\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tpointerEvents: \"none\",\r\n\t\t\t\t\t\t\t\topacity: 0,\r\n\t\t\t\t\t\t\t\ttransition: \"opacity 550ms ease-in-out\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\te.target.blur();\r\n\t\t\t\t\t\t\t\tsetPage(page - 1);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tPrevious\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tref={nextButton1}\r\n\t\t\t\t\t\t\tclassName=\"button-v2\"\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\topacity: 1,\r\n\t\t\t\t\t\t\t\ttransition:\r\n\t\t\t\t\t\t\t\t\t\"opacity 550ms ease-in-out, transform 550ms ease-in-out\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\te.target.blur();\r\n\t\t\t\t\t\t\t\tsetPage(page + 1);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tNext\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{!searchResults.length ? null : (\r\n\t\t\t\t\t\t<ul className=\"search-results\">\r\n\t\t\t\t\t\t\t{searchResults.slice(0, 10).map(movie => (\r\n\t\t\t\t\t\t\t\t<li key={uuid()}>\r\n\t\t\t\t\t\t\t\t\t{/* Image Link */}\r\n\t\t\t\t\t\t\t\t\t<DelayLink\r\n\t\t\t\t\t\t\t\t\t\tto={{\r\n\t\t\t\t\t\t\t\t\t\t\tpathname: `movies/${movie.id}`,\r\n\t\t\t\t\t\t\t\t\t\t\tsearchValue: searchTitle.searchValue,\r\n\t\t\t\t\t\t\t\t\t\t\tpage,\r\n\t\t\t\t\t\t\t\t\t\t\tback: \"/search\",\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<picture>\r\n\t\t\t\t\t\t\t\t\t\t\t<source\r\n\t\t\t\t\t\t\t\t\t\t\t\tsrcSet={movie.cover_file}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<source srcSet={imageAlt} />\r\n\t\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\t\talt=\"thumbnail\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"image/gif\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</picture>\r\n\t\t\t\t\t\t\t\t\t</DelayLink>\r\n\t\t\t\t\t\t\t\t\t<span className=\"search-results-info\">\r\n\t\t\t\t\t\t\t\t\t\t{/* Text Link*/}\r\n\t\t\t\t\t\t\t\t\t\t<DelayLink\r\n\t\t\t\t\t\t\t\t\t\t\tto={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tpathname: `movies/${movie.id}`,\r\n\t\t\t\t\t\t\t\t\t\t\t\tsearchValue: searchTitle.searchValue,\r\n\t\t\t\t\t\t\t\t\t\t\t\tpage,\r\n\t\t\t\t\t\t\t\t\t\t\t\tback: \"/search\",\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: \"white\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tzIndex: \"5\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label>{movie.title}</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{movie.genres && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t|{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{movie.genres.join(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\", \"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{movie.mpaa_rating !==\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Not available\" && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t| {movie.mpaa_rating}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{movie.duration_in_mins ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmovie.duration_in_mins %\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t60 ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmovie.duration_in_mins >=\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t60 ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{Math.floor(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmovie.duration_in_mins /\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t60\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\th{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{movie.duration_in_mins %\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t60}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmovie.duration_in_mins\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{movie.duration_in_mins %\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t60}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\th\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{movie.release_date && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t|{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{movie.release_date.slice(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t4\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t</DelayLink>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tposiiton: \"relative\",\r\n\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\tjustifyContent: \"space-between\",\r\n\t\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\t\theight: \"100%\",\r\n\t\t\t\t\t\t\tmarginBottom: \"4rem\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tref={previousButton2}\r\n\t\t\t\t\t\t\tclassName=\"button-v2\"\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tpointerEvents: \"none\",\r\n\t\t\t\t\t\t\t\topacity: 0,\r\n\t\t\t\t\t\t\t\ttransition: \"opacity 550ms ease-in-out\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\te.target.blur();\r\n\t\t\t\t\t\t\t\tsetPage(page - 1);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tPrevious\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tref={nextButton2}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\ttransition:\r\n\t\t\t\t\t\t\t\t\t\"transform 550ms ease-in-out, opacity 550ms ease-in-out\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tclassName=\"button-v2\"\r\n\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\te.target.blur();\r\n\t\t\t\t\t\t\t\tsetPage(page + 1);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tNext\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Search;\r\n","import React, { useState, useEffect, useContext, useRef } from \"react\";\r\nimport HistoryContext from \"../store/contexts/History.context\";\r\nimport { transitionPage } from \"../Functions\";\r\nimport { uuid } from \"uuidv4\";\r\n\r\nconst sections = [\r\n\t\t[\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Overview\",\r\n\t\t\t\tcontent: `Choosie is a service for simplifying movie selection. With Choosie you have a guide to help you find the perfect movie, as well as a tool for organizing your movie-watching activity in the future. Additionally, Choosie lends itself as a resource for viewing information related to any movie in its 100,000 title catalog as well as what is new and popular in the Choosie community. If you can't choose a movie, just use Choosie!`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Start\",\r\n\t\t\t\tcontent: `Selecting the 'Start' button on the home screen will initiate a questionnaire to help you find the kind of movies you're looking for. You will be able to select one or more answers to each question, advancing by selecting the blue button in the bottom right during each phase.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"My List\",\r\n\t\t\t\tcontent: `You can navigate to a personal store of saved movies by selecting 'My List' from the home screen or navigation bar. Here you'll be able to keep track of any movies on your \"to-watch\" list and any others you don't want to forget about. You can create multiple 'bins' to store related movies and label them to your preference in order to manage your collection more easily.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Popular\",\r\n\t\t\t\tcontent: `In 'Popular' you can view movies that are currently trending, were released recently, or have been saved by many other users on both a short- and long-term basis.`,\r\n\t\t\t},\r\n\t\t],\r\n\t\t[\r\n\t\t\t{\r\n\t\t\t\tlabel: \"About Me\",\r\n\t\t\t\tcontent: `My name is Nick Barak and I'm a self-taught developer. I recently graduated from the University of California, Santa Barbara with a degree in Economics & Accounting and am currently pursuing a career in software engineering. Choosie is my first major project and I am happy to have been able to utilize a lot of the things that I have learned since I started learning to code in the creation of this application. This project is the first of many to come.`,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Contact\",\r\n\t\t\t\tcontent: `You can contact me by email at nicholasjbarak@gmail.com. I am always looking for feedback for improvement so don't hesitate to send me suggestions or complaints.`,\r\n\t\t\t},\r\n\t\t],\r\n\t],\r\n\tslogan = `Choosie is the solution for those without problems.`;\r\n\r\nfunction Help() {\r\n\tconst history = useContext(HistoryContext);\r\n\tconst frame = useRef(null);\r\n\r\n\tuseEffect(_ => {\r\n\t\tdocument.getElementById(\"root\").style.opacity = 1;\r\n\t}, []);\r\n\r\n\tconst [state, setState] = useState({\r\n\t\tmore: false,\r\n\t\tsections: sections[0],\r\n\t});\r\n\r\n\tuseEffect(\r\n\t\t_ => setState({ ...state, sections: sections[state.more ? 1 : 0] }),\r\n\t\t[state.more]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className=\"container transition-frame help-container\" ref={frame}>\r\n\t\t\t<div className=\"help\">\r\n\t\t\t\t<h2>\r\n\t\t\t\t\tWhat is{\" \"}\r\n\t\t\t\t\t<span style={{ fontWeight: 600 }} className=\"logo\">\r\n\t\t\t\t\t\tChoosie\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t?\r\n\t\t\t\t</h2>\r\n\t\t\t\t<article style={{ width: \"100%\" }}>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<div style={{ fontWeight: \"bold\" }}>{slogan}</div>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{state.sections.map((section, i) => (\r\n\t\t\t\t\t\t\t<section key={uuid()}>\r\n\t\t\t\t\t\t\t\t<label>{section.label}</label>\r\n\t\t\t\t\t\t\t\t<div>{section.content}</div>\r\n\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</article>\r\n\t\t\t\t<div\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"button-v2\"\r\n\t\t\t\t\t\tonClick={_ => transitionPage(history, \"/\")}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tBack to Home\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tstyle={{ right: 0, left: \"auto\" }}\r\n\t\t\t\t\t\tclassName=\"button-v2\"\r\n\t\t\t\t\t\tonClick={_ => {\r\n\t\t\t\t\t\t\tframe.current.style.opacity = 0;\r\n\t\t\t\t\t\t\tsetTimeout(_ => {\r\n\t\t\t\t\t\t\t\tsetState({ ...state, more: !state.more });\r\n\t\t\t\t\t\t\t\thistory.push(\"/help\");\r\n\t\t\t\t\t\t\t\tframe.current.style.opacity = 1;\r\n\t\t\t\t\t\t\t}, 750);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{state.more ? \"Previous\" : \"More\"}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Help;\r\n","import React, { useState, useReducer } from \"react\";\r\nimport { uuid } from \"uuidv4\";\r\n\r\nconst ageRatings = [\"G\", \"PG\", \"PG-13\", \"TV-14\", \"R/TV-MA\", \"NR\"],\r\n\tdurations = [\"30min\", \"1h\", \"1h 30min\", \"2h\", \"2h 30min\", \"3h\"],\r\n\tgenres = [\r\n\t\t\"Action\",\r\n\t\t\"Adventure\",\r\n\t\t\"Animation\",\r\n\t\t\"Biography\",\r\n\t\t\"Comedy\",\r\n\t\t\"Crime\",\r\n\t\t\"Documentary\",\r\n\t\t\"Drama\",\r\n\t\t\"Family\",\r\n\t\t\"Fantasy\",\r\n\t\t\"Horror\",\r\n\t\t\"Musical\",\r\n\t\t\"Mystery\",\r\n\t\t\"Romance\",\r\n\t\t\"Sci-Fi\",\r\n\t\t\"Sport\",\r\n\t\t\"Superhero\",\r\n\t\t\"Thriller\",\r\n\t\t\"War\",\r\n\t\t\"Western\",\r\n\t],\r\n\t//   saveDates = ['2 days ago', '1 week ago', '2 weeks ago', '3 weeks ago', '1 month ago', '2 months ago', '3 months ago', '6 months ago', '1 year ago'],\r\n\treleaseDates = [\r\n\t\t\"1920\",\r\n\t\t\"1930\",\r\n\t\t\"1940\",\r\n\t\t\"1950\",\r\n\t\t\"1960\",\r\n\t\t\"1970\",\r\n\t\t\"1980\",\r\n\t\t\"1990\",\r\n\t\t\"2000\",\r\n\t\t\"2010\",\r\n\t\t\"2020\",\r\n\t],\r\n\tfilterOptionsInit = [[[\"init\", \"init\", \"higher\"], [...ageRatings]]];\r\n\r\nfunction Filter({ displayList, dispatchDisplayList }) {\r\n\tconst [filterOptions, dispatchFilterOptions] = useReducer(\r\n\t\tfilterOptionsReducer,\r\n\t\tJSON.parse(JSON.stringify(filterOptionsInit))\r\n\t);\r\n\tconst [filterID, setFilterID] = useState(0);\r\n\r\n\t/* Give each filter set (two selects and 3 radios) an ID */\r\n\tconst makeFilter = id => (\r\n\t\t<span>\r\n\t\t\t<select\r\n\t\t\t\tdefaultValue={filterOptions[id][0][0]}\r\n\t\t\t\tonChange={e => {\r\n\t\t\t\t\tdispatchFilterOptions({\r\n\t\t\t\t\t\ttype: e.target.options[e.target.selectedIndex].text,\r\n\t\t\t\t\t\tpayload: { id, select: 0 },\r\n\t\t\t\t\t});\r\n\t\t\t\t\tdispatchFilterOptions({\r\n\t\t\t\t\t\ttype: \"init\",\r\n\t\t\t\t\t\tpayload: { id, select: 1 },\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (e.target.parentElement.children.length > 1) {\r\n\t\t\t\t\t\te.target.parentElement.children[1].selectedIndex = 0;\r\n\t\t\t\t\t\te.target.parentElement.children[2].children[0].children[0].checked = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<option key=\"-1\" value=\"init\" disabled>\r\n\t\t\t\t\tSelect an option\r\n\t\t\t\t</option>\r\n\t\t\t\t<option key=\"0\" value=\"Age Rating\">\r\n\t\t\t\t\tAge Rating\r\n\t\t\t\t</option>\r\n\t\t\t\t<option key=\"1\" value=\"Duration\">\r\n\t\t\t\t\tDuration\r\n\t\t\t\t</option>\r\n\t\t\t\t<option key=\"2\" value=\"Genre\">\r\n\t\t\t\t\tGenre\r\n\t\t\t\t</option>\r\n\t\t\t\t{/* <option key=\"3\" value=\"Date Saved\">Date Saved</option> */}\r\n\t\t\t\t<option key=\"4\" value=\"Release Date\">\r\n\t\t\t\t\tRelease Date\r\n\t\t\t\t</option>\r\n\t\t\t</select>\r\n\t\t\t{filterOptions[id][0][0] !== \"init\" && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tstyle={{ marginLeft: \".35rem\" }}\r\n\t\t\t\t\t\tdefaultValue={filterOptions[id][0][1]}\r\n\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\tdispatchFilterOptions({\r\n\t\t\t\t\t\t\t\ttype:\r\n\t\t\t\t\t\t\t\t\te.target.options[e.target.selectedIndex]\r\n\t\t\t\t\t\t\t\t\t\t.text,\r\n\t\t\t\t\t\t\t\tpayload: { id, select: 1 },\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tdispatchDisplayList(\r\n\t\t\t\t\t\t\t\tderiveFilterValues(\r\n\t\t\t\t\t\t\t\t\te.target.parentElement.parentElement\r\n\t\t\t\t\t\t\t\t\t\t.parentElement\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<option key=\"-1\" value=\"init\" disabled>\r\n\t\t\t\t\t\t\tSelect an option\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t{filterOptions[id][1].map(option => (\r\n\t\t\t\t\t\t\t<option key={uuid()} value={option}>\r\n\t\t\t\t\t\t\t\t{option}\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</select>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<label style={{ marginLeft: \".35rem\" }}>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tstyle={{ margin: \".5\" }}\r\n\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\tname={`filterByRadio_${id}`}\r\n\t\t\t\t\t\t\t\tvalue=\"higher\"\r\n\t\t\t\t\t\t\t\tdefaultChecked={\r\n\t\t\t\t\t\t\t\t\tfilterOptions[id][0][2] === \"higher\"\r\n\t\t\t\t\t\t\t\t\t\t? true\r\n\t\t\t\t\t\t\t\t\t\t: false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\t\t\tdispatchFilterOptions({\r\n\t\t\t\t\t\t\t\t\t\ttype: \"higher\",\r\n\t\t\t\t\t\t\t\t\t\tpayload: { id, select: 2 },\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tdispatchDisplayList(\r\n\t\t\t\t\t\t\t\t\t\tderiveFilterValues(\r\n\t\t\t\t\t\t\t\t\t\t\te.target.parentElement.parentElement\r\n\t\t\t\t\t\t\t\t\t\t\t\t.parentElement.parentElement\r\n\t\t\t\t\t\t\t\t\t\t\t\t.parentElement\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\thigher\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<label style={{ marginLeft: \".35rem\" }}>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tstyle={{ margin: \".5\" }}\r\n\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\tname={`filterByRadio_${id}`}\r\n\t\t\t\t\t\t\t\tvalue=\"lower\"\r\n\t\t\t\t\t\t\t\tdefaultChecked={\r\n\t\t\t\t\t\t\t\t\tfilterOptions[id][0][2] === \"lower\"\r\n\t\t\t\t\t\t\t\t\t\t? true\r\n\t\t\t\t\t\t\t\t\t\t: false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\t\t\tdispatchFilterOptions({\r\n\t\t\t\t\t\t\t\t\t\ttype: \"lower\",\r\n\t\t\t\t\t\t\t\t\t\tpayload: { id, select: 2 },\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tdispatchDisplayList(\r\n\t\t\t\t\t\t\t\t\t\tderiveFilterValues(\r\n\t\t\t\t\t\t\t\t\t\t\te.target.parentElement.parentElement\r\n\t\t\t\t\t\t\t\t\t\t\t\t.parentElement.parentElement\r\n\t\t\t\t\t\t\t\t\t\t\t\t.parentElement\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\tlower\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<label style={{ marginLeft: \".35rem\" }}>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\tstyle={{ margin: \".5\" }}\r\n\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\tname={`filterByRadio_${id}`}\r\n\t\t\t\t\t\t\t\tvalue=\"exact\"\r\n\t\t\t\t\t\t\t\tdefaultChecked={\r\n\t\t\t\t\t\t\t\t\tfilterOptions[id][0][2] === \"exact\"\r\n\t\t\t\t\t\t\t\t\t\t? true\r\n\t\t\t\t\t\t\t\t\t\t: false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\t\t\tdispatchFilterOptions({\r\n\t\t\t\t\t\t\t\t\t\ttype: \"exact\",\r\n\t\t\t\t\t\t\t\t\t\tpayload: { id, select: 2 },\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tdispatchDisplayList(\r\n\t\t\t\t\t\t\t\t\t\tderiveFilterValues(\r\n\t\t\t\t\t\t\t\t\t\t\te.target.parentElement.parentElement\r\n\t\t\t\t\t\t\t\t\t\t\t\t.parentElement.parentElement\r\n\t\t\t\t\t\t\t\t\t\t\t\t.parentElement\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</span>\r\n\t);\r\n\r\n\t/* Dynamically render options in second <select> based on which filter currently selected in first <select> */\r\n\tfunction filterOptionsReducer(state, { type, payload }) {\r\n\t\tlet newState = [...state];\r\n\t\tif (type === \"Clear Filters\")\r\n\t\t\treturn JSON.parse(JSON.stringify(filterOptionsInit));\r\n\t\tif (type !== \"New Filter\")\r\n\t\t\tnewState[payload.id][0].splice(payload.select, 1, type);\r\n\r\n\t\tswitch (type) {\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Age Rating\":\r\n\t\t\t\tnewState[payload.id][1].splice(\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tstate[payload.id][1].length,\r\n\t\t\t\t\t...ageRatings\r\n\t\t\t\t);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Duration\":\r\n\t\t\t\tnewState[payload.id][1].splice(\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tstate[payload.id][1].length,\r\n\t\t\t\t\t...durations\r\n\t\t\t\t);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Genre\":\r\n\t\t\t\tnewState[payload.id][1].splice(\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tstate[payload.id][1].length,\r\n\t\t\t\t\t...genres\r\n\t\t\t\t);\r\n\t\t\t\tbreak;\r\n\t\t\t// case 'Date Saved':\r\n\t\t\t//     newState[payload.id][1].splice(0, state[payload.id][1].length, ...saveDates);\r\n\t\t\t//     break;\r\n\t\t\tcase \"Release Date\":\r\n\t\t\t\tnewState[payload.id][1].splice(\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tstate[payload.id][1].length,\r\n\t\t\t\t\t...releaseDates\r\n\t\t\t\t);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"New Filter\":\r\n\t\t\t\tnewState.push(JSON.parse(JSON.stringify(filterOptionsInit[0])));\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn newState;\r\n\t}\r\n\r\n\tconst deriveFilterValues = ul =>\r\n\t\tArray.from(ul.children, li => {\r\n\t\t\tconst children = li.children[0].children;\r\n\t\t\tif (!children[1]) return null;\r\n\t\t\tconst type = children[0].options[children[0].selectedIndex].text,\r\n\t\t\t\tpayload = {\r\n\t\t\t\t\tvalue: children[1].options[children[1].selectedIndex].text,\r\n\t\t\t\t\trange: Array.from(children[2].children).find(\r\n\t\t\t\t\t\tchild => child.children[0].checked\r\n\t\t\t\t\t).children[0].value,\r\n\t\t\t\t};\r\n\t\t\treturn { type, payload };\r\n\t\t}).filter(filter => filter);\r\n\r\n\treturn (\r\n\t\t<form\r\n\t\t\tclassName=\"filter\"\r\n\t\t\tonSubmit={e => {\r\n\t\t\t\te.persist();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tdispatchFilterOptions({ type: \"Clear Filters\" });\r\n\t\t\t\tdispatchDisplayList(null);\r\n\t\t\t\tsetFilterID(0);\r\n\t\t\t\te.target.reset();\r\n\t\t\t}}\r\n\t\t\tstyle={{ marginBottom: \"2rem\" }}\r\n\t\t>\r\n\t\t\t<label>Filter by: </label>\r\n\t\t\t<ul style={{ margin: \".7rem 1.5rem\" }}>\r\n\t\t\t\t<li key=\"0\">\r\n\t\t\t\t\t{makeFilter(0)}\r\n\t\t\t\t\t{filterID === 0 && filterOptions[0][0][0] !== \"init\" && (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"button-filter\"\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\tdispatchFilterOptions({ type: \"New Filter\" });\r\n\t\t\t\t\t\t\t\tsetFilterID(filterID + 1);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t+\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</li>\r\n\t\t\t\t{filterID > 1 &&\r\n\t\t\t\t\tnew Array(filterID - 1)\r\n\t\t\t\t\t\t.fill(null)\r\n\t\t\t\t\t\t.map((_, i) => (\r\n\t\t\t\t\t\t\t<li key={uuid()}>{makeFilter(i + 1)}</li>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t{filterID > 0 && (\r\n\t\t\t\t\t<li key={uuid()}>\r\n\t\t\t\t\t\t{makeFilter(filterID)}\r\n\t\t\t\t\t\t{filterOptions[filterID][0][0] !== \"init\" && (\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"button-filter\"\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\tdispatchFilterOptions({\r\n\t\t\t\t\t\t\t\t\t\ttype: \"New Filter\",\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tsetFilterID(filterID + 1);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t\t\t\t+{\" \"}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</li>\r\n\t\t\t\t)}\r\n\t\t\t</ul>\r\n\t\t\t<button\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tbackgroundColor: \"transparent\",\r\n\t\t\t\t\tborder: \"none\",\r\n\t\t\t\t\tcolor: \"white\",\r\n\t\t\t\t}}\r\n\t\t\t\tonMouseOver={e => {\r\n\t\t\t\t\te.target.style.color = \"red\";\r\n\t\t\t\t\te.target.style.cursor = \"pointer\";\r\n\t\t\t\t}}\r\n\t\t\t\tonMouseOut={e => (e.target.style.color = \"white\")}\r\n\t\t\t>\r\n\t\t\t\tReset\r\n\t\t\t</button>\r\n\t\t</form>\r\n\t);\r\n}\r\n\r\nexport default Filter;\r\n","import React, { useState, useReducer, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { server } from \"../APIs\";\r\nimport { updateUser } from \"../store/actions/updateUser.action\";\r\nimport { makeRequest } from \"../store/actions/makeRequest.action\";\r\nimport Filter from \"./Filter\";\r\nimport imageAlt from \"../img/image-alt.png\";\r\nimport DelayLink from \"./DelayLink\";\r\nimport { uuid } from \"uuidv4\";\r\n\r\nfunction MovieList({\r\n\tmovies,\r\n\theading,\r\n\theadingMargin,\r\n\twithFilter,\r\n\tdisplaying,\r\n\tlowerMargin,\r\n\tlocationdetails,\r\n}) {\r\n\tconst [displayList, dispatchDisplayList] = useReducer(\r\n\t\tdisplayListReducer,\r\n\t\tmovies\r\n\t);\r\n\tconst [unsaving, setUnsaving] = useState(false);\r\n\tconst [removingFromHistory, setRemovingFromHistory] = useState(false);\r\n\tconst [removingFromBin, setRemovingFromBin] = useState(false);\r\n\tconst [manageMovieError, setManageMovieError] = useState(null);\r\n\tconst user = useSelector(store => store.user.result);\r\n\tconst dispatch = useDispatch();\r\n\r\n\tuseEffect(\r\n\t\t_ => {\r\n\t\t\tdispatchDisplayList();\r\n\t\t},\r\n\t\t[movies]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t_ => {\r\n\t\t\tconst controller = new AbortController(),\r\n\t\t\t\t{ signal } = controller;\r\n\r\n\t\t\tremovingFromBin &&\r\n\t\t\t\t(async _ => {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlet res = await fetch(\r\n\t\t\t\t\t\t\tserver + `users/${user.username}/bins`,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tsignal,\r\n\t\t\t\t\t\t\t\tmethod: \"PATCH\",\r\n\t\t\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\t\t\t\t\tcredentials: 'include',\r\n\t\t\t\t\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\t\t\t\t\tbin: {\r\n\t\t\t\t\t\t\t\t\t\t[displaying]: user.bins[\r\n\t\t\t\t\t\t\t\t\t\t\tdisplaying\r\n\t\t\t\t\t\t\t\t\t\t].filter(\r\n\t\t\t\t\t\t\t\t\t\t\tid => id !== String(removingFromBin)\r\n\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\t!res.ok &&\r\n\t\t\t\t\t\t\tsetManageMovieError(\r\n\t\t\t\t\t\t\t\t\"Error removing movie from bin\"\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tdispatch(updateUser(user.username));\r\n\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\tmakeRequest(\r\n\t\t\t\t\t\t\t\t`movies/list`,\r\n\t\t\t\t\t\t\t\t`?movies=${user.bins[displaying].filter(\r\n\t\t\t\t\t\t\t\t\tid => id !== String(removingFromBin)\r\n\t\t\t\t\t\t\t\t)}`\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\te.name === \"AbortError\" &&\r\n\t\t\t\t\t\t\tconsole.log(\"Removal from bin aborted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t})();\r\n\r\n\t\t\tunsaving &&\r\n\t\t\t\t(async _ => {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlet res;\r\n\t\t\t\t\t\tres = await fetch(\r\n\t\t\t\t\t\t\tserver + `movies?user=${user.username}`,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tsignal,\r\n\t\t\t\t\t\t\t\tmethod: \"DELETE\",\r\n\t\t\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\t\t\t\t\tcredentials: 'include',\r\n\t\t\t\t\t\t\t\tbody: JSON.stringify({ movieID: unsaving }),\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\t!res.ok && setManageMovieError(\"Error unsaving movie\");\r\n\r\n\t\t\t\t\t\tlet binsWithMovie = Object.entries(\r\n\t\t\t\t\t\t\tuser.bins\r\n\t\t\t\t\t\t).filter(bin => bin[1].includes(String(unsaving)));\r\n\t\t\t\t\t\tfor (let binWithMovie of binsWithMovie) {\r\n\t\t\t\t\t\t\tres = await fetch(\r\n\t\t\t\t\t\t\t\tserver + `users/${user.username}/bins`,\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tsignal,\r\n\t\t\t\t\t\t\t\t\tmethod: \"PATCH\",\r\n\t\t\t\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tcredentials: 'include',\r\n\t\t\t\t\t\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\t\t\t\t\t\tbin: {\r\n\t\t\t\t\t\t\t\t\t\t\t[binWithMovie[0]]: binWithMovie[1].filter(\r\n\t\t\t\t\t\t\t\t\t\t\t\tid => id !== String(unsaving)\r\n\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t!res.ok &&\r\n\t\t\t\t\t\t\t\tsetManageMovieError(\"Error unsaving movie\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tdispatch(updateUser(user.username));\r\n\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\tmakeRequest(\r\n\t\t\t\t\t\t\t\t`movies/list`,\r\n\t\t\t\t\t\t\t\t`?movies=${\r\n\t\t\t\t\t\t\t\t\tdisplaying === \"Currently Saved\"\r\n\t\t\t\t\t\t\t\t\t\t? user.currently_saved.filter(\r\n\t\t\t\t\t\t\t\t\t\t\t\tid => id !== unsaving\r\n\t\t\t\t\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t\t\t\t\t: user.bins[displaying].filter(\r\n\t\t\t\t\t\t\t\t\t\t\t\tid => id !== String(unsaving)\r\n\t\t\t\t\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t\t\t}`\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\te.name === \"AbortError\" &&\r\n\t\t\t\t\t\t\tconsole.log(\"Unsave aborted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t})();\r\n\r\n\t\t\tremovingFromHistory &&\r\n\t\t\t\t(async _ => {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlet res;\r\n\t\t\t\t\t\tres = await fetch(server + `users/${user.username}`, {\r\n\t\t\t\t\t\t\tsignal,\r\n\t\t\t\t\t\t\tmethod: \"PATCH\",\r\n\t\t\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\t\t\t\tcredentials: 'include',\r\n\t\t\t\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\t\t\t\tname: user.name,\r\n\t\t\t\t\t\t\t\tsex: user.sex,\r\n\t\t\t\t\t\t\t\tage: user.age,\r\n\t\t\t\t\t\t\t\tlanguages: user.languages,\r\n\t\t\t\t\t\t\t\tcountry: user.country,\r\n\t\t\t\t\t\t\t\temail: user.email,\r\n\t\t\t\t\t\t\t\tshow_save_history: user.show_save_history,\r\n\t\t\t\t\t\t\t\trecent_save_history: user.recent_save_history.filter(\r\n\t\t\t\t\t\t\t\t\tid => id !== removingFromHistory\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t!res.ok &&\r\n\t\t\t\t\t\t\tsetManageMovieError(\r\n\t\t\t\t\t\t\t\t\"Error removing movie from save history\"\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tdispatch(updateUser(user.username));\r\n\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\tmakeRequest(\r\n\t\t\t\t\t\t\t\t`movies/list`,\r\n\t\t\t\t\t\t\t\t`?movies=` +\r\n\t\t\t\t\t\t\t\t\tuser.recent_save_history.filter(\r\n\t\t\t\t\t\t\t\t\t\tid => id !== removingFromHistory\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\te.name === \"AbortError\" &&\r\n\t\t\t\t\t\t\tconsole.log(\"Removal from history aborted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t})();\r\n\r\n\t\t\tif (unsaving || removingFromBin || removingFromHistory)\r\n\t\t\t\treturn _ => controller.abort();\r\n\t\t},\r\n\t\t[unsaving, removingFromBin, removingFromHistory]\r\n\t);\r\n\r\n\t/* Only show movies meeting filter requirements */\r\n\tfunction displayListReducer(state, filters) {\r\n\t\tif (!movies) return state;\r\n\t\tconst newState = [...movies];\r\n\t\tif (!filters) return newState;\r\n\t\tfor (let {\r\n\t\t\ttype,\r\n\t\t\tpayload: { value, range },\r\n\t\t} of filters) {\r\n\t\t\tlet ratings, duration;\r\n\t\t\tswitch (type) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"Age Rating\":\r\n\t\t\t\t\tif (range === \"exact\") {\r\n\t\t\t\t\t\tnewState.splice(\r\n\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\tnewState.length,\r\n\t\t\t\t\t\t\t...newState.filter(\r\n\t\t\t\t\t\t\t\tmovie => movie.mpaa_rating === value\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tswitch (value) {\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\treturn state;\r\n\t\t\t\t\t\tcase \"G\":\r\n\t\t\t\t\t\t\tratings = range === \"higher\" ? null : [\"G\"];\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"PG\":\r\n\t\t\t\t\t\t\tratings =\r\n\t\t\t\t\t\t\t\trange === \"higher\"\r\n\t\t\t\t\t\t\t\t\t? [\r\n\t\t\t\t\t\t\t\t\t\t\t\"PG\",\r\n\t\t\t\t\t\t\t\t\t\t\t\"PG-13\",\r\n\t\t\t\t\t\t\t\t\t\t\t\"TV-14\",\r\n\t\t\t\t\t\t\t\t\t\t\t\"R\",\r\n\t\t\t\t\t\t\t\t\t\t\t\"TV-MA\",\r\n\t\t\t\t\t\t\t\t\t\t\t\"NR\",\r\n\t\t\t\t\t\t\t\t\t  ]\r\n\t\t\t\t\t\t\t\t\t: [\"G\", \"PG\"];\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"PG-13\":\r\n\t\t\t\t\t\t\tratings =\r\n\t\t\t\t\t\t\t\trange === \"higher\"\r\n\t\t\t\t\t\t\t\t\t? [\"PG-13\", \"TV-14\", \"R\", \"TV-MA\", \"NR\"]\r\n\t\t\t\t\t\t\t\t\t: [\"G\", \"PG\", \"PG-13\"];\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"TV-14\":\r\n\t\t\t\t\t\t\tratings =\r\n\t\t\t\t\t\t\t\trange === \"higher\"\r\n\t\t\t\t\t\t\t\t\t? [\"TV-14\", \"R\", \"TV-MA\", \"NR\"]\r\n\t\t\t\t\t\t\t\t\t: [\"G\", \"PG\", \"PG-13\", \"TV-14\"];\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"R/TV-MA\":\r\n\t\t\t\t\t\t\tratings =\r\n\t\t\t\t\t\t\t\trange === \"higher\"\r\n\t\t\t\t\t\t\t\t\t? [\"R\", \"TV-MA\", \"NR\"]\r\n\t\t\t\t\t\t\t\t\t: [\r\n\t\t\t\t\t\t\t\t\t\t\t\"G\",\r\n\t\t\t\t\t\t\t\t\t\t\t\"PG\",\r\n\t\t\t\t\t\t\t\t\t\t\t\"PG-13\",\r\n\t\t\t\t\t\t\t\t\t\t\t\"TV-14\",\r\n\t\t\t\t\t\t\t\t\t\t\t\"R\",\r\n\t\t\t\t\t\t\t\t\t\t\t\"TV-MA\",\r\n\t\t\t\t\t\t\t\t\t  ];\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"NR\":\r\n\t\t\t\t\t\t\tratings = range === \"higher\" ? [\"NR\"] : null;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnewState.splice(\r\n\t\t\t\t\t\t0,\r\n\t\t\t\t\t\tnewState.length,\r\n\t\t\t\t\t\t...newState.filter(movie =>\r\n\t\t\t\t\t\t\tratings\r\n\t\t\t\t\t\t\t\t? ratings.includes(movie.mpaa_rating)\r\n\t\t\t\t\t\t\t\t: movies\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"Duration\":\r\n\t\t\t\t\tswitch (value) {\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"30min\":\r\n\t\t\t\t\t\t\tduration = 30;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"1h\":\r\n\t\t\t\t\t\t\tduration = 60;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"1h 30min\":\r\n\t\t\t\t\t\t\tduration = 90;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"2h\":\r\n\t\t\t\t\t\t\tduration = 120;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"2h 30min\":\r\n\t\t\t\t\t\t\tduration = 150;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"3h\":\r\n\t\t\t\t\t\t\tduration = 180;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (range === \"exact\") {\r\n\t\t\t\t\t\tnewState.splice(\r\n\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\tnewState.length,\r\n\t\t\t\t\t\t\t...newState.filter(\r\n\t\t\t\t\t\t\t\tmovie => movie.duration_in_mins === duration\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnewState.splice(\r\n\t\t\t\t\t\t0,\r\n\t\t\t\t\t\tnewState.length,\r\n\t\t\t\t\t\t...newState.filter(movie =>\r\n\t\t\t\t\t\t\trange === \"higher\"\r\n\t\t\t\t\t\t\t\t? movie.duration_in_mins - duration >= 0\r\n\t\t\t\t\t\t\t\t: movie.duration_in_mins - duration <= 0\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"Genre\":\r\n\t\t\t\t\tnewState.splice(\r\n\t\t\t\t\t\t0,\r\n\t\t\t\t\t\tnewState.length,\r\n\t\t\t\t\t\t...newState.filter(\r\n\t\t\t\t\t\t\tmovie =>\r\n\t\t\t\t\t\t\t\tmovie.genres.filter(genre =>\r\n\t\t\t\t\t\t\t\t\tvalue.includes(genre)\r\n\t\t\t\t\t\t\t\t).length\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"Date Saved\":\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"Release Date\":\r\n\t\t\t\t\tif (range === \"exact\") {\r\n\t\t\t\t\t\tnewState.splice(\r\n\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\tnewState.length,\r\n\t\t\t\t\t\t\t...newState.filter(\r\n\t\t\t\t\t\t\t\tmovie =>\r\n\t\t\t\t\t\t\t\t\tmovie.release_date &&\r\n\t\t\t\t\t\t\t\t\tNumber(value) ===\r\n\t\t\t\t\t\t\t\t\t\tNumber(movie.release_date.slice(0, 4))\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnewState.splice(\r\n\t\t\t\t\t\t0,\r\n\t\t\t\t\t\tnewState.length,\r\n\t\t\t\t\t\t...newState.filter(movie => {\r\n\t\t\t\t\t\t\tconst year =\r\n\t\t\t\t\t\t\t\tmovie.release_date &&\r\n\t\t\t\t\t\t\t\tNumber(movie.release_date.slice(0, 4));\r\n\t\t\t\t\t\t\treturn range === \"higher\"\r\n\t\t\t\t\t\t\t\t? year >= Number(value)\r\n\t\t\t\t\t\t\t\t: year <= Number(value);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn newState;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"movie-list\"\r\n\t\t\tstyle={{ flex: 4, marginBottom: lowerMargin || \"11rem\" }}\r\n\t\t>\r\n\t\t\t<div>{manageMovieError}</div>\r\n\t\t\t<h2\r\n\t\t\t\tclassName=\"movie-list-heading\"\r\n\t\t\t\tstyle={{ textAlign: \"center\", marginBottom: headingMargin }}\r\n\t\t\t>\r\n\t\t\t\t{heading}\r\n\t\t\t</h2>\r\n\t\t\t{withFilter && (\r\n\t\t\t\t<Filter\r\n\t\t\t\t\tdisplayList={displayList}\r\n\t\t\t\t\tdispatchDisplayList={dispatchDisplayList}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t\t<ul id=\"display-row\">\r\n\t\t\t\t{displayList.map((movie, i) => (\r\n\t\t\t\t\t<li key={uuid()}>\r\n\t\t\t\t\t\t<DelayLink\r\n\t\t\t\t\t\t\tto={\r\n\t\t\t\t\t\t\t\tlocationdetails\r\n\t\t\t\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\t\t\t\tpathname: `movies/${movie.id}`,\r\n\t\t\t\t\t\t\t\t\t\t\tsearchValue:\r\n\t\t\t\t\t\t\t\t\t\t\t\tlocationdetails.searchValue,\r\n\t\t\t\t\t\t\t\t\t\t\tpage: locationdetails.page,\r\n\t\t\t\t\t\t\t\t\t\t\tback: locationdetails.back,\r\n\t\t\t\t\t\t\t\t\t\t\tscrollY: locationdetails.scrollY,\r\n\t\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t\t: `movies/${movie.id}`\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<picture>\r\n\t\t\t\t\t\t\t\t<source srcSet={movie.cover_file} />\r\n\t\t\t\t\t\t\t\t<source srcSet={imageAlt} />\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\talt=\"thumbnail\"\r\n\t\t\t\t\t\t\t\t\ttype=\"image/gif\"\r\n\t\t\t\t\t\t\t\t\tonDrag={e => {\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\te.dataTransfer.setData(\r\n\t\t\t\t\t\t\t\t\t\t\t\"text/plain\",\r\n\t\t\t\t\t\t\t\t\t\t\tmovie.id\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</picture>\r\n\t\t\t\t\t\t</DelayLink>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName=\"display-row-movie-title\"\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\t\tflexDirection: \"column\",\r\n\t\t\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<DelayLink\r\n\t\t\t\t\t\t\t\tto={\r\n\t\t\t\t\t\t\t\t\tlocationdetails\r\n\t\t\t\t\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\t\t\t\t\tpathname: `movies/${movie.id}`,\r\n\t\t\t\t\t\t\t\t\t\t\t\tsearchValue:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlocationdetails.searchValue,\r\n\t\t\t\t\t\t\t\t\t\t\t\tpage: locationdetails.page,\r\n\t\t\t\t\t\t\t\t\t\t\t\tback: locationdetails.back,\r\n\t\t\t\t\t\t\t\t\t\t\t\tscrollY:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlocationdetails.scrollY,\r\n\t\t\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t\t\t: `movies/${movie.id}`\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttabIndex=\"-1\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<label>{movie.title}</label>\r\n\t\t\t\t\t\t\t</DelayLink>\r\n\t\t\t\t\t\t\t{displaying === \"Save History\" ? (\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"button-manage-movie\"\r\n\t\t\t\t\t\t\t\t\tonClick={_ =>\r\n\t\t\t\t\t\t\t\t\t\tsetRemovingFromHistory(movie.id)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{removingFromHistory\r\n\t\t\t\t\t\t\t\t\t\t? \"Removing...\"\r\n\t\t\t\t\t\t\t\t\t\t: \"Remove\"}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t) : displaying !== \"Popular\" ? (\r\n\t\t\t\t\t\t\t\tdisplaying === \"Currently Saved\" ? (\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"button-manage-movie\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={_ => {\r\n\t\t\t\t\t\t\t\t\t\t\tlet confirmed = true;\r\n\t\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t\tObject.values(user.bins)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.reduce(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(acc, cur) => [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...acc,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...cur,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t[]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.includes(String(movie.id))\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfirmed = window.confirm(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"This will remove the movie from all bins. Do you still want to unsave it?\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\tconfirmed && setUnsaving(movie.id);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{unsaving ? \"Unsaving...\" : \"Unsave\"}\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t) : displaying === \"Query\" ? null : (\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"button-manage-movie\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={_ => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tlet confirmed = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tObject.entries(user.bins)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.reduce(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(acc, [key, val]) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey !==\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplaying\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? [\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...acc,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...val,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  ]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: acc,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.includes(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tString(movie.id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconfirmed = window.confirm(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"This will remove the movie from other bins. Do you still want to unsave it?\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfirmed &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetUnsaving(movie.id);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{unsaving\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"Unsaving...\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"Unsave\"}\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"button-manage-movie\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={_ =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetRemovingFromBin(movie.id)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ marginLeft: \".25rem\" }}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tTake Out\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{(!user || user.show_description_on_hover) && (\r\n\t\t\t\t\t\t\t<div className=\"movie-description\">\r\n\t\t\t\t\t\t\t\t{!movie.description ||\r\n\t\t\t\t\t\t\t\tmovie.description === \"Not available\"\r\n\t\t\t\t\t\t\t\t\t? \"Description not available\"\r\n\t\t\t\t\t\t\t\t\t: movie.description.length >\r\n\t\t\t\t\t\t\t\t\t  (window.outerWith > 455 ? 200 : 125)\r\n\t\t\t\t\t\t\t\t\t? movie.description.slice(\r\n\t\t\t\t\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\t\t\t\t\twindow.innerWidth > 455 ? 200 : 125\r\n\t\t\t\t\t\t\t\t\t  ) + \"...\"\r\n\t\t\t\t\t\t\t\t\t: movie.description}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</li>\r\n\t\t\t\t))}\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default MovieList;\r\n","import React, { useState, useRef, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport Nav from \"./Nav\";\r\nimport MovieList from \"./MovieList\";\r\nimport { makeRequest } from \"../store/actions/makeRequest.action\";\r\nimport StarRater from \"./StarRater\";\r\nimport { server } from \"../APIs\";\r\nimport { slideDisplayRow } from \"../Functions\";\r\nimport { uuid } from \"uuidv4\";\r\n\r\nclass QueryContent {\r\n\tconstructor(prompt, buttonSet, nextButton) {\r\n\t\tthis.prompt = prompt;\r\n\t\tthis.buttonSet = [...buttonSet];\r\n\t\tthis.nextButton = nextButton;\r\n\t}\r\n}\r\n\r\nconst phases = [\r\n\tnew QueryContent(\r\n\t\t\"Feeling a particular genre?\",\r\n\t\t[[\"Action\", \"Comedy\", \"Drama\", \"Thriller\"]],\r\n\t\t\"Show More\"\r\n\t),\r\n\tnew QueryContent(\r\n\t\t\"You can select more than one if you want\",\r\n\t\t[\r\n\t\t\t[\"Romance\", \"Sci-Fi\", \"Fantasy\", \"Family\", \"\"],\r\n\t\t\t[\"Mystery\", \"Documentary\", \"Sport\", \"Western\"],\r\n\t\t\t[\"Animation\", \"Adventure\", \"Superhero\", \"War\", \"\"],\r\n\t\t\t[\"Crime\", \"Musical\", \"Biography\", \"Horror\"],\r\n\t\t\t[\"Action\", \"Comedy\", \"Drama\", \"Thriller\"],\r\n\t\t],\r\n\t\t\"Next\"\r\n\t),\r\n\tnew QueryContent(\r\n\t\t\"Want to apply any time constraints?\",\r\n\t\t[[{ 60: \"1 hour\" }, { 120: \"2 hours\" }, { 150: \"2.5 hours\" }]],\r\n\t\t\"None\"\r\n\t),\r\n\tnew QueryContent(\r\n\t\t\"Time periods preferred?\",\r\n\t\t[\r\n\t\t\t[\"1970s\", \"1980s\", \"Earlier\", \"Any\"],\r\n\t\t\t[\"1990s\", \"2000s\", \"Later\"],\r\n\t\t],\r\n\t\t\"Next\"\r\n\t),\r\n];\r\n\r\n/* Order is weird on small screens */\r\nconst phase3MobileButtonSet = [\r\n\t\"Earlier\",\r\n\t\"1970s\",\r\n\t\"1980s\",\r\n\t\"1990s\",\r\n\t\"2000s\",\r\n\t\"Later\",\r\n\t\"Any\",\r\n];\r\n\r\nfunction Query({ location }) {\r\n\tconst user = useSelector(store => store.user.result);\r\n\tconst [phase, setPhase] = useState(0);\r\n\tconst { prompt, buttonSet, nextButton } = phase < 4 && phases[phase];\r\n\tconst answers = useRef([[]]);\r\n\tlet { result, error } = useSelector(store => store.makeRequest);\r\n\tconst resultIDs = [];\r\n\tresult = result.filter(({ id }) => !resultIDs.includes(id) && resultIDs.push(id));\r\n\tconst [set, setSet] = useState(1);\r\n\tconst dispatch = useDispatch();\r\n\tconst mainNextButton = useRef(null);\r\n\tconst mainNextButton2 = useRef(null);\r\n\tconst mainPrevButton = useRef(null);\r\n\tconst mainPrevButton2 = useRef(null);\r\n\tconst frame = useRef(null);\r\n\tconst frame2 = useRef(null);\r\n\tconst mounted = useRef(false);\r\n\r\n\tuseEffect(_ => {\r\n\t\tdocument.getElementById(\"root\").style.opacity = 1;\r\n\t}, []);\r\n\r\n\t/* If user returning through Nav \"Back\" button */\r\n\tuseEffect(_ => {\r\n\t\tif (location.searchValue) {\r\n\t\t\tanswers.current = location.searchValue;\r\n\t\t\tsetPhase(4);\r\n\t\t\tsetSet(location.page);\r\n\t\t}\r\n\t}, []);\r\n\r\n\t/* Get results of query on phase 4 */\r\n\tuseEffect(\r\n\t\t_ => {\r\n\t\t\tif (phase > 3) {\r\n\t\t\t\tconst genres = answers.current[0].length\r\n\t\t\t\t\t\t? `&genres=${answers.current[0]}`\r\n\t\t\t\t\t\t: \"\",\r\n\t\t\t\t\ttimeConstraint = answers.current[1].length\r\n\t\t\t\t\t\t? answers.current[1][0] !== \"none\" &&\r\n\t\t\t\t\t\t  `&timeConstraint=${answers.current[1]}`\r\n\t\t\t\t\t\t: \"\",\r\n\t\t\t\t\ttimePeriods =\r\n\t\t\t\t\t\tanswers.current[2].length &&\r\n\t\t\t\t\t\t!answers.current[2].includes(\"Any\")\r\n\t\t\t\t\t\t\t? `&timePeriods=${answers.current[2]}`\r\n\t\t\t\t\t\t\t: \"\";\r\n\r\n\t\t\t\tdocument.getElementsByClassName(\r\n\t\t\t\t\t\"transition-frame\"\r\n\t\t\t\t)[0].style.opacity = 1;\r\n\t\t\t\tsetTimeout(\r\n\t\t\t\t\t_ =>\r\n\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\tmakeRequest(\r\n\t\t\t\t\t\t\t\t`start`,\r\n\t\t\t\t\t\t\t\t(genres || timeConstraint || timePeriods) &&\r\n\t\t\t\t\t\t\t\t\t\"?set=\" +\r\n\t\t\t\t\t\t\t\t\t\tset +\r\n\t\t\t\t\t\t\t\t\t\tgenres +\r\n\t\t\t\t\t\t\t\t\t\ttimeConstraint +\r\n\t\t\t\t\t\t\t\t\t\ttimePeriods,\r\n\t\t\t\t\t\t\t\t{},\r\n\t\t\t\t\t\t\t\tslideDisplayRow(200, null, 3)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t300\r\n\t\t\t\t);\r\n\t\t\t\tif (!mounted.current && location.page > 1) {\r\n\t\t\t\t\tsetTimeout(_ => {\r\n\t\t\t\t\t\t[mainNextButton, mainNextButton2].forEach(btn => {\r\n\t\t\t\t\t\t\tif (btn.current)\r\n\t\t\t\t\t\t\t\tbtn.current.style.transform =\r\n\t\t\t\t\t\t\t\t\t\"translateX(calc(190px - 1rem))\";\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t[mainPrevButton, mainPrevButton2].forEach(btn => {\r\n\t\t\t\t\t\t\tif (btn.current) {\r\n\t\t\t\t\t\t\t\tbtn.current.style.opacity = 1;\r\n\t\t\t\t\t\t\t\tbtn.current.style.pointerEvents = \"auto\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}, 200);\r\n\t\t\t\t\tmounted.current = true;\r\n\t\t\t\t}\r\n\t\t\t} else if (phase > 1) answers.current.push([]);\r\n\t\t},\r\n\t\t[phase, set]\r\n\t);\r\n\r\n\t/* Make sure buttons show proper color */\r\n\tfunction manageFilters(e) {\r\n\t\te.preventDefault();\r\n\t\tlet { style } = e.target;\r\n\t\tlet index = phase ? phase - 1 : phase;\r\n\t\tif (phase === 2) {\r\n\t\t\te.target.style.backgroundColor = \"var(--color-offset)\";\r\n\t\t\te.target.style.color = \"var(--bg-color-dark)\";\r\n\t\t\tanswers.current[1] = [e.target.value];\r\n\t\t\tframe.current.style.opacity = 0;\r\n\t\t\tsetTimeout(_ => {\r\n\t\t\t\tsetPhase(phase + 1);\r\n\t\t\t\tframe.current.style.opacity = 1;\r\n\t\t\t}, 750);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (answers.current[index].includes(e.target.textContent)) {\r\n\t\t\tanswers.current[index] = answers.current[index].filter(filter =>\r\n\t\t\t\tindex === 1\r\n\t\t\t\t\t? filter !== e.target.value\r\n\t\t\t\t\t: filter !== e.target.textContent\r\n\t\t\t);\r\n\t\t\tstyle.backgroundColor = \"var(--color-offset)\";\r\n\t\t\tstyle.color = \"var(--bg-color-dark)\";\r\n\t\t} else {\r\n\t\t\tstyle.backgroundColor = \"var(--bg-color-dark)\";\r\n\t\t\tstyle.color = \"var(--color-offset)\";\r\n\t\t\tanswers.current[index] = [\r\n\t\t\t\t...answers.current[index],\r\n\t\t\t\te.target.textContent,\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"query\">\r\n\t\t\t<Nav />\r\n\r\n\t\t\t{phase < 4 && (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"container\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\tzIndex: \"-1\",\r\n\t\t\t\t\t\theight: \"100vh\",\r\n\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"frame transition-frame\" ref={frame}>\r\n\t\t\t\t\t\t<h2 className=\"query-prompt\">{prompt}</h2>\r\n\t\t\t\t\t\t{/* Display buttons differently depending on screen size. Add effects. Make sure button values added to collection of question answers when clicked */}\r\n\t\t\t\t\t\t{window.innerWidth > 455 || ![1, 3].includes(phase) ? (\r\n\t\t\t\t\t\t\tbuttonSet.map((set, i) => (\r\n\t\t\t\t\t\t\t\t<ul\r\n\t\t\t\t\t\t\t\t\tkey={uuid()}\r\n\t\t\t\t\t\t\t\t\tclassName=\"button-wrapper button-wrapper-full\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{(_ => {\r\n\t\t\t\t\t\t\t\t\t\tconst buttons =\r\n\t\t\t\t\t\t\t\t\t\t\tphase === 0 && user\r\n\t\t\t\t\t\t\t\t\t\t\t\t? Object.entries(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.genre_selection\r\n\t\t\t\t\t\t\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.sort(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t([, a], [, b]) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tb - a\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map(([key]) => key)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.slice(0, 4)\r\n\t\t\t\t\t\t\t\t\t\t\t\t: set;\r\n\t\t\t\t\t\t\t\t\t\treturn buttons.map((button, j) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<li key={uuid()}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={manageFilters}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? phase === 1 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  answers.current[0].includes(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--color-offset)\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--bg-color-dark)\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(-bg-color-dark)\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--color-offset)\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvisibility:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"hidden\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tphase === 2 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tObject.keys(button)[0]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonMouseOver={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--bg-color-dark)\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.color =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--color-offset)\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonFocus={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--bg-color-dark)\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.color =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--color-offset)\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonMouseOut={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanswers.current[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tphase > 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? phase - 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: phase\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t] &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!answers.current[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tphase > 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? phase - 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: phase\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t].includes(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.textContent\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--color-offset)\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.color =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--bg-color-dark)\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonBlur={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanswers.current[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tphase === 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? phase - 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: phase\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t] &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!answers.current[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tphase > 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? phase - 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: phase\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t].includes(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.textContent\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--color-offset)\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.color =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--bg-color-dark)\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{phase === 2\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? Object.values(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  )[0]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: button}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t));\r\n\t\t\t\t\t\t\t\t\t})()}\r\n\t\t\t\t\t\t\t\t\t{i === buttonSet.length - 1 && (\r\n\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"button query-next\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (user && phase === 1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfetch(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tserver +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"start?user=\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.username,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcredentials: 'include',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Content-Type\":\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"application/json\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbody: JSON.stringify(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgenres: answers.current[0].map(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanswer => ({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[answer]:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.genre_selection[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanswer\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t] +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tframe.current.style.opacity = 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout(_ => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetPhase(phase + 1);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (frame.current)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tframe.current.style.opacity = 1;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (frame2.current)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tframe2.current.style.opacity = 1;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}, 750);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...e.target\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parentElement\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parentElement\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parentElement\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.children,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.slice(1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.forEach(ul =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...ul.children,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t].forEach(li => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tli.children[0].style.color =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--bg-color-dark\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tli.children[0].style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--color-offset)\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{nextButton}\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<ul className=\"button-wrappper button-wrapper-mobile\">\r\n\t\t\t\t\t\t\t\t{(phase === 3\r\n\t\t\t\t\t\t\t\t\t? phase3MobileButtonSet\r\n\t\t\t\t\t\t\t\t\t: buttonSet\r\n\t\t\t\t\t\t\t\t\t\t\t.reduce(\r\n\t\t\t\t\t\t\t\t\t\t\t\t(acc, cur) => [...acc, ...cur],\r\n\t\t\t\t\t\t\t\t\t\t\t\t[]\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t.filter(btn => btn)\r\n\t\t\t\t\t\t\t\t).map((button, i, buttons) => (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<li key={uuid()}>\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={manageFilters}\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? phase === 1 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  answers.current[0].includes(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  )\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--color-offset)\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--bg-color-dark)\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(-bg-color-dark)\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--color-offset)\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvisibility:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"hidden\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tphase === 2 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tObject.keys(button)[0]\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonMouseOver={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--bg-color-dark)\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.color =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--color-offset)\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonFocus={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--bg-color-dark)\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.color =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--color-offset)\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonMouseOut={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tanswers.current[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tphase > 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? phase - 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: phase\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t] &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t!answers.current[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tphase > 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? phase - 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: phase\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t].includes(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.textContent\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--color-offset)\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.color =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--bg-color-dark)\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonBlur={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tanswers.current[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tphase === 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? phase - 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: phase\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t] &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t!answers.current[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tphase > 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? phase - 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: phase\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t].includes(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.textContent\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--color-offset)\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.color =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--bg-color-dark)\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{phase === 2\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? Object.values(button)[0]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: button}\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t{i === buttons.length - 1 && (\r\n\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"button query-next\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (user && phase === 1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfetch(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tserver +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"start?user=\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.username,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcredentials:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'include',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmethod:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"POST\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Content-Type\":\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"application/json\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbody: JSON.stringify(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgenres: answers.current[0].map(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanswer => ({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[answer]:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.genre_selection[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanswer\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t] +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tframe.current.style.opacity = 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout(_ => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetPhase(phase + 1);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (frame.current)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tframe.current.style.opacity = 1;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (frame2.current)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tframe2.current.style.opacity = 1;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}, 750);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...e.target\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parentElement\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parentElement\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.parentElement\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.children,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.slice(1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.forEach(ul =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...ul.children,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t].forEach(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tli => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tli.children[0].style.color =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--bg-color-dark\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tli.children[0].style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--color-offset)\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{nextButton}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t<div style={{ color: \"red\" }}>\r\n\t\t\t\t{error && \"Error loading movies\"}\r\n\t\t\t</div>\r\n\t\t\t{phase > 3 && (\r\n\t\t\t\t<div\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tdisplay: phase < 4 ? \"none\" : \"block\",\r\n\t\t\t\t\t\topacity: 0,\r\n\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tref={frame2}\r\n\t\t\t\t\tclassName=\"transition-frame\"\r\n\t\t\t\t>{result && result.length && <>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"button-v2-container\"\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\tjustifyContent: \"space-between\",\r\n\t\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\t\ttop: \"1.5rem\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"button-v2\"\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tpointerEvents: \"none\",\r\n\t\t\t\t\t\t\t\topacity: 0,\r\n\t\t\t\t\t\t\t\tleft: \"1.5rem\",\r\n\t\t\t\t\t\t\t\ttransition: \"opacity 550ms ease-in-out\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\tif (set === 2) {\r\n\t\t\t\t\t\t\t\t\t[e.target, mainPrevButton2.current].forEach(\r\n\t\t\t\t\t\t\t\t\t\tbtn => {\r\n\t\t\t\t\t\t\t\t\t\t\tbtn.style.opacity = 0;\r\n\t\t\t\t\t\t\t\t\t\t\tbtn.parentElement.children[1].style.transform =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"translateX(0)\";\r\n\t\t\t\t\t\t\t\t\t\t\tbtn.style.pointerEvents = \"none\";\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\te.target.blur();\r\n\t\t\t\t\t\t\t\tslideDisplayRow(0, null, 2);\r\n\t\t\t\t\t\t\t\tsetSet(set - 1);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tref={mainPrevButton}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tPrevious\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tleft: \"1.5rem\",\r\n\t\t\t\t\t\t\t\ttransition: \"transform 550ms ease-in-out\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tclassName=\"button-v2\"\r\n\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\tif (set === 1) {\r\n\t\t\t\t\t\t\t\t\t[e.target, mainNextButton2.current].forEach(\r\n\t\t\t\t\t\t\t\t\t\tbtn => {\r\n\t\t\t\t\t\t\t\t\t\t\tbtn.style.transform =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"translateX(calc(190px - 1rem))\";\r\n\t\t\t\t\t\t\t\t\t\t\tbtn.parentElement.children[0].style.opacity = 1;\r\n\t\t\t\t\t\t\t\t\t\t\tbtn.parentElement.children[0].style.pointerEvents =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"auto\";\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\te.target.blur();\r\n\t\t\t\t\t\t\t\tslideDisplayRow(0, null, 1);\r\n\t\t\t\t\t\t\t\tsetSet(set + 1);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tref={mainNextButton}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tNext\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div> </>}\r\n\t\t\t\t\t<MovieList\r\n\t\t\t\t\t\tmovies={result || []}\r\n\t\t\t\t\t\theading={result ? result.length\r\n\t\t\t\t\t\t\t? \"Here are some movies you might be interested in\"\r\n\t\t\t\t\t\t\t: \"No results found\"\r\n\t\t\t\t\t\t: \"Error loading movies\"}\r\n\t\t\t\t\t\tdisplaying=\"Query\"\r\n\t\t\t\t\t\tlowerMargin=\"4rem\"\r\n\t\t\t\t\t\theadingMargin=\"3.5rem\"\r\n\t\t\t\t\t\tlocationdetails={{\r\n\t\t\t\t\t\t\tsearchValue: answers.current,\r\n\t\t\t\t\t\t\tpage: set,\r\n\t\t\t\t\t\t\tback: \"/query\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{result && result.length && <>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\tjustifyContent: \"center\",\r\n\t\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\t\tmarginBottom: \"9.25rem\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<StarRater />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"button-v2-container\"\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\tjustifyContent: \"space-between\",\r\n\t\t\t\t\t\t\tbottom: \"5rem\",\r\n\t\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"button-v2\"\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tpointerEvents: \"none\",\r\n\t\t\t\t\t\t\t\topacity: 0,\r\n\t\t\t\t\t\t\t\tleft: \"1.5rem\",\r\n\t\t\t\t\t\t\t\ttransition: \"opacity 550ms ease-in-out\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\tif (set === 2) {\r\n\t\t\t\t\t\t\t\t\t[e.target, mainPrevButton.current].forEach(\r\n\t\t\t\t\t\t\t\t\t\tbtn => {\r\n\t\t\t\t\t\t\t\t\t\t\tbtn.style.opacity = 0;\r\n\t\t\t\t\t\t\t\t\t\t\tbtn.parentElement.children[1].style.transform =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"translateX(0)\";\r\n\t\t\t\t\t\t\t\t\t\t\tbtn.style.pointerEvents = \"none\";\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\te.target.blur();\r\n\t\t\t\t\t\t\t\tslideDisplayRow(0, null, 2);\r\n\t\t\t\t\t\t\t\tsetSet(set - 1);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tref={mainPrevButton2}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tPrevious\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tleft: \"1.5rem\",\r\n\t\t\t\t\t\t\t\ttransition: \"transform 550ms ease-in-out\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tclassName=\"button-v2\"\r\n\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\tif (set === 1) {\r\n\t\t\t\t\t\t\t\t\t[e.target, mainNextButton.current].forEach(\r\n\t\t\t\t\t\t\t\t\t\tbtn => {\r\n\t\t\t\t\t\t\t\t\t\t\tbtn.style.transform =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"translateX(calc(190px - 1rem))\";\r\n\t\t\t\t\t\t\t\t\t\t\tbtn.parentElement.children[0].style.opacity = 1;\r\n\t\t\t\t\t\t\t\t\t\t\tbtn.parentElement.children[0].style.pointerEvents =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"auto\";\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\te.target.blur();\r\n\t\t\t\t\t\t\t\tslideDisplayRow(0, null, 1);\r\n\t\t\t\t\t\t\t\tsetSet(set + 1);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tref={mainNextButton2}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tNext\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t</>}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Query;\r\n","import { ReducerPrototype } from \"./prototype.reducer\";\r\n\r\nexport const GET_CURRENTLY_SAVED_LAUNCH = \"GET_CURRENTLY_SAVED_LAUNCH\",\r\n\tGET_CURRENTLY_SAVED_SUCCESS = \"GET_CURRENTLY_SAVED_SUCCESS\",\r\n\tGET_CURRENTLY_SAVED_FAILURE = \"GET_CURRENTLY_SAVED_FAILURE\";\r\n\r\n/* Used for /my-list route */\r\nexport default ReducerPrototype(\r\n\tGET_CURRENTLY_SAVED_LAUNCH,\r\n\tGET_CURRENTLY_SAVED_SUCCESS,\r\n\tGET_CURRENTLY_SAVED_FAILURE\r\n);\r\n","import {\r\n\tGET_CURRENTLY_SAVED_LAUNCH,\r\n\tGET_CURRENTLY_SAVED_SUCCESS,\r\n\tGET_CURRENTLY_SAVED_FAILURE,\r\n} from \"../reducers/getCurrentlySaved.reducer\";\r\nimport { server } from \"../../APIs\";\r\nimport { ActionPrototype } from \"./prototype.action\";\r\n\r\n/* Used for /my-list route */\r\nexport const getCurrentlySaved = ActionPrototype(\r\n\tGET_CURRENTLY_SAVED_LAUNCH,\r\n\tGET_CURRENTLY_SAVED_SUCCESS,\r\n\tGET_CURRENTLY_SAVED_FAILURE,\r\n\tserver + `movies/list?movies=!{1}!`\r\n);\r\n","/* Reusable Action Configuration */\r\nexport function ActionPrototype(\r\n\tLAUNCH_TYPE,\r\n\tSUCCESS_TYPE,\r\n\tFAILURE_TYPE,\r\n\turl,\r\n\toptions = {}\r\n) {\r\n\treturn (...params) => {\r\n\t\tparams.forEach((param, i) => {\r\n\t\t\turl = url.replace(`!{${i + 1}}!`, param);\r\n\t\t});\r\n\t\treturn dispatch => {\r\n\t\t\tdispatch({ type: LAUNCH_TYPE });\r\n\t\t\tfetch(url, { ...options, credentials: 'include' })\r\n\t\t\t\t.then(res => res.json())\r\n\t\t\t\t.then(payload => {\r\n\t\t\t\t\tdispatch({ type: SUCCESS_TYPE, payload });\r\n\t\t\t\t})\r\n\t\t\t\t.catch(payload => dispatch({ type: FAILURE_TYPE, payload }));\r\n\t\t};\r\n\t};\r\n}\r\n","import React, { useState, createContext } from \"react\";\r\n\r\nexport const BinManagerContext = createContext(false);\r\n\r\nexport function BinManagerProvider({ children }) {\r\n\tconst [binManagerOpen, setBinManagerOpen] = useState(false);\r\n\r\n\treturn (\r\n\t\t<BinManagerContext.Provider value={[binManagerOpen, setBinManagerOpen]}>\r\n\t\t\t{children}\r\n\t\t</BinManagerContext.Provider>\r\n\t);\r\n}\r\n\r\nexport default BinManagerContext;\r\n","import React, { useState, useContext } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { server } from \"../APIs\";\r\nimport BinManagerContext from \"../store/contexts/BinManager.context.js\";\r\nimport { updateUser } from \"../store/actions/updateUser.action\";\r\nimport { makeRequest } from \"../store/actions/makeRequest.action\";\r\nimport { uuid } from \"uuidv4\";\r\n\r\nfunction BinManager({ movies, displaying, setDisplaying }) {\r\n\tconst dispatch = useDispatch();\r\n\tconst user = useSelector(store => store.user.result);\r\n\tconst [error, setError] = useState(null);\r\n\tconst [deleteBin, setDeleteBin] = useState(true);\r\n\tconst [addMovie, setAddMovie] = useState(true);\r\n\tconst [updateBinClicked, setUpdateBinClicked] = useState(false);\r\n\tconst [binToUpdate, setBinToUpdate] = useState(null);\r\n\tconst [, setBinManagerOpen] = useContext(BinManagerContext);\r\n\r\n\tasync function manageBins(\r\n\t\te,\r\n\t\tmethod,\r\n\t\tbin,\r\n\t\tcallback,\r\n\t\terrorhandler = _ => console.log(\"Error managing bins\", e)\r\n\t) {\r\n\t\te.persist();\r\n\t\te.preventDefault();\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(\r\n\t\t\t\tserver + `users/${user.username}/bins`,\r\n\t\t\t\t{\r\n\t\t\t\t\tmethod,\r\n\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\t\tcredentials: 'include',\r\n\t\t\t\t\tbody: JSON.stringify({ bin }),\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\tsetError(null) || response.ok\r\n\t\t\t\t? callback && callback()\r\n\t\t\t\t: errorhandler();\r\n\t\t} catch (e) {\r\n\t\t\terrorhandler();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction createBin(e) {\r\n\t\te.persist();\r\n\t\te.preventDefault();\r\n\t\tif (\r\n\t\t\tObject.keys(user.bins).includes(\r\n\t\t\t\te.target.children[1].children[0].value\r\n\t\t\t)\r\n\t\t)\r\n\t\t\treturn setError(\"Bin already exists\");\r\n\t\tuser &&\r\n\t\t\tmanageBins(\r\n\t\t\t\te,\r\n\t\t\t\t\"POST\",\r\n\t\t\t\t{ [e.target.children[1].children[0].value]: [] },\r\n\t\t\t\t_ => dispatch(updateUser(user.username)),\r\n\t\t\t\t_ => setError(\"Error creating bin\")\r\n\t\t\t);\r\n\t\te.target.reset();\r\n\t}\r\n\r\n\tfunction deleteOrEmptyBin(e) {\r\n\t\te.persist();\r\n\t\te.preventDefault();\r\n\t\tconst bin =\r\n\t\t\te.target.children[1].children[0].options[\r\n\t\t\t\te.target.children[1].children[0].selectedIndex\r\n\t\t\t].text;\r\n\t\tuser &&\r\n\t\t\tmanageBins(\r\n\t\t\t\te,\r\n\t\t\t\tdeleteBin ? \"DELETE\" : \"PUT\",\r\n\t\t\t\tdeleteBin ? bin : { [bin]: [] },\r\n\t\t\t\t_ => {\r\n\t\t\t\t\tdispatch(updateUser(user.username));\r\n\t\t\t\t\tif (displaying === bin && deleteBin) {\r\n\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\tmakeRequest(\r\n\t\t\t\t\t\t\t\t\"movies/list\",\r\n\t\t\t\t\t\t\t\t\"?movies=\" +\r\n\t\t\t\t\t\t\t\t\tmovies.map(movie => movie.id).join(\",\")\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tsetDisplaying(\"Currently Saved\");\r\n\t\t\t\t\t} else if (!deleteBin) {\r\n\t\t\t\t\t\tdispatch(makeRequest(\"movies/list\", \"?movies=\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t_ =>\r\n\t\t\t\t\tsetError(`Error ${deleteBin ? \"deleting\" : \"emptying\"} bin`)\r\n\t\t\t);\r\n\t}\r\n\r\n\tfunction updateBin(e) {\r\n\t\te.persist();\r\n\t\te.preventDefault();\r\n\t\tconst toUpdate =\r\n\t\t\te.target.children[1].children[0].options[\r\n\t\t\t\te.target.children[1].children[0].selectedIndex\r\n\t\t\t];\r\n\t\tif (!updateBinClicked) {\r\n\t\t\tsetUpdateBinClicked(true);\r\n\t\t\tsetBinToUpdate(toUpdate.text);\r\n\t\t} else {\r\n\t\t\tconst updatedMovies = addMovie\r\n\t\t\t\t? [...user.bins[binToUpdate], toUpdate.value]\r\n\t\t\t\t: user.bins[binToUpdate].filter(\r\n\t\t\t\t\t\tmovie => movie !== toUpdate.value\r\n\t\t\t\t  );\r\n\t\t\tuser &&\r\n\t\t\t\tfetch(server + `users/${user.username}/bins`, {\r\n\t\t\t\t\tcredentials: 'include',\r\n\t\t\t\t\tmethod: \"PATCH\",\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\"Content-Type\":\r\n\t\t\t\t\t\t\t\"application/json\" /*, 'Accept': 'application/json' */,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\t\tbin: { [binToUpdate]: updatedMovies },\r\n\t\t\t\t\t}),\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.ok) {\r\n\t\t\t\t\t\tdispatch(updateUser(user.username));\r\n\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\tmakeRequest(\r\n\t\t\t\t\t\t\t\t\"movies/list\",\r\n\t\t\t\t\t\t\t\t\"?movies=\" + updatedMovies\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else setError(\"Error updating bin\");\r\n\t\t\t\t});\r\n\t\t\tsetDisplaying(binToUpdate);\r\n\t\t\tsetUpdateBinClicked(false);\r\n\t\t\tsetBinToUpdate(null);\r\n\t\t\te.target.reset();\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={{\r\n\t\t\t\tposition: \"absolute\",\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tleft: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\tbottom: \"33%\",\r\n\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\tjustifyContent: \"center\",\r\n\t\t\t\talignItems: \"center\",\r\n\t\t\t\tpointerEvents: \"none\",\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t<div className=\"bin-manager\">\r\n\t\t\t\t{error && <div style={{ color: \"red\" }}>{error}</div>}\r\n\t\t\t\t<label style={{ fontWeight: 600 }}>Bin Manager</label>\r\n\t\t\t\t<form onSubmit={createBin}>\r\n\t\t\t\t\t<label className=\"label-bin-manager\">\r\n\t\t\t\t\t\tCreate a new bin\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<span className=\"bin-manager-form-p2\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tborderRadius: \"2px\",\r\n\t\t\t\t\t\t\t\tpadding: \".25rem\",\r\n\t\t\t\t\t\t\t\theight: \"1.35rem\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"Enter bin name\"\r\n\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<button className=\"button-register\">Create Bin</button>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</form>\r\n\t\t\t\t{Object.keys(user.bins).length > 0 && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<form onSubmit={updateBin}>\r\n\t\t\t\t\t\t\t<label className=\"label-bin-manager\">\r\n\t\t\t\t\t\t\t\tAdd movies to a bin or remove them\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<span className=\"bin-manager-form-p2\">\r\n\t\t\t\t\t\t\t\t<select style={{ marginRight: \".5rem\" }}>\r\n\t\t\t\t\t\t\t\t\t{user.currently_saved.length ? (\r\n\t\t\t\t\t\t\t\t\t\tupdateBinClicked ? (\r\n\t\t\t\t\t\t\t\t\t\t\taddMovie ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\tuser.currently_saved\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.filter(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!user.bins[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbinToUpdate\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t].includes(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tString(id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.map((id, i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={uuid()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmovies.find(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmovie =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmovie.id ===\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t).title\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\tuser.bins[binToUpdate].map(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t(id, i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={uuid()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmovies.find(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmovie =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmovie.id ===\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tNumber(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t).title\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t) : addMovie ? (\r\n\t\t\t\t\t\t\t\t\t\t\tObject.entries(user.bins).filter(\r\n\t\t\t\t\t\t\t\t\t\t\t\t([, val]) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tval.length <\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.currently_saved.length\r\n\t\t\t\t\t\t\t\t\t\t\t).length ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\tObject.entries(user.bins)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.filter(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t([, val]) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tval.length <\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.currently_saved\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.length\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.map(([key], i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option key={uuid()}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{key}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<option key=\"-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tAll bins are full\r\n\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t) : Object.entries(user.bins).filter(\r\n\t\t\t\t\t\t\t\t\t\t\t\t([, val]) => val.length\r\n\t\t\t\t\t\t\t\t\t\t  ).length ? (\r\n\t\t\t\t\t\t\t\t\t\t\tObject.entries(user.bins)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.filter(([, val]) => val.length)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.map(([key], i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option key={uuid()}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{key}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<option key=\"-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tAll bins are empty\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<option key=\"-1\">\r\n\t\t\t\t\t\t\t\t\t\t\tYou don't have any saved movies!\r\n\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t{!updateBinClicked &&\r\n\t\t\t\t\t\t\t\t\tuser.currently_saved.length > 0 && (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"addOrRemoveMovie\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"Add\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultChecked\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={e =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetAddMovie(!addMovie)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\tAdd\r\n\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ marginLeft: \".35rem\" }}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"addOrRemoveMovie\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"Remove\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={e =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetAddMovie(!addMovie)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\tRemove\r\n\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{Object.entries(user.bins).filter(([, val]) =>\r\n\t\t\t\t\t\t\t\t\taddMovie\r\n\t\t\t\t\t\t\t\t\t\t? val.length <\r\n\t\t\t\t\t\t\t\t\t\t  user.currently_saved.length\r\n\t\t\t\t\t\t\t\t\t\t: val.length > 0\r\n\t\t\t\t\t\t\t\t).length > 0 && (\r\n\t\t\t\t\t\t\t\t\t<button className=\"button-register\">\r\n\t\t\t\t\t\t\t\t\t\t{updateBinClicked\r\n\t\t\t\t\t\t\t\t\t\t\t? \"Update Bin\"\r\n\t\t\t\t\t\t\t\t\t\t\t: addMovie\r\n\t\t\t\t\t\t\t\t\t\t\t? \"Add To\"\r\n\t\t\t\t\t\t\t\t\t\t\t: \"Remove From\"}\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t<form onSubmit={deleteOrEmptyBin}>\r\n\t\t\t\t\t\t\t<label className=\"label-bin-manager\">\r\n\t\t\t\t\t\t\t\tDelete or empty a bin\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<span className=\"bin-manager-form-p2\">\r\n\t\t\t\t\t\t\t\t<select style={{ marginRight: \".5rem\" }}>\r\n\t\t\t\t\t\t\t\t\t{Object.entries(user.bins)\r\n\t\t\t\t\t\t\t\t\t\t.filter(\r\n\t\t\t\t\t\t\t\t\t\t\t([, val]) => deleteBin || val.length\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t.map((bin, i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<option key={uuid()}>{bin}</option>\r\n\t\t\t\t\t\t\t\t\t\t)).length ? (\r\n\t\t\t\t\t\t\t\t\t\tObject.entries(user.bins)\r\n\t\t\t\t\t\t\t\t\t\t\t.filter(\r\n\t\t\t\t\t\t\t\t\t\t\t\t([, val]) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdeleteBin || val.length\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t.map(([key], i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<option key={uuid()}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{key}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<option key=\"-1\">\r\n\t\t\t\t\t\t\t\t\t\t\tAll bins are empty\r\n\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"deleteOrEmptyBin\"\r\n\t\t\t\t\t\t\t\t\t\tvalue=\"Delete\"\r\n\t\t\t\t\t\t\t\t\t\tdefaultChecked\r\n\t\t\t\t\t\t\t\t\t\tonChange={e => setDeleteBin(!deleteBin)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\tDelete\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<label style={{ marginLeft: \".35rem\" }}>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"deleteOrEmptyBin\"\r\n\t\t\t\t\t\t\t\t\t\tvalue=\"Empty\"\r\n\t\t\t\t\t\t\t\t\t\tonChange={e => setDeleteBin(!deleteBin)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\tEmpty{\" \"}\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t{Object.entries(user.bins)\r\n\t\t\t\t\t\t\t\t\t.filter(\r\n\t\t\t\t\t\t\t\t\t\t([, val]) => deleteBin || val.length\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t.map((bin, i) => (\r\n\t\t\t\t\t\t\t\t\t\t<option key={uuid()}>{bin}</option>\r\n\t\t\t\t\t\t\t\t\t)).length > 0 && (\r\n\t\t\t\t\t\t\t\t\t<button className=\"button-register\">\r\n\t\t\t\t\t\t\t\t\t\t{deleteBin ? \"Delete\" : \"Empty\"} Bin\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t\t{Object.keys(user.bins).length > 0 && (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"button-register\"\r\n\t\t\t\t\t\tonClick={_ => setBinManagerOpen(false)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tClose\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default BinManager;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { makeRequest } from \"../store/actions/makeRequest.action\";\r\nimport { getCurrentlySaved } from \"../store/actions/getCurrentlySaved.action\";\r\nimport Nav from \"./Nav\";\r\nimport MovieList from \"./MovieList\";\r\nimport BinManager from \"./BinManager\";\r\nimport BinManagerContext from \"../store/contexts/BinManager.context.js\";\r\nimport DelayLink from \"./DelayLink\";\r\nimport { server } from \"../APIs\";\r\nimport { updateUser } from \"../store/actions/updateUser.action\";\r\nimport { slideDisplayRow } from \"../Functions\";\r\nimport { uuid } from \"uuidv4\";\r\n\r\nexport default function MyList() {\r\n\tconst dispatch = useDispatch();\r\n\tconst { result, error } = useSelector(store => store.makeRequest);\r\n\tconst [binManagerOpen, setBinManagerOpen] = useContext(BinManagerContext);\r\n\tconst [showBins, setShowBins] = useState(false);\r\n\tconst user = useSelector(store => store.user.result);\r\n\tconst currentlySaved = useSelector(store => store.currentlySaved.result);\r\n\tconst [displaying, setDisplaying] = useState(\"Currently Saved\");\r\n\tconst [creatingBin, setCreatingBin] = useState(false);\r\n\tconst [creatingBinError, setCreatingBinError] = useState(null);\r\n\tconst [updatingBinError, setUpdatingBinError] = useState(null);\r\n\r\n\tuseEffect(_ => {\r\n\t\tdocument.getElementById(\"root\").style.opacity = 1;\r\n\t}, []);\r\n\r\n\tuseEffect(_ => {\r\n\t\tif (user) {\r\n\t\t\tdispatch(\r\n\t\t\t\tmakeRequest(\r\n\t\t\t\t\t\"movies/list\",\r\n\t\t\t\t\t\"?movies=\" + user.currently_saved.join(\",\"),\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t_ => slideDisplayRow(50, false)\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\tdispatch(getCurrentlySaved(user.currently_saved));\r\n\t\t}\r\n\t}, []);\r\n\r\n\tuseEffect(\r\n\t\t_ => {\r\n\t\t\tif (!showBins) setCreatingBin(false);\r\n\t\t},\r\n\t\t[showBins]\r\n\t);\r\n\r\n\tasync function createBin(e) {\r\n\t\te.persist();\r\n\t\te.preventDefault();\r\n\t\tconst binName = e.target.children[0].value;\r\n\t\ttry {\r\n\t\t\tif (Object.keys(user.bins).includes(binName))\r\n\t\t\t\treturn setCreatingBinError(\"Bin already exists\");\r\n\t\t\tsetCreatingBinError(null);\r\n\t\t\tconst response = await fetch(\r\n\t\t\t\tserver + `users/${user.username}/bins`,\r\n\t\t\t\t{\r\n\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\tcredentials: 'include',\r\n\t\t\t\t\tbody: JSON.stringify({ bin: { [binName]: [] } }),\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\tif (response.ok) {\r\n\t\t\t\tdispatch(updateUser(user.username));\r\n\t\t\t} else setCreatingBinError(\"Error creating bin\");\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(e);\r\n\t\t} finally {\r\n\t\t\tif (!Object.keys(user.bins).includes(binName)) {\r\n\t\t\t\tsetCreatingBin(false);\r\n\t\t\t\te.target.reset();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/* Add movie to bin on drag and drop */\r\n\tasync function updateBin(e) {\r\n\t\te.persist();\r\n\t\te.preventDefault();\r\n\t\tsetUpdatingBinError(null);\r\n\t\tlet res;\r\n\t\tconst id = e.dataTransfer.getData(\"text/plain\").split(\"/movies/\")[1];\r\n\t\ttry {\r\n\t\t\tif (!user.currently_saved.includes(Number(id))) {\r\n\t\t\t\tres = await fetch(server + `movies?user=${user.username}`, {\r\n\t\t\t\t\tmethod: \"PUT\",\r\n\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\t\tcredentials: 'include',\r\n\t\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\t\tmovieID: Number(id),\r\n\t\t\t\t\t\tinRecent: true,\r\n\t\t\t\t\t}),\r\n\t\t\t\t});\r\n\t\t\t\t!res.ok && setUpdatingBinError(\"Error updating bin\");\r\n\t\t\t}\r\n\r\n\t\t\tres = await fetch(server + `users/${user.username}/bins`, {\r\n\t\t\t\tmethod: \"PATCH\",\r\n\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\tcredentials: 'include',\r\n\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\tbin: {\r\n\t\t\t\t\t\t[e.target.textContent]: [\r\n\t\t\t\t\t\t\t...user.bins[e.target.textContent],\r\n\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t},\r\n\t\t\t\t}),\r\n\t\t\t});\r\n\t\t\tres.ok\r\n\t\t\t\t? dispatch(updateUser(user.username))\r\n\t\t\t\t: setUpdatingBinError(\"Error updating bin\");\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n\t}\r\n\r\n\tconst onClickYourBins = e => {\r\n\t\te.preventDefault();\r\n\t\tlet { style } = e.target.parentElement.children[1];\r\n\t\tif (showBins) {\r\n\t\t\tstyle.maxHeight = 0;\r\n\t\t\tstyle.transform = \"scaleY(0)\";\r\n\t\t} else {\r\n\t\t\tstyle.maxHeight = \"100%\";\r\n\t\t\tstyle.transform = \"scaleY(1)\";\r\n\t\t}\r\n\t\tsetShowBins(!showBins);\r\n\t\tsetCreatingBinError(null);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"my-list\"\r\n\t\t\tstyle={{ display: \"flex\", overflow: \"hidden\" }}\r\n\t\t>\r\n\t\t\t<div style={{ display: \"flex\", flexDirection: \"column \" }}>\r\n\t\t\t\t<Nav />\r\n\t\t\t\t{user && (\r\n\t\t\t\t\t<ul className=\"sidebar\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\t\tclassName=\"sidebar-li-hover\"\r\n\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\tif (displaying !== \"Currently Saved\")\r\n\t\t\t\t\t\t\t\t\t\tslideDisplayRow();\r\n\t\t\t\t\t\t\t\t\tsetTimeout(\r\n\t\t\t\t\t\t\t\t\t\t_ =>\r\n\t\t\t\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\t\t\t\tmakeRequest(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"movies/list\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"?movies=\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.currently_saved.join(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\",\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t_ =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tslideDisplayRow(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t150,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t150\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\tsetDisplaying(\"Currently Saved\");\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\ttabIndex=\"0\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tCurrently Saved\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{user.show_save_history && (\r\n\t\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\t\tclassName=\"sidebar-li-hover\"\r\n\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\tif (displaying !== \"Save History\")\r\n\t\t\t\t\t\t\t\t\t\tslideDisplayRow();\r\n\t\t\t\t\t\t\t\t\tsetTimeout(\r\n\t\t\t\t\t\t\t\t\t\t_ =>\r\n\t\t\t\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\t\t\t\tmakeRequest(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"movies/list\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"?movies=\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.recent_save_history.join(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\",\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t_ =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tslideDisplayRow(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t150,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t150\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\tsetDisplaying(\"Save History\");\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\ttabIndex=\"0\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tSave History\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\tonFocus={e =>\r\n\t\t\t\t\t\t\t\t\t\t\t(e.target.style.color = showBins\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"white\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"var(--color-offset)\")\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tonBlur={e =>\r\n\t\t\t\t\t\t\t\t\t\t\t(e.target.style.color = showBins\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"var(--color-offset)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"red\")\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\ttabIndex=\"0\"\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\toutline: \"none\",\r\n\t\t\t\t\t\t\t\t\t\t\tcursor: \"pointer\",\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tonClick={onClickYourBins}\r\n\t\t\t\t\t\t\t\t\t\tonKeyDown={e =>\r\n\t\t\t\t\t\t\t\t\t\t\te.keyCode === 13 &&\r\n\t\t\t\t\t\t\t\t\t\t\tonClickYourBins(e)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tonMouseOver={e =>\r\n\t\t\t\t\t\t\t\t\t\t\t(e.target.style.color = showBins\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"white\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"var(--color-offset)\")\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tonMouseOut={e =>\r\n\t\t\t\t\t\t\t\t\t\t\t(e.target.style.color = showBins\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"var(--color-offset)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"red\")\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\tYour Bins\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t<ul\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tmaxHeight: 0,\r\n\t\t\t\t\t\t\t\t\t\t\ttransform: \"scaleY(0)\",\r\n\t\t\t\t\t\t\t\t\t\t\ttransformOrigin: \"top\",\r\n\t\t\t\t\t\t\t\t\t\t\ttransition:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"max-height 175ms ease-out, transform 175ms ease-out\",\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{/* Highlight displayed bin. Allow drag and drop movies */}\r\n\t\t\t\t\t\t\t\t\t\t{Object.keys(user.bins).map(\r\n\t\t\t\t\t\t\t\t\t\t\t(bin, i) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonFocus={e =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(e.target.style.color =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--color-offset)\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonBlur={e =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(e.target.style.color =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"red\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttabIndex={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowBins ? 0 : \"-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonMouseOver={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.color =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"var(--color-offset)\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.cursor =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"pointer\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonMouseOut={e =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(e.target.style.color =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"red\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmarginLeft: \"1.25rem\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toutline: \"none\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={uuid()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (displaying !== bin)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tslideDisplayRow();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t_ =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmakeRequest(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"movies/list\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"?movies=\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.bins[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbin\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t].join(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\",\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t_ =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tslideDisplayRow(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t150,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t150\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetDisplaying(bin);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetShowBins(!showBins);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetCreatingBinError(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonKeyDown={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (e.keyCode === 13) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplaying !==\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbin\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tslideDisplayRow();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t_ =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmakeRequest(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"movies/list\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"?movies=\" +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser.bins[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbin\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t].join(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\",\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t_ =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tslideDisplayRow(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t150,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t150\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetDisplaying(bin);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetShowBins(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!showBins\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetCreatingBinError(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonDrop={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t!user.currently_saved.includes(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tNumber(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.dataTransfer\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.getData(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"text/plain\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"/movies/\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)[1]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? window.confirm(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Save movie and add to bin?\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  ) && updateBin(e)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: updateBin(e);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonDragOver={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.color =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"white\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonDragLeave={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.color =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"red\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{bin}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t<li style={{ marginLeft: \"1.25rem\" }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{creatingBin ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<form onSubmit={createBin}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderRadius: \"2px\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpadding: \".25rem\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight: \"1.3rem\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth: \"110px\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter bin name\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttabIndex=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={_ =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetCreatingBin(true)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonFocus={e =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(e.target.style.transform =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"scale(1.15)\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonBlur={e =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(e.target.style.transform =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"scale(1)\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonKeyDown={e =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.keyCode === 13 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetCreatingBin(true)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"transparent\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tborder: \"none\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: \"red\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontWeight: \"bold\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: \"1.1rem\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttransition:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"transform 50ms ease-out\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonMouseOver={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.transform =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"scale(1.15)\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.cursor =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"pointer\";\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonMouseOut={e =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(e.target.style.transform =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"scale(1)\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t+\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t{creatingBinError && (\r\n\t\t\t\t\t\t\t\t\t\t\t<div style={{ color: \"red\" }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{creatingBinError}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonMouseOver={e =>\r\n\t\t\t\t\t\t\t\t\t(e.target.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\t\t\"var(--bg-color-light)\")\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonMouseOut={e => {\r\n\t\t\t\t\t\t\t\t\tif (document.activeElement !== e.target)\r\n\t\t\t\t\t\t\t\t\t\te.target.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\t\t\t\"var(--color-offset)\";\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonFocus={e =>\r\n\t\t\t\t\t\t\t\t\t(e.target.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\t\t\"var(--bg-color-light)\")\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonBlur={e => {\r\n\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t![\r\n\t\t\t\t\t\t\t\t\t\t\t...document.querySelectorAll(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\":hover\"\r\n\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t].includes(e.target)\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\te.target.style.backgroundColor =\r\n\t\t\t\t\t\t\t\t\t\t\t\"var(--color-offset)\";\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tmarginTop: \"1rem\",\r\n\t\t\t\t\t\t\t\t\tmarginLeft: \".25rem\",\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName=\"button\"\r\n\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\te.target.blur();\r\n\t\t\t\t\t\t\t\t\tsetBinManagerOpen(!binManagerOpen);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tManage Bins\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li>{updatingBinError}</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\r\n\t\t\t{user ? (\r\n\t\t\t\terror ? (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tmarginTop: \"25%\",\r\n\t\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\t\ttextAlign: \"center\",\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tError loading movies\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<MovieList\r\n\t\t\t\t\t\twithFilter\r\n\t\t\t\t\t\tdisplaying={displaying}\r\n\t\t\t\t\t\tmovies={result}\r\n\t\t\t\t\t\theadingMargin=\"2rem\"\r\n\t\t\t\t\t\theading={(_ => {\r\n\t\t\t\t\t\t\tswitch (displaying) {\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\treturn result.length\r\n\t\t\t\t\t\t\t\t\t\t? `This is what was in \"${displaying}\"`\r\n\t\t\t\t\t\t\t\t\t\t: \"This bin was empty!\";\r\n\t\t\t\t\t\t\t\tcase \"Currently Saved\":\r\n\t\t\t\t\t\t\t\t\treturn result.length\r\n\t\t\t\t\t\t\t\t\t\t? \"Here's your complete list of movies\"\r\n\t\t\t\t\t\t\t\t\t\t: \"Save movies by going to their page\";\r\n\t\t\t\t\t\t\t\tcase \"Save History\":\r\n\t\t\t\t\t\t\t\t\treturn result.length\r\n\t\t\t\t\t\t\t\t\t\t? \"These are all the movies you've ever saved\"\r\n\t\t\t\t\t\t\t\t\t\t: \"Save movies by going to their page\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})()}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t\t) : (\r\n\t\t\t\t<h2\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tflex: 4,\r\n\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\tmargin: \"7rem 0 0 2.5rem\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<DelayLink to=\"/register\">\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tstyle={{ color: \"#cc0000\" }}\r\n\t\t\t\t\t\t\tonMouseOver={e => {\r\n\t\t\t\t\t\t\t\te.target.style.textDecoration = \"underline\";\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tonMouseOut={e => {\r\n\t\t\t\t\t\t\t\te.target.style.textDecoration = \"none\";\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tLog in\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</DelayLink>{\" \"}\r\n\t\t\t\t\tto see your saved movies\r\n\t\t\t\t</h2>\r\n\t\t\t)}\r\n\t\t\t{user && binManagerOpen && (\r\n\t\t\t\t<BinManager\r\n\t\t\t\t\tmovies={currentlySaved}\r\n\t\t\t\t\tdisplaying={displaying}\r\n\t\t\t\t\tsetDisplaying={setDisplaying}\r\n\t\t\t\t></BinManager>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport Nav from \"./Nav\";\r\nimport MovieList from \"./MovieList\";\r\nimport { makeRequest } from \"../store/actions/makeRequest.action\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { slideDisplayRow } from \"../Functions\";\r\n\r\n// let mounted;\r\n\r\nfunction Popular({ location }) {\r\n\tconst dispatch = useDispatch();\r\n\tconst { error, result } = useSelector(store => store.makeRequest);\r\n\tconst [heading, setHeading] = useState(\r\n\t\t\"Here's what movies are currently trending\"\r\n\t);\r\n\tconst [set, setSet] = useState(1);\r\n\tconst [column, setColumn] = useState(\"trending\");\r\n\tconst nextButton = useRef(null),\r\n\t\tpreviousButton = useRef(null);\r\n\tconst scrollYRef = useRef(0);\r\n\tconst [scrollY, setScrollY] = useState(0);\r\n\r\n\t// v Was cacheing due to SQL ORDER BY clauses being non-deterministic but currently pulling from pre-filled database table v\r\n\r\n\t// !sessionStorage.getItem('popularCache') && sessionStorage.setItem('popularCache', JSON.stringify({\r\n\t//     trending: [[]],\r\n\t//     release_date: [[]],\r\n\t//     times_saved: [[]],\r\n\t//     times_saved_this_month: [[]]\r\n\t// }));\r\n\r\n\t// useEffect(_=> {\r\n\t//     let cache = JSON.parse(sessionStorage.getItem('popularCache'));\r\n\t//     if (mounted && (!cache[column][set] || !cache[column][set].length)) {\r\n\t//         cache[column].push( result.map(({ id }) => id) );\r\n\t//         sessionStorage.setItem('popularCache', JSON.stringify(cache));\r\n\t//     }\r\n\t// }, [result]);\r\n\r\n\tuseEffect(_ => {\r\n\t\tdocument.getElementById(\"root\").style.opacity = 1;\r\n\t\t// mounted = true;\r\n\t\tdispatch(\r\n\t\t\tmakeRequest(`popular`, `?column=${column}&set=${set}`, {}, _ =>\r\n\t\t\t\tslideDisplayRow(150, false)\r\n\t\t\t)\r\n\t\t);\r\n\t}, []);\r\n\r\n\tuseEffect(_ => {\r\n\t\tsetTimeout(_ => {\r\n\t\t\tif (1 || (result && result.length < 19)) {\r\n\t\t\t\tnextButton.current.style.opacity = 1;\r\n\t\t\t\tnextButton.current.style.pointerEvents = \"auto\";\r\n\t\t\t}\r\n\t\t}, 150);\r\n\t}, []);\r\n\r\n\tuseEffect(_ => {\r\n\t\twindow.addEventListener(\"scroll\", _ => {\r\n\t\t\tscrollYRef.current = window.scrollY;\r\n\t\t});\r\n\t}, []);\r\n\r\n\tuseEffect(_ => setScrollY(scrollYRef.current), [scrollYRef.current]);\r\n\r\n\t/* If user returning from \"Back\" */\r\n\tuseEffect(_ => {\r\n\t\tsetTimeout(_ => {\r\n\t\t\tlocation.searchValue && setColumn(location.searchValue);\r\n\t\t\tlocation.page && setSet(location.page);\r\n\t\t\tlocation.scrollY && window.scrollTo(0, location.scrollY);\r\n\t\t\tnextButton.current.style.opacity = 1;\r\n\t\t\tnextButton.current.style.pointerEvents = \"auto\";\r\n\t\t\tif (location.page > 1) {\r\n\t\t\t\tnextButton.current.style.transform = `translateX(calc(${\r\n\t\t\t\t\twindow.innerWidth > 850 ? \"190\" : \"140\"\r\n\t\t\t\t}px - 1rem))`;\r\n\t\t\t\tnextButton.current.parentElement.children[0].style.opacity = 1;\r\n\t\t\t\tnextButton.current.parentElement.children[0].style.pointerEvents =\r\n\t\t\t\t\t\"auto\";\r\n\t\t\t}\r\n\t\t}, 155);\r\n\t}, []);\r\n\r\n\tuseEffect(\r\n\t\t_ => {\r\n\t\t\t// const cache = JSON.parse(sessionStorage.getItem('popularCache'))[column][set];\r\n\t\t\t// cache\r\n\t\t\t//     ? dispatch( makeRequest(`movies/list`, `?movies=${cache.join(',')}`, {}, _=> slideDisplayRow(150, false)) )\r\n\t\t\tdispatch(\r\n\t\t\t\tmakeRequest(`popular`, `?column=${column}&set=${set}`, {}, _ =>\r\n\t\t\t\t\tslideDisplayRow(150, false)\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\tswitch (column) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"trending\":\r\n\t\t\t\t\tsetHeading(\"Here's what movies are currently trending\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"recent_releases\":\r\n\t\t\t\t\tsetHeading(\"Here are the newest movies on record\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"most_saved_this_month\":\r\n\t\t\t\t\tsetHeading(\"Here are the most popular movies this month\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"most_saved\":\r\n\t\t\t\t\tsetHeading(\"Here are the most saved movies to date\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\t[column, set]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t_ => {\r\n\t\t\t(async _ => {\r\n\t\t\t\tif (result && result.length < 20 && nextButton.current) {\r\n\t\t\t\t\tnextButton.current.style.opacity = 0;\r\n\t\t\t\t\tnextButton.current.style.pointerEvents = \"none\";\r\n\t\t\t\t} else if (result && nextButton.current) {\r\n\t\t\t\t\tnextButton.current.style.opacity = 1;\r\n\t\t\t\t\tnextButton.current.style.pointerEvents = \"auto\";\r\n\t\t\t\t}\r\n\t\t\t\tif (set === 1 && previousButton.current) {\r\n\t\t\t\t\tpreviousButton.current.style.opacity = 0;\r\n\t\t\t\t\tpreviousButton.current.style.pointerEvents = \"none\";\r\n\t\t\t\t\tnextButton.current.style.transform = \"translateX(0)\";\r\n\t\t\t\t} else if (previousButton.current) {\r\n\t\t\t\t\tpreviousButton.current.style.opacity = 1;\r\n\t\t\t\t\tpreviousButton.current.style.pointerEvents = \"auto\";\r\n\t\t\t\t}\r\n\t\t\t\tif (set === 2)\r\n\t\t\t\t\tnextButton.current.style.transform =\r\n\t\t\t\t\t\t\"translate(calc(190px - 1rem))\";\r\n\t\t\t})();\r\n\t\t},\r\n\t\t[column]\r\n\t);\r\n\r\n\tconst onClickOrEnter = (e, column) => {\r\n\t\tif (!e || e.keyCode === 13) {\r\n\t\t\tslideDisplayRow();\r\n\t\t\tsetSet(1);\r\n\t\t\tsetColumn(column);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div\r\n\t\t\t\tclassName=\"popular\"\r\n\t\t\t\tstyle={{ display: \"flex\", overflow: \"hidden\" }}\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"popular-full-sidebar\"\r\n\t\t\t\t\tstyle={{ display: \"flex\", flexDirection: \"column\" }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Nav />\r\n\t\t\t\t\t{/* Show movies from one of four categories */}\r\n\t\t\t\t\t<ul className=\"sidebar\">\r\n\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\ttabIndex=\"0\"\r\n\t\t\t\t\t\t\tonKeyDown={e =>\r\n\t\t\t\t\t\t\t\tcolumn !== \"trending\" &&\r\n\t\t\t\t\t\t\t\tonClickOrEnter(e, \"trending\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tclassName=\"sidebar-li-hover\"\r\n\t\t\t\t\t\t\tkey=\"0\"\r\n\t\t\t\t\t\t\tonClick={_ =>\r\n\t\t\t\t\t\t\t\tcolumn !== \"trending\" &&\r\n\t\t\t\t\t\t\t\tonClickOrEnter(null, \"trending\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tTrending\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\ttabIndex=\"0\"\r\n\t\t\t\t\t\t\tonKeyDown={e =>\r\n\t\t\t\t\t\t\t\tcolumn !== \"recent_releases\" &&\r\n\t\t\t\t\t\t\t\tonClickOrEnter(e, \"recent_releases\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tclassName=\"sidebar-li-hover\"\r\n\t\t\t\t\t\t\tkey=\"1\"\r\n\t\t\t\t\t\t\tonClick={_ =>\r\n\t\t\t\t\t\t\t\tcolumn !== \"recent_releases\" &&\r\n\t\t\t\t\t\t\t\tonClickOrEnter(null, \"recent_releases\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tRecent Releases\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\ttabIndex=\"0\"\r\n\t\t\t\t\t\t\tonKeyDown={e =>\r\n\t\t\t\t\t\t\t\tcolumn !== \"most_saved_this_month\" &&\r\n\t\t\t\t\t\t\t\tonClickOrEnter(e, \"most_saved_this_month\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tclassName=\"sidebar-li-hover\"\r\n\t\t\t\t\t\t\tkey=\"2\"\r\n\t\t\t\t\t\t\tonClick={_ =>\r\n\t\t\t\t\t\t\t\tcolumn !== \"most_saved_this_month\" &&\r\n\t\t\t\t\t\t\t\tonClickOrEnter(null, \"most_saved_this_month\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tMost Saved This Month\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\ttabIndex=\"0\"\r\n\t\t\t\t\t\t\tonKeyDown={e =>\r\n\t\t\t\t\t\t\t\tcolumn !== \"most_saved\" &&\r\n\t\t\t\t\t\t\t\tonClickOrEnter(e, \"most_saved\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tclassName=\"sidebar-li-hover\"\r\n\t\t\t\t\t\t\tkey=\"3\"\r\n\t\t\t\t\t\t\tonClick={_ =>\r\n\t\t\t\t\t\t\t\tcolumn !== \"most_saved\" &&\r\n\t\t\t\t\t\t\t\tonClickOrEnter(null, \"most_saved\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tMost Saved All Time\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\tclassName=\"popular-button-container\"\r\n\t\t\t\t\t\t\tstyle={{ width: \"100%\" }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tposiiton: \"relative\",\r\n\t\t\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\t\t\tjustifyContent: \"space-between\",\r\n\t\t\t\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\t\t\t\theight: \"100%\",\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"button-v2\"\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tpointerEvents: \"none\",\r\n\t\t\t\t\t\t\t\t\t\topacity: 0,\r\n\t\t\t\t\t\t\t\t\t\ttransition: \"opacity 550ms ease-in-out\",\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\t\tif (set === 2) {\r\n\t\t\t\t\t\t\t\t\t\t\te.target.style.opacity = 0;\r\n\t\t\t\t\t\t\t\t\t\t\te.target.parentElement.children[1].style.transform =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"translateX(0)\";\r\n\t\t\t\t\t\t\t\t\t\t\te.target.style.pointerEvents =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"none\";\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\te.target.blur();\r\n\t\t\t\t\t\t\t\t\t\tslideDisplayRow();\r\n\t\t\t\t\t\t\t\t\t\tsetSet(set - 1);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tref={previousButton}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tPrevious\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\ttransition:\r\n\t\t\t\t\t\t\t\t\t\t\t\"transform 550ms ease-in-out\",\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tclassName=\"button-v2\"\r\n\t\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\t\tif (set === 1) {\r\n\t\t\t\t\t\t\t\t\t\t\te.target.style.transform = `translateX(calc(${\r\n\t\t\t\t\t\t\t\t\t\t\t\twindow.innerWidth > 850\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"190\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"140\"\r\n\t\t\t\t\t\t\t\t\t\t\t}px - 1rem))`;\r\n\t\t\t\t\t\t\t\t\t\t\te.target.parentElement.children[0].style.opacity = 1;\r\n\t\t\t\t\t\t\t\t\t\t\te.target.parentElement.children[0].style.pointerEvents =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"auto\";\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\te.target.blur();\r\n\t\t\t\t\t\t\t\t\t\tslideDisplayRow();\r\n\t\t\t\t\t\t\t\t\t\tsetSet(set + 1);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tref={nextButton}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tNext\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div style={{ flex: 4, marginBottom: \"2rem\" }}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t<MovieList\r\n\t\t\t\t\t\t\tmovies={result}\r\n\t\t\t\t\t\t\theading={error ? \"Error loading movies\" : heading}\r\n\t\t\t\t\t\t\theadingMargin=\"4rem\"\r\n\t\t\t\t\t\t\tdisplaying={\"Popular\"}\r\n\t\t\t\t\t\t\tlocationdetails={{\r\n\t\t\t\t\t\t\t\tsearchValue: column,\r\n\t\t\t\t\t\t\t\tpage: set,\r\n\t\t\t\t\t\t\t\tback: \"/popular\",\r\n\t\t\t\t\t\t\t\tscrollY,\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default Popular;\r\n","import React from 'react';\nimport './App.css';\nimport { Route, Switch } from 'react-router-dom';\nimport Home from './components/Home';\nimport Movie from './components/Movie';\nimport Register from './components/Register';\nimport Profile from './components/Profile';\nimport Search from './components/Search';\nimport Help from './components/Help';\nimport Query from './components/Query';\nimport MyList from './components/MyList';\nimport Popular from './components/Popular';\nimport { transitionPage } from './Functions';\n\nfunction App() {\n  \n  return (\n      <Switch>\n        <Route path='/' exact component={Home} />\n        <Route path='/movies/:id' component={Movie} />\n        <Route path='/register' exact component={Register} />\n        <Route path='/profile/:username' exact component={Profile} />\n        <Route path='/search' exact component={Search} />\n        <Route path='/help' exact component={Help} />\n        <Route path='/query' exact component={Query} />\n        <Route path='/my-list' exact component={MyList} />\n        <Route path='/popular' exact component={Popular} />\n        <Route path=\"/\" render={({ history, location }) => {\n          \n          document.getElementById('root').style.opacity = 1;\n\n          return (\n            <>\n                <div style={{ margin: '1rem 0 .25rem 1rem' }}>You must be logged in as \"{location.pathname.split('/profile/')[1]}\" to view this page</div>\n                <button style={{ marginTop: '.5rem' }} onMouseOver={e => {\n                    e.target.style.backgroundColor = 'var(--bg-color-light)';\n                    e.target.style.color = 'var(--color-offset)';\n                }} onFocus={e => {\n                    e.target.style.backgroundColor = 'var(--bg-color-light)';\n                    e.target.style.color = 'var(--color-offset)';\n                }} onMouseOut={e => {\n                    e.target.style.backgroundColor = 'var(--color-offset)';\n                    e.target.style.color = 'var(--bg-color-dark)'\n                }} onBlur={e => {\n                    e.target.style.backgroundColor = 'var(--color-offset)';\n                    e.target.style.color = 'var(--bg-color-dark)'\n                }} className=\"button\" onClick={_=> transitionPage(history, '/')}>Back to Home</button>\n            </>\n        )\n      }} />\n      </Switch>\n  );\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React, { useState, createContext } from \"react\";\r\n\r\nexport const UserContext = createContext(null);\r\n\r\nexport const UserProvider = ({ children }) => {\r\n\tconst [state, setState] = useState(UserContext._currentValue);\r\n\r\n\treturn (\r\n\t\t<UserContext.Provider value={[state, setState]}>\r\n\t\t\t{children}\r\n\t\t</UserContext.Provider>\r\n\t);\r\n};\r\n\r\nexport default UserContext;\r\n","import React from \"react\";\r\nimport { HistoryProvider } from \"./contexts/History.context\";\r\nimport { UserProvider } from \"./contexts/User.context\";\r\nimport { BinManagerProvider } from \"./contexts/BinManager.context\";\r\n\r\nexport default ({ children }) => (\r\n\t<BinManagerProvider>\r\n\t\t<UserProvider>\r\n\t\t\t<HistoryProvider>{children}</HistoryProvider>\r\n\t\t</UserProvider>\r\n\t</BinManagerProvider>\r\n);\r\n","import { combineReducers } from \"redux\";\r\nimport makeRequest from \"./reducers/makeRequest.reducer\";\r\nimport { searchTitle, searchPeople, searchGenre, searchDescription } from \"./reducers/search.reducer\";\r\nimport user from \"./reducers/updateUser.reducer\";\r\nimport currentlySaved from \"./reducers/getCurrentlySaved.reducer\";\r\n\r\nexport default combineReducers({\r\n\tmakeRequest,\r\n\tsearchTitle,\r\n\tsearchPeople,\r\n\tsearchGenre,\r\n\tsearchDescription,\r\n\tuser,\r\n\tcurrentlySaved,\r\n});\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter } from 'react-router-dom'\nimport Context from './store/Context';\nimport { createStore, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux';\nimport thunk from 'redux-thunk';\nimport reducer from './store/reducer';\n\n\nconst store = createStore(reducer, applyMiddleware(thunk));\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <Provider store={store}>\n        <Context>\n          <App />\n        </Context>\n      </Provider>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}